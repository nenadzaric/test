(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var AppView = require('./views/AppView.js');
var SectionsCollection = require("./collections/SectionsCollection.js");
var Helpers = require('./views/helpers/Helpers.js');
var Handlebars = require("hbsfy/runtime");

var App = (function()
{
  function App(){}

  App.prototype.sizeEvent = "resize";

  App.prototype.initialize = function()
  {
      // make sure we are prepending the CDN prefix on our assets
      Handlebars.registerHelper('CDN', function(block)
      {
        return window.cdn;
      });

      Handlebars.registerHelper('ifCond', function (v1, operator, v2, options)
      {
          switch (operator)
          {
              case '==':
                  return (v1 == v2) ? options.fn(this) : options.inverse(this);
              case '===':
                  return (v1 === v2) ? options.fn(this) : options.inverse(this);
              case '<':
                  return (v1 < v2) ? options.fn(this) : options.inverse(this);
              case '<=':
                  return (v1 <= v2) ? options.fn(this) : options.inverse(this);
              case '>':
                  return (v1 > v2) ? options.fn(this) : options.inverse(this);
              case '>=':
                  return (v1 >= v2) ? options.fn(this) : options.inverse(this);
              case '&&':
                  return (v1 && v2) ? options.fn(this) : options.inverse(this);
              case '||':
                  return (v1 || v2) ? options.fn(this) : options.inverse(this);
              default:
                  return options.inverse(this);
          }
      });

      // requestAnimationFrame polyfill
      (function()
       {
        var lastTime = 0;
        var vendors = ['webkit', 'moz'];
        for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x)
        {
            window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
            window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
        }

        if (!window.requestAnimationFrame)
        {
          window.requestAnimationFrame = function(callback, element)
          {
              var currTime = new Date().getTime();
              var timeToCall = Math.max(0, 16 - (currTime - lastTime));
              var id = window.setTimeout(function() { callback(currTime + timeToCall); },
                timeToCall);
              lastTime = currTime + timeToCall;
              return id;
          };
        }
        if (!window.cancelAnimationFrame)
        {
          window.cancelAnimationFrame = function(id)
          {
            clearTimeout(id);
          };
        }
      }());


      var dataURL = window.cdn + "/javascripts/data/data.c27ca3a12dba24f13bbd34f55592df54.json";

      $.ajax({
          url: dataURL,
          success: function(data, textStatus) {

              // overload data keys for those that we have explicit models for
              data.sections = new SectionsCollection(undefined, data);

              this.view = new AppView({
                  el: $('#appContainer'),
                  model: data
              });
              this.view.renderPreloader();
              // moved history start to after preloader complete
              //Backbone.history.start({pushState: true});
          }
      })
  };

  return App;

})();

$(document).ready(function()
{
  Backbone.$ = $;
  Backbone.Notifications = {};
  _.extend(Backbone.Notifications, Backbone.Events);

  App.router = new Backbone.Router({ trailingSlashIsSignificant : false });

  var $htmlElem = $(document.firstElementChild || (document.childNodes && document.childNodes[document.childNodes.length - 1]) || (document.children && document.children[0]));

  $htmlElem.addClass(Helpers.Device.currentDevice());

  if (!document.ie)
  {
    this.app = new App();
    this.app.initialize();
  }

    // turn off rubberbanding on touch devices

    if(Helpers.Device.isTablet() || Helpers.Device.isMobile())
    {
        this.app.sizeEvent = "orientationchange";

        // Prevent touchmove from occurring if the target does not have a parent
        // with the class "allow-touch." This detection is handled in touchstart
        // so the check doesn't need to run every time the body is touch moved.
        (function()
        {
            var touchTargetAllowsScroll = false;
            $('body')
                .on("touchstart", function(e)
                {
                    touchTargetAllowsScroll = !!$(e.target).closest('.allow-touch').length;
                })
                .on("touchmove", function(e)
                {
                    if (touchTargetAllowsScroll)
                    {
                        e.stopPropagation();
                    }
                    else
                    {
                        e.preventDefault();
                    }
                })
                .on("touchend", function(e)
                {
                   touchTargetAllowsScroll = false;
                });
        })();

//        var resizeWindow = _.throttle(function() {
//            $('html').height(window.innerHeight);
//        }, 300);
//
//        resizeWindow();
    }

    $(document).on('keyup', function(e) {

        if(e.which === 39) {
            Backbone.Notifications.trigger("keypress.rightArrow");
        } else if(e.which === 37) {
            Backbone.Notifications.trigger("keypress.leftArrow");
        } else if(e.which === 38) {
            Backbone.Notifications.trigger("keypress.upArrow");
        } else if(e.which === 40) {
            Backbone.Notifications.trigger("keypress.downArrow");
        }
    });


  $(document).on("scroll", function(e) {

      setTimeout(function() {
          scrollTo(0, 1);
      }, 0);

  });

  // check for resize events
  $(window).on(this.app.sizeEvent, function(e)
  {
//      if(_.isFunction(resizeWindow)) {
//          resizeWindow();
//      }

      setTimeout(function() {
          scrollTo(0, 1);
      }, 0);

      // stop previous resize animating
      $('body, html').stop();

      Backbone.Notifications.trigger("window.resize",
      {
          resize: true,
          event:e
      });


  });

  // check for mouseup events
  $(window).on('mouseup', function(e)
  {
      Backbone.Notifications.trigger("window.mouseup");
  });

  // check for mousemove events
  $(window).on('mousemove', function(e)
  {
      Backbone.Notifications.trigger("window.mousemove", {yPos: e.clientY});
  });

});

window.App = App;

},{"./collections/SectionsCollection.js":2,"./views/AppView.js":17,"./views/helpers/Helpers.js":24,"hbsfy/runtime":92}],2:[function(require,module,exports){
// The model for the collection
var SectionsModel = require("../models/sections/SectionsModel.js");

// The individual section models

var CharactersModel = require("../models/sections/characters/CharactersModel.js");
var CharactersMobileModel = require("../models/sections/characters/CharactersMobileModel.js");


var HomeModel = require("../models/sections/home/HomeModel.js");
var IntroModel = require("../models/sections/intro/IntroModel.js");
var IntroTwoModel = require("../models/sections/intro/IntroTwoModel.js");

var MediaModel = require("../models/sections/media/MediaModel.js");
var MediaDesktopModel = require("../models/sections/media/MediaDesktopModel.js");

var StoryModel = require("../models/sections/story/StoryModel.js");
var TimelineModel = require("../models/sections/timeline/TimelineModel.js");
var FightModel = require("../models/sections/fight/FightModel.js");
var FooterModel = require("../models/sections/footer/FooterModel.js");
var HelperFuncs = require("../views/helpers/Helpers.js");

var SectionsCollection = Backbone.Collection.extend(
    {
        //model      : SectionsModel,
        initialize : function (attrs, options)
        {
            // Universal models. These do not have device-specific behavior.
            this.add([new HomeModel(undefined, options)]);
            this.add([new IntroModel(undefined, options)]);
            this.add([new IntroTwoModel(undefined, options)]);

            this.add([new StoryModel(undefined, options)]);
            this.add([new TimelineModel(undefined, options)]);
            this.add([new FightModel(undefined, options)]);
            this.add([new FooterModel(undefined, options)]);


            if(HelperFuncs.Device.isMobile() || HelperFuncs.Device.isTablet())
            {
                this.add([new CharactersMobileModel(undefined, options)]);
                this.add([new MediaModel(undefined, options)]);
            }
            else
            {
                this.add([new CharactersModel(undefined, options)]);
                this.add([new MediaDesktopModel(undefined, options)]);
            }

            return this;
        }
    });

module.exports = SectionsCollection;

},{"../models/sections/SectionsModel.js":3,"../models/sections/characters/CharactersMobileModel.js":4,"../models/sections/characters/CharactersModel.js":5,"../models/sections/fight/FightModel.js":6,"../models/sections/footer/FooterModel.js":7,"../models/sections/home/HomeModel.js":8,"../models/sections/intro/IntroModel.js":9,"../models/sections/intro/IntroTwoModel.js":10,"../models/sections/media/MediaDesktopModel.js":11,"../models/sections/media/MediaModel.js":12,"../models/sections/story/StoryModel.js":13,"../models/sections/timeline/TimelineModel.js":14,"../views/helpers/Helpers.js":24}],3:[function(require,module,exports){
var HelperFuncs = require("../../views/helpers/Helpers.js");

var SectionsModel = Backbone.Model.extend(
    {
        idAttribute : "id",
        section     : {},
        data        : {},

        initialize : function (attrs, options)
        {
            var k = null,
                section = {},
                data = {};

            section = options.sections[this.name][HelperFuncs.Device.currentDevice()];

            if(!section)
            {
                return;
            }

            for (k in options[section.model])
            {
                data = options[section.model];

                if (data.hasOwnProperty(k))
                {
                    this.data[k] = data[k];
                }
            }

            this.set('id', this.id);
            this.set('name', this.name);
            this.set('section', section);
            this.set('data', data);
        }
    });

module.exports = SectionsModel;

},{"../../views/helpers/Helpers.js":24}],4:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var CharactersMobileModel = SectionsModel.extend(
    {
        id   : "CharactersModel",
        name : "characters"
    });

module.exports = CharactersMobileModel;

},{"../../../models/sections/SectionsModel.js":3}],5:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

function addLastPageItems(rows, lastPageItems, rowsPerPage) {
    "use strict";

    lastPageItems.forEach(function(item, i) {
        var rowIndex = i % rowsPerPage;


        if(!rows[rowIndex]) {
            rows[rowIndex] = [];
        }
        rows[rowIndex].push(item);
    });
}

function addEmptyCells(rows) {
    "use strict";
    if(rows.length < 2) return;

    var emptyCell = {
        id: 0,
        isEmpty: true
    };

    var firstRowLength = rows[0].length;

    rows.forEach(function(row) {
        for(var i = 0, end = (firstRowLength - row.length); i < end; i++) {
            row.push(emptyCell);
        }
    });
}

function splitIntoRows(arr, numPerPage, rowsPerPage) {
    "use strict";

    var numPerRow = numPerPage/rowsPerPage;

    return arr.reduce(function(rows, item, i) {

        var rowIndex = Math.floor(i/numPerRow) % rowsPerPage;

        if(!rows[rowIndex])
            rows[rowIndex] = [];

        rows[rowIndex].push(item);

        return rows;
    }, []);
}

function organizeItems(arr, numPerPage, rowsPerPage) {
    "use strict";

    var numOnLastPage = arr.length % numPerPage;

    var itemsNotOnLastPage = arr.slice(0, arr.length - numOnLastPage);
    var lastPageItems = numOnLastPage ? arr.slice(-numOnLastPage) : [];

    var rows = splitIntoRows(itemsNotOnLastPage, numPerPage, rowsPerPage);

    addLastPageItems(rows, lastPageItems, rowsPerPage);
    addEmptyCells(rows);

    return Array.prototype.concat.apply([], rows);
}






var CharactersDesktopModel = SectionsModel.extend({
    id: "CharactersModel",
    name: "characters",

    initialize: function (attrs, options) {
        this._super(attrs, options);

        // Static Variables
        var cellsPerPage = 8;
        var rowsPerPage = 2;

        var items = organizeItems(this.get('data').characters, cellsPerPage, rowsPerPage);

        this.set('data', {
            characters: items
        });
    }
});





module.exports = CharactersDesktopModel;

},{"../../../models/sections/SectionsModel.js":3}],6:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var FightModel = SectionsModel.extend(
    {
        id   : "FightModel",
        name : "the-fight-continues"
    });

module.exports = FightModel;

},{"../../../models/sections/SectionsModel.js":3}],7:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var FooterModel = SectionsModel.extend(
    {
        id   : "FooterModel",
        name : "footer"
    });

module.exports = FooterModel;

},{"../../../models/sections/SectionsModel.js":3}],8:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var HomeModel = SectionsModel.extend(
    {
        id   : "HomeModel",
        name : "home"
    });

module.exports = HomeModel;

},{"../../../models/sections/SectionsModel.js":3}],9:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var IntroModel = SectionsModel.extend(
    {
        id   : "IntroModel",
        name : "to-win-a-war"
    });

module.exports = IntroModel;

},{"../../../models/sections/SectionsModel.js":3}],10:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var IntroTwoModel = SectionsModel.extend(
    {
        id   : "IntroTwoModel",
        name : "you-have-to-start-one"
    });

module.exports = IntroTwoModel;

},{"../../../models/sections/SectionsModel.js":3}],11:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

function addLastPageItems(rows, lastPageItems, rowsPerPage) {
    "use strict";

    lastPageItems.forEach(function(item, i) {
        var rowIndex = i % rowsPerPage;


        if(!rows[rowIndex]) {
            rows[rowIndex] = [];
        }
        rows[rowIndex].push(item);
    });
}

function addEmptyCells(rows) {
    "use strict";
    if(rows.length < 2) return;

    var emptyCell = {
        id: 0,
        isEmpty: true
    };

    var firstRowLength = rows[0].length;

    rows.forEach(function(row) {
        for(var i = 0, end = (firstRowLength - row.length); i < end; i++) {
            row.push(emptyCell);
        }
    });
}

function splitIntoRows(arr, numPerPage, rowsPerPage) {
    "use strict";

    var numPerRow = numPerPage/rowsPerPage;

    return arr.reduce(function(rows, item, i) {

        var rowIndex = Math.floor(i/numPerRow) % rowsPerPage;

        if(!rows[rowIndex])
            rows[rowIndex] = [];

        rows[rowIndex].push(item);

        return rows;
    }, []);
}

function organizeItems(arr, numPerPage, rowsPerPage) {
    "use strict";

    var numOnLastPage = arr.length % numPerPage;

    var itemsNotOnLastPage = arr.slice(0, arr.length - numOnLastPage);
    var lastPageItems = numOnLastPage ? arr.slice(-numOnLastPage) : [];

    var rows = splitIntoRows(itemsNotOnLastPage, numPerPage, rowsPerPage);

    addLastPageItems(rows, lastPageItems, rowsPerPage);
    addEmptyCells(rows);

    return Array.prototype.concat.apply([], rows);
}





var MediaModel = SectionsModel.extend(
    {
        id   : "MediaModel",
        name : "media",

        initialize: function (attrs, options) {
            this._super(attrs, options);

            // Static Variables
            var cellsPerPage = 12;
            var rowsPerPage = 3;


            var items = organizeItems(this.get('data').items, cellsPerPage, rowsPerPage);

            this.set('data', {
                items: items
            });
        }
    });

module.exports = MediaModel;

},{"../../../models/sections/SectionsModel.js":3}],12:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var MediaModel = SectionsModel.extend(
    {
        id   : "MediaModel",
        name : "media"
    });

module.exports = MediaModel;

},{"../../../models/sections/SectionsModel.js":3}],13:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var StoryModel = SectionsModel.extend(
    {
        id   : "StoryModel",
        name : "story"
    });

module.exports = StoryModel;

},{"../../../models/sections/SectionsModel.js":3}],14:[function(require,module,exports){
var SectionsModel = require("../../../models/sections/SectionsModel.js");

var TimelineModel = SectionsModel.extend(
    {
        id   : "TimelineModel",
        name : "timeline"
    });

module.exports = TimelineModel;

},{"../../../models/sections/SectionsModel.js":3}],15:[function(require,module,exports){
var HelperFuncs = require('../views/helpers/Helpers.js');

var Omniture = (function()
{
  var isMobile = HelperFuncs.Device.isMobile();

  function Omniture() {}

  Omniture.franchise = 'Movies';

  Omniture.currentPageName = 'movies: the-normal-heart: inside: microsite: ';

  if (!isMobile)
  {
    Omniture.mobile = false;
  }
  else
  {
    Omniture.mobile = HelperFuncs.Device.currentDeviceName();
  }

  Omniture.onPageLoad = function(options)
  {
    var s = s_gi(s_account);

    this.ClearVars(s);

    Omniture.currentPageName = 'movies: the-normal-heart: inside: microsite: ' + options.pageName;
    s.linkTrackVars = "events,eVar1,hier1,eVar10,prop10,eVar30,prop30,eVar42,prop42";
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile == true ? 'yes' : 'no';
    if (Omniture.mobile)
    {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.events = 'event1';
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    s.pageURL = document.URL;
    var s_code = s.t();

    if (s_code) {
      return document.write(s_code);
    }
  };

  Omniture.onVideoPlay = function(options)
  {

    var s = s_gi(s_account);
    s.linkTrackVars = 'events,hier1,eVar10,prop10,eVar19,prop19,eVar30,prop30,eVar42,prop42,evar55,prop55';
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile === true ? 'yes' : 'no';
    if (Omniture.mobile) {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.prop19 = s.eVar19 = "Movies: The Normal Heart: " + options.mediaTitle;
    s.events = s.linkTrackEvents = 'event61';
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    return s.tl(this, 'o', 'Video Tracking');
  };

  Omniture.onSocialFollow = function(options)
  {

    // options.platform = Facebook, Twitter, Tumblr, etc.
    // options.action = Like, Share, etc.

    var s;
    s = s_gi(s_account);
    s.linkTrackVars = 'events,hier1,eVar10,prop10,eVar30,prop30,eVar33,prop33,eVar34,prop34,eVar42,prop42';
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile === true ? 'yes' : 'no';
    if (Omniture.mobile) {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.events = s.linkTrackEvents = 'event18';
    s.prop33 = s.eVar33 = options.platform;
    s.prop34 = s.eVar34 = options.action;
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    return s.tl(this, 'o', 'Event Tracking');
  };

  Omniture.onSocialShare = function(options)
  {

    // options.platform = Facebook, Twitter, Tumblr, etc.
    // options.action = Like, Share, etc.

    var s;
    s = s_gi(s_account);
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile === true ? 'yes' : 'no';
    if (Omniture.mobile) {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.linkTrackVars = 'events,hier1,eVar10,prop10,eVar30,prop30,eVar33,prop33,eVar34,prop34,eVar42,prop42';
    s.events = s.linkTrackEvents = 'event17';
    s.prop33 = s.eVar33 = options.platform;
    s.prop34 = s.eVar34 = options.action;
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    return s.tl(this, 'o', 'Event Tracking');
  };

  Omniture.onSlideshowItemOpen = function(options)
  {

    var s = s_gi(s_account);
    s.linkTrackVars = 'events,hier1,eVar10,prop10,eVar30,prop30,eVar42,prop42,eVar55,prop55';
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile === true ? 'yes' : 'no';
    if (Omniture.mobile) {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.prop55 = s.eVar55 = options.mediaTitle;
    s.events = s.linkTrackEvents = 'event21';
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    return s.tl(this, 'o', 'Event Tracking');
  };

  Omniture.onPartnerLink = function(options)
  {
    var s;
    s = s_gi(s_account);
    s.prop10 = s.eVar10 = Omniture.franchise;
    s.prop30 = s.eVar30 = Omniture.mobile === true ? 'yes' : 'no';
    if (Omniture.mobile) {
      s.prop42 = s.eVar42 = Omniture.mobile;
    }
    s.linkTrackVars = 'events,hier1,eVar10,prop10,eVar30,prop30,eVar33,prop33,eVar34,prop34,eVar42,prop42,eVar57,prop57';
    s.events = s.linkTrackEvents = 'event65';
    s.prop57 = s.eVar57 = "Normal Heart | Link | " + options.URL;
    s.pageName = s.eVar1 = s.hier1 = Omniture.currentPageName;
    return s.tl(this, 'o', 'Event Tracking');
  };

  Omniture.ClearVars = function(s_ob)
  {
    for (var i=0; i < 75; i++)
    {
      s_ob['prop'+i]='';
      s_ob['eVar'+i]='';
      if(i<=5)
        s_ob['hier'+i]='';
     }
     svarArr = ['pageName','channel','products','events','campaign','purchaseID','state','zip','server','linkName'];
    for (var i=0; i < svarArr.length ; i++)
    {
       s_ob[svarArr[i]]='';
    }
  };

  return Omniture;

})();

module.exports = Omniture;

},{"../views/helpers/Helpers.js":24}],16:[function(require,module,exports){
var Omniture = require("./Omniture.js");

var Social = (function()
{
  function Social() {}

    function setDefaults(share) {
        share = share || {};
        share.picture = (window.CDN || 'http://thenormalheart.hbo.com') + (share.picture || "/images/tnh-og.0c123d413a57d10f1a8730fe63e2bc61.jpg");
        share.title = share.title || "The Normal Heart | HBO";
        share.description = share.description || "To win a war, you have to start one. Visit the official website for The Normal Heart, only on HBO.";
        share.link = share.link || 'http://normalheartmovie.com/';

        return share;
    }

  Social.ShareFacebook = function(share)
  {
    share = setDefaults(share);

    FB.ui({
        method: 'feed',
        name: share.title,
        description: share.description,
        link: share.link,
        picture: share.picture
    }, function(response){

    });

    Omniture.onSocialShare({platform:'Facebook', action:'Share'});
  };

  Social.ShareTwitter = function(share)
  {
    share = setDefaults(share);

    var twitterCopy = encodeURIComponent(share.description + " " + share.link);

    var url = "https://twitter.com/intent/tweet?text=" + twitterCopy;
    window.open(url, '_blank', 'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=700px,height=430px');

    Omniture.onSocialShare({platform:'Twitter', action:'Tweet'});
  };

  Social.ShareTumblr = function(share)
  {
    share = setDefaults(share);

    var tumblrCopy = encodeURIComponent(share.description + ' ' + share.link);
    var picture = encodeURIComponent(share.picture);

    var url = "http://www.tumblr.com/share/photo?source=" + picture + "&caption=" + tumblrCopy;
    window.open(url, '_blank', 'toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width=450px,height=428px');

    Omniture.onSocialShare({platform:'Tumblr', action:'Tshare'});
  };

  return Social;

})();

module.exports = Social;

},{"./Omniture.js":15}],17:[function(require,module,exports){
// All subviews loaded here, possibly do this dynamically with the TODO listed below
var MenuView = require("./MenuView.js");
var MenuViewMobile = require('./sections/mobile/MenuView.js');
var ScrollBarView = require("./ScrollBarView.js");
var SectionsView = require("./SectionsView.js");
var PreloaderView = require("./PreloaderView.js");
var HelperFuncs = require('./helpers/Helpers.js');

var AppView = Backbone.View.extend(
    {
        className : "appContainer",

        initialize : function ()
        {
            this.preloaderView = new PreloaderView({model : this.model.preloaderData});

            Backbone.Notifications.once("preloader.complete", this.onPreloaderComplete, this);
            Backbone.Notifications.once("preloader.animationComplete", this.onPreloaderAnimComplete, this);
        },

        renderPreloader : function ()
        {

            this.$el.append(this.preloaderView.render().el);
            this.preloaderView.preload();
        },

        onPreloaderComplete : function ()
        {

            // This route is not added to the _events list in App.router.
            // This is okay, as we will just forward the user to / if an invalid URL is hit.
            App.router.route("*catchAll", 'catchAllRoute', function()
            {
                App.router.navigate('/',
                {
                    trigger: true, // Call the route handler for "HomeView."
                    replace: true  // Don't save the broken URL in the browser's history.
                });
            });

            // load in our views
            if (HelperFuncs.Device.currentDevice() == 'mobile') {
                this.menuView = new MenuViewMobile({
                    model : this.model.menuItems
                });
            } else {
                this.menuView = new MenuView({
                    model : this.model.menuItems
                });
            }

            if (!Modernizr.touch)
            {
                this.scrollBarView = new ScrollBarView();
            }

            this.sectionsView = new SectionsView({
                model : this.model
            });

            this.render();
        },

        onPreloaderAnimComplete : function ()
        {
            TweenLite.to(this.preloaderView.$el, 1, {opacity: 0, onComplete: function()
                {
                    this.preloaderView.remove();
                    this.preloaderView.unbind();
                }.bind(this)});
            // start the router now that the preloader is complete
            Backbone.history.start({pushState : true});
        },

        render : function ()
        {
            this.$el.append(this.sectionsView.render().el);

            if (this.scrollBarView !== undefined)
            {
                this.$el.append(this.scrollBarView.render().el);
            }
            this.$el.append(this.menuView.render().el);
        }
    });

module.exports = AppView;

},{"./MenuView.js":19,"./PreloaderView.js":20,"./ScrollBarView.js":21,"./SectionsView.js":22,"./helpers/Helpers.js":24,"./sections/mobile/MenuView.js":39}],18:[function(require,module,exports){
var View = require("./View.js");
var HelperFuncs = require("./helpers/Helpers.js");

var HorizontalScrollView = View.extend({
    //****************************** Initialization Stuff ******************************
    events: {
        'click .arrow-right': 'onNext',
        'click .arrow-left': 'onPrev',
        'click button.open': 'onChooseItem',
        'click button.close': 'onCloseItem',

        'tap .arrow-right': 'onNext',
        'tap .arrow-left': 'onPrev',
        'tap button.open': 'onChooseItem',
        'tap button.close': 'onCloseItem'
    },
    initialize: function (options) {
        this._super(options);
        this.isAnimating = false;
        this.rootedItem = 0;

        Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
        Backbone.Notifications.on("window.resize", this.onWindowResize, this);
    },

    setup: function () {
        this.initJqueryVariables();
        this.onWindowResize();  //trigger resize event
    },

    render: function () {
        return this._super();
    },
    initJqueryVariables: function () {
        this.$leftArrow = this.$el.find('div.arrow.arrow-left');
        this.$rightArrow = this.$el.find('div.arrow.arrow-right');

        this.$allItemsContainer = this.$el.find('div.all-items-ctr');
        this.$activeItemContainer = this.$el.find('div.active-item-ctr');

        this.$items = this.$allItemsContainer.find('div.item');

        this.$window = $(window);
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    resizeAllItemsContainer: function (windowWidth, windowHeight) {
        var containerMinWidth = windowWidth * this.$items.length;


        this.$allItemsContainer.css({
            'width': this.$items.length + '00%'
        });

        return containerMinWidth;
    },

    repositionItemsContainerShift: function (containerMinWidth, windowWidth) {
        var lastPossibleLeftItem = this.getLastItemRootLeft(containerMinWidth, windowWidth);

        var newItem;
        if (this.rootedItem > lastPossibleLeftItem && containerMinWidth > windowWidth) {
            //root to right most item
            newItem = this.$items.length - 1;
        }
        else if (containerMinWidth <= windowWidth) {
            //root to left most item
            newItem = 0;
        }
        else {
            //reposition so current item is correctly positioned
            newItem = this.rootedItem;
        }

        this.animateToItem(newItem, 0.1);
    },
    onWindowResize: function (width, height) {
        if (typeof width === 'undefined') {
            width = this.$window.width();
        }
        if (typeof height === 'undefined') {
            height = this.$window.height();
        }

        var containerMinWidth = this.resizeAllItemsContainer(width, height);

        this.repositionItemsContainerShift(containerMinWidth, width);

        return containerMinWidth;
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~ Create/Show/Close/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    createSubView: function ($view) {
        var newView = $view.clone(false);
        newView.ogEl = $view;

        return newView;
    },

    //************* Open View *************
    showSubView: function (viewName, options) {
        this._super(viewName, options);

        this.runShowSubView(viewName);
    },
    runShowSubView: function(viewName) {
        var $item = this.$items.filter(function () {
            return this.getAttribute('data-id') === viewName;
        });

        var $newSubView = this.createSubView($item);

        $newSubView.ogEl.addClass('open');

        // if there is already a subView open, transition between the two
        if (this.subView) {
            this.swapSubView($newSubView);
        } else {
            this.$activeItemContainer.addClass('open');
            this.positionNewSubView($newSubView);
            this.subView = $newSubView;
            this.animateSubViewOpen();
            this.detectAndToggleArrows();
        }
    },

    //************* Close View *************
    closeSubView: function () {
        if (this.subView) {
            this._super();

            this.runCloseSubView();
        }
    },
    runCloseSubView: function() {
        this.animateSubViewClosed(function () {
            this.subView.ogEl.removeClass('open');
            this.$activeItemContainer.removeClass('open');

            this.subView.remove();
            delete this.subView;

            this.detectAndToggleArrows();
        });
    },

    //************* Swap View *************
    swapSubView: function ($newSubView) {
        var direction = ($newSubView.ogEl.index() > this.subView.ogEl.index()) ? 'right' : 'left';

        this.positionNewSubView($newSubView, direction);

        this.animateSubViewShift($newSubView, direction, function () {
            this.subView.ogEl.removeClass('open');
            this.subView.remove();

            this.subView = $newSubView;
            this.detectAndToggleArrows();
        });
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~ Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    positionSubViewToOpen: function ($newSubView) {
        $newSubView.css({
            left: $newSubView.ogEl.offset().left + 'px',
            width: $newSubView.ogEl.width()
        });
    },

    positionSubViewToSwap: function ($newSubView, direction) {
        $newSubView.css({
            left: (direction === 'left') ? '-100%' : '100%'
        });
    },

    positionNewSubView: function ($newSubView, direction) {
        if (typeof direction === 'undefined') {
            this.positionSubViewToOpen($newSubView);
        } else {
            this.positionSubViewToSwap($newSubView, direction);
        }
        $newSubView.appendTo(this.$activeItemContainer);
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~ Sub View Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    animateSubViewOpen: function (timeline) {
        if (typeof timeline === 'undefined') {
            var animationTime = 0.6;

            timeline = new TimelineLite({
                paused: true,
                onComplete: function () {
                    this.isAnimating = false;
                }.bind(this)
            });
            timeline.add(TweenLite.to(this.subView, animationTime, {
                width: '100%',
                opacity: 1,
                ease: 'Power2.easeInOut'
            }), 0);
        }

        this.isAnimating = true;
        timeline.play();
    },

    animateSubViewClosed: function (callback, timeline) {
        if (typeof timeline === 'undefined') {
            var animationTime = 0.6;
            timeline = new TimelineLite({
                paused: true,
                onComplete: function () {
                    this.isAnimating = false;
                    if (typeof callback !== 'undefined') {
                        callback.bind(this)();
                    }
                }.bind(this)
            });
            timeline.add(TweenLite.to(this.subView, animationTime, {
                opacity: 0,
                ease: 'Power2.easeInOut'
            }), 0);
        }

        this.isAnimating = true;
        timeline.play();
    },

    animateSubViewShift: function (newView, direction, callback, timeline) {
        var leftTo = (direction === 'right') ? '-100%' : '100%';

        if (typeof timeline === 'undefined') {
            var animationTime = 0.7;
            timeline = new TimelineLite({
                paused: true,
                onComplete: function () {
                    this.isAnimating = false;
                    if (typeof callback !== 'undefined') {
                        callback.bind(this)();
                    }
                }.bind(this)
            });
            timeline.add(TweenLite.to(this.subView, animationTime, {
                left: leftTo,
                ease: 'Power2.easeInOut'
            }), 0);
            timeline.add(TweenLite.to(newView, animationTime, {
                left: 0,
                ease: 'Power2.easeInOut'
            }), 0);
        }

        this.isAnimating = true;
        timeline.play();

        //move the timeline underneath
        this.shiftAllItemsContainer(direction, 0);
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Items Container Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    shiftAllItemsContainer: function (direction, animationTime) {
        var lastLeftItem = this.getLastItemRootLeft();
        var newItem;

        if (direction === 'right') {
            if (this.rootedItem + 1 > lastLeftItem) {
                newItem = this.$items.length - 1;
                this.animateToItem(this.$items.length - 1, animationTime);
            }
            else {
                newItem = this.rootedItem + 1;
                this.animateToItem(this.rootedItem + 1, animationTime);
            }
        }
        else {
            if (this.rootedItem - 1 < lastLeftItem) {
                newItem = this.rootedItem - 1;
                this.animateToItem(this.rootedItem - 1, animationTime);
            }
            else {
                newItem = lastLeftItem;
                this.animateToItem(lastLeftItem, animationTime);
            }
        }

        return newItem;
    },
    //the last item that can be rooted to the left side of the screen without exposing a black bar on the right
    getLastItemRootLeft: function (containerMinWidth, windowWidth) {
        if (typeof containerMinWidth === 'undefined') {
            containerMinWidth = this.$allItemsContainer.width();
        }

        if (typeof windowWidth === 'undefined') {
            windowWidth = this.$window.width();
        }

        var maxOffset = containerMinWidth - windowWidth;
        maxOffset = (maxOffset < 0) ? 0 : maxOffset;

        return HelperFuncs.floorNearestFactor(maxOffset, containerMinWidth, this.$items.length);
    },
    animateToItem: function (itemIndex, animationTime, ease, callback) {
        if (itemIndex < 0) {
            itemIndex = 0;
        }
        ease = ease || 'Power2.easeInOut';

        var containerWidth = this.$allItemsContainer.width();
        var windowWidth = this.$window.width();

        var xTo = containerWidth * itemIndex / this.$items.length;

        if (itemIndex >= this.$items.length - 1) {
            itemIndex = this.$items.length - 1;
            xTo = containerWidth - windowWidth;
        }
        this.rootedItem = itemIndex;

        this.detectAndToggleArrows();

        this.isAnimating = true;
        TweenLite.to(this.$allItemsContainer, animationTime, {
            x: -xTo,
            overwrite: 'all',
            ease: ease,
            onComplete: function () {
                this.isAnimating = false;

                if(typeof callback === 'function') {
                    callback();
                }
            }.bind(this)
        });
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    detectAndToggleArrows: function () {
        if (!!this.subView)
            this.toggleSubViewArrows();
        else
            this.toggleItemContainerArrows();
    },
    toggleSubViewArrows: function () {
        var index = this.subView.ogEl.index();

        if (index > 1)
            this.$leftArrow.addClass('active');
        else
            this.$leftArrow.removeClass('active');

        if (index < this.$items.length - 1)
            this.$rightArrow.addClass('active');
        else
            this.$rightArrow.removeClass('active');
    },
    toggleItemContainerArrows: function () {
        if (this.rootedItem > 0)
            this.$leftArrow.addClass('active');
        else
            this.$leftArrow.removeClass('active');

        if (this.rootedItem < this.$items.length - 1)
            this.$rightArrow.addClass('active');
        else
            this.$rightArrow.removeClass('active');
    },
    turnOffArrows: function () {
        this.$leftArrow.removeClass('active');
        this.$rightArrow.removeClass('active');
    },

    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Section activate/deactivate ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    onSectionActivate: function (el) {
        if (el[0] === this.$el[0]) {
            this.detectAndToggleArrows();
        }
    },
    cleanup: function () {
        this._super();
        this.turnOffArrows();
    },

    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    onChooseItem: function (e) {
        if (!this.isAnimating && !this.subView && e.currentTarget.getAttribute('data-id') !== '') {
            this.isAnimating = true;

            this.showSubView(e.currentTarget.getAttribute('data-id'));
        }
    },
    onCloseItem: function (e) {
        if (!this.isAnimating && !!this.subView) {
            this.isAnimating = true;

            this.closeSubView();
        }
    },
    onNext: function () {
        if (!this.isAnimating) {
            this.isAnimating = true;

            if (this.subView) {
                var $nextView = this.subView.ogEl.next();
                var dataId = '';

                if ($nextView.length !== 0) {
                    dataId = $nextView[0].getAttribute('data-id');
                }

                if (dataId === '') {
                    this.isAnimating = false;
                    return;
                }

                this.showSubView(dataId);
            }
            else {
                this.shiftAllItemsContainer('right', 0.35);
            }
        }
    },
    onPrev: function () {
        if (!this.isAnimating) {
            this.isAnimating = true;

            if (this.subView) {
                var $prevView = this.subView.ogEl.prev();
                var dataId = '';

                if ($prevView.length !== 0) {
                    dataId = $prevView[0].getAttribute('data-id');
                }

                if (dataId === '') {
                    this.isAnimating = false;
                    return;
                }

                this.showSubView(dataId);
            }
            else {
                this.shiftAllItemsContainer('left', 0.35);
            }
        }
    }
});

module.exports = HorizontalScrollView;

},{"./View.js":23,"./helpers/Helpers.js":24}],19:[function(require,module,exports){
var View = require("./View.js");
var template = require("../../templates/menu.hbs");
var HelperFuncs = require("./helpers/Helpers.js");
var Social = require("../services/Social.js");

// ************************** Static Variables ***************************

// ****************************** Menu View ******************************
var MenuView = View.extend(
    {
        events : {
            "click .hamburger"    : "toggleMenu",
            "touchend .hamburger" : "toggleMenu",
            "touchend .menu-item" : "onMenuItemClicked",
            "click .menu-item"    : "onMenuItemClicked",
			"click .facebook-share" : "facebookShare"
        },

        initialize : function ()
        {
            this._super();
            this.template = template;
            this.animationSpeed = 0.25;
            this.openWidth = HelperFuncs.Device.currentDevice() == "mobile" ? "100%" : "300px";
            this.open = false;
//            this.overlay = null;
        },

        setup : function ()
        {
            this.hamburger = this.$('.hamburger');
            this.topBarLogo = this.$('.desktop-logo >img');
            this.topBarLogo.hide();
            Backbone.Notifications.on("section.afterActive", this.onSectionChange, this);

            $(document).on('click touchend', function(e)
            {
              var $this = $(e.target);
               if (!$this.hasClass('.hamburger') && $this.closest('#menu').length === 0)
               {
                   if (this.open)
                   {
                       this.closeMenu();
                   }
               }
            }.bind(this));
        },

        render : function ()
        {
            return this._super();
        },

        closeMenu: function()
        {
            var tweenTo = 0;

            var easing = 'Power2.easeInOut';

            TweenLite.to(this.el, this.animationSpeed, {
                width : tweenTo,
                ease  : easing
            });
            this.open = false;

            var hamBG = this.open ? "/images/menu/x.85cbf79fe9cc7a131f55a58f58aad678.png" : "/images/menu/menu-icon.05c8de061332b366c6fb73a1db8a956f.png";
            this.hamburger.css("background-image", "url("+window.cdn+ hamBG +")");

            this.$el.removeClass('open');

            Backbone.Notifications.trigger("SubView.Closed");
        },

        toggleMenu : function (e)
        {
            if (e)
            {
                e.preventDefault();
            }

            var tweenTo = this.open ? 0 : this.openWidth;

            var easing = 'Power2.easeInOut';

            TweenLite.to(this.el, this.animationSpeed, {
                width : tweenTo,
                ease  : easing
            });
            this.open = !this.open;

            var hamBG = this.open ? "/images/menu/x.85cbf79fe9cc7a131f55a58f58aad678.png" : "/images/menu/menu-icon.05c8de061332b366c6fb73a1db8a956f.png";
            this.hamburger.css("background-image", "url("+window.cdn+ hamBG +")");

            this.$el.toggleClass('open');

            if(this.open)
            {
                Backbone.Notifications.trigger("SubView.Opened");
            }
            else
            {
                Backbone.Notifications.trigger("SubView.Closed");
            }
        },

        onMenuItemClicked : function (e)
        {
            e.preventDefault();
            Backbone.history.navigate($(e.currentTarget).attr("href"), true);
            this.toggleMenu(e);
        },

        onSectionChange: function (e)
        {
            if(e.index() == 0)
            {
                this.topBarLogo.fadeOut();
            }
            else
            {
                this.topBarLogo.fadeIn();
            }
        },

		facebookShare : function (e)
		{
			e.preventDefault();

            Social.ShareFacebook();
		}
    });

module.exports = MenuView;

},{"../../templates/menu.hbs":54,"../services/Social.js":16,"./View.js":23,"./helpers/Helpers.js":24}],20:[function(require,module,exports){
var template = require("../../templates/preloader.hbs");
var HelperFuncs = require('./helpers/Helpers.js');


var PreloaderView = Backbone.View.extend(
    {
        initialize : function ()
        {
        },

        render : function ()
        {
            this.setElement(template());

            return this;
        },

        preload : function ()
        {
            this.loader = this.$('.loader');
            this.border = this.$('.border');
            this.α = 0;
            this.π = Math.PI;
            this.t = 30;
            this.currentLoaded = 0;
            this.loadcomplete = false;

            this.imageList = this.model[HelperFuncs.Device.currentDevice()];

            this.step = 360 / this.imageList.length;

            _.each(this.imageList, function (element, index, list)
            {
                var img = new Image();
                img.onload = function ()
                {
                    this.currentLoaded += this.step;
                    delete img;
                }.bind(this);

                img.onerror = function()
                {
                    this.currentLoaded += this.step;
                    delete img;
                }.bind(this);

                img.src = window.cdn + list[index];
            }, this);

            this.draw();
        },

        draw : function ()
        {
            if (this.α < this.currentLoaded)
            {
                this.α += 5;
            }
            if (this.α >= 360)
            {
                this.α = 359.99;
                this.loadcomplete = true;
            }
            //this.α %= 360;


            var r = ( this.α * this.π / 180 )
                , x = Math.sin(r) * 125
                , y = Math.cos(r) * -125
                , mid = ( this.α > 180 ) ? 1 : 0
                , anim = 'M 0 0 v -125 A 125 125 1 '
                             + mid + ' 1 '
                             + x + ' '
                             + y + ' z';

            this.loader.attr('d', anim);
            this.border.attr('d', anim);

            if (!this.loadcomplete)
            {
                this.timeoutID = setTimeout(this.draw.bind(this), this.t); // Redraw
            }
            else
            {
                // wait a beat to ensure animation has completed, then trigger complete event
                setTimeout(function ()
                {
                    Backbone.Notifications.trigger('preloader.complete');

                    var logo = this.$('.preloaderContainer > .logo');

                    TweenLite.to(this.$('svg'), 0.3, {scaleX:0, scaleY:0, onComplete: function()
                        {
                            TweenLite.to(logo, 1, {opacity: 0, onComplete: function()
                            {
                                Backbone.Notifications.trigger('preloader.animationComplete');
                            }});
                        }});
                }, 200);
            }
        },

        remove: function()
        {
            clearTimeout(this.timeoutID);

            this._super();
        }
    });


module.exports = PreloaderView;

},{"../../templates/preloader.hbs":55,"./helpers/Helpers.js":24}],21:[function(require,module,exports){
var View = require("./View.js");
var template = require("../../templates/scrollbar.hbs");
var HelperFuncs = require("./helpers/Helpers.js");

var ScrollBarView = View.extend(
    {
        events : {
            "mousedown .handle" : "onHandleDown",
            "mouseover"         : "onMouseOver",
            "mouseleave"        : "onMouseLeave",
            "render"            : "renderAfter"
        },

        viewName            : '',        // Used to namespace events for scrollbars that are contained within a subview.
        container           : undefined, // The container that the scrollbar exists within if it is contained within a subview.
        containerOffsetTop  : 0,         // In order to accurately track the handle position inside containers that are
                                         // absolutely positioned, the offset of that container needs to be tracked.
                                         // This offset is used to correctly map the handle position to the cursor position.
        animateScrollHandle : true,      // Whether to animate the scrollbar thumb.
        animateOpacity      : true,      // Whether to change the opacity when the scrollbar is visible.
        scrollPercentage    : 0,
        isMouseDown         : false,
        scrollingEnabled    : true,
        timeoutID           : undefined,

        initialize : function (attrs)
        {
            this._super();
            this.template = template;

            if (attrs && attrs.viewName)
            {
                this.viewName = attrs.viewName;
            }

            if (attrs && attrs.container)
            {
                this.container = attrs.container;
            }

            if (attrs && typeof attrs.animateScrollHandle === 'boolean')
            {
                this.animateScrollHandle = attrs.animateScrollHandle;
            }

            if (attrs && typeof attrs.animateOpacity === 'boolean')
            {
                this.animateOpacity = attrs.animateOpacity;
            }

            Backbone.Notifications.on(this.eventNamePrefix() + "Section.FinalPosition", this.onSectionAnimated, this);
            Backbone.Notifications.on("window.resize", this.onWindowResize, this);

            if (!this.container)
            {
                Backbone.Notifications.on("SubView.Opened", this.lockScroll, this);
                Backbone.Notifications.on("SubView.Closed", this.unlockScroll, this);
            }
        },

        eventNamePrefix: function()
        {
            return this.viewName ? this.viewName + '.' : '';
        },

        setup : function ()
        {
            this.handle = this.$('.handle')[0];
        },

        render : function (hideOnRender)
        {
            var self = this;

            this._super();

            if (this.animateOpacity)
            {
                this.timeoutID = setTimeout(function ()
                {
                    self.$el.animate({opacity : 0}, 200);
                }, 1000);
            }

            if (hideOnRender === true)
            {
                this.$el.css({opacity: 0});
            }

            _.defer(this.renderAfter.bind(this, hideOnRender));

            return this;
        },

        renderAfter : function(hideOnRender)
        {
            if (hideOnRender !== true)
            {
                this.setScrollbarVisibility();
            }

            this.calculateOffset();
        },

        /**
         * Set the scrollbar opacity based on the whether the container has scrollable content or not.
         * @param {int} [opacity] Optionally force the opacity to this value.
         * @param {function} [callback] Call this function after the opacity has finished animating.
         */
        setScrollbarVisibility: function(opacity, callback)
        {
            if (!this.container) return;

            var containerHeight, containerContentHeight;

            // doesn't validate numbers, but this check keeps us from going into the code following this block
            if (opacity !== undefined && opacity >= 0 && opacity <= 1)
            {
                this.$el.animate({opacity : opacity}, 200, callback);
                return;
            }

            containerHeight = this.container.outerHeight(true);
            containerContentHeight = HelperFuncs.Element.contentHeight(this.container);

            if (containerHeight < containerContentHeight)
            {
                this.$el.animate({opacity : 1}, 200, callback);
            }
            else
            {
                this.$el.animate({opacity : 0}, 200, callback);
            }
        },

        /**
         * Calculate the top offest position of the elements container.
         * This is important for containers that have an absolute position set.
         * @param {Boolean} [rollUp] Whether to transverse the DOM to calculate the offsets of all parent containers. Defaults to false.
         */
        calculateOffset : function(rollUp)
        {
            rollUp = !!rollUp;

            this.containerOffsetTop = 0;

            var parentElement = this.el.parentElement;

            if (!parentElement) return;

            do
            {
                this.containerOffsetTop += parentElement.offsetTop;
            }
            // Assignment to parentElement is intentional.
            // This will return null when the last parent element is reached.
            while (rollUp && (parentElement = parentElement.parentElement));
        },

        onHandleDown : function (event)
        {

            this.$(this.handle).stop();
            this.isMouseDown = true;
            Backbone.Notifications.trigger(this.eventNamePrefix() + "ScrollBar.HandleDown");

            Backbone.Notifications.on("window.mousemove", this.onHandleMove, this);
            Backbone.Notifications.on("window.mouseup", this.onHandleUp, this);
        },

        onHandleMove : function (event)
        {
            var pY = event.yPos - this.containerOffsetTop;

            var handleOffset = this.$(this.handle).height() / 2;

            if (pY < handleOffset)
            {
                pY = handleOffset;
            }

            if (pY > this.el.offsetHeight - handleOffset)
            {
                pY = this.el.offsetHeight - handleOffset;
            }

            this.$(this.handle).css("top", (pY - handleOffset + "px"));

            // calc percentage of handle position
            var scrollPercentage = 100 * parseInt(this.handle.style.top) / (this.el.clientHeight - this.handle.clientHeight);

            if (scrollPercentage != this.scrollPercentage)
            {
                // cap the max percentage at 100 or set it to the calculated percentage
                this.scrollPercentage = (scrollPercentage > 100 ? 100 : scrollPercentage);

                Backbone.Notifications.trigger(this.eventNamePrefix() + "ScrollBar.UpdatePosition", {percent : this.scrollPercentage});
            }
        },

        onHandleUp : function (event)
        {
            this.isMouseDown = false;

            this.onMouseLeave({});

            Backbone.Notifications.off("window.mousemove", this.onHandleMove, this);
            Backbone.Notifications.off("window.mouseup", this.onHandleUp, this);
            Backbone.Notifications.trigger(this.eventNamePrefix() + "ScrollBar.HandleUp");
        },

        onSectionAnimated : function (event)
        {
            var pos, $handle;

            if (!this.handle)
            {
                return;
            }

            if (event.percent === undefined)
            {
                pos = (this.container.offset().top / this.container.outerHeight(true)) * (this.el.clientHeight - this.handle.clientHeight);
            }
            else
            {
                pos = (event.percent * (this.el.clientHeight - this.handle.clientHeight)) / 100;
            }

            $handle = this.$(this.handle);

            if (this.animateScrollHandle)
            {
                if ($handle.is(':animated'))
                {
                    $handle.stop();
                }

                $handle.animate({top : pos}, 500);
            }
            else
            {
                $handle.css('top', pos);
            }
        },

        onWindowResize : function (event)
        {
            this.$(this.handle).stop();
            this.setScrollbarVisibility();
        },

        onMouseOver  : function (event)
        {
            if (!this.animateOpacity) return;

            if (this.scrollingEnabled == false)
            {
                return;
            }

            if (this.timeoutID !== undefined)
            {
                clearTimeout(this.timeoutID);
                delete this.timeoutID;
            }
            this.$el.stop();
            this.$el.animate({opacity : 1}, 200);
        },

        onMouseLeave : function (event)
        {
            if (!this.animateOpacity) return;

            if (this.isMouseDown === true)
            {
                return;
            }
            this.$el.stop();
            this.$el.animate({opacity : 0}, 200);
        },

        lockScroll : function (e)
        {
	        var self = this;

            this.scrollingEnabled = false;
            if (this.animateOpacity)
            {
                this.$el.stop();
                this.$el.animate({opacity : 0}, 200, function()
                {
	                self.$el.hide();
                });
            }
        },

        unlockScroll : function (e)
        {
	        this.$el.show();
            this.scrollingEnabled = true;
        }
    });

module.exports = ScrollBarView;

},{"../../templates/scrollbar.hbs":56,"./View.js":23,"./helpers/Helpers.js":24}],22:[function(require,module,exports){
var View = require("./View.js");
var template = require("../../templates/sections.hbs");
var HelperFuncs = require("./helpers/Helpers.js");

// required for browserify to dynamically load class files from data
// TODO: consider deleting these manually after all sections are initialized
var introView = require("./sections/IntroView.js");
var introViewMobile = require("./sections/mobile/IntroView.js");

var homeView = require("./sections/HomeView.js");
var homeViewMobile = require("./sections/mobile/HomeView.js");
var homeViewTablet= require("./sections/tablet/HomeView.js");

var StoryView = require("./sections/StoryView.js");
var StoryViewMobile = require("./sections/mobile/StoryView.js");
var StoryViewTablet = require("./sections/tablet/StoryView.js");

var CharactersView = require("./sections/CharactersView.js");
var CharactersViewMobile = require("./sections/mobile/CharactersView.js");
var CharactersViewTablet = require("./sections/tablet/CharactersView.js");

var MediaView = require("./sections/MediaView.js");
var MediaViewMobile = require("./sections/mobile/MediaView.js");
var MediaViewTablet = require("./sections/tablet/MediaView.js");

var TimelineView = require("./sections/TimelineView.js");
var TimelineViewMobile = require("./sections/mobile/TimelineView.js");

var FightView = require("./sections/FightView.js");
var FightViewTablet = require("./sections/tablet/FightView.js");
var FightViewMobile = require("./sections/mobile/FightView.js");
var FooterView = require("./sections/FooterView.js");

var SectionsView = View.extend(
{
    events:
    {
      "mousewheel" : "onSectionChangeRequest",
      "DOMMouseScroll" : "onSectionChangeRequest"
    },

    hammerEvents:
    {
      'swipe': 'onSectionChangeRequest'
    },

    initialize: function()
    {

      this._super();
      this.template = template;

      this.sectionKeys = HelperFuncs.Array.clean(this.model.sections.models
          .map(function(model)
            {
              if(!model.get("section"))
              {
                return -1;
              }
                var sections =
                {
                    sectionName : model.get("name"),
                    index : model.get("section").index
                };

                return sections;
            }), -1)
          .sort(this.sectionSort);

      this.routeInitialized = false;
      this.animating = false;
      this.scrollingEnabled = true;
      this.currentSectionIndex = 0;

      // load in the sections from our model
      this.model.sections.each(function(model, index, list)
      {
        if(!model.get("section"))
        {
          return;
        }

        var modelName = model.get("name");

        var mod = require("./sections/" + model.get("section").module);

        if (!modelName) throw "Model with ID " + model.get("id") + " has no section name.";

        this[modelName] = new mod(
            {
                model: model.get("data"),
                base: modelName
            });
      }, this);

//      Backbone.Notifications.on("document.scroll", this.onDocumentScrolled, this);

//      Backbone.Notifications.on("window.resize", this.onWindowResize, this);

      Backbone.Notifications.on("ScrollBar.UpdatePosition", this.updateScrolling, this);
      Backbone.Notifications.on("ScrollBar.HandleDown", this.scrollStart, this);
      Backbone.Notifications.on("ScrollBar.HandleUp", this.scrollEnd, this);

      Backbone.Notifications.on("SubView.Opened", this.lockScroll, this);
      Backbone.Notifications.on("SubView.Closed", this.unlockScroll, this);
      Backbone.Notifications.on("Section.RequestActive", this.onSectionRequestActive, this);

      Backbone.Notifications.on("keypress.upArrow", this.onUpArrow, this);
        Backbone.Notifications.on("keypress.downArrow", this.onDownArrow, this);


      this.$window = $(window);
    },

    render: function()
    {
      this._super();

      setTimeout(function() {
          scrollTo(0, 1);
      }, 0);

      _.each(this.sectionKeys, function(section, index, list)
      {
        if(this[section.sectionName])
        {
            var tEl;
            try
            {
                tEl = this[section.sectionName].render().el;
            }
            catch(e)
            {
                console.log('Could not render view ' + section.sectionName + '.', e, e.stack);
            }
          this.$el.append(tEl);
        }
      }, this);

      this.$sections = this.$el.children();
      this.numSections = this.$sections.length;

      this.currentElement = this.$sections.eq(this.currentSectionIndex);

      return this;
    },



    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Alec's Changes ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    animateToClosestSection: function(e) {
        this.animating = true;

        var top = parseInt(this.$el.css('top'));
        var height = this.$sections.eq(0).height();

        var closestIndex = Math.abs(Math.round(top/height));

        var newTop = -(closestIndex * 100);
        var animationTime = 0.4;

        Backbone.Notifications.trigger("section.beforeActive", this.$sections.eq(closestIndex));

        // flag the current view as the active view
        this[this.sectionKeys[closestIndex].sectionName].isActive = true;

        TweenLite.to(this.$el, animationTime, {
            top: newTop  + '%',
            onUpdate: _.bind(this.onAnimationUpdate, this),
            onComplete: _.bind(this.onAnimationComplete, this)
        });

        this.setScrollbarFinalPosition(closestIndex);
    },
    animateToSection: function(index, options) {
        options = options || {};
        index = Math.max(index, 0);
        index = Math.min(index, this.numSections-1);

        if(index === this.currentSectionIndex) return;

        this.animating = true;
        var startIndex = this.currentSectionIndex;

        var newTop = -(index * 100);

        if(_.isUndefined(options.animationTime))
            options.animationTime = this.getAnimationTime(startIndex, index);

        Backbone.Notifications.trigger("section.beforeActive", this.$sections.eq(index));

        // flag the current view as the active view
        this[this.sectionKeys[index].sectionName].isActive = true;

        TweenLite.to(this.$el, options.animationTime, {
            top: newTop + '%',
            onUpdate: _.bind(this.onAnimationUpdate, this, startIndex, options.updateRoute),
            onComplete: _.bind(this.onAnimationComplete, this)
        });

        this.setScrollbarFinalPosition(index);
    },
    getAnimationTime: function(startIndex, endIndex) {
        var duration;
        var distance = Math.abs(startIndex - endIndex);

        if(distance === 1) {
            duration = parseInt(this.$sections.eq(endIndex).data('duration')) || 600;
        } else {
            duration = 600 + 600 * (distance - 1)/(this.numSections - 2);
        }

        return duration/1000;
    },
    setScrollbarFinalPosition: function(index) {
        var posPercent = index/(this.numSections - 1) * 100;
        Backbone.Notifications.trigger("Section.FinalPosition", {percent: posPercent});
    },

    onAnimationUpdate: function(startIndex, updateRoute) {
        updateRoute = _.isUndefined(updateRoute) ? true : updateRoute;

        var windowHeight = this.$sections.eq(0).height();
        var top = parseInt(this.$el.css('top'));

        var visibleIndex = Math.floor(Math.abs(top)/windowHeight);

        Backbone.Notifications.trigger("document.scroll");

        if(visibleIndex !== this.currentSectionIndex) {
            var replace = (this.currentSectionIndex !== startIndex);



            // clean up the current section before changing to the next
            this[this.sectionKeys[this.currentSectionIndex].sectionName].cleanup();

            this.currentSectionIndex = visibleIndex;
            this.currentElement = this.$sections.eq(visibleIndex);

            if(updateRoute) {
                Backbone.history.navigate("/" + this.sectionKeys[this.currentSectionIndex].sectionName, {trigger: true, replace: replace});
            }
        }
    },
    onAnimationComplete: function() {
        Backbone.Notifications.trigger("section.afterActive", this.currentElement);

        this.unlockAnimating();
    },


    onSectionRequestActive: function(sectionName) {

        var sectionView = this[sectionName];
        var index = sectionView.$el.index();

        if(this.currentSectionIndex !== index) {
            var options = this.routeInitialized ? {updateRoute: false} : {updateRoute: false, animationTime: 0};

            this.animateToSection(index, options);
        }
        this.routeInitialized = true;
    },

    // only triggered from mouse scrolling events and swiping
    onSectionChangeRequest: function(e)
    {
        if(this.animating || this.scrollingEnabled == false)
        {
          return;
        }

        this.animating = true;

        var sign;

        if(e.gesture)
        {
            if(e.gesture.direction !== 'up' && e.gesture.direction !== 'down') {
                this.animating = false;
                return;
            }

            sign = (e.gesture.direction === "up") ? -1 : 1;
        }
        else
        {
          if(Math.abs(e.originalEvent.wheelDelta) <= 90)
          {
            this.animating = false;
            return;
          }
            var d = (e.originalEvent.wheelDelta || -e.originalEvent.detail);
            sign = d?d<0?-1:1:0;
        }

        if((sign == -1 && this.currentSectionIndex == this.$sections.length-1) || (sign == 1 && this.currentSectionIndex == 0))
        {
            this.animating = false;
            return;
        }

        var newIndex = this.currentSectionIndex - sign;

        this.animateToSection(newIndex);
    },
    scrollStart: function() {
        this.scrollStartIndex = this.currentSectionIndex;
        this.lockAnimating();
    },
    scrollEnd: function() {
        this.animateToClosestSection();
    },









    updateScrolling: function(e)
    {
        var top = -(e.percent * (this.numSections - 1)) + '%';

        this.$el.css('top', top);

        this.onAnimationUpdate(this.scrollStartIndex);
    },

    lockAnimating: function(e)
    {
      this.animating = true;
    },

    unlockAnimating: function(e)
    {
      this.animating = false;
    },



    lockScroll: function(e)
    {
      this.scrollingEnabled = false;
    },

    unlockScroll: function(e)
    {
      this.scrollingEnabled = true;
    },

    sectionSort: function(a,b) {
        return a.index - b.index;
    },
    onUpArrow: function() {
        "use strict";

        if(this.animating || this.scrollingEnabled == false || this.currentSectionIndex === 0)
            return;


        this.animating = true;
        this.animateToSection(this.currentSectionIndex - 1);
    },
    onDownArrow: function() {
        "use strict";

        if(this.animating || this.scrollingEnabled == false || this.currentSectionIndex === this.numSections - 1)
            return;


        this.animating = true;
        this.animateToSection(this.currentSectionIndex + 1);
    }

});


module.exports = SectionsView;

},{"../../templates/sections.hbs":57,"./View.js":23,"./helpers/Helpers.js":24,"./sections/CharactersView.js":26,"./sections/FightView.js":27,"./sections/FooterView.js":28,"./sections/HomeView.js":29,"./sections/IntroView.js":30,"./sections/MediaView.js":31,"./sections/StoryView.js":32,"./sections/TimelineView.js":33,"./sections/mobile/CharactersView.js":34,"./sections/mobile/FightView.js":35,"./sections/mobile/HomeView.js":36,"./sections/mobile/IntroView.js":37,"./sections/mobile/MediaView.js":38,"./sections/mobile/StoryView.js":40,"./sections/mobile/TimelineView.js":41,"./sections/tablet/CharactersView.js":48,"./sections/tablet/FightView.js":49,"./sections/tablet/HomeView.js":50,"./sections/tablet/MediaView.js":51,"./sections/tablet/StoryView.js":52}],23:[function(require,module,exports){
var template = require("../../templates/default.hbs");
var Omniture = require("../services/Omniture.js");


var View = Backbone.View.extend(
{
    initialize: function(options)
    {
      this.template = template;
      this.cleaningList = {};
      if(options)
      {
        this.base = options.base;
        this.initRouter(this.base);
      }
      this.isActive = false;
    },

    setup: function()
    {
      /* called after render has completed
       place DOM-specific initialization here */
    },

    initRouter: function(root)
    {
        var rt = root + "(/:subsection)(/:detail)";
        var cb = root + "Route";
        var ca = root + "CatchAllRoute";

        // add our default route to handle for this view
        App.router.route(rt, cb);

        App.router.on("route:"+cb, this.handleRoute.bind(this));
    },

    /**
     * Send the browser to the base URL for the section.
     * Does not add to the history stack, and calls the section route method.
     */
    showViewRoot: function()
    {
        App.router.navigate('/' + this.base,
            {
                trigger: true,
                replace: true
            });
    },

    handleRoute: function(subsection, detail)
    {
      var sub = "";
      if(subsection)
      {
          sub = ": "+subsection;
      }
      Omniture.onPageLoad({pageName: this.base+sub});

      if(subsection)
      {
        this.fromRoute = true;
        this.showSubView(subsection, detail);
      }
      else
      {
        if(this.subView)
        {
          this.closeSubView();
        }
      }
      Backbone.Notifications.trigger("Section.RequestActive", this.base);
    },

    render: function()
    {
      if(!this.model)
      {
        this.model ={};
      }

      this.setElement(this.template(this.model));
      this.setup();

      return this;
    },

    showSubView: function(viewName, options)
    {
      if(!options)
      {
        options = "";
      }
      if(!this.fromRoute)
      {
        Omniture.onPageLoad({pageName: this.base+": "+viewName});
      }
      else
      {
        this.fromRoute = false;
      }

      App.router.navigate(this.base + "/"+viewName +"/" + options);
      Backbone.Notifications.trigger("SubView.Opened");
    },

    closeSubView: function()
    {
      if(!this.subView)
      {
        return;
      }

      if(this.isActive)
      {
        Omniture.onPageLoad({pageName: this.base});
        Backbone.history.navigate(this.base);
      }
      Backbone.Notifications.trigger("SubView.Closed");
    },

    cleanup: function()
    {
      this.isActive = false;
      this.closeSubView();
      // TODO: iterate over cleaning list functions and call them in order
    }
});


module.exports = View;

},{"../../templates/default.hbs":53,"../services/Omniture.js":15}],24:[function(require,module,exports){
function Helpers() {}

Helpers.prototype.posTop = function ()
{
    return typeof window.pageYOffset != 'undefined' ? window.pageYOffset : document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop ? document.body.scrollTop : 0;
};

Helpers.prototype.Device = {
    isAndroid       : function ()
    {
	return navigator.userAgent.match(/Android/i) !== null;
    },
    isAndroidTablet : function ()
    {
	return navigator.userAgent.match(/Android/i) !== null
	    && (
	    ((window.orientation === 0 || window.orientation === 180 ) && screen.width > 640)
		|| ((window.orientation === -90 || window.orientation === 90) && screen.height > 640)
	    );
    },
    isBlackBerry    : function ()
    {
	return navigator.userAgent.match(/BlackBerry/i) !== null;
    },
    isIOS           : function ()
    {
	return navigator.userAgent.match(/iPhone|iPad|iPod/i) !== null;
    },
    isIpad          : function ()
    {
	return navigator.userAgent.match(/iPad/i) !== null;
    },
    isOpera         : function ()
    {
	return navigator.userAgent.match(/Opera Mini/i) !== null;
    },
    isWindows       : function ()
    {
	return navigator.userAgent.match(/IEMobile/i) !== null;
    },
    isTablet        : function ()
    {
	return this.isAndroidTablet() || this.isIpad();
    },
    isMobile        : function ()
    {
	return !this.isTablet() && (this.isAndroid() || this.isBlackBerry() || this.isIOS() || this.isOpera() || this.isWindows());
    },
    currentDevice   : function ()
    {
	if(this.isMobile())
	    return "mobile";
	else if (this.isTablet())
	    return "tablet";
	else
	    return "desktop";
    },
    currentDeviceName : function()
    {
	switch(true)
	{
	    case this.isAndroid():
	    {
		return "Android";
	    }

	    case this.isBlackBerry():
	    {
		return "BlackBerry";
	    }

	    case this.isOpera():
	    {
		return "Opera Mini";
	    }

	    case this.isWindows():
	    {
		return "IEMobile";
	    }

	    case this.isIOS():
	    {
		if(this.isIpad())
		{
		    return "iPad"
		}
		else
		{
		    // treat iPod and iPhone as the same
		    return "iPhone"
		}
	    }

	    default:
	    {
		return "Desktop"
	    }
	}
    }
};

Helpers.prototype.roundNearestFactor = function (x, y, f)
{
    return Math.round(x * f / y)
};

Helpers.prototype.floorNearestFactor = function (x, y, f)
{
    return Math.floor(x * f / y);
};

// ex: x = 1446, y = 5000, f = 6
// returns 1666.66
Helpers.prototype.roundNearestMultiple = function (x, y, f)
{
    return this.roundNearestFactor(x, y, f) * y / f;
};

Helpers.prototype.floorNearestMultiple = function (x, y, f)
{
    return this.roundNearestMultiple(x, y, f) * y / f;
};

Helpers.prototype.Array = {};

Helpers.prototype.Array.clean = function(array, deleteValue)
{
  for (var i = 0; i < array.length; i++)
  {
    if (array[i] == deleteValue)
    {
      array.splice(i, 1);
      i--;
    }
  }
  return array;
};


Helpers.prototype.Element = {};
/**
 * Return the height of all of an elements children. Excludes text nodes.
 * @param element The element node whose height to return
 * @returns Integer The height of all the element's children
 */
Helpers.prototype.Element.contentHeight = function (element)
{
    var range, rect;

    if (element instanceof jQuery)
    {
        if (element.length === 1)
        {
            element = element[0];
        }
        else
        {
            throw "Multiple jQuery elements were passed, but this method expects only one element.";
        }
    }

    // If createRange is available, use that to get the bounding height of the element.
    // Works when the last element of the second-to-last child is a textNode.
    if (document.createRange)
    {
        range = document.createRange();
        range.selectNodeContents(element);
        rect = range.getBoundingClientRect();

        return rect.bottom - rect.top;

    }
    // This works only if the last element in the second-to-last child is NOT a textNode.
    else
    {
        if (!element.children.length)
        {
            return $(element).outerHeight(true);
        }

        // The last child's offset from the top + its height will give us the container's content height
        var lastChild = element.children[element.children.length - 1];

        if (lastChild.children.length)
        {
            return Helpers.prototype.Element.contentHeight(lastChild);
        }

        return lastChild.offsetTop + $(lastChild).outerHeight(true);
    }
};
// ====================================================================================== //
/* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Draggable Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
// ====================================================================================== //

function getVelocity(locationOverTime) {
    "use strict";

    var velocity;
    var lastFiveTimes = _.last(_.keys(locationOverTime), 5);    //only use last 5 generated times to calc velocity

    var yDifference =  (locationOverTime[_.last(lastFiveTimes)] - locationOverTime[lastFiveTimes[0]]);
    var timeDifference = _.last(lastFiveTimes) - lastFiveTimes[0];

    velocity = yDifference/timeDifference;
    velocity = Math.max(Math.min(3000, velocity), -3000);

    return velocity;
}
function getMinY($draggableDiv, $parent) {
    "use strict";
    $parent = $parent || $draggableDiv.parent();

    var minY;

//    console.log('parent scrollheight', $parent[0].scrollHeight);
//    console.log('draggable scrollheight', $draggableDiv[0].scrollHeight);
//    console.log('parent height', $parent.height());
//    console.log('draggable height', $draggableDiv.height());

    if($parent[0].scrollHeight === $draggableDiv[0].scrollHeight && $parent.height() < $draggableDiv.height()) {
	minY = $draggableDiv.height() - $parent.height();
    } else {
	minY = $parent[0].scrollHeight - $parent.height();
	//please don't equal 0.

	minY = minY || $draggableDiv[0].scrollHeight - $draggableDiv.height();
    }

    return -Math.abs(minY);
}

Helpers.prototype.Scroller = {};

Helpers.prototype.Scroller.initDraggable = function($draggableDiv, options)
{
    var startSeconds, startY, endSeconds, endY;
    var locationOverTime = {};

    options = options || {};

    var bounds = options.bounds || {
        maxY: 0,
        maxX: 0
    };
    var edgeResistance = options.edgeResistance || 0.9;



    var drag = Draggable.create($draggableDiv, {
	type           : "y",
	edgeResistance : edgeResistance,
	bounds: bounds,
	dragClickables: true,
	dragResistance : 0,
	throwProps     : true,
	zIndexBoost    : false,
	cursor         : "pointer",
	onDragEnd      : function ()
	{
	    endY = $draggableDiv[0]._gsTransform.y;
	    endSeconds = _.now() / 1000;

	    locationOverTime[endSeconds] = endY;

	    var velocity = getVelocity(locationOverTime);

	    Helpers.prototype.Scroller.decelerateAndSnap(velocity, $draggableDiv, this.minY, this.maxY);
	},
	onDrag: function() {
	    "use strict";

	    if(typeof this.minY === 'undefined') {
            var minY = getMinY($draggableDiv);

            drag[0].applyBounds({
                minY: minY,
                maxY: 0
            });
	    }

	    var y = $draggableDiv[0]._gsTransform.y;
	    var seconds = _.now() / 1000;

	    locationOverTime[seconds] = y;

	},
	onDragStart: function ()
	{
	    locationOverTime = {};
	    startY = $draggableDiv[0]._gsTransform.y;
	    startSeconds = _.now() / 1000;

	    locationOverTime[startSeconds] = startY;
	}
    });
};


Helpers.prototype.Scroller.decelerateAndSnap = function (velocity, $draggableDiv, minY, maxY)
{

    minY = minY || getMinY($draggableDiv);

    var currentY = Math.round($draggableDiv[0]._gsTransform.y);
    minY = Math.round(minY);
    maxY = Math.round(maxY);

//    console.log('velocity', velocity);
//    console.log('minY', minY);
//    console.log('maxY', maxY);
//    console.log('currentY', currentY);

//    console.log('minY', minY);

    if(currentY === minY || currentY === maxY) return;

    var resistance = 4;
    var animationTime = 0.6 * Math.abs(velocity) / 3000;

    var yTo = $draggableDiv[0]._gsTransform.y + velocity / resistance;

    yTo = Math.min(yTo, maxY);
    yTo = Math.max(yTo, minY);



//   console.log('yTo', yTo);


    var startTime = _.now()/1000;
    var dTween = TweenLite.to($draggableDiv, animationTime, {
	y          : yTo,
	overwrite: true,
	ease       : 'Circ.easeOut',
	onUpdate   : function () {
	    var d = this.checkAndFixScrolPos($draggableDiv);

	    if(!isNaN(d)) {
		dTween.kill();

		var timePassed = _.now()/1000 - startTime;
		var newAnimationTime = animationTime - timePassed;

		TweenLite.to($draggableDiv, newAnimationTime, {
		    y          : d,
		    overwrite  : true,
		    ease       : 'Circ.easeOut'
		});
	    }
	}.bind(this)
    });
};

Helpers.prototype.Scroller.checkAndFixScrolPos = function($draggableDiv)
{
    var y = $draggableDiv[0]._gsTransform.y;
    var minY = getMinY($draggableDiv);

    return (y < minY) ? minY : NaN;
};

module.exports = new Helpers;
window.HelperFuncs = module.exports;

},{}],25:[function(require,module,exports){
module.exports=require(18)
},{"./View.js":23,"./helpers/Helpers.js":24}],26:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/characters.hbs");
var Omniture = require("../../services/Omniture.js");
var Social = require("../../services/Social.js");
var PartialCharactersYoutubeView = require('../sections/partials/characters/youtube.js');

var CharactersView = View.extend(
    {
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Initialization ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        mediaLightboxView : undefined,

        events : {
            'click div.item': 'onChooseCharacter',
            'click button.close': 'onClose',
            'click div.arrow-right': 'onNext',
            'click div.arrow-left': 'onPrev',
            'click div.interview': 'onClickInterview',
            'click div.close-interview': 'onCloseInterview',
            'click div.youtube-embed-ctr div.overlay': 'onCloseInterview',
            'click div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            this.animationsRunning = 0;
            this.contentPositions = {
                left: {
                    top: '55%',
                    left: '10%'
                },
                right: {
                    top: '55%',
                    right: '10%'
                }
            };

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
        },

        setup: function() {
            this.initJqueryVariables();

            this.initItemSize();
            this.setItemPadding(this.$characterItems);

            this.onWindowResize();  //trigger resize event
            this.initSocialFunctions();

            Backbone.Notifications.on('section.beforeActive', _.throttle(this.onSectionBeforeActive, 1000, {trailing: false}), this);
            Backbone.Notifications.on('section.afterActive', _.throttle(this.onSectionAfterActive, 1000, {trailing: false}), this);

            Backbone.Notifications.on('keypress.rightArrow', this.onRightArrowKey, this);
            Backbone.Notifications.on('keypress.leftArrow', this.onLeftArrowKey, this);
        },

        render: function() {
            return this._super();
        },
        initJqueryVariables: function() {
            this.$window = $(window);

            this.$characterItems = this.$el.find('div.item');

            this.$activeItemContainer = this.$el.find('div.active-item-ctr');

            this.$leftArrow = this.$el.find('div.arrow-left');
            this.$rightArrow = this.$el.find('div.arrow-right');

            this.$youtubeContainer = this.$el.find('div.youtube-embed-ctr');

            this.$allItemsContainer = this.$el.find('div.all-items-ctr');
        },
        initItemSize: function() {
            "use strict";

            var rowLength = this.$characterItems.length/2;

            var containerWidth = 100 * rowLength/4;
            var itemWidth = 100/rowLength;

            this.$characterItems.width(itemWidth + '%');
            this.$allItemsContainer.width(containerWidth + '%');
            this.containerWidth = containerWidth;
        },
        setItemPadding: function($items) {
            "use strict";
            var rowLength = $items.length/2;

            var $firstRow = $items.slice(0, rowLength);
            var $lastRow = $items.slice(-rowLength);
            var $leftColumn = $items.filter(function(i) {
                return i % rowLength === 0;
            });
            var $rightColumn = $items.filter(function(i) {
                return i % rowLength === (rowLength - 1);
            });

            $firstRow.addClass('no-pad-top');
            $lastRow.addClass('no-pad-bottom');
            $leftColumn.addClass('no-pad-left');
            $rightColumn.addClass('no-pad-right');
        },

        onSectionBeforeActive: function(el) {
            if (el[0] !== this.el) {
                this.isActive = false;
            }
        },
        onSectionAfterActive: function(el) {
            "use strict";

            if(el[0] == this.el) {
                this.isActive = true;

                this.detectAndToggleArrows();
            }
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        resizeInterview: function(windowWidth, windowHeight) {
            if (!this.mediaLightboxView) return;

            var ratio = 480/853;
            var width = this.mediaLightboxView.$resizer.width();
            var height = this.mediaLightboxView.$resizer.height();

            var maxHeight = windowHeight * 0.85;
            var maxWidth = Math.min(windowWidth * 0.85, 1080);

            if(!height || !width)
                return;

            if(maxHeight/ratio < maxWidth) {
                this.mediaLightboxView.$resizer.width(maxHeight/ratio);

            } else {
                this.mediaLightboxView.$resizer.css('width','');
            }
        },
        onWindowResize: function() {
            var width = this.$window.width();
            var height = this.$window.height();

            this.resizeInterview(width, height);
        },
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Show/Close/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        setContainerPosition: function($item) {
            "use strict";

            var leftOffset = $item.offset().left;

            if(leftOffset >= 0 && leftOffset < this.$window.width()) return;

            var leftPosition = this.getLeftPercentage();
            var minLeft = -(this.containerWidth - 100);

            var leftRequired = Math.floor($item.position().left/this.$el.width()) * -100;

            var newLeft = Math.max(minLeft, leftRequired);

            if(leftPosition !== newLeft) {
                this.$allItemsContainer.css('left', newLeft + '%');
            }
        },

        showSubView: function(viewName, options) {
            var $item = this.$characterItems.filter(function() {
                return this.getAttribute('data-id') === viewName;
            });

            if (!$item.length)
            {
                return this.showViewRoot();
            }

            this.animationsRunning++;

            this._super(viewName, options);

            var $newSubView = this.createSubView($item);

            $item.addClass('open');

            this.setContainerPosition($item);

            // if there is already a subView open, transition between the two
            if (!!this.subView) {
                this.swapSubView($newSubView);
            } else {
                this.$activeItemContainer.addClass('open');
                $newSubView.ogEl.addClass('open');

                this.subView = $newSubView;

                this.subView.on("click", this.closeSubView.bind(this));
                this.subView.on("touchend", this.closeSubView.bind(this));

                this.positionNewSubView($newSubView);

                this.detectAndToggleArrows();
                this.animateSubViewOpen($newSubView);
            }
        },
        closeSubView: function() {
            if(!this.subView) {
                return;
            }
            this.animationsRunning++;

            this._super();

            this.detectAndToggleArrows(this.getLeftPercentage(), true);

            this.animateSubViewClosed(function() {
                this.subView.remove();
                this.subView.$content.remove();

                this.subView.ogEl.removeClass('open');
                this.$activeItemContainer.removeClass('open');

                this.subView.off("click", this.closeSubView.bind(this));
                this.subView.off("touchend", this.closeSubView.bind(this));
                delete this.subView;
            });
        },
        swapSubView : function ($newSubView) {
            $newSubView.ogEl.addClass('open');

            this.positionSubViewToSwap($newSubView);
        },

        getLeftPercentage: function() {
            "use strict";

            var leftPixels = parseInt(this.$allItemsContainer.css('left'));
            var sectionWidth = this.$el.width();

            return Math.round(100 * leftPixels/sectionWidth);
        },
        nextPage: function() {
            "use strict";
            this.animationsRunning++;

            var leftPercentage = this.getLeftPercentage();
            var minLeft = -(this.containerWidth - 100);

            // if we are all the way to the right
            if(leftPercentage === minLeft) {
                this.animationsRunning--;
                return;
            }

            var atLeastOneMorePage = Math.abs(minLeft - leftPercentage)/100 >= 1;
            var newLeft = atLeastOneMorePage ? leftPercentage - 100 : minLeft;

            this.animatePages(newLeft, leftPercentage);

            this.detectAndToggleArrows(newLeft);
        },
        prevPage: function() {
            "use strict";
            this.animationsRunning++;

            var leftPercentage = this.getLeftPercentage();

            if(leftPercentage === 0) {
                this.animationsRunning--;
                return;
            }

            var isLastPage = leftPercentage % -100 !== 0;
            var newLeft = isLastPage ? Math.floor(leftPercentage/-100) * -100 : leftPercentage + 100;

            this.animatePages(newLeft, leftPercentage);

            this.detectAndToggleArrows(newLeft);
        },


        showInterview: function(youtubeId) {
            this.animationsRunning++;
            this.mediaLightboxView = new PartialCharactersYoutubeView(
                {
                    youtubeId: youtubeId
                },
                {
                    videoReadyCallback: function(event)
                    {
                        event.target.playVideo();
                    },
                    videoFinishedCallback : this.closeInterview.bind(this)
                });

            this.$youtubeContainer
                .append(this.mediaLightboxView.render().$el)
                .addClass('open');

            this.animateInYoutubeEmbed();
        },
        closeInterview: function() {
            this.animationsRunning++;

            this.animateOutYoutubeEmbed(function() {
                this.$youtubeContainer.removeClass('open');
                this.mediaLightboxView.remove();
                delete this.mediaLightboxView;
            }.bind(this));
        },
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~ Create/Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        createSubView : function (originalView) {
            var newView = originalView.clone(false);

            newView.ogEl = originalView;
            newView.$content = newView.find('div.content-ctr');
            newView.$detail = newView.$content.find('div.detail-ctr');

            newView.$actorName = newView.$content.find('div.header-ctr h2');
            newView.$characterName = newView.$content.find('div.header-ctr h1');

            return newView;
        },
        positionNewSubView: function($newSubView) {
            var position = $newSubView.ogEl.position();

            var paddingTop = parseInt($newSubView.ogEl.css('padding-top'));
            var paddingLeft = parseInt($newSubView.ogEl.css('padding-left'));

            $newSubView.css({
                top: position.top + paddingTop + 'px',
                left: $newSubView.ogEl.offset().left + paddingLeft + 'px',
                width: $newSubView.ogEl.width(),
                height: $newSubView.ogEl.height()
            });
            $newSubView.$detail.css({
                opacity: 0,
                top: '-40px'
            });

            TweenLite.set($newSubView.$characterName, {scale: 1});

            $newSubView.$actorName.css('color','#aaa');

            this.positionSubViewContent($newSubView);

            $newSubView.$content.appendTo(this.$activeItemContainer);
            $newSubView.appendTo(this.$activeItemContainer);
        },
        positionSubViewContent: function($newSubView) {
            var $ogContent = $newSubView.ogEl.find('div.content-ctr');
            var contentOffset = $ogContent.offset();
            var position = $newSubView.attr('data-pos');

            var top = contentOffset.top - this.$activeItemContainer.offset().top;
            var left = contentOffset.left;
            var right = this.$activeItemContainer.width() - 440 - left;     //440 should not be hard coded in here

            var css = {
                top: top + 'px'
            };
            if(position === 'right')
                css.right = right + 'px';
            else
                css.left = left + 'px';

            $newSubView.$content.css(css);

            // remove from subview, this will get added to active item container
            $newSubView.$content.remove();
        },
        positionSubViewToSwap: function($newSubView, direction) {
            $newSubView.css({
                top: 0,
                left: '100%'
            });
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //

        // ======================= Animate SubView Open ===========================
        animateSubViewOpen: function($newSubView) {
            var timeline = new TimelineLite({
                paused: true,
                onComplete: function() {
                    this.animationsRunning--;
                }.bind(this)
            });

            // Static Variables
            var stageOneAnimationTime = 0.35;
            var stageTwoAnimationTime = 0.3;

            // Dependent on statics
            var stageTwoStartTime = stageOneAnimationTime * 5/6;

            timeline.add(TweenLite.to($newSubView, stageOneAnimationTime, {
                top: 0,
                left: 0,
                height: '100%',
                width: '100%',
                ease: 'Power1.easeInOut'
            }), 0);

            timeline.add(TweenLite.to($newSubView.$characterName, stageOneAnimationTime, {
                scale: 1.4,
                transformOrigin:"left top",
                ease: 'Power1.easeInOut'
            }), 0);
            timeline.add(TweenLite.to($newSubView.$actorName, stageOneAnimationTime, {
                color: '#fff'
            }), 0);

            timeline.add(TweenLite.to($newSubView.$detail, stageTwoAnimationTime, {
                top: 0,
                opacity: 1,
                ease: 'Power2.easeInOut'
            }), stageTwoStartTime);

            this.addAnimationContentPosition(timeline, $newSubView, stageOneAnimationTime, $newSubView.attr('data-pos'));

            timeline.play();
        },
        addAnimationContentPosition: function(timeline, $newSubView, animationTime, screenPosition) {
            var contentPosition = this.contentPositions[screenPosition];

            var attrs = {
                top: contentPosition.top,
                ease: 'Power1.easeInOut'
            };
            if(screenPosition === 'right') {
                attrs.right = contentPosition.right;
            } else {
                attrs.left = contentPosition.left;
            }

            timeline.add(TweenLite.to($newSubView.$content, animationTime, attrs), 0);
        },

        // ====================== Animate SubView Closed ==========================
        animateSubViewClosed: function(callback) {
            var timeline = new TimelineLite({
                paused: true,
                onComplete: function() {
                    this.animationsRunning--;

                    if(typeof callback === 'function')
                        callback.bind(this)();
                }.bind(this)
            });

            var stageOneAnimationTime = 0.35;

            var position = this.subView.ogEl.position();
            var width = this.subView.ogEl.width();
            var height = this.subView.ogEl.height();
            var top = position.top + parseInt(this.subView.ogEl.css('padding-top'));
            var left = this.subView.ogEl.offset().left + parseInt(this.subView.ogEl.css('padding-left'));

            timeline.add(TweenLite.to(this.subView, stageOneAnimationTime, {
                top: top,
                left: left,
                width: width,
                height: height,
                ease: 'Power1.easeInOut'
            }), 0);

            timeline.add(TweenLite.to(this.subView.$characterName, stageOneAnimationTime, {
                scale: 1,
                transformOrigin:"left top",
                ease: 'Power1.easeInOut'
            }), 0);
            timeline.add(TweenLite.to(this.subView.$actorName, stageOneAnimationTime, {
                color: '#aaa'
            }), 0);

            timeline.add(TweenLite.to(this.subView.$detail, stageOneAnimationTime/2, {
                opacity: 0,
                ease: 'Power2.easeInOut'
            }), 0);


            var $ogContent = this.subView.ogEl.find('div.content-ctr');
            var contentOffset = $ogContent.offset();

            var contentTop = contentOffset.top - this.$activeItemContainer.offset().top;
            var contentLeft = contentOffset.left;

            timeline.add(TweenLite.to(this.subView.$content, stageOneAnimationTime, {
                top: contentTop,
                left: contentLeft,
                ease: 'Power1.easeInOut'
            }), 0);

            timeline.play();
        },

        // ========================= Animate Pages =============================
        animatePages: function(newLeft, leftPercentage) {
            var animationTimeRatio = Math.abs((newLeft - leftPercentage)/100);
            var animationTime = 0.4 * animationTimeRatio;

            TweenLite.to(this.$allItemsContainer, animationTime, {
                left: newLeft + '%',
                onComplete: function() {
                    this.animationsRunning--;
                },
                onCompleteScope: this
            });
        },

        // ===================== Animate In Youtube Embed ========================
        animateInYoutubeEmbed: function() {
            this.mediaLightboxView.show(0.3, function()
            {
                this.animationsRunning--;
            }.bind(this));
        },
        animateOutYoutubeEmbed: function(callback) {
            this.mediaLightboxView.hide(0.3, function()
            {
                this.animationsRunning--;

                if(typeof callback === 'function')
                {
                    callback();
                }
            }.bind(this));
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        detectAndToggleArrows: function(left, subViewOverride) {
            "use strict";

            if(this.subView && !subViewOverride) {
                this.turnOffArrows();
                return;
            }

            if(_.isUndefined(left)) left = this.getLeftPercentage();

            var minLeft = -(this.containerWidth - 100);

            this.$leftArrow.toggleClass('active', left !== 0);
            this.$rightArrow.toggleClass('active', left !== minLeft);
        },
        turnOffArrows: function() {
            this.$leftArrow.removeClass('active');
            this.$rightArrow.removeClass('active');
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Section activate/deactivate ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        cleanup: function() {
            this._super();
            this.turnOffArrows();
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.subView.ogEl.index();
            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;

            var socialShare = this.model.characters[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    picture: socialShare.picture,
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        },
        onClickInterview: function(e) {
            if(!this.animationsRunning && !!this.subView) {
                var youtubeId = e.currentTarget.getAttribute('data-youtube-id');
                Omniture.onVideoPlay({mediaTitle: this.subView.data('id')});
                this.showInterview(youtubeId);
            }
        },
        onCloseInterview: function(e) {
            if(!this.animationsRunning && !!this.subView) {
                this.closeInterview();
            }
        },
        onChooseCharacter: function(e) {
            var viewName = e.currentTarget.getAttribute('data-id');

            if(!this.animationsRunning && !this.subView && viewName !== '0') {
                this.showSubView(viewName);
            }
        },
        onClose: function (e) {
            if(!this.animationsRunning && !!this.subView) {
                this.closeSubView();
            }
        },
        onNext: function(e) {
            if(!this.animationsRunning) {
                if(!this.subView) {
                    this.nextPage();
                } else {

                }
            }
        },
        onPrev: function(e) {
            if(!this.animationsRunning) {
                if(!this.subView) {
                    this.prevPage();
                } else {

                }
            }
        },

        onRightArrowKey: function() {
            "use strict";

            if(this.isActive) {
                this.onNext();
            }
        },
        onLeftArrowKey: function() {
            "use strict";

            if(this.isActive) {
                this.onPrev();
            }
        }
    });

module.exports = CharactersView;

},{"../../../templates/sections/characters.hbs":58,"../../services/Omniture.js":15,"../../services/Social.js":16,"../View.js":23,"../sections/partials/characters/youtube.js":44}],27:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/fight.hbs");

var Omniture = require("../../services/Omniture.js");
var Social = require("../../services/Social.js");

var FightView = View.extend(
    {
        events :
        {
            'click .partners-btn': 'showPartnersResources',
            'click .data-btn': 'showDataVisualization',
            'click .arrow': 'onPrevNextDataPoint',
            'click .close': 'closeSubView',
            'click .info-ctr > a': 'onPartnerClick',
            'click div.social-ctr > img': 'onClickSocial',
            'click .know_status': 'onPartnerClick'
        },
        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
        },

        setup : function ()
        {
            this._super();

            this.bgVid = this.$('video');
            this.bgImg = this.$('.videoImage');
            this.bgVid.on("ended", this.onVideoComplete.bind(this));
            this.isVideoComplete = false;

            this.$dataPoints = this.$el.find('div.data-point');

            var me = this;
            this.$dataPoints.each(function(index)
            {
                var seq = $(this).find(".chartSequence");

                if(seq.length != 0)
                {
                    seq.attr('src', window.cdn+me.model.dataPoints[index].chartSequence[0]);
                }
            });

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            return this._super();
        },

        handleRoute: function(subsection, detail)
        {
            if(this.isVideoComplete == false)
            {
                this.bgVid[0].play();
            }

            this._super(subsection, detail);
        },

        showSubView : function (viewName, options)
        {
            this._super(viewName, options);

            if (viewName == 'data')
            {
                var dv = $('.data-visualization-ctr');
                this.subView = dv;
                var mask = $('.mask');
                var tl = new TimelineLite();
                this.isAnimating = true;
                var me = this;

                var activeDP = dv.find("div.data-point.active");
                var seq = activeDP.find(".chartSequence");

                if(seq.length > 0)
                {
                    seq.attr('src', window.cdn+me.model.dataPoints[activeDP.index()].chartSequence[0]);
                }
                tl.to(dv, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                })
                .to(dv, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.showOrHideArrow();
                    }
                })
                .to(mask, 0, {
                    className: '+=active',
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.isAnimating = false;
                        dv.addClass('active');
                        me.showOrHideArrow();

                        if(seq.length > 0)
                        {
                            requestAnimationFrame(me.configAnimForDataPoint(activeDP, me));
                        }
                    }
                });
            }
            if (viewName == 'partners-resources')
            {
                var pr = $('.partners-resources-ctr');
                this.subView = pr;
                var me = this;
                var tl = new TimelineLite();
                tl.to(pr, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                }).to(pr, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut,
                    onComplete: function() {
                        pr.addClass('active');
                        me.showOrHideArrow();
                    }
                });
            }
        },

        closeSubView: function()
        {
            if(!this.subView)
            {
                return;
            }

            this._super();

            var tl = new TimelineLite();
            var sub = this.subView;
            var mask = $('.mask');
            var me = this;
            tl.to(mask, 0, {
                className: '-=active',
                ease: Power1.easeOut
            })
            .to(sub, 0.25, {
                css: {
                    left: function() {
                        if(sub.hasClass('data-visualization-ctr')) {
                            return '-100%';
                        } else if(sub.hasClass('partners-resources-ctr')) {
                            return '100%';
                        }
                    }()
                },
                onComplete: function() {
                    this.subView = null;
                    sub.removeClass('active');
                    me.showOrHideArrow();
                },
                ease: Power1.easeOut
            });
        },

        onSectionActivate: function(el)
        {
            if(el[0] == this.el)
            {
                this.onWindowResize();
            }
        },

        showPartnersResources : function ()
        {
            this.showSubView('partners-resources');
        },

        showDataVisualization : function ()
        {
            this.showSubView('data');
        },

        togglePartnersResourcesContent : function () {
            var pc = $('.pr-ctr.partners-ctr');
            var rc = $('.pr-ctr.resources-ctr');

            if($('.partners-ctr').hasClass('active')) {
                var prActive = pc;
                var prInactive = rc;
            } else if($('.resources-ctr').hasClass('active')) {
                var prActive = rc;
                var prInactive = pc;
            }

            var me = this;
            this.isAnimating = true;

            var tl = new TimelineLite();
            tl.to(prActive, 0.25, {
                css: {
                    opacity: 0
                },
                ease: Power1.easeOut
            })
            .to(prActive, 0, {
                css: {
                    display: 'none'
                },
                ease: Power1.easeOut
            })
            .set(prActive, {
                className: '-=active'
            })
            .to(prInactive, 0, {
                css: {
                    display: 'block'
                },
                ease: Power1.easeOut
            })
            .set(prInactive, {
                className: '+=active'
            })
            .to(prInactive, 0.25, {
                css: {
                    opacity: 1
                },
                onComplete: function() {
                    me.isAnimating = false;
                    me.showOrHideArrow();
                },
                ease: Power1.easeOut
            });
        },

        onPrevNextDataPoint : function(e)
        {
            if(this.isAnimating == true) {
                return;
            }
            if($('.partners-resources-ctr').hasClass('active')) {
                this.togglePartnersResourcesContent();
                return;
            }

            var target = $(e.target);
            var cur = $('.data-point.active');
            var me = this;

            //Next
            var next = cur.next();

            var direction = 'right';
            if(cur.index('.data-point') == $('.data-point').length-1) {
                next = $('.data-point').first();
            }
            if(target.hasClass('arrow-left')) {
                //Prev
                next = cur.prev();
                direction = 'left';
                if(cur.index('.data-point') == 0) {
                    next = $('.data-point').last();
                }
            }

            var tl = new TimelineLite();
            this.isAnimating = true;
            tl.to(next, 0, {
                className: '+=active',
                ease: Power1.easeOut
            })
            .to(next, 0, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '100%';
                        } else {
                            return '-100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            })
            .to(cur, 0.5, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '-100%';
                        } else {
                            return '100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(next, 0.5, {
                css: {
                    left: '0'
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(cur, 0, {
                className: '-=active',
                ease: Power1.easeOut,
                onComplete: function() {
                    me.showOrHideArrow();
                    me.isAnimating = false;

                    var seq = next.find(".chartSequence");

                    if(seq.length > 0)
                    {
                        requestAnimationFrame(me.configAnimForDataPoint(next, me));
                    }

                    seq = cur.find(".chartSequence");

                    if(seq.length > 0)
                    {
                        seq.attr('src', window.cdn+me.model.dataPoints[cur.index()].chartSequence[0]);
                    }
                }
            });
        },

        configAnimForDataPoint: function(dp, me)
        {
            var seq = dp.find(".chartSequence");

            if(seq.length > 0)
            {
                var index = dp.index();

                var fps          = 30,
                currentFrame = 0,
                totalFrames  = me.model.dataPoints[index].chartSequence.length-1,
                img          = seq,
                currentTime  = window.performance.now()
                finished = false;

                function animloop(time)
                {
                  var delta = (time - currentTime) / 1000;

                  currentFrame += (delta * fps);

                  var frameNum = Math.floor(currentFrame);

                  if (frameNum >= totalFrames) {
                    finished = true;
                    currentFrame = frameNum = totalFrames;
                  }

                  if(!finished)
                  {
                      requestAnimationFrame(animloop);

                      img.attr('src', window.cdn+me.model.dataPoints[index].chartSequence[frameNum]);

                      currentTime = time;
                  }
                }
            }

            return animloop.bind(me);
        },

        showOrHideArrow: function() {
            if($('.data-visualization-ctr').hasClass('active')) {
                if($('.data-point.active').index('.data-point') == $('.data-point').length-1) {
                    //Last slide
                    $('.arrow-right').hide();
                    $('.arrow-left').show();
                } else if($('.data-point.active').index('.data-point') == 0) {
                    //First slide
                    $('.arrow-right').show();
                    $('.arrow-left').hide();
                } else {
                    //Middle slide
                    $('.arrow-right').show();
                    $('.arrow-left').show();
                }
            } else if($('.partners-resources-ctr').hasClass('active')) {
                if($('.partners-ctr').hasClass('active')) {
                    $('.arrow-right').show();
                    $('.arrow-left').hide();
                } else if($('.resources-ctr').hasClass('active')) {
                    $('.arrow-right').hide();
                    $('.arrow-left').show();
                }
            } else {
                $('.arrow-right').hide();
                $('.arrow-left').hide();
            }
        },

        onVideoComplete: function(e)
        {
            this.isVideoComplete = true;
            this.onWindowResize();
        },

        onPartnerClick: function(e)
        {
            Omniture.onPartnerLink({URL: e.currentTarget.href});
        },

        onWindowResize: function(e)
        {
            var winW = $(window).width();
            var winH = $(window).height();


            this.bgVid.css("width", "auto");
            this.bgVid.css("height", winH);


            // center the video
            this.bgVid.css("left", (winW/2 - (this.bgVid.width() / 2)) + "px");
            this.bgVid.css("top", (winH/2 - (this.bgVid.height() / 2)) + "px");
           // this.bgImg.css("left", (halfWinW-(this.bgImg.width()/2))+"px");
           // this.bgImg.css("top", (halfWinH-(this.bgImg.height()/2))+"px");
        },
        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.$dataPoints.filter('.active').index('.data-point');
            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;

            var socialShare = this.model.dataPoints[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    picture: socialShare.image,
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        }
    });

module.exports = FightView;

},{"../../../templates/sections/fight.hbs":59,"../../services/Omniture.js":15,"../../services/Social.js":16,"../View.js":23}],28:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/footer.hbs");
var HelperFuncs = require("../helpers/Helpers.js");

var FooterView = View.extend(
    {
        //****************************** Initialization Stuff ******************************
        events :
        {

        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
        },

        setup : function ()
        {
            this._super();
        },

        render : function ()
        {
            return this._super();
        }
    });

module.exports = FooterView;

},{"../../../templates/sections/footer.hbs":60,"../View.js":23,"../helpers/Helpers.js":24}],29:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/home.hbs");
var ScrollBarView = require("../ScrollBarView.js");
var HelperFuncs = require("../helpers/Helpers.js");

var HomeView = View.extend(
{
    events:
    {
        "click .scroll-down" : "onScrollButtonClicked",
        "touchend .scroll-down" : "onScrollButtonClicked",
        "click button.trailer" : "onPlayTrailer",
        "touchend button.trailer" : "onPlayTrailer",
        "click .hbo-films" : "onHBOFilms",
        "touchend .hbo-films" : "onHBOFilms",
        "click .news" : "onNews",
        "touchend .news" : "onNews",
        "click .overlay" : "onClose",
        "touchend .overlay" : "onClose",
        "click .modal .close" : "onClose",
        "touchend .modal .close" : "onClose",
        "click .overflow-container" : "onPreventDefault",
        "touchend .overflow-container" : "onPreventDefault"
    },

    initialize: function(options)
    {
      this._super(options);
      this.template = template;

      Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
    },

    setup: function()
    {
        this.scrollbarview = new ScrollBarView(
            {
                viewName            : 'content-ctr',
                container           : this.$el.find('.content-ctr'),
                animateScrollHandle : false,
                animateOpacity      : false
            }
        );

        var self = this;

        // recalculate the offset after the animation finishes because its position will have changed.
        this.scrollbarview.container.on('scroll', function()
        {
            Backbone.Notifications.trigger('content-ctr.Section.FinalPosition',
            {
                percent : (this.scrollTop / (HelperFuncs.Element.contentHeight(this) - this.offsetHeight + ( self.scrollbarview.handle.clientHeight / 2 ) )) * 100
            });
        });

        // This will scroll the container after the thumb is dragged up or down
        Backbone.Notifications.on(
            'content-ctr.ScrollBar.UpdatePosition',
            this.updateScrolling.bind(this.scrollbarview, this.scrollbarview.container),
            this
        );
    },

    updateScrolling: function(container, e)
    {
        var percent = e.percent/100;
        container.scrollTop( ( ( HelperFuncs.Element.contentHeight(container[0] ) - container.outerHeight(true) + (this.handle.clientHeight / 2)) * percent) );
    },

    render: function()
    {
      this._super();

      this.$el.find('.content-ctr').append(this.scrollbarview.render(false).el);

      return this;
    },

    initRouter: function(root)
    {
        this._super(root);
        App.router.route("", "homeRoute");
    },

    handleRoute: function(subsection, detail)
    {
      this._super(subsection, detail);

      this.onSectionActivate(this.$el);
    },

    onSectionActivate: function(el)
    {
        if(el == this.$el)
        {
            var bb = $('.billing-block');
            var lu = $('.lock-up');
            var pc = $('.premiere-ctr')
            var tl = new TimelineLite();
            tl.to(bb, 2, {
                css: {
                    opacity: 1,
                    top: 0
                },
                ease: Power1.easeOut
            }, '-=0.5')
            .to([lu, pc], 2, {
                css: {
                    opacity: 1
                },
                ease: Power1.easeOut
            }, '-=0.5');
        }
        else
        {
            if (this.subView)
            {
                this.onClose();
            }
        }
    },

    onScrollButtonClicked: function(e)
    {
        Backbone.history.navigate("/to-win-a-war", true);
    },

    onPlayTrailer: function(e)
    {
        Backbone.history.navigate("/media/trailer/", true);
    },

    onHBOFilms: function(e)
    {
        window.open("http://www.hbo.com/movies/the-normal-heart?icid=ABC1516");
    },

    onNews: function(e)
    {
        var self = this;
        var ol = $('.overlay');
        var md = $('.modal');

        this.subView = md;

        var tl = new TimelineLite();
        tl.to([ol, md], 0, {
            css: {
                display: 'block'
            },
            onComplete: function()
            {
                self.scrollbarview.setScrollbarVisibility.call(self.scrollbarview);
                self.scrollbarview.calculateOffset(true);
            }
        }).to([ol, md], .5, {
            className: '+=active',
            ease: Power1.easeOut,
            onComplete: function()
            {
                self.scrollbarview.setScrollbarVisibility.call(self.scrollbarview);
                self.scrollbarview.calculateOffset(true);
            }
        });

        Backbone.Notifications.trigger("SubView.Opened");
    },

    onClose: function(e)
    {
        var ol = $('.overlay');
        var md = $('.modal');

        var tl = new TimelineLite();
        tl.to([ol, md], .5, {
            className: '-=active',
            ease: Power1.easeOut
        }).to([ol, md], 0, {
            css: {
                display: 'none'
            },
            onComplete: function() {
                this.subView = null;
            }
        });

        Backbone.Notifications.trigger("SubView.Closed");
    },

    onPreventDefault: function(e)
    {
        e.preventDefault();
        e.stopPropagation();
        console.log("preventing propagation please");
    }
});


module.exports = HomeView;

},{"../../../templates/sections/home.hbs":61,"../ScrollBarView.js":21,"../View.js":23,"../helpers/Helpers.js":24}],30:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/intro.hbs");
var HelperFuncs = require("../helpers/Helpers.js");

var IntroView = View.extend(
    {
        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            this.currentLocation = 0;
            this.currentMousePos = null;

            this.images = [];

            var imgList = this.model[HelperFuncs.Device.currentDevice()];

            for (var i = 0; i < imgList.length; i++)
            {
                var img = new Image();
                img.src = window.cdn+imgList[i];
                this.images.push(img);
            }

            //Backbone.Notifications.on('window.mousemove', this.onMouseMove, this);
            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on("document.scroll", this.onDocumentScrolled, this);
        },

        setup : function ()
        {
            this.canvas = this.$('.intro-canvas');
            this.context = this.canvas[0].getContext('2d');

            this.onWindowResize();
        },

        render : function ()
        {
            return this._super();
        },

        onWindowResize : function (e)
        {
            this.canvas.attr("width", $(window).width());
            this.canvas.attr("height", $(window).height());

            this.onDocumentScrolled();
        },

        /**
         * drawImageProp By Ken Fyrstenberg (http://easycanvasjs.com/)
         */
        drawImageProp : function (ctx, img, x, y, w, h, offsetX, offsetY)
        {

            if (arguments.length === 2)
            {
                x = y = 0;
                w = ctx.canvas.width;
                h = ctx.canvas.height;
            }

            /// default offset is center
            offsetX = offsetX ? offsetX : 0.5;
            offsetY = offsetY ? offsetY : 0.5;

            /// keep bounds [0.0, 1.0]
            if (offsetX < 0)
            {
                offsetX = 0;
            }
            if (offsetY < 0)
            {
                offsetY = 0;
            }
            if (offsetX > 1)
            {
                offsetX = 1;
            }
            if (offsetY > 1)
            {
                offsetY = 1;
            }

            var iw = img.width,
                ih = img.height,
                r = Math.min(w / iw, h / ih),
                nw = iw * r,   /// new prop. width
                nh = ih * r,   /// new prop. height
                cx, cy, cw, ch, ar = 1;

            /// decide which gap to fill
            if (nw < w)
            {
                ar = w / nw;
            }
            if (nh < h)
            {
                ar = h / nh;
            }
            nw *= ar;
            nh *= ar;

            /// calc source rectangle
            cw = iw / (nw / w);
            ch = ih / (nh / h);

            cx = (iw - cw) * offsetX;
            cy = (ih - ch) * offsetY;

            /// make sure source rectangle is valid
            if (cx < 0)
            {
                cx = 0;
            }
            if (cy < 0)
            {
                cy = 0;
            }
            if (cw > iw)
            {
                cw = iw;
            }
            if (ch > ih)
            {
                ch = ih;
            }

            /// fill image in dest. rectangle
            ctx.drawImage(img, cx, cy, cw, ch, x, y, w, h);
        },

        onDocumentScrolled: function (e)
        {
            // determine percentage of view's location
            var curScrollPos = $(window).height() - Math.abs(HelperFuncs.posTop() - this.$el.offset().top);

            this.currentLocation = Math.floor(((this.images.length - 1) / $(window).height()) * curScrollPos);

            if (this.images[this.currentLocation])
            {
                this.drawImageProp(this.context, this.images[this.currentLocation]);
            }
        },

        onMouseMove : function (e)
        {
            this.currentMousePos = e.yPos;
            this.currentLocation = Math.floor((this.images.length / $(window).height()) * this.currentMousePos);
            this.drawImageProp(this.context, this.images[this.currentLocation]);
            // console.log(this.images[this.currentLocation]);
        }
    });

module.exports = IntroView;

},{"../../../templates/sections/intro.hbs":62,"../View.js":23,"../helpers/Helpers.js":24}],31:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/media.hbs");
var Omniture = require("../../services/Omniture.js");
var Social = require("../../services/Social.js");

var PartialMediaYoutubeView = require('./partials/media/youtube.js');

var MediaView = View.extend(
{
    //****************************** Initialization Stuff ******************************
    events:
    {
        'click .media-item': 'onChoose',
        'click button.close': 'onClose',
        'click .arrow-right': 'onNext',
        'click .arrow-left': 'onPrev',
        'click div.social > a': 'onClickSocial'
    },

    initialize: function(options)
    {
      this._super(options);
      this.template = template;

      this.detailViews = {
        "video": PartialMediaYoutubeView,
        "gallery": require("./partials/GalleryDetailView.js")
      };

      Backbone.Notifications.on("window.resize", this.onWindowResize, this);

        Backbone.Notifications.on('section.beforeActive', _.throttle(this.onSectionBeforeActive, 1000, {trailing: false}), this);
        Backbone.Notifications.on('section.afterActive', _.throttle(this.onSectionAfterActive, 1000, {trailing: false}), this);
    },

    setup: function() {
        this.initJqueryVariables();
        this.onWindowResize();

        this.initSocialFunctions();

        this.initItemSize();

        this.setItemPadding(this.$mediaItems);
    },


    onSectionBeforeActive: function(el) {
        if (el[0] !== this.el) {
            this.isActive = false;
        }
    },
    onSectionAfterActive: function(el) {
        "use strict";

        if(el[0] == this.el) {
            this.isActive = true;

            this.detectAndToggleArrows();
        }
    },

    render: function()
    {
      return this._super();
    },

    initJqueryVariables: function()
    {
        this.$mediaContainer = this.$el.find('div.media-ctr');
        this.$activeItemContainer = this.$el.find('div.active-item-container');

        this.$mediaItems = this.$mediaContainer.find('.media-item');

        this.$leftArrow = this.$el.find('div.arrow.arrow-left');
        this.$rightArrow = this.$el.find('div.arrow.arrow-right');

        this.$window = $(window);
    },
    initSocialFunctions: function() {
        this.social = {};

        this.social.facebook = _.bind(Social.ShareFacebook, Social);
        this.social.twitter = _.bind(Social.ShareTwitter, Social);
        this.social.tumblr = _.bind(Social.ShareTumblr, Social);
    },
    initItemSize: function() {
        "use strict";

        var rowLength = this.$mediaItems.length/3;

        var containerWidth = 100 * rowLength/4;
        var itemWidth = 100/rowLength;

        this.$mediaContainer.css('width', containerWidth  + '%');
        this.$mediaItems.css('width', itemWidth + '%');

        this.mediaContainerWidth = containerWidth;
    },

    setItemPadding: function($items) {
        "use strict";
        var rowLength = $items.length/3;

        var $firstRow = $items.slice(0, rowLength);
        var $lastRow = $items.slice(-rowLength);
        var $leftColumn = $items.filter(function(i) {
            return i % rowLength === 0;
        });
        var $rightColumn = $items.filter(function(i) {
            return i % rowLength === (rowLength - 1);
        });

        $firstRow.addClass('no-pad-top');
        $lastRow.addClass('no-pad-bottom');
        $leftColumn.addClass('no-pad-left');
        $rightColumn.addClass('no-pad-right');
    },

    handleRoute: function(subsection, detail)
    {
        // since we aren't calling super here, we need this omniture call
        var sub = "";
        if(subsection)
        {
            sub = ": "+subsection;
        }

        Omniture.onPageLoad({pageName: this.base+sub});

        if(subsection)
        {
            this.showSubView(subsection, detail);
        }
        else
        {
            if(this.subView)
            {
                this.closeSubView();
                // this return makes all the difference for the image gallery functionality
                return;
            }
        }

        if(this.isActive == false)
        {
            Backbone.Notifications.trigger("Section.RequestActive", this.base);
        }
    },

    //****************************** Window Resize Functions ******************************
    resizeInterview: function(windowWidth, windowHeight) {
        if(this.subView.data('type') !== 'video') return;

        var ratio = 480/853;

        var maxHeight = Math.min(windowHeight * 0.85, windowHeight - 100);
        var maxWidth = Math.min(windowWidth * 0.85, 1080);

        if(maxHeight/ratio < maxWidth) {
            this.subView.container.width(maxHeight/ratio);
        } else {
            this.subView.container.css('width','');
        }
    },
    onWindowResize: function() {
        var width = this.$window.width();
        var height = this.$window.height();

        if(this.subView) {
            this.resizeInterview(width, height);
        }
    },

    //****************************** Change View Functions ******************************
    setContainerPosition: function($item) {
        "use strict";

        var leftOffset = $item.offset().left;
        if(leftOffset >= 0 && leftOffset < this.$window.width()) return;

        var leftPosition = this.getLeftPercentage();
        var minLeft = -(this.mediaContainerWidth - 100);

        var leftRequired = Math.floor($item.position().left/this.$el.width()) * -100;

        var newLeft = Math.max(minLeft, leftRequired);

        if(leftPosition !== newLeft) {
            this.$mediaContainer.css('left', newLeft + '%');
        }
    },

    showSubView: function(viewName, options)
    {
        this._super(viewName, options);

        var mediaEl = this.$mediaItems.filter(function()
        {
            return this.getAttribute('data-id') === viewName;
        });

        if(mediaEl.length == 0)
        {
            return;
        }

        this.setContainerPosition(mediaEl);

        // if there is already a subView open, transition between the two
        if(this.subView)
        {
            this.swapSubView(mediaEl, options);

            return;
        }

        this.subView = this.createSubView(mediaEl, options);

        var $bg = this.subView.find('div.background');

        if (Modernizr.touch)
        {
            $bg.one("tap", this.closeSubView.bind(this));
        }
        else
        {
            $bg.one("click", this.closeSubView.bind(this));
        }

        this.subView.addClass('media-item-subview');

        var container = this.subView.find('.content-ctr');

        this.subView.css({
            position: 'absolute',
            top: mediaEl.position().top+'px',
            left: mediaEl.offset().left+'px',
            height: mediaEl.height(),
            width: mediaEl.width()
        });

        this.subView.appendTo(this.$activeItemContainer);

        if(this.subView.data('type') == "video")
        {
            this.onWindowResize();
            Omniture.onVideoPlay({mediaTitle: this.subView.data('id')});
        }

        this.subView.detailView.show(0.25, this.subView,
            {
                css:
                {
                    className : '+=active',
                    top       : 0,
                    left      : 0,
                    height: '100%',
                    width: '100%'
                }
            },
            function()
            {
                    TweenLite.to(container, 0.5, {css:{className:'+=active'}});
            }.bind(this)
        );

        this.turnOffArrows();
    },

    closeSubView: function()
    {
        if(!this.subView)
        {
            return;
        }

        this._super();

        var mediaEl = this.subView;
        var me = this;

        var ogEl = mediaEl.ogEl;

        mediaEl.find('.content-ctr').removeClass('active');

        var padLeft = parseInt(ogEl.css('padding-left'));
        var padTop = parseInt(ogEl.css('padding-top'));

        mediaEl.detailView.hide(0.25, mediaEl,
            {
                top    : ogEl.position().top + padTop,
                left   : ogEl.offset().left + padLeft,
                width  : ogEl.width(),
                height : ogEl.height()
            },
            function()
            {
                me.subView.detailView.remove();
                me.subView.remove();
                me.subView.detailView = null;
                me.subView = null;
            }
        );

        this.detectAndToggleArrows(this.getLeftPercentage(), true);
    },

    swapSubView: function(newView, options)
    {
        if(this.subView.data('id') == newView.data('id'))
        {
            if(this.subView.find(".content-ctr").data("type") == "gallery")
            {
                this.subView.detailView.showItem(options);
            }
            return;
        }

        var newSubView = this.createSubView(newView, options);

        var windowWidth = $(window).width();

        // animate new view in from left or right
        var newLeft = (this.subView.ogEl.index() > newSubView.ogEl.index()) ? -windowWidth: windowWidth;

        newSubView.addClass('active media-item-subview');
        newSubView.find('.content-ctr').addClass('active');

        newSubView.css({'position' : 'absolute', 'top' : '0px', 'left': newLeft+'px'});

        newSubView.appendTo(".media-ctr");

        TweenLite.to(newSubView, 0.5, {
            left: 0,
            onComplete: function() {
               // kill old subview and assign this.subview to newSubView
                this.subView.remove();
                this.subView.detailView = null;
                this.subView = null;
                this.subView = newSubView;
            }.bind(this)
        });
    },

    createSubView: function(originalView, options)
    {
        var newView = originalView.clone(false);

        var mediaData = this.model.items[originalView.index()];

        var container = newView.find('.content-ctr');

        var mediaType = mediaData.type;

        // create the new detail view and add it to our subView's container
        newView.detailView = new this.detailViews[mediaType](
        {
            model : mediaData
        },
        {
            videoReadyCallback: function(event)
            {
                event.target.playVideo();
            },
            videoFinishedCallback : this.closeSubView.bind(this)
        });
        newView.detailView.render().$el.appendTo(container);
        newView.data('type', mediaType);

        newView.ogEl = originalView;
        newView.container = container;

        if(mediaData.images)
        {
            newView.detailView.showItem(options);
        }
        return newView;
    },
    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow/pagination Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    getLeftPercentage: function() {
        "use strict";

        var leftPixels = parseInt(this.$mediaContainer.css('left'));
        var sectionWidth = this.$el.width();

        return Math.round(100 * leftPixels/sectionWidth);
    },
    nextPage: function() {
        "use strict";

        var leftPercentage = this.getLeftPercentage();
        var minLeft = -(this.mediaContainerWidth - 100);

        // if we are all the way to the right
        if(leftPercentage === minLeft) {
            this.isAnimating = false;
            return;
        }

        var atLeastOneMorePage = Math.abs(minLeft - leftPercentage)/100 >= 1;
        var newLeft = atLeastOneMorePage ? leftPercentage - 100 : minLeft;

        this.animatePages(newLeft, leftPercentage);

        this.detectAndToggleArrows(newLeft);
    },
    prevPage: function() {
        "use strict";

        var leftPercentage = this.getLeftPercentage();

        if(leftPercentage === 0) {
            this.isAnimating = false;
            return;
        }

        var isLastPage = leftPercentage % -100 !== 0;
        var newLeft = isLastPage ? Math.floor(leftPercentage/-100) * -100 : leftPercentage + 100;

        this.animatePages(newLeft, leftPercentage);

        this.detectAndToggleArrows(newLeft);
    },

    // ========================= Animate Pages =============================
    animatePages: function(newLeft, leftPercentage) {
        var animationTimeRatio = Math.abs((newLeft - leftPercentage)/100);
        var animationTime = 0.4 * animationTimeRatio;

        TweenLite.to(this.$mediaContainer, animationTime, {
            left: newLeft + '%',
            onComplete: function() {
                this.isAnimating = false;
            },
            onCompleteScope: this
        });
    },


    detectAndToggleArrows: function(left, subViewOverride) {
        "use strict";

        if(this.subView && !subViewOverride) {
            this.turnOffArrows();
            return;
        }

        if(_.isUndefined(left)) left = this.getLeftPercentage();

        var minLeft = -(this.mediaContainerWidth - 100);

        this.$leftArrow.toggleClass('active', left !== 0);
        this.$rightArrow.toggleClass('active', left !== minLeft);
    },
    turnOffArrows: function() {
        "use strict";

        this.$leftArrow.removeClass('active');
        this.$rightArrow.removeClass('active');
    },


    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    onNext: function(e) {
        e.preventDefault();

        if(this.subView || this.isAnimating) return;

        this.isAnimating = true;

        this.nextPage();
    },

    onPrev: function(e) {
        e.preventDefault();

        if(this.subView || this.isAnimating) return;

        this.isAnimating = true;

        this.prevPage();
    },

    onChoose: function(e)
    {
        if($(e.currentTarget).index() == 0)
        {
            return;
        }

        if(this.subView)
        {
            return;
        }

        var mediaEl = $(e.currentTarget);
        this.showSubView(mediaEl.attr("data-id"));
    },

    onClose: function(e)
    {
        this.closeSubView();
    },
    onClickSocial: function(e) {
        e.preventDefault();

        var itemIndex = this.subView.ogEl.index();

        var type = e.currentTarget.getAttribute('data-share');

        var link = document.URL;

        var itemData = this.model.items[itemIndex];

        var socialShare;

        if(itemData.type != "gallery")
        {
            socialShare = itemData.socialShare[type];
        }
        else
        {
            socialShare = itemData.images[this.subView.detailView.itemName].socialShare[type]
        }

        if(typeof this.social[type] === 'function' && socialShare) {

            this.social[type]({
                title: socialShare.title,
                description: socialShare.copy,
                link: link
            });
        }
    }
});

module.exports = MediaView;

},{"../../../templates/sections/media.hbs":63,"../../services/Omniture.js":15,"../../services/Social.js":16,"../View.js":23,"./partials/GalleryDetailView.js":42,"./partials/media/youtube.js":45}],32:[function(require,module,exports){
var View = require("../View.js");
var template = require("../../../templates/sections/story.hbs");
var ScrollBarView = require("../ScrollBarView.js");
var HelperFuncs = require("../helpers/Helpers.js");

var Social = require("../../services/Social.js");

var StoryView = View.extend(
    {
        events : {
            "click .read-more"          : "onReadMoreClicked",
            "touchend .read-more"       : "onReadMoreClicked",
            "click .bio-link-murphy"    : "onMurphyClicked",
            "touchend .bio-link-murphy" : "onMurphyClicked",
            "click .bio-link-kramer"    : "onKramerClicked",
            "touchend .bio-link-kramer" : "onKramerClicked",
            "click .close"              : "closeSubView",

            'click div.social > a': 'onClickSocial',
            'touchend div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
            this.readMore = false;

            this.isVideoComplete = false;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
        },

        setup : function ()
        {
            var self = this, pages, index;

            pages = ['mainCopy', 'ryan-murphy', 'larry-kramer'];

            this["ryan-murphy"] = this.$('.bio-murphy');
            this["larry-kramer"] = this.$('.bio-kramer');

            this.story = this.$('.story');

            this.moreCopyParagraphs = this.story.find('.more');

            this.murphyPages = this.$('.bio-page.murphy').children();

            this.bgVid = this.$('video');
            this.bgImg = this.$('.videoImage');

            if (!HelperFuncs.Device.isMobile())
            {
                // We have to run this code for both bios in the story section
                // To avoid duplicating, just loop on an array of the bio names
                for(index in pages)
                {
                    if (!pages.hasOwnProperty(index)) continue;

                    (function(page)
                    {
                        this[page + '-scrollbarview'] = new ScrollBarView(
                            {
                                viewName            : page,
                                                      // FIXME quick and dirty, rather than changing the pages array
                                container           : page === 'mainCopy' ? self.story : this[page].find('.bio-page'),
                                animateScrollHandle : false,
                                animateOpacity      : false
                            }
                        );

                        // recalculate the offset after the animation finishes because its position will have changed.
                        this[page + '-scrollbarview'].container.on('scroll', function()
                        {
                            Backbone.Notifications.trigger(page + '.Section.FinalPosition',
                                {
                                    percent : (this.scrollTop / (HelperFuncs.Element.contentHeight(this) - this.offsetHeight + ( self[page + '-scrollbarview'].handle.clientHeight / 2 ) )) * 100
                                });
                        });

                        Backbone.Notifications.on(
                            page + '.ScrollBar.UpdatePosition',
                            this.updateScrolling.bind(this[page + '-scrollbarview'], this[page + '-scrollbarview'].container),
                            this
                        );
                    }).call(this, pages[index]);
                }

                this['mainCopy-scrollbarview'].container.parent().on('webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend', function()
                {
                    self['mainCopy-scrollbarview'].setScrollbarVisibility();
                    self['mainCopy-scrollbarview'].calculateOffset();
                });
            }

            this.bgVid.on("ended", this.onVideoComplete.bind(this));

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        updateScrolling: function(container, e)
        {
            var percent = e.percent/100;

            container.scrollTop( ( ( HelperFuncs.Element.contentHeight(container[0] ) - container.outerHeight(true) + (this.handle.clientHeight / 2)) * percent) );
        },

        render : function ()
        {
            this._super();

            this["ryan-murphy"].find('.copy').append(this['ryan-murphy-scrollbarview'].render(true).el);
            this["larry-kramer"].find('.copy').append(this['larry-kramer-scrollbarview'].render(true).el);

            return this;
        },

        remove: function()
        {
            this['ryan-murphy-scrollbarview'].remove();
            this['larry-kramer-scrollbarview'].remove();
            this['mainCopy-scrollbarview'].remove();
        },

        handleRoute : function (subsection, detail)
        {
            // cleanup
            if (!subsection)
            {
                //this.closeSubView();
                this.closeReadMore();
            }

            if (this.isVideoComplete == false)
            {

                this.bgVid[0].play();
            }

            this._super(subsection, detail);
        },

        onSectionActivate : function (el)
        {
            if (el[0] == this.el)
            {
                this.onWindowResize();
            }
        },

        showSubView : function (viewName, options)
        {
            var scrollbarVisibilityCallback;
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (this.subView)
            {
                this.closeSubView();
            }

            this._super(viewName, options);

            this.subView = this[viewName];

            if (viewName == 'ryan-murphy')
            {
                scrollbarVisibilityCallback = this['ryan-murphy-scrollbarview'].setScrollbarVisibility.bind(this['ryan-murphy-scrollbarview']);
                // animate in from the left
                this.subView.css("left", -this.subView.width() + "px");
            }

            if (viewName == 'larry-kramer')
            {
                scrollbarVisibilityCallback = this['larry-kramer-scrollbarview'].setScrollbarVisibility.bind(this['larry-kramer-scrollbarview']);
                // animate in from the right
                this.subView.css("left", $(window).width() + "px");
            }

            // This calculates the top of the scrollable content correctly
            // IF it finishes before Tween's onComplete fires.
            Backbone.Notifications.trigger(viewName + ".Section.FinalPosition", {percent: undefined});

            this.subView.css("display", "block");

            // trigger slide animation
            TweenLite.to(this.subView, 0.5, {
                css  : {
                    'left' : 0
                },
                ease : Power1.easeOut,
                onComplete: function()
                {
                    if (scrollbarVisibilityCallback !== undefined)
                    {
                        scrollbarVisibilityCallback();
                    }
                }
            });
        },

        closeSubView : function ()
        {
            this._super();
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (!this.subView)
            {
                return;
            }

            TweenLite.to(this.subView, 0.5, {
                css  : {
                    'left' : this.subView === this['ryan-murphy'] ? '-100%' : '100%'
                },
                ease : Power1.easeOut,
                onComplete: this.destroySubView.bind(this)
            });
        },

        destroySubView: function()
        {
            this.subView.css("display", "");
            this.subView = null;

            if (this.subView === this['ryan-murphy'])
            {
                this.murphySlider.destroySlider();
            }

            if (this.subView === this['larry-kramer'])
            {
                this.kramerSlider.destroySlider();
            }
        },

        /**
         *
         * @param {event} [e]
         */
        openReadMore : function (e)
        {
            this.$el.addClass('read-more');
            this.readMore = true;
            this.story.parent().addClass('more');
            this.moreCopyParagraphs.addClass('active');
            this.story.parent().append(this['mainCopy-scrollbarview'].render(true).el);
            Backbone.Notifications.trigger("SubView.Opened");
        },

        /**
         *
         * @param {event} [e]
         */
        closeReadMore : function (e)
        {
            var scrollbar = this['mainCopy-scrollbarview'];
            this.$el.removeClass('read-more');
            this.readMore = false;
            this.story.parent().removeClass('more');
            this.moreCopyParagraphs.removeClass('active');
            scrollbar.setScrollbarVisibility(0, scrollbar.remove.bind(scrollbar));
            Backbone.Notifications.trigger("SubView.Closed");
        },

        onReadMoreClicked : function (e)
        {
            e.preventDefault();

            if (this.$el.hasClass('read-more'))
            {
                this.closeReadMore();
            }
            else
            {
                this.openReadMore();
            }
        },

        onMurphyClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("ryan-murphy");
        },

        onKramerClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("larry-kramer");
        },

        onVideoComplete : function (e)
        {
            this.isVideoComplete = true;

            this.onWindowResize();
        },

        onWindowResize : function (e)
        {
            if (!this.bgVid || !this.bgVid.length) return;

            var winW = $(window).width();
            var winH = $(window).height();


            this.bgVid.css("width", "auto");
            this.bgVid.css("height", winH);


            // center the video
            this.bgVid.css("left", (winW/2 - (this.bgVid.width() / 2)) + "px");
            this.bgVid.css("top", (winH/2 - (this.bgVid.height() / 2)) + "px");


         //   this.bgImg.css("left", (halfWinW - (this.bgImg.width() / 2)) + "px");
          //  this.bgImg.css("top", (halfWinH - (this.bgImg.height() / 2)) + "px");
        },
        onClickSocial: function(e) {
            e.preventDefault();

            var link = document.URL;
            var type = e.currentTarget.getAttribute('data-share');
            var socialId;
            if(this.subView.hasClass('bio-murphy')) {
                socialId = 'ryanMurphy';
            } else {
                socialId = 'larryKramer';
            }
            var socialShare = this.model.socialCopy[socialId];

            this.social[type]({
                picture: socialShare.thumb,
                title: socialShare.title,
                description: socialShare[type],
                link: link
            });
        }
    });

module.exports = StoryView;

},{"../../../templates/sections/story.hbs":78,"../../services/Social.js":16,"../ScrollBarView.js":21,"../View.js":23,"../helpers/Helpers.js":24}],33:[function(require,module,exports){
var HorizontalScrollView = require("../HorizontalScrollView.js");
var template = require("../../../templates/sections/timeline.hbs");

var TimelineView = HorizontalScrollView.extend(
    {
        //****************************** Initialization Stuff ******************************
        events: function () {
            return _.extend({}, HorizontalScrollView.prototype.events, {
                'click .date' : 'onSelectSubEvent',
                'tap .date' : 'onSelectSubEvent',
                'tap .item' : 'onChooseItem'
            });
        },
        initialize : function (options)
        {
            this._super(options);

            this.template = template;
        },

        setup : function()
        {
            this._super();
            this.initDraggable(this.$items.length, this.$allItemsContainer);

            Backbone.Notifications.on('section.beforeActive', _.throttle(this.onSectionBeforeActive, 1000, {trailing: false}), this);
            Backbone.Notifications.on('section.afterActive', _.throttle(this.onSectionAfterActive, 1000, {trailing: false}), this);

            Backbone.Notifications.on('keypress.rightArrow', this.onRightArrowKey, this);
            Backbone.Notifications.on('keypress.leftArrow', this.onLeftArrowKey, this);
        },

        render: function()
        {
            return this._super();
        },
        initJqueryVariables: function()
        {
            this._super();
        },
        onSectionBeforeActive: function(el) {
            if (el[0] == this.el) {
                if(this.rootedItem !== 0) {
                    this.animateToItem(0, 0);
                }
            } else {
                this.isActive = false;
            }
        },
        onSectionAfterActive: function(el) {
            "use strict";

            if(el[0] == this.el) {
                console.log('after active');

                this.isActive = true;

                this.detectAndToggleArrows();
            }
        },
        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Draggable Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        initDraggable           : function (numItems, $draggableDiv)
        {
            var startSeconds, startX, endSeconds, endX;

            var $parent = $draggableDiv.parent();

            Draggable.create($draggableDiv, {
                type           : "x",
                edgeResistance : 0.7,
                bounds: $parent,
                throwProps     : true,
                zIndexBoost    : false,
                trigger: $parent,
                cursor         : "pointer",
                onDragEnd      : function ()
                {
                    endX = $draggableDiv[0]._gsTransform.x;
                    endSeconds = new Date().getTime() / 1000;

                    this.decelerateAndSnap((endX - startX) / (endSeconds - startSeconds), numItems, $draggableDiv);
                    //this.snapToNearestItem.bind(this, numItems)
                }.bind(this),
                onDragStart    : function ()
                {
                    startX = $draggableDiv[0]._gsTransform.x;
                    startSeconds = new Date().getTime() / 1000;

                    this.isAnimating = true;
                }.bind(this)
            });
        },
        decelerateAndSnap: function (velocity, numItems, $draggableDiv) {
            velocity = (velocity > 3000) ? 3000 : (velocity < -3000) ? -3000 : velocity;

            var resistance = 6;
            var animationTime = 0.6 * Math.abs(velocity) / 3000;

            var xTo = $draggableDiv[0]._gsTransform.x + velocity / resistance;
            xTo = Math.min(xTo, 0);

            var divWidth = $draggableDiv.width();

            var lastLeftItem = this.getLastItemRootLeft();
            var closestItemIndex = Math.round((Math.abs(xTo)/divWidth) * this.$items.length);

            if(closestItemIndex > lastLeftItem) {
                closestItemIndex = this.$items.length-1;
            }

            this.animateToItem(closestItemIndex, animationTime, 'Circ.easeOut');
        },
        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        resizeAllItemsContainer: function(windowWidth, windowHeight)
        {
            var ratio = 428 / 600;
            var containerMinWidth = windowHeight * ratio * this.$items.length;

            this.$allItemsContainer.css({
                'min-width' : containerMinWidth
            });

            return containerMinWidth;
        },
        onWindowResize: function() {
            var width = this.$window.width();
            var height = this.$window.height();

            var containerMinWidth = this._super(width, height);
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Create Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        createSubView: function($view) {
            var newView = this._super($view);

            var events = this.model.years[$view.index()].events;

            var $timelineEvents = $('<div>', {class: 'timeline-events'});
            var $dates = $('<div>', {class: 'dates'});
            var $events = $('<div>', {class : 'events'});

            var $underlay = $('<div>', {class : 'underlay'});

            var $timelineEventsInner = $('<div>', {class: 'full-relative'}).appendTo($timelineEvents);
            var $datesInner = $('<div>', {class: 'full-relative'}).appendTo($dates);
            var $eventsInner = $('<div>', {class: 'full-relative'}).appendTo($events);

            _.each(events, function(event)
            {
                var $date = $('<div>', {
                    html: event.eventDate,
                    class: 'date',
                    'data-id': event.eventDate
                });
                var $copy = $('<div>', {
                    class : 'copy',
                    html: event.copy
                });
                var $title = $('<div>', {
                    class: 'title',
                    html: event.title
                });
                var $event = $('<div>', {
                    class : 'event',
                    'data-id': event.eventDate
                });

                $event.append($title, $copy).appendTo($eventsInner);
                $date.appendTo($datesInner).before(' ');
            });

            $('<div>', {class : 'full-width'}).appendTo($datesInner);        //overflow for justify
            $('<div>', {class : 'bar'}).appendTo($datesInner);               //underline;

            $timelineEventsInner.append($dates, $events);
            newView.find('> .full-relative').append($underlay, $timelineEvents);

            newView.$summary = newView.find('div.summary');
            newView.$year = newView.find('div.year');

            newView.$eventsContainer = $timelineEvents;
            newView.$dateItems = $datesInner.find('div.date');
            newView.$dateBar = $datesInner.find('div.bar');

            newView.$background = newView.find('div.background');

            newView.$underlay = $underlay;

            newView.$eventItems = $eventsInner.children();

            return newView;
        },
        createEvent: function($subView, $date) {
            var $event = $subView.$eventItems.filter(function() {
                return this.getAttribute('data-id') === $date[0].getAttribute('data-id');
            });
            $event.ogEl = $date;
            $event.$copy = $event.find('> div.copy');
            $event.$title = $event.find('> div.title');

            return $event;
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Show/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        showEvent: function(dateId) {
            var $date = this.subView.$dateItems.filter(function() {
                return this.getAttribute('data-id') === dateId;
            });

            var $event = this.createEvent(this.subView, $date);
            var direction = 'right';

            if(!this.subView.$activeEvent) {
                //no currently active event
                this.positionDateBar($event, this.subView);
            } else if($event.index() < this.subView.$activeEvent.index()) {
                direction = 'left';
            }

            this.positionNewEvent($event, direction);
            this.animateEventSwap($event, direction);
        },
        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~ Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        positionSubViewToOpen: function($newSubView) {
            this._super($newSubView);

            $newSubView.$dateBar.css('opacity', 0);
            $newSubView.$underlay.css('opacity', 0);

            //set summary width to static
            $newSubView.$summary.css({
                opacity: 1,
                width: $newSubView.ogEl.find('div.summary').width()
            });

            this.hideDateItems($newSubView);

            TweenLite.set($newSubView.$year, {
                zIndex: 3,
                scale: 1
            });

            $newSubView.$background.addClass('no-transition no-blur');
        },
        hideDateItems: function($newSubView) {
            var xOffset = 10;
            //offset all items to be animated in & set opacity to 0
            TweenLite.set($newSubView.$dateItems, {
                x: xOffset,
                opacity: 0
            });
        },
        positionSubViewToSwap: function($newSubView, direction) {
            this._super($newSubView, direction);

            var filter = (direction === 'right') ? ':first' : ':last';

            var $activeDate = $newSubView.$dateItems.filter(filter);

            var $event = this.createEvent($newSubView, $activeDate);

            this.positionDateBar($event, $newSubView);
            this.positionSubViewEvent($event);

            $newSubView.$activeEvent = $event;
            this.detectAndToggleArrows();
        },
        positionDateBar: function($event, $subView) {
            $event.ogEl.whenLive(function(){
                $subView.$dateBar.css('width', $event.ogEl.width());
                $subView.$dateBar.css('left', $event.ogEl.position().left);
            });
        },
        positionNewEvent: function($event, direction) {
            var xStart = $event.width()/5;
            xStart = (direction === 'left') ? -xStart : xStart;

            TweenLite.set([$event.$title, $event.$copy], {
                x: xStart
            });
            $event.addClass('visible');

            return xStart;
        },

        // For swapping sub views
        positionSubViewEvent: function($event) {
            TweenLite.set([$event.$title, $event.$copy], {
                x: 0,
                opacity: 1
            });
            $event.addClass('visible');
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================

        // =============================== Animate SubView Open ===================================
        animateSubViewOpen: function(timeline) {
            if(typeof timeline === 'undefined') {
                // Static Variables
                var animationTime1 = 0.5;
                var animationTime2 = 0.6;
                var dateStaggerOffsetTime = 0.10;

                var datesLabel = 'animate dates';
                var eventLabel = 'animate event';

                // Dependent on statics
                var dateStaggerAnimationTime = animationTime2 - ((this.subView.$dateItems.length - 1) * dateStaggerOffsetTime);
                var barAnimationTime = animationTime2 - dateStaggerAnimationTime;

                var $activeDate = this.subView.$dateItems.filter(':first');

                timeline = new TimelineLite({
                    paused: true,
                    onComplete: function () {
                        this.isAnimating = false;
                    }.bind(this)
                });

                //animate in dates after stage 1 has finished
                timeline.addLabel(datesLabel, animationTime1);

                //animate in events after 1/3 of time has passed in stage 2
                timeline.addLabel(eventLabel, animationTime1 + (animationTime2/3));

                /************************* Animations Part 1 *************************/
                this.addAnimationFullscreen(timeline, animationTime1);
                this.addAnimationSummaryOut(timeline, animationTime1);
                this.addAnimationYearScaleDown(timeline, animationTime1);

                this.addAnimationBackgroundBlur(timeline, animationTime1);
                this.addAnimationUnderlayIn(timeline, animationTime1);

                /************************* Animations Part 2 *************************/
                this.addAnimationDatesIn(timeline, dateStaggerAnimationTime, dateStaggerOffsetTime, barAnimationTime, datesLabel);

                /************************* Animations Part 3 *************************/
                this.addTriggerShowEvent(timeline, $activeDate, eventLabel);
            }

            this._super(timeline);
        },
        addAnimationFullscreen: function(timeline, animationTime) {
            //Set subview to full screen
            timeline.add(TweenLite.to(this.subView, animationTime, {
                width: '100%',
                top: 0,
                left: 0,
                ease: 'Power2.easeInOut'
            }), 0);
        },
        addAnimationSummaryOut: function(timeline, animationTime) {
            //Fade out summary
            timeline.add(TweenLite.to(this.subView.$summary, animationTime, {
                opacity : 0
            }), 0);
        },
        addAnimationYearScaleDown: function(timeline, animationTime) {
            //Scale down the year
            timeline.add(TweenLite.to(this.subView.$year, animationTime, {
                zIndex: 3,
                scale: 0.7
            }), 0);
        },
        addAnimationDatesIn: function(timeline, dateStaggerAnimationTime, dateStaggerOffsetTime, barAnimationTime, datesLabel) {
            //Stagger in dates
            timeline.add((new TimelineLite).staggerTo(this.subView.$dateItems, dateStaggerAnimationTime, {
                x: 0,
                opacity: 1
            }, dateStaggerOffsetTime), datesLabel);
        },
        addAnimationBackgroundBlur: function(timeline, animationTime) {
            timeline.add(function() {
                this.subView.$background.removeClass('no-transition no-blur');
            }.bind(this), 0);
        },
        addAnimationUnderlayIn: function(timeline, animationTime) {
            timeline.add(TweenLite.to(this.subView.$underlay, animationTime, {
                opacity: 1
            }), 0);
        },
        addTriggerShowEvent: function(timeline, $activeDate, eventLabel) {
            timeline.add(function() {
                this.showEvent($activeDate[0].getAttribute('data-id'));
            }.bind(this), eventLabel);
        },
        // =============================== Animate SubView Closed ===================================
        animateSubViewClosed: function(callback, timeline) {
            if(typeof timeline === 'undefined') {
                var animationTime = 0.6;

                var animTime2 = animationTime * 3/4;
                var animSummaryStart = animationTime - animTime2;

                timeline = new TimelineLite({
                    paused: true,
                    onComplete: function() {
                        this.isAnimating = false;
                        if (typeof callback !== 'undefined') {
                            callback.bind(this)();
                        }
                    }.bind(this)
                });
                this.addAnimationMinimize(timeline, animationTime, 0);
                this.addAnimationYearScaleUp(timeline, animationTime, 0);
                this.addAnimationBackgroundUnblur(timeline, animationTime, 0);
                this.addAnimationUnderlayOut(timeline, animationTime, 0);

                this.addAnimationEventsContainerFadeOut(timeline, animTime2, 0);

                this.addAnimationSummaryIn(timeline, animTime2, animSummaryStart);
            }

            this._super(callback, timeline);
        },
        addAnimationMinimize: function(timeline, animationTime, position) {
            timeline.add(TweenLite.to(this.subView, animationTime, {
                width: this.subView.ogEl.width(),
                top: '0px',
                left: this.subView.ogEl.offset().left + 'px',
                ease: 'Power2.easeInOut'
            }), position);
        },
        addAnimationSummaryIn: function(timeline, animationTime, position) {
            // Set to static width of original item
            TweenLite.set(this.subView.$summary, {
                width: this.subView.ogEl.width()
            });

            timeline.add(TweenLite.to(this.subView.$summary, animationTime, {
                opacity : 1
            }), position);
        },
        addAnimationYearScaleUp: function(timeline, animationTime, position) {
            timeline.add(TweenLite.to(this.subView.$year, animationTime, {
                zIndex: 3,
                scale: 1
            }), position);
        },
        addAnimationEventsContainerFadeOut: function(timeline, animationTime, position) {
            // Set to static width
            TweenLite.set(this.subView.$eventsContainer, {
                width: this.subView.$eventsContainer.outerWidth()
            });

            timeline.add(TweenLite.to(this.subView.$eventsContainer, animationTime, {
                opacity: 0
            }), position);
        },
        addAnimationBackgroundUnblur: function(timeline, animationTime, position) {
            timeline.add(function() {
                this.subView.$background.addClass('no-blur');
            }.bind(this), position);
        },
        addAnimationUnderlayOut: function(timeline, animationTime, position) {
            timeline.add(TweenLite.to(this.subView.$underlay, animationTime, {
                opacity: 0
            }), position);
        },
        // ================================== Animate Events ======================================
        animateEventSwap: function($newEvent, direction, timeline) {
            if(typeof timeline === 'undefined') {
                // Static Variables
                var animationTime = 0.4;
                var eventStaggerOffsetTime = 0.15;

                // Dependent on statics
                var eventStaggerAnimationTime = animationTime - eventStaggerOffsetTime;
                var barAnimationTime = animationTime * 50/100;
                var fadeOutAnimationTime = animationTime * 70/100;

                timeline = new TimelineLite({
                    paused: true,
                    onComplete: function() {
                        this.isAnimating = false;
                        this.subView.$activeEvent = $newEvent;
                        this.detectAndToggleArrows();
                    }.bind(this)
                });


                this.addAnimationDateBar(timeline, $newEvent, this.subView.$dateBar, barAnimationTime);

                if(!!this.subView.$activeEvent) {   //event already exists
                    //animate current event out
                    this.addAnimationEventIn(timeline, $newEvent, animationTime);
                    this.addAnimationEventOut(timeline, this.subView.$activeEvent, fadeOutAnimationTime, direction);
                } else {
                    this.addAnimationEventInStagger(timeline, $newEvent, eventStaggerAnimationTime, eventStaggerOffsetTime);
                }
            }

            timeline.play();
        },
        addAnimationEventIn: function(timeline, $event, animationTime) {
            timeline.add(TweenLite.to([$event.$title, $event.$copy], animationTime, {
                opacity: 1,
                x: 0
            }), 0);
        },
        addAnimationEventInStagger: function(timeline, $event, eventStaggerAnimationTime, eventStaggerOffsetTime) {
            timeline.add((new TimelineLite).staggerTo([$event.$title, $event.$copy], eventStaggerAnimationTime, {
                opacity: 1,
                x: 0
            }, eventStaggerOffsetTime), 0);
        },
        addAnimationEventOut: function(timeline, $event, animationTime, direction) {
            var xTo = -this.subView.$activeEvent.width()/4;

            xTo = (direction === 'left') ? -xTo : xTo;

            timeline.add(TweenLite.to([$event.$title, $event.$copy], animationTime, {
                opacity: 0,
                x: xTo,
                onComplete: function() {
                    $event.removeClass('visible');
                }
            }), 0);
        },
        addAnimationDateBar: function(timeline, $event, $dateBar, animationTime) {
            timeline.add(TweenLite.to($dateBar, animationTime, {
                left: $event.ogEl.position().left,
                width: $event.ogEl.width(),
                opacity: 1
            }), 0);
        },


        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        toggleSubViewArrows: function() {
            if(!this.subView.$activeEvent) {
                return;
            }

            var eventIndex = this.subView.$activeEvent.index();
            var subViewIndex = this.subView.ogEl.index();

            if (eventIndex > 0 || subViewIndex > 1)
                this.$leftArrow.addClass('active');
            else
                this.$leftArrow.removeClass('active');

            if (eventIndex < this.subView.$eventItems.length - 1 || subViewIndex < this.$items.length - 1)
                this.$rightArrow.addClass('active');
            else
                this.$rightArrow.removeClass('active');
        },
        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        onSelectSubEvent: function(e) {
            if (!this.isAnimating) {
                this.isAnimating = true;

                var dataId = e.currentTarget.getAttribute('data-id');

                if(!!this.subView) {
                    var currentId = this.subView.$activeEvent[0].getAttribute('data-id');
                    if(dataId === currentId) {
                        this.isAnimating = false;
                        return;
                    }
                }

                this.showEvent(e.currentTarget.getAttribute('data-id'));
            }
        },
        onNext: function() {
            if (!this.isAnimating) {
                this.isAnimating = true;

                if (!!this.subView) {
                    //go to next event
                    var $nextEvent = this.subView.$activeEvent.ogEl.next('div.date');

                    if($nextEvent.length !== 0) {
                        this.showEvent($nextEvent[0].getAttribute('data-id'));
                    } else {
                        var $nextView = this.subView.ogEl.next();
                        var dataId = '';

                        if ($nextView.length !== 0) {
                            dataId = $nextView[0].getAttribute('data-id');
                        }

                        if(dataId === '') {
                            this.isAnimating = false;
                            return;
                        }

                        this.showSubView(dataId);
                    }
                } else {
                    this.shiftAllItemsContainer('right', 0.35);
                }
            }
        },
        onPrev: function() {
            if (!this.isAnimating) {
                this.isAnimating = true;

                if (!!this.subView) {
                    var $prevEvent = this.subView.$activeEvent.ogEl.prev('div.date');

                    if($prevEvent.length !== 0) {
                        this.showEvent($prevEvent[0].getAttribute('data-id'));
                    } else {
                        var $prevView = this.subView.ogEl.prev();
                        var dataId = '';

                        if ($prevView.length !== 0) {
                            dataId = $prevView[0].getAttribute('data-id');
                        }

                        if(dataId === '') {
                            this.isAnimating = false;
                            return;
                        }

                        this.showSubView(dataId);
                    }
                } else {
                    this.shiftAllItemsContainer('left', 0.35);
                }
            }
        },
        onRightArrowKey: function() {
            "use strict";

            if(this.isActive) {
                this.onNext();
            }
        },
        onLeftArrowKey: function() {
            "use strict";

            if(this.isActive) {
                this.onPrev();
            }
        }
    });

module.exports = TimelineView;

},{"../../../templates/sections/timeline.hbs":84,"../HorizontalScrollView.js":18}],34:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/mobile/characters.hbs");
var detailTemplate = require("../../../../templates/sections/mobile/charactersDetail.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");
var Omniture = require("../../../services/Omniture.js");

var Social = require("../../../services/Social.js");

var CharactersView = View.extend(
    {
        events:
        {
            "touchend .item" : "onPreventDefault",
            'touchend div.social > a': 'onPreventDefault',
            "click .item" : "onPreventDefault",
            'click div.social > a': 'onPreventDefault'
        },

        hammerEvents :
        {
            "tap .item" : "onCharacterClick",
            "tap .youtube-embed": "onYoutubeClick",
            'tap div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);

            this.chars = this.model.characters
        },

        setup : function ()
        {
            this.characters = this.$('.all-items-ctr');
            this.activeItemCtr = this.$('.active-item-ctr');

            var len = this.characters.children().length;
            var w = 100/len;
            var p = len*100;

            this.characters.css("width", p+"%");
            this.characters.children().each(function (index, element)
            {
                $(this).css("width", w+"%");
            });

            this.initDraggable(this.characters);
            this.initSocialFunctions();

            this.activeItemCtr.css("z-index", -1);
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            this._super();
            return this;
        },

        onSectionActivate : function (el)
        {
            if (el[0] == this.el)
            {
                //this.onWindowResize();
            }
        },

        showSubView : function (viewName, options)
        {
            if (this.subView)
            {
                this.closeSubView();
            }

            var me = this;

            this._super(viewName, options);

            var charObj = this.characters.children('[data-id="' + viewName + '"]');
            var subHTML = detailTemplate(this.model.characters[charObj.index()]);

            this.currentCharID = viewName;
            this.subView = $(subHTML);

            this.subView.ogEl = charObj;

            this.subView.appendTo(this.activeItemCtr);

            this.activeItemCtr.css("z-index", 0);

            this.activeItemCtr.addClass("active");

            var youtubeId = this.model.characters[charObj.index()].interview;
            this.activeItemCtr.find('.youtube-container img').load(function() {
                HelperFuncs.Scroller.initDraggable(me.activeItemCtr);
            }).attr('src', 'http://img.youtube.com/vi/'+youtubeId+'/0.jpg');

            this.hideAll();

            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");
        },

        closeSubView : function ()
        {
            this._super();

            if (!this.subView)
            {
                return;
            }
            this.showAll();
            this.activeItemCtr.css("z-index", -1);
            this.activeItemCtr.empty();
            this.subView = null;
            this.currentCharID = null;
        },

        hideAll: function()
        {
            this.$('.bg-filter').addClass('active');
            this.characters.css("display", "none");
        },

        showAll: function()
        {
            this.$('.bg-filter').removeClass('active');
            this.characters.css("display", "block");
        },

        onCharacterClick: function(e)
        {
            var charID = $(e.currentTarget).data('id');

            if(charID == "0")
            {
                return;
            }

            this.showSubView(charID);
        },

        initDraggable : function (scrollDiv)
        {
            Draggable.create(scrollDiv, {
                type           : "x",
                edgeResistance : 1,
                zIndexBoost    : false,
                cursor         : "pointer",
                onDragEnd      : function ()
                {
                    var tranX = scrollDiv[0]._gsTransform.x;
                    if(tranX > 0)
                    {
                        TweenLite.to(scrollDiv, .5, {x: 0});
                    }

                    var pWidth = scrollDiv.width();
                    var cWidth = scrollDiv.children().get(0).offsetWidth;
                    var calcd = Math.abs(tranX)+cWidth;

                    if(calcd > pWidth)
                    {
                        var pos = pWidth-cWidth;
                        TweenLite.to(scrollDiv, .5, {x: -pos});
                        return;
                    }

                    var ind = this.calculateVisibleElement(tranX);
                    var toX = -(cWidth*ind);
                    TweenLite.to(scrollDiv, .5, {x: toX});
                }.bind(this)
            });
        },

        calculateVisibleElement: function(tX)
        {

          var sLeft = -tX;
          var wWidth = $(window).width();

          var visibleElementIndex = Math.round(sLeft/wWidth);

          visibleElementIndex = visibleElementIndex < 0 ? 0: visibleElementIndex;

          return visibleElementIndex;
        },

        onYoutubeClick: function(e)
        {
            Omniture.onVideoPlay({mediaTitle: this.currentCharID});

			// create link and dispatch click event
			var href = e.currentTarget.href;
			var a = document.createElement('a');
		    a.setAttribute("href", href);
		    a.setAttribute("target", "_blank");

		    var dispatch = document.createEvent("HTMLEvents");
		    dispatch.initEvent("click", true, true);
		    a.dispatchEvent(dispatch);
        },

        onMenuCloseClick: function()
        {
            if(this.subView)
            {
                this.closeSubView();
            }
        },
        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.subView.ogEl.index();
            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;
            var socialShare = this.model.characters[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        },

        onPreventDefault: function(e)
        {
            e.preventDefault();
        }
    });

module.exports = CharactersView;

},{"../../../../templates/sections/mobile/characters.hbs":64,"../../../../templates/sections/mobile/charactersDetail.hbs":65,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../View.js":23,"../../helpers/Helpers.js":24}],35:[function(require,module,exports){
var View = require("../../View.js");
var template = require("....//../../templates/sections/mobile/fight.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");

var Omniture = require("../../../services/Omniture.js");
var Social = require("../../../services/Social.js");

var FightView = View.extend(
    {
        events :
        {
            'tap .partners-btn': 'showPartnersResources',
            'tap .data-btn': 'showDataVisualization',
            'tap .learn-btn': 'showReadMore',
            'tap .switch': 'togglePartnersResourcesContent',
            'tap .data-visualization-ctr .arrow': 'onPrevNextDataPoint',

            'tap .partners-resources-ctr .arrow': 'onPrevNextResource',
            'tap .close': 'closeSubView',

            'click .info-ctr > a': 'onPreventDefault',
            'tap .info-ctr > a': 'onPartnerClick',
            'tap div.social-ctr > img': 'onClickSocial',
            'tap .know_status': 'onPartnerClick',
            'tap .tap-hack': 'onTapHack'

        },
        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
            Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);
        },

        setup : function ()
        {
            this._super();

            var partners = this.$('.partners-resources-ctr');
            var dataviz = this.$('.data-visualization-ctr');
            HelperFuncs.Scroller.initDraggable(partners.find('> div.inner'));
            HelperFuncs.Scroller.initDraggable(dataviz.find('.data-point'));


            partners.find('.resources-ctr div.info-ctr:first-child').addClass('active');

            this.$dataPoints = this.$el.find('div.data-point');

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            return this._super();
        },

        handleRoute: function(subsection, detail)
        {
            this._super(subsection, detail);
        },

        showSubView : function (viewName, options)
        {
            this._super(viewName, options);
            var me = this;

            if (viewName == 'data')
            {
                var dv = $('.data-visualization-ctr');
                this.subView = dv;
                var arrow = $('.arrow');
                var mask = $('.mask');
                var tl = new TimelineLite();
                this.isAnimating = true;
                var me = this;
                tl.to(dv, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                })
                .to(dv, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.showOrHideArrow();
                    }
                })
                .to(arrow, 0.5, {
                    css: {
                        opacity: 1
                    },
                    ease: Power1.easeOut
                })
                .to(mask, 0, {
                    className: '+=active',
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.isAnimating = false;
                    }
                });
            }
            if (viewName == 'partners-resources')
            {
                var pr = $('.partners-resources-ctr');
                this.subView = pr;
                var tl = new TimelineLite();
                tl.to(pr, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                }).to(pr, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut
                });
            }
            if (viewName == 'learn')
            {
                var learn = $('.fight-ctr > .learn');
                this.subView = learn;
                var tl = new TimelineLite();
                tl.to(learn, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                }).to(learn, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut
                });
            }

            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");
        },

        closeSubView: function()
        {
            if(!this.subView)
            {
                return;
            }

            this._super();

            var tl = new TimelineLite();
            var sub = this.subView;
            var mask = $('.mask');
            tl.to(mask, 0, {
                className: '-=active',
                ease: Power1.easeOut
            })
            .to(sub, 0.25, {
                css: {
                    left: function() {
                        if(sub.hasClass('data-visualization-ctr')) {
                            return '-100%';
                        } else if(sub.hasClass('partners-resources-ctr')) {
                            return '100%';
                        } else if(sub.hasClass('learn')) {
                            return '100%';
                        }
                    }()
                },
                onComplete: function() {
                    this.subView = null;
                },
                ease: Power1.easeOut
            });
        },

        onSectionActivate: function(el)
        {
            if(el[0] == this.el)
            {
                this.onWindowResize();
            }
        },

        showPartnersResources : function ()
        {
            this.showSubView('partners-resources');
        },

        showDataVisualization : function ()
        {
            this.showSubView('data');
        },

        showReadMore : function ()
        {
            this.showSubView('learn');
        },

        togglePartnersResourcesContent : function (e) {
            var pc = $('.pr-ctr.partners-ctr');
            var rc = $('.pr-ctr.resources-ctr');
            var ps = $('.switch .partners');
            var rs = $('.switch .resources');

            if($(e.target).hasClass('resources')) {
                var prActive = pc;
                var prInactive = rc;
                var switchActive = ps;
                var switchInactive = rs;
            } else if($(e.target).hasClass('partners')) {
                var prActive = rc;
                var prInactive = pc;
                var switchActive = rs;
                var switchInactive = ps;
            }

            var me = this;
            this.isAnimating = true;

            var tl = new TimelineLite();
            tl.to(prActive, 0.25, {
                css: {
                    opacity: 0
                },
                ease: Power1.easeOut
            }, 'hide-grp')
            tl.to(prActive, 0, {
                css: {
                    display: 'none'
                },
                ease: Power1.easeOut
            })
            .to(switchActive, 0.25, {
                className: '-=active',
                ease: Power1.easeOut
            }, 'hide-grp')
            .to(prInactive, 0, {
                css: {
                    display: 'block'
                },
                ease: Power1.easeOut
            })
            .to(prInactive, 0.25, {
                css: {
                    opacity: 1
                },
                ease: Power1.easeOut
            }, 'show-grp')
            .to(switchInactive, 0.25, {
                className: '+=active',
                ease: Power1.easeOut,
                onComplete: function() {
                    me.isAnimating = false;
                }
            }, 'show-grp');
        },

        onPrevNextDataPoint : function(e)
        {
            if(this.isAnimating == true) {
                return;
            }

            var target = $(e.target);
            var cur = $('.data-point.active');
            var me = this;

            //Next
            var next = cur.next();
            var direction = 'right';
            if(cur.index('.data-point') == $('.data-point').length-1) {
                next = $('.data-point').first();
            }
            if(target.hasClass('arrow-left')) {
                //Prev
                next = cur.prev();
                direction = 'left';
                if(cur.index('.data-point') == 0) {
                    next = $('.data-point').last();
                }
            }

            var tl = new TimelineLite();
            this.isAnimating = true;
            tl.to(next, 0, {
                className: '+=active',
                ease: Power1.easeOut
            })
            .to(next, 0, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '100%';
                        } else {
                            return '-100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            })
            .to(cur, 0.5, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '-100%';
                        } else {
                            return '100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(next, 0.5, {
                css: {
                    left: '0'
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(cur, 0, {
                className: '-=active',
                ease: Power1.easeOut,
                onComplete: function() {
                    me.showOrHideArrow();
                    me.isAnimating = false;
                }
            });
        },

        showOrHideArrow: function() {
            var itemIndex = this.$dataPoints.filter('.active').index('.data-point');

            if(itemIndex == this.$dataPoints.length-1) {
                //Last slide
                $('.arrow-right').hide();
                $('.arrow-left').show();
            } else if(itemIndex === 0) {
                //First slide
                $('.arrow-right').show();
                $('.arrow-left').hide();
            } else {
                //Middle slide
                $('.arrow-right').show();
                $('.arrow-left').show();
            }
        },

        onPrevNextResource : function(e)
        {

            var target = $(e.target);
            var cur = $('.resources-ctr .info-ctr.active');
            var body = $('.resources-ctr .body-ctr');

            //Next
            var next = cur.next();
            var direction = 'right';
            if(cur.index('.resources-ctr .info-ctr') == $('.resources-ctr .info-ctr').length-1) {
                next = $('.resources-ctr .info-ctr').first();
            }
            if(target.hasClass('arrow-left')) {
                //Prev
                next = cur.prev();
                direction = 'left';
                if(cur.index('.resources-ctr .info-ctr') == 0) {
                    next = $('.resources-ctr .info-ctr').last();
                }
            }

            var pos = next.index('.resources-ctr .info-ctr') * 340;

            var tl = new TimelineLite();
            tl.to(next, 0, {
                className: '+=active',
                ease: Power1.easeOut
            })
            .to(body, 0.5, {
                css: {
                    left: '-'+pos+'px'
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(cur, 0, {
                className: '-=active',
                ease: Power1.easeOut
            });
        },

        onPartnerClick: function(e)
        {
            e.preventDefault();
            Omniture.onPartnerLink({URL: e.currentTarget.href});

            window.open(e.currentTarget.href);
        },

        onWindowResize: function(e)
        {
            var halfWinW = $(window).width()/2;
            var halfWinH = $(window).height()/2;

//            this.bgImg.css("left", (halfWinW-(this.bgImg.width()/2))+"px");
//            this.bgImg.css("top", (halfWinH-(this.bgImg.height()/2))+"px");
        },

         onMenuCloseClick: function()
        {
            if(this.subView)
            {
                this.closeSubView();
            }
        },
        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.$dataPoints.filter('.active').index('.data-point');
            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;

            var socialShare = this.model.dataPoints[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    picture: socialShare.image,
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        },
        onPreventDefault: function(e) {
            e.preventDefault();
            return false;
        },

        onTapHack: function(e) {
            // create link and dispatch click event
            var href = e.currentTarget.href;
            var a = document.createElement('a');
            a.setAttribute("href", href);
            a.setAttribute("target", "_blank");

            var dispatch = document.createEvent("HTMLEvents");
            dispatch.initEvent("click", true, true);
            a.dispatchEvent(dispatch);
        }
    });

module.exports = FightView;

},{"....//../../templates/sections/mobile/fight.hbs":66,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../View.js":23,"../../helpers/Helpers.js":24}],36:[function(require,module,exports){
var View = require("../../View.js");
var ScrollBarView = require("../../ScrollBarView.js");
var template = require("../../../../templates/sections/mobile/home.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");


var HomeView = View.extend(
{
    events:
    {
        "click .scroll-down" : "onScrollButtonClicked",
        "touchend .scroll-down" : "onScrollButtonClicked",
        "click .trailerCopy" : "onPlayTrailer",
        "touchend .trailerCopy" : "onPlayTrailer",
        "click .news" : "openNews",
        "touchend .news" : "openNews",
        "touchend .hbo-films" : "onHBOFilms"
    },

    initialize: function(options)
    {
      this._super(options);
      this.template = template;

      Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
      Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);
    },

    setup: function()
    {
        this["news"] = this.$('.modal');
        HelperFuncs.Scroller.initDraggable(this["news"].find('.content-ctr'));
    },

    render: function()
    {
      return this._super();
    },

    initRouter: function(root)
    {
        this._super(root);
        App.router.route("", "homeRoute");
    },

    handleRoute: function(subsection, detail)
    {
      this._super(subsection, detail);

      this.onSectionActivate(this.$el);
    },

    onSectionActivate: function(el)
    {
        if(el == this.$el)
        {

        }
    },

    onMenuCloseClick: function()
    {
        if(this.subView)
        {
            this.closeNews();
        }
    },

    openNews : function (e)
    {
        this.subView = this["news"];

        this.$el.addClass('read-more');
        this.readMore = true;
        this["news"].css("display", "block");

        Backbone.Notifications.trigger("SubView.Opened");

        // for the close button functionality
        Backbone.Notifications.trigger("subview.showCloseButton");
    },

    closeNews : function (e)
    {
        this["news"].css("display", "none");
        this.subView = null;

        Backbone.Notifications.trigger("SubView.Closed");
    },

    onScrollButtonClicked: function(e)
    {
        Backbone.history.navigate("/to-win-a-war", true);
    },

    onPlayTrailer: function(e)
    {
        window.open('http://www.youtube.com/watch?v=yaaTQLMEETw', '_blank');
    },

    onHBOFilms: function(e)
    {
        window.open("http://www.hbo.com/movies/the-normal-heart?icid=ABC1516");
    }
});


module.exports = HomeView;

},{"../../../../templates/sections/mobile/home.hbs":67,"../../ScrollBarView.js":21,"../../View.js":23,"../../helpers/Helpers.js":24}],37:[function(require,module,exports){
var View = require("../../View.js");
var template = require("....//../../templates/sections/mobile/intro.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");

var IntroView = View.extend(
    {
        events :
        {

        },
        initialize : function (options)
        {
            this._super(options);
            this.template = template;
        },

        setup : function ()
        {
            this._super();
        },

        render : function ()
        {
            return this._super();
        },

        onSectionActivate: function(el)
        {
            if(el[0] == this.el)
            {

            }
        }
    });

module.exports = IntroView;

},{"....//../../templates/sections/mobile/intro.hbs":68,"../../View.js":23,"../../helpers/Helpers.js":24}],38:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/mobile/media.hbs");
var detailTemplate = require("../../../../templates/sections/mobile/charactersDetail.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");

var Social = require("../../../services/Social.js");

var MediaView = View.extend(
    {
        hammerEvents :
        {
            "tap .item" : "onItemClick",
            'tap div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);

            this.items = this.model.items;

            this.detailViews =
            {
                "video": require("../partials/mobile/VideoDetailView.js"),
                "gallery": require("../partials/mobile/GalleryDetailView.js")
            };
        },

        setup : function ()
        {
            this.items = this.$('.all-items-ctr');
            this.activeItemCtr = this.$('.active-item-ctr');

            var len = this.items.children().length;
            var w = 100/len;
            var p = len*100;

            this.items.css("width", p+"%");
            this.items.children().each(function (index, element)
            {
                $(this).css("width", w+"%");
            });

            this.initSocialFunctions();
            this.initDraggable(this.items);
            HelperFuncs.Scroller.initDraggable(this.activeItemCtr);
            this.activeItemCtr.css("z-index", -1);
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            this._super();
            return this;
        },

        onSectionActivate : function (el)
        {
            if (el[0] == this.el)
            {
                //this.onWindowResize();
            }
        },

        showSubView : function (viewName, options)
        {
            if (this.subView)
            {
                this.closeSubView();
            }

            this._super(viewName, options);

            var itemObj = this.items.children('[data-id="' + viewName + '"]');
            var itemData = this.model.items[itemObj.index()];

            this.detailView = new this.detailViews[itemData.type]({model: itemData});

            this.subView = this.detailView.render().$el;
            this.subView.ogEl = itemObj;

            this.subView.appendTo(this.activeItemCtr);

            if(itemData.images)
            {
                this.detailView.showItem(options);
            }

            this.activeItemCtr.css("z-index", 0);

            this.activeItemCtr.addClass("active");

            this.hideAll();

            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");
        },

        closeSubView : function ()
        {
            this._super();

            if (!this.subView)
            {
                return;
            }
            this.showAll();
            this.activeItemCtr.css("z-index", -1);
            this.activeItemCtr.empty();
            this.subView = null;
        },

        hideAll: function()
        {
            this.$('.bg-filter').addClass('active');
            this.items.css("display", "none");
        },

        showAll: function()
        {
            this.$('.bg-filter').removeClass('active');
            this.items.css("display", "block");
        },

        onItemClick: function(e)
        {
            var charID = $(e.currentTarget).data('id');

            if(charID == "media-landing")
            {
                return;
            }

            this.showSubView(charID);
        },

        initDraggable : function (scrollDiv)
        {
            Draggable.create(scrollDiv, {
                type           : "x",
                edgeResistance : 1,
                zIndexBoost    : false,
                cursor         : "pointer",
                onDragEnd      : function ()
                {
                    var tranX = scrollDiv[0]._gsTransform.x;
                    if(tranX > 0)
                    {
                        TweenLite.to(scrollDiv, .5, {x: 0});
                    }

                    var pWidth = scrollDiv.width();
                    var cWidth = scrollDiv.children().get(0).offsetWidth;
                    var calcd = Math.abs(tranX)+cWidth;

                    if(calcd > pWidth)
                    {
                        var pos = pWidth-cWidth;
                        TweenLite.to(scrollDiv, .5, {x: -pos});
                        return;
                    }

                    var ind = this.calculateVisibleElement(tranX);

                    var toX = -(cWidth*ind);
                    TweenLite.to(scrollDiv, .5, {x: toX});
                }.bind(this)
            });
        },

        calculateVisibleElement: function(tX)
        {

          var sLeft = -tX;
          var wWidth = $(window).width();

          var visibleElementIndex = Math.round(sLeft/wWidth);

          visibleElementIndex = visibleElementIndex < 0 ? 0: visibleElementIndex;

          return visibleElementIndex;
        },

        onMenuCloseClick: function()
        {
            if(this.subView)
            {
                this.closeSubView();
            }
        },
        onClickSocial: function(e) {
            e.preventDefault();
            var type = e.currentTarget.getAttribute('data-share');
            var link = document.URL;
            var itemIndex = this.subView.ogEl.index();

            console.log(this.detailView);

            if(this.detailView.itemName) {
                var itemName = this.detailView.itemName;
                var socialShare = this.model.items[itemIndex].images[itemName].socialShare[type];
            } else {
                var socialShare = this.model.items[itemIndex].socialShare[type];
            }

            if(typeof this.social[type] === 'function' && socialShare) {
                this.social[type]({
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        }

    });

module.exports = MediaView;

},{"../../../../templates/sections/mobile/charactersDetail.hbs":65,"../../../../templates/sections/mobile/media.hbs":69,"../../../services/Social.js":16,"../../View.js":23,"../../helpers/Helpers.js":24,"../partials/mobile/GalleryDetailView.js":46,"../partials/mobile/VideoDetailView.js":47}],39:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/menu.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");
var Social = require("../../../services/Social.js");

// ************************** Static Variables ***************************

// ****************************** Menu View ******************************
var MenuView = View.extend(
    {
        hammerEvents : {
            "tap .hamburger"    : "toggleMenu",
            "tap .menu-item"    : "onMenuItemClicked",
            "tap .facebook-share" : "facebookShare",
            "touchend .hamburger"    : "defaultPreventer",
            "touchend .menu-item"    : "defaultPreventer",
            "touchend .facebook-share" : "defaultPreventer",
            "click .hamburger"    : "defaultPreventer",
            "click .menu-item"    : "defaultPreventer",
			"click .facebook-share" : "defaultPreventer",
            "tap .tap-hack": "onTapHack"
        },

        initialize : function ()
        {
            this._super();
            this.template = template;
            this.animationSpeed = 0.25;
            this.openWidth = HelperFuncs.Device.currentDevice() == "mobile" ? "100%" : "300px";
            this.open = false;
            this.closeButtonMode = false;
        },

        setup : function ()
        {
            this.hamburger = this.$('.hamburger');
			this.menuContainer = this.$('.menu-container');
            this.topBarLogo = this.$('.top-bar >img');
            this.topBarLogo.hide();

			HelperFuncs.Scroller.initDraggable(this.menuContainer);

            Backbone.Notifications.on("section.afterActive", this.onSectionChange, this);
            Backbone.Notifications.on("subview.showCloseButton", this.onShowCloseButton, this);
        },

        render : function ()
        {
            return this._super();
        },

        defaultPreventer: function(e)
        {
            e.preventDefault();
        },

        toggleMenu : function (e)
        {
            if(this.closeButtonMode == true)
            {
                Backbone.Notifications.trigger("menu.closeModeButtonClick");
                this.closeButtonMode = false;
                this.hamburger.css("background-image", "url("+window.cdn+"/images/menu/menu-icon@2x.d1514abca55cc1599c87ff4b21784128.png)");
				this.hamburger.attr('data-state', 'menu');
                return;
            }

            var tweenTo = this.open ? 0 : this.openWidth;

            var easing = 'Power2.easeInOut';

            TweenLite.to(this.el, this.animationSpeed, {
                width : tweenTo,
                ease  : easing
            });
            this.open = !this.open;

            var hamBG = this.open ? "/images/menu/x@2x.331799ac425a2288a2265bdf62889988.png" : "/images/menu/menu-icon@2x.d1514abca55cc1599c87ff4b21784128.png";
			var hamState = this.open ? "close" : "menu";
            this.hamburger.css("background-image", "url("+window.cdn+ hamBG +")");
			this.hamburger.attr('data-state', hamState);


            this.$el.toggleClass('open');
        },

        onMenuItemClicked : function (e)
        {
            e.preventDefault();
            Backbone.history.navigate($(e.currentTarget).attr("href"), true);
            this.toggleMenu(e);
        },

        onSectionChange: function (e)
        {
            if(e.index() == 0)
            {
                this.topBarLogo.fadeOut();
            }
            else
            {
                this.topBarLogo.fadeIn();
            }
        },

        onShowCloseButton: function(e)
        {
            this.closeButtonMode = true;

            // close the menu if it's open
            this.$el.removeClass('open');

            this.hamburger.css("background-image", "url("+window.cdn+"/images/menu/x@2x.331799ac425a2288a2265bdf62889988.png)");
			this.hamburger.attr('data-state', 'close');
        },

		facebookShare : function (e)
		{
			e.preventDefault();

            Social.ShareFacebook();
		},

        onTapHack: function(e) {
            // create link and dispatch click event
            var href = e.currentTarget.href;
            var a = document.createElement('a');
            a.setAttribute("href", href);
            a.setAttribute("target", "_blank");

            var dispatch = document.createEvent("HTMLEvents");
            dispatch.initEvent("click", true, true);
            a.dispatchEvent(dispatch);
        },
    });

module.exports = MenuView;

},{"../../../../templates/menu.hbs":54,"../../../services/Social.js":16,"../../View.js":23,"../../helpers/Helpers.js":24}],40:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/mobile/story.hbs");
var ScrollBarView = require("../../ScrollBarView.js");
var HelperFuncs = require("../../helpers/Helpers.js");

var Social = require("../../../services/Social.js");

var StoryView = View.extend(
    {
        hammerEvents : {
            "tap .read-more"       : "onReadMoreClicked",
            "tap .closeButton"     : "closeReadMore",
            "tap .bio-link-murphy" : "onMurphyClicked",
            "tap .bio-link-kramer" : "onKramerClicked",
            "touchend .read-more"       : "onPreventDefault",
            "touchend .closeButton"     : "onPreventDefault",
            "touchend .bio-link-murphy" : "onPreventDefault",
            "touchend .bio-link-kramer" : "onPreventDefault",

            'tap div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
            this.readMore = false;
            this.readMoreSlider = null;
            this.readMorePage = 1;

            this.isVideoComplete = false;

            this.curMurphyIndex = 0;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
            Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);
        },

        setup : function ()
        {
            var pages, index;

            pages = ['ryan-murphy', 'larry-kramer'];

            this["ryan-murphy"] = this.$('.bio-murphy');
            this["larry-kramer"] = this.$('.bio-kramer');
            this.blMurphy = this.$('.bio-link-murphy');
            this.blKramer = this.$('.bio-link-kramer');
            this.blReadMore = this.$('.read-more');

            this.mainCopy = this.$('.mainCopy');
            this.story = this.$('.story');

            this.moreCopyParagraphs = this.story.find('.more');

            this.murphyPages = this.$('.bio-page.murphy').children();

            this.bgImg = this.$('.videoImage');
            HelperFuncs.Scroller.initDraggable(this.mainCopy);
            HelperFuncs.Scroller.initDraggable(this["ryan-murphy"]);
            HelperFuncs.Scroller.initDraggable(this["larry-kramer"]);

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            this._super();
            return this;
        },

        handleRoute : function (subsection, detail)
        {
            // cleanup
            if (!subsection)
            {
                //this.closeSubView();
                this.closeReadMore();
            }

            this._super(subsection, detail);
        },

        onSectionActivate : function (el)
        {
            if (el[0] == this.el)
            {
                //this.onWindowResize();
            }
        },

        showSubView : function (viewName, options)
        {
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (this.subView)
            {
                this.closeSubView();
            }

            this._super(viewName, options);

            this.subView = this[viewName];

            this.hideAll();

            if (viewName == 'ryan-murphy')
            {
                // animate in from the left
                this.subView.css("left", -this.subView.width() + "px");

                TweenLite.to(this["ryan-murphy"], 0, {y: 0});
                Backbone.Notifications.trigger("ryan-murphy.Section.FinalPosition", {percent: undefined});
            }
            if (viewName == 'larry-kramer')
            {

                // animate in from the right
                this.subView.css("left", $(window).width() + "px");

                TweenLite.to(this["larry-kramer"], 0, {y: 0});
                Backbone.Notifications.trigger("larry-kramer.Section.FinalPosition", {percent: undefined});
            }

            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");

            this.subView.css("display", "block");

            // trigger slide animation
            TweenLite.to(this.subView, 0.5, {
                css  : {
                    'left' : 0
                },
                ease : Power1.easeOut
            });
        },

        closeSubView : function ()
        {
            this._super();
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (!this.subView)
            {
                return;
            }

            this.showAll();
            this.subView.css("display", "none");
            this.subView = null;

            if (this.murphySlider)
            {
                this.murphySlider.destroySlider();
            }
            if (this.kramerSlider)
            {
                this.kramerSlider.destroySlider();
            }
        },

        openReadMore : function (e)
        {
            this.$el.addClass('read-more');
            this.readMore = true;
            this.story.css("display", "block");
            this.blMurphy.fadeOut();
            this.blKramer.fadeOut();
            Backbone.Notifications.trigger("SubView.Opened");

            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");
        },

        closeReadMore : function (e)
        {
            this.$el.removeClass('read-more');
            this.readMore = false;
            this.story.css("display", "none");
            this.blMurphy.fadeIn();
            this.blKramer.fadeIn();
            Backbone.Notifications.trigger("SubView.Closed");
        },

        onReadMoreClicked : function (e)
        {
            e.preventDefault();
            this.openReadMore();
        },

        onMurphyClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("ryan-murphy");
        },

        onKramerClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("larry-kramer");
        },

        onWindowResize : function (e)
        {
            if (!this.bgVid || !this.bgVid.length) return;

            var halfWinW = $(window).width() / 2;
            var halfWinH = $(window).height() / 2;

            this.bgVid.css("left", (halfWinW - (this.bgVid.width() / 2)) + "px");
            this.bgVid.css("top", (halfWinH - (this.bgVid.height() / 2)) + "px");
            this.bgImg.css("left", (halfWinW - (this.bgImg.width() / 2)) + "px");
            this.bgImg.css("top", (halfWinH - (this.bgImg.height() / 2)) + "px");
        },

        hideAll: function()
        {
            this.$('.bg-filter').addClass('active');
            this.blMurphy.css("display", "none");
            this.blKramer.css("display", "none");
            this.blReadMore.css("display", "none");
        },

        showAll: function()
        {
            this.$('.bg-filter').removeClass('active');
            this.blMurphy.css("display", "block");
            this.blKramer.css("display", "block");
            this.blReadMore.css("display", "block");
        },

        onMenuCloseClick: function()
        {
            if(this.subView || this.readMore)
            {
                this.closeSubView();
            }
        },

        onPreventDefault: function(e)
        {
            e.preventDefault();
        },

        onClickSocial: function(e) {
            e.preventDefault();

            console.log('yes');

            var link = document.URL;
            var type = e.currentTarget.getAttribute('data-share');
            var socialId;
            if(this.subView.hasClass('bio-murphy')) {
                socialId = 'ryanMurphy';
            } else {
                socialId = 'larryKramer';
            }
            var socialShare = this.model.socialCopy[socialId];

            this.social[type]({
                picture: socialShare.thumb,
                title: socialShare.title,
                description: socialShare[type],
                link: link
            });
        }
    });

module.exports = StoryView;

},{"../../../../templates/sections/mobile/story.hbs":70,"../../../services/Social.js":16,"../../ScrollBarView.js":21,"../../View.js":23,"../../helpers/Helpers.js":24}],41:[function(require,module,exports){
var TimelineView = require("../TimelineView.js");
var template = require("../../../../templates/sections/mobile/timeline.hbs");
var HelperFuncs = require("../../helpers/Helpers.js");

var TimelineViewMobile = TimelineView.extend(
    {
        //****************************** Initialization Stuff ******************************
        events: function () {
            return _.extend({}, TimelineView.prototype.events(), {
                'click .item' : ''
            });
        },
        initialize : function(options)
        {
            this._super(options);
			
			this.template = template;
        },

        setup : function ()
        {
            this._super();
            this.initDraggable(this.$items.length, this.$allItemsContainer);

            Backbone.Notifications.on('menu.closeModeButtonClick', this.onMenuCloseClick, this);

            var $summarys = this.$items.find('div.summary div.content');

            $summarys.each(function(i, summary) {
                HelperFuncs.Scroller.initDraggable($(summary), {
                    bounds: $(summary).parent(),
                    edgeResistance: 1
                });
            });
        },

        render: function()
        {
            return this._super();
        },
        initJqueryVariables: function()
        {
            this._super();
        },
        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Draggable Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================


        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        resizeAllItemsContainer: function(windowWidth, windowHeight)
        {
            var containerMinWidth = windowWidth * this.$items.length;

            this.$allItemsContainer.width(containerMinWidth);

            return containerMinWidth;
        },

        showSubView: function(viewname, options)
        {
            this._super(viewname, options);



            // for the close button functionality
            Backbone.Notifications.trigger("subview.showCloseButton");
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Create Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        createSubView: function($view) {
            var newView = this._super($view);

            var events = this.model.years[$view.index()].events;

            var $timelineEvents = $('<div>', {class: 'timeline-events'});
            var $dates = $('<div>', {class: 'dates'});
            var $events = $('<div>', {class : 'events'});

            var $underlay = $('<div>', {class : 'underlay'});

            var $timelineEventsInner = $('<div>', {class: 'full-relative'}).appendTo($timelineEvents);
            var $datesInner = $('<div>', {class: 'full-relative'}).appendTo($dates);
            var $eventsInner = $('<div>', {class: 'full-relative'}).appendTo($events);

            _.each(events, function(event)
            {
                var $date = $('<div>', {
                    html: event.eventDate,
                    class: 'date',
                    'data-id': event.eventDate
                });
                var $copy = $('<div>', {
                    class : 'copy',
                    html: event.copy
                });
                var $title = $('<div>', {
                    class: 'title',
                    html: event.title
                });
                var $event = $('<div>', {
                    class : 'event',
                    'data-id': event.eventDate
                });
                var $close = $('<button></button>', {class: 'close', html: 'close'});
                $copy.append($close);

                $event.append($title, $copy).appendTo($eventsInner);
                $date.appendTo($datesInner).before(' ');
            });

            $('<div>', {class : 'full-width'}).appendTo($datesInner);        //overflow for justify
            $('<div>', {class : 'bar'}).appendTo($datesInner);               //underline;

            $timelineEventsInner.append($dates, $events);
            newView.find('> .full-relative').append($underlay, $timelineEvents);

            newView.$summary = newView.find('div.summary');
            newView.$year = newView.find('div.year');

            newView.$eventsContainer = $timelineEvents;
            newView.$dateItems = $datesInner.find('div.date');
            newView.$dateBar = $datesInner.find('div.bar');

            newView.$background = newView.find('div.background');

            newView.$underlay = $underlay;

            newView.$eventItems = $eventsInner.children();

            return newView;
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Show/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~ Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        positionSubViewToOpen: function($newSubView) {
            this._super($newSubView);

            $newSubView.css({
                left: '0px',
                width: '100%'
            });
        },
        hideDateItems: function($newSubView) {
            //overwrite old hide date items function
        },
        positionNewEvent: function($event, direction) {
            var xStart = this._super($event, direction);

            if(this.subView.$activeEvent) {
                TweenLite.set($event.ogEl, {
                    x: xStart
                });
            }
            TweenLite.set($event, {
                y: 0
            });

            HelperFuncs.Scroller.initDraggable($event);
        },
        // For swapping sub views
        positionSubViewEvent: function($event) {
            this._super($event);

            $event.ogEl.css('opacity', 1);

            HelperFuncs.Scroller.initDraggable($event);
        },



        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================

        // =============================== Animate SubView Open ===================================
        animateSubViewOpen: function() {
            // Static Variables
            var animationTime1 = 0.5;
            var animationTime2 = 0.6;
            var dateStaggerOffsetTime = 0.10;

            var datesLabel = 'animate dates';
            var eventLabel = 'animate event';

            // Dependent on statics
            var dateStaggerAnimationTime = animationTime2 - ((this.subView.$dateItems.length - 1) * dateStaggerOffsetTime);
            var barAnimationTime = animationTime2 - dateStaggerAnimationTime;

            var $activeDate = this.subView.$dateItems.filter(':first');

            var timeline = new TimelineLite({
                paused: true,
                onComplete: function () {
                    this.isAnimating = false;

                    console.log(this.rootedItem);
                    console.log(this.subView.ogEl.index());

                    this.animateToItem(this.subView.ogEl.index(), 0.1);

                }.bind(this)
            });

            //animate in dates after stage 1 has finished
            timeline.addLabel(datesLabel, animationTime1);

            //animate in events after 1/3 of time has passed in stage 2
            timeline.addLabel(eventLabel, animationTime1 + (animationTime2/3));

            /************************* Animations Part 1 *************************/
            //this.addAnimationFullscreen(timeline, animationTime1);
            this.addAnimationSummaryOut(timeline, animationTime1);

            this.addAnimationUnderlayIn(timeline, animationTime1);

            /************************* Animations Part 2 *************************/
            this.addAnimationShowActiveDate(timeline, $activeDate, barAnimationTime, datesLabel);

            /************************* Animations Part 3 *************************/
            this.addTriggerShowEvent(timeline, $activeDate, eventLabel);

            this._super(timeline);
        },
        addAnimationShowActiveDate: function(timeline, $activeDate, barAnimationTime, datesLabel) {
            timeline.add(TweenLite.to($activeDate, barAnimationTime, {
                opacity: 1
            }), datesLabel);
        },

        // =============================== Animate SubView Closed ===================================
        animateSubViewClosed: function(callback) {
            var animationTime = 0.6;

            var animTime2 = animationTime * 3/4;
            var animSummaryStart = animationTime - animTime2;

            var timeline = new TimelineLite({
                paused: true,
                onComplete: function() {
                    this.isAnimating = false;
                    if (typeof callback !== 'undefined') {
                        callback.bind(this)();
                    }
                }.bind(this)
            });
            this.addAnimationMinimize(timeline, animationTime, 0);

            this.addAnimationUnderlayOut(timeline, animationTime, 0);

            this.addAnimationEventsContainerFadeOut(timeline, animTime2, 0);

            this.addAnimationSummaryIn(timeline, animTime2, animSummaryStart);

            this._super(callback, timeline);
        },
        addAnimationYearMoveDown: function(timeline, animationTime1, position) {
            timeline.add(TweenLite.to(this.subView.$year, animationTime1, {
                top: 60
            }), position);
        },
        // ================================== Animate Events ======================================
        addAnimationEventIn: function(timeline, $event, animationTime) {
            timeline.add(TweenLite.to([$event.$title, $event.$copy, $event.ogEl], animationTime, {
                opacity: 1,
                x: 0
            }), 0);
        },
        addAnimationEventOut: function(timeline, $event, animationTime, direction) {
            var xTo = -this.subView.$activeEvent.width()/4;

            xTo = (direction === 'left') ? -xTo : xTo;

            timeline.add(TweenLite.to([$event.$title, $event.$copy, $event.ogEl], animationTime, {
                opacity: 0,
                x: xTo,
                onComplete: function() {
                    $event.removeClass('visible');
                }
            }), 0);
        },

        onMenuCloseClick: function()
        {
            if(this.subView)
            {
                this.closeSubView();
            }
        }


        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================

    });

module.exports = TimelineViewMobile;

},{"../../../../templates/sections/mobile/timeline.hbs":71,"../../helpers/Helpers.js":24,"../TimelineView.js":33}],42:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/partials/galleryDetail.hbs");
var Omniture = require("../../../services/Omniture.js");
var HelperFuncs = require("../../helpers/Helpers.js");
var Social = require("../../../services/Social.js");


var GalleryDetailView = View.extend(
    {
        events :
        {
            "click .nextImage" : "nextItem",
            "touchend .nextImage" : "nextItem",
            "click .prevImage" : "prevItem",
            "touchend .prevImage" : "prevItem",
            'click div.social > a': 'onClickSocial'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
            this.images = this.model.images;
            this.imageKeys = Object.keys(this.images).sort(this.imageSort.bind(this));
            this.currentImageIndex = 0;
            this.itemName = "";
        },

        setup : function ()
        {
            this.media = this.$el.find(".galleryImage");
            this.copy = this.$el.find(".copy");
            this.numbers = this.$el.find(".numbers");

            if(!HelperFuncs.Device.isTablet())
            {
                Omniture.onSlideshowItemOpen({mediaTitle: this.model.id});
            }
            this.initSocialFunctions();
        },

        render : function ()
        {
            return this._super();
        },

        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        showItem : function (item)
        {
            if (!this.images[item])
            {
                this.currentImageIndex = 0;
            }
            else
            {
                this.currentImageIndex = this.imageKeys.indexOf(item);
            }

            this.updateImage();
        },

        nextItem : function (e)
        {
            e.preventDefault();
            e.stopPropagation();

            this.currentImageIndex++;

            if (this.currentImageIndex > this.imageKeys.length - 1)
            {
                this.currentImageIndex = 0;
            }

            this.updateImage();
        },

        prevItem : function (e)
        {
            e.preventDefault();
            e.stopPropagation();

            this.currentImageIndex--;

            if (this.currentImageIndex < 0)
            {
                this.currentImageIndex = this.imageKeys.length - 1;
            }

            this.updateImage();

        },

        updateImage : function ()
        {
            var item = this.imageKeys[this.currentImageIndex];

            if(item != this.itemName)
            {
                this.itemName = item;
            }
            else
            {
                return;
            }

            var img = this.images[this.itemName];

            this.media.attr("src", window.cdn+img.src);
            this.copy.html(img.copy);

            var numberString = (this.currentImageIndex + 1).toString();
            this.numbers.html(numberString + "/" + (this.imageKeys.length).toString());

            // don't show the first item's deeplink
            // this prevents routing issues
            if(this.currentImageIndex > 0)
            {
                Backbone.history.navigate("/media/" + this.model.id + "/" + this.itemName);
            }
            else
            {
                Backbone.history.navigate("/media/" + this.model.id + "/");
            }
        },


        imageSort : function (a, b)
        {
            return this.images[a].index - this.images[b].index;
        },

        onClickSocial: function(e) {
            e.preventDefault();

            var type = e.currentTarget.getAttribute('data-share');
            var link = document.URL;
            var imageIndex = this.imageKeys[this.currentImageIndex]
            var socialShare = this.images[imageIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {
                this.social[type]({
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        },

        show : function(animationDuration, container, options, callback)
        {
            TweenLite.to(container, animationDuration,
            {
                css        : options.css,

                onComplete : callback
            });
        },

        hide : function(animationDuraction, container, options, callback)
        {
            TweenLite.to(container, animationDuraction,
            {
                top    : options.top,
                left   : options.left,
                width  : options.width,
                height : options.height,

                onComplete : callback
            });
        }
    });

module.exports = GalleryDetailView;

},{"../../../../templates/sections/partials/galleryDetail.hbs":73,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../View.js":23,"../../helpers/Helpers.js":24}],43:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/partials/tablet/videoDetail.hbs");

var VideoDetailView = View.extend(
    {
        events : {

        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
        },

        setup : function ()
        {
        },

        render : function ()
        {
            return this._super();
        }
    });

module.exports = VideoDetailView;

},{"../../../../templates/sections/partials/tablet/videoDetail.hbs":77,"../../View.js":23}],44:[function(require,module,exports){
var IframeTpl = require('../../../../../templates/sections/partials/characters/youtube.hbs');

var PartialCharactersYoutubeView = Backbone.View.extend(
    {
        template : IframeTpl,

        model :
        {
            youtubeId : ''
        },

        options :
        {
            videoFinishedCallback : undefined,
            videoReadyCallback    : undefined
        },

        $overlay      : undefined,
        $resizer      : undefined,
        $youtubeEmbed : undefined,
        iframe        : undefined,

        player  : undefined,

        /**
         *
         * @param {object} attrs
         * @param {string} attrs.youtubeId
         * @param {object} [options]
         * @param {function} options.videoFinishedCallback
         */
        initialize : function(attrs, options)
        {
            this._super();

            this.model.youtubeId = attrs.youtubeId || '';

            this.options.videoFinishedCallback = options && options.videoFinishedCallback;
            this.options.videoReadyCallback    = options && options.videoReadyCallback;
        },

        render : function()
        {
            this.$el           = $(this.template(this.model));
            this.el            = this.$el[0];
            this.$overlay      = this.$el.children('.overlay');
            this.$resizer      = this.$el.children('.youtube-resizer');
            this.$youtubeEmbed = this.$el.find('.youtube-embed');

            this._renderNewYoutubeIframe();

            this.iframe       = this.$el.find('iframe')[0];

            return this._super();
        },

        _renderNewYoutubeIframe : function()
        {
            var self = this;

            this.player = new YT.Player(this.$youtubeEmbed[0],
            {
                width   : '100%',
                height  : '100%',
                videoId : this.model.youtubeId,
                events  :
                {
                    'onReady'       : self.options.videoReadyCallback || function(){},
                    'onStateChange' : function(e)
                    {
                        // video ended, call the ending callback
                        if (e.data === 0 && typeof self.options.videoFinishedCallback === 'function')
                        {
                            self.options.videoFinishedCallback();
                        }
                    }
                }
            });
        },

        remove : function()
        {
            this.player.clearVideo();
            this.iframe.src       = 'about:blank';
            this.iframe.innerHTML = '';
            this.player.destroy();

            delete this.player;
            delete this.iframe;
            delete this.$overlay;
            delete this.$resizer;
            delete this.$youtubeEmbed;

            this.unbind();
            this._super();
        },

        /**
         *
         * @param animationDuration
         * @param callback
         */
        show : function(animationDuration, callback)
        {
            new TimelineLite(
            {
                paused     : true,
                onComplete : callback
            })
            .add(TweenLite.to(this.$overlay, animationDuration,
            {
                opacity : 1
            }), 0)
            .play();
        },

        hide : function(animationDuration, callback)
        {
            new TimelineLite(
            {
                paused     : true,
                onComplete : callback
            })
            .add(TweenLite.to(this.$overlay, animationDuration,
            {
                opacity : 0
            }), 0)
            .play();
        }
    });

module.exports = PartialCharactersYoutubeView;

},{"../../../../../templates/sections/partials/characters/youtube.hbs":72}],45:[function(require,module,exports){
var PartialCharactersYoutubeView = require('../characters/youtube.js');
var IframeTpl = require('../../../../../templates/sections/partials/media/youtube.hbs');

var PartialMediaYoutubeView = PartialCharactersYoutubeView.extend(
    {
        template: IframeTpl,

        initialize : function(attrs, options)
        {
            this._super(attrs, options);

            this.model.youtubeId = this.model.videoId;
        },

        render : function()
        {
            return this._super();
        },

        remove : function()
        {
            return this._super();
        },

        show : function(animationDuration, container, options, callback)
        {
            TweenLite.to(container, animationDuration,
             {
                 css        : options.css,

                 onComplete : callback
             });
        },

        hide : function(animationDuraction, container, options, callback)
        {
            TweenLite.to(container, animationDuraction,
            {
                top    : options.top,
                left   : options.left,
                width  : options.width,
                height : options.height,

                onComplete : callback
            });
        }
    });

module.exports = PartialMediaYoutubeView;
},{"../../../../../templates/sections/partials/media/youtube.hbs":74,"../characters/youtube.js":44}],46:[function(require,module,exports){
var View = require("../../../View.js");
var template = require("../../../../../templates/sections/partials/mobile/galleryDetail.hbs");
var Omniture = require("../../../../services/Omniture.js");

var GalleryDetailView = View.extend(
    {
        events :
        {
            "click .nextImage" : "nextItem",
            "touchend .nextImage" : "nextItem",
            "click .prevImage" : "prevItem",
            "touchend .prevImage" : "prevItem"
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
            this.images = this.model.images;
            this.imageKeys = Object.keys(this.images).sort(this.imageSort.bind(this));
            this.currentImageIndex = 0;
            this.itemName = "";
        },

        setup : function ()
        {
            this.media = this.$el.find(".galleryImage");
            this.copy = this.$el.find(".copy");
            this.numbers = this.$el.find(".numbers");
        },

        render : function ()
        {
            return this._super();
        },

        showItem : function (item)
        {
            if (!this.images[item])
            {
                item = this.imageKeys[0];
                this.currentImageIndex = 0;
            }
            else
            {
                this.currentImageIndex = this.imageKeys.indexOf(item);
            }

            this.updateImage();
        },

        nextItem : function (e)
        {
            e.preventDefault();
            e.stopPropagation();

            this.currentImageIndex++;

            if (this.currentImageIndex > this.imageKeys.length - 1)
            {
                this.currentImageIndex = 0;
            }

            this.updateImage();
        },

        prevItem : function (e)
        {
            e.preventDefault();
            e.stopPropagation();

            this.currentImageIndex--;

            if (this.currentImageIndex < 0)
            {
                this.currentImageIndex = this.imageKeys.length - 1;
            }

            this.updateImage();

        },

        updateImage : function ()
        {
            var item = this.imageKeys[this.currentImageIndex];

            if(item != this.itemName)
            {
                this.itemName = item;
            }
            else
            {
                return;
            }

            Omniture.onSlideshowItemOpen({mediaTitle: this.model.id+"/"+this.itemName});

            var img = this.images[this.itemName];

            this.media.attr("src", window.cdn+img.src);
            this.copy.html(img.copy);

            var numberString = (this.currentImageIndex + 1).toString();
            this.numbers.html(numberString + "/" + (this.imageKeys.length).toString());

            // don't show the first item's deeplink
            // this prevents routing issues
            if(this.currentImageIndex > 0)
            {
                Backbone.history.navigate("/media/" + this.model.id + "/" + this.itemName);
            }
            else
            {
                Backbone.history.navigate("/media/" + this.model.id + "/");
            }
        },


        imageSort : function (a, b)
        {
            return this.images[a].index - this.images[b].index;
        }
    });

module.exports = GalleryDetailView;

},{"../../../../../templates/sections/partials/mobile/galleryDetail.hbs":75,"../../../../services/Omniture.js":15,"../../../View.js":23}],47:[function(require,module,exports){
var View = require("../../../View.js");
var template = require("../../../../../templates/sections/partials/mobile/videoDetail.hbs");

var VideoDetailView = View.extend(
    {
        events : {

        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
        },

        setup : function ()
        {
        },

        render : function ()
        {
            return this._super();
        },
    });

module.exports = VideoDetailView;

},{"../../../../../templates/sections/partials/mobile/videoDetail.hbs":76,"../../../View.js":23}],48:[function(require,module,exports){
var HorizontalScrollView = require("../../HorizontalScrollView.js");
var template = require("../../../../templates/sections/tablet/characters.hbs");
var Omniture = require("../../../services/Omniture.js");
var Social = require("../../../services/Social.js");
var PartialCharactersYoutubeView = require('../../sections/partials/characters/youtube.js');

var CharactersView = HorizontalScrollView.extend(
    {
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Initialization ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //

        mediaLightboxView : undefined,

        events: function () {
            return _.extend({}, HorizontalScrollView.prototype.events, {
                'tap .interview': 'onClickInterview',
                "click .arrow-right": "onPreventDefault",
                "click .arrow-left": "onPreventDefault",
                'tap .close-interview': 'onCloseInterview',
                'tap div.youtube-embed-ctr div.overlay': 'onCloseInterview',
                'tap div.social > a': 'onClickSocial',
                'click div.social > a': 'onPreventDefault'
            });
        },
        initialize: function (options) {
            this._super(options);

            this.template = template;

            this.contentPositions = {
                left: {
                    bottom: '8%',
                    left: '10%'
                },
                right: {
                    bottom: '8%',
                    right: '10%'
                }
            };
        },

        setup: function () {
            this._super();

            this.characters = this.model.characters;

            if (this.$items.length > 0) {
                var self = this;

                this.$items.filter(':not(:first-child)[data-id="0"]').remove();     //remove extra nodes;
                this.$items = this.$allItemsContainer.find('div.item');

                this.$allItemsContainer.css('width', this.$items.length + '00%');

                var itemWidth = 100 / this.$items.length + '%';

                this.$items.width(itemWidth);

                this.$items.each(function() {
                    var pos = this.getAttribute('data-pos');

                    if(pos !== '') {
                        var css = self.contentPositions[pos];
                        $(this).find('div.content-ctr').css(css);
                    }
                });

                this.initDraggable(this.$items.length, this.$allItemsContainer);

                this.initSocialFunctions();
            }
        },

        render: function () {
            return this._super();
        },

         showSubView: function (viewName, options)
        {
            if(!options)
            {
                options = "";
            }

            App.router.navigate(this.base + "/"+viewName +"/" + options);

            this.runShowSubView(viewName);
        },

        closeSubView: function()
        {
            if(this.subView) {
                App.router.navigate(this.base);
                this.runCloseSubView();
            }
        },

        initJqueryVariables: function () {
            this._super();

            this.$interviewBtns = this.$el.find('div.interview');

            this.$youtubeContainer = this.$el.find('div.youtube-embed-ctr');
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },
        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        resizeInterview: function(windowWidth, windowHeight) {
            if (!this.mediaLightboxView) return;

            var ratio = 480/853;

            var maxHeight = windowHeight - 280;
            var maxWidth = Math.min(windowWidth * 0.85, 1080);

            if(maxHeight/ratio < maxWidth) {
                this.mediaLightboxView.$resizer.width(maxHeight/ratio);
            } else {
                this.mediaLightboxView.$resizer.css('width','');
            }
        },
        onWindowResize: function() {
            var width = this.$window.width();
            var height = this.$window.height();

            this._super(width, height);

            this.resizeInterview(width, height);
        },

        // ======================================================================================
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Draggable Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ======================================================================================
        initDraggable: function (numItems, $draggableDiv) {
            var startSeconds, startX, endSeconds, endX;

            Draggable.create($draggableDiv, {
                type: "x",
                edgeResistance: 0.5,
                throwProps: true,
                zIndexBoost: false,
                cursor: "pointer",
                onDragEnd: function () {
                    endX = $draggableDiv[0]._gsTransform.x;
                    endSeconds = new Date().getTime() / 1000;
                    this.decelerateAndSnap((endX - startX) / (endSeconds - startSeconds), numItems, $draggableDiv);
                    //this.snapToNearestItem.bind(this, numItems)
                }.bind(this),
                onDragStart: function () {
                    startX = $draggableDiv[0]._gsTransform.x;
                    startSeconds = new Date().getTime() / 1000;

                    this.isAnimating = true;
                }.bind(this)
            });
        },
        decelerateAndSnap: function (velocity, numItems, $draggableDiv) {
            velocity = (velocity > 3000) ? 3000 : (velocity < -3000) ? -3000 : velocity;

            var resistance = 4;
            var animationTime = 0.4 * Math.abs(velocity) / 3000;

            var xTo = $draggableDiv[0]._gsTransform.x + velocity / resistance;
            xTo = Math.min(xTo, 0);

            var divWidth = $draggableDiv.width();

            var closestItemIndex = Math.round((Math.abs(xTo)/divWidth) * this.$items.length);
            closestItemIndex = Math.min(closestItemIndex, this.$items.length-1);

            var newX = -closestItemIndex * divWidth/this.$items.length;

            TweenLite.to($draggableDiv, animationTime, {
                x: newX,
                ease: 'Circ.easeOut',
                onComplete: function () {
                    //this.snapToNearestItem(numItems, $draggableDiv);
                    if(closestItemIndex === 0) {
                        this.closeSubView();

                    } else {
                        var dataId = this.$items.eq(closestItemIndex).attr('data-id');

                        this.showSubView(dataId);
                    }
                    this.isAnimating = false;
                }.bind(this)
            });
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        resizeAllItemsContainer: function (windowWidth, windowHeight) {
            return windowWidth * this.$items.length;
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Show/Close/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        runShowSubView: function(viewName) {
            var $item = this.$items.filter(function () {
                return this.getAttribute('data-id') === viewName;
            });
            var index = $item.index();

            this.subView = $item;
            if(index !== this.rootedItem) {

                this.animateToItem(index, 0.35);
                //animate to item
            }
        },
        runCloseSubView: function () {
            delete this.subView;

            if(this.rootedItem !== 0) {
                this.animateToItem(0, 0.35);
            }
        },
        showInterview: function(youtubeId) {
            this.isAnimating = true;
            this.mediaLightboxView = new PartialCharactersYoutubeView(
            {
                youtubeId: youtubeId
            },
            {
                videoFinishedCallback : this.closeInterview.bind(this)
            });

            this.$youtubeContainer
                .append(this.mediaLightboxView.render().$el)
                .addClass('open');

            this.animateInYoutubeEmbed();
        },
        closeInterview: function() {
            this.isAnimating = true;

            this.animateOutYoutubeEmbed(function() {
                this.$youtubeContainer.removeClass('open');
                this.mediaLightboxView.remove();
                delete this.mediaLightboxView;
            }.bind(this));
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~ Create/Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //


        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //

        // ===================== Animate In Youtube Embed ========================
        animateInYoutubeEmbed: function() {
            this.mediaLightboxView.show(0.3, function()
            {
                this.isAnimating = false;
            }.bind(this));
        },
        animateOutYoutubeEmbed: function(callback) {
            this.mediaLightboxView.hide(0.3, function()
            {
                this.isAnimating = false;

                if(typeof callback === 'function')
                {
                    callback();
                }
            }.bind(this));
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Items Container Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //


        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        detectAndToggleArrows: function () {
            this.toggleItemContainerArrows();
        },

        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Section activate/deactivate ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //


        // ====================================================================================== //
        /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
        // ====================================================================================== //
        onNext: function () {
            if (!this.isAnimating) {
                this.isAnimating = true;

                var newItem = this.rootedItem + 1;

                if (newItem >= this.$items.length) {
                    this.isAnimating = false;
                    return;
                }

                this.showSubView(this.$items.eq(newItem).attr('data-id'));
            }
        },
        onPrev: function () {
            if (!this.isAnimating) {
                this.isAnimating = true;

                var newItem = this.rootedItem - 1;


                if (newItem > 0) {
                    this.showSubView(this.$items.eq(newItem).attr('data-id'));
                } else if(newItem === 0) {
                    this.closeSubView();
                } else {
                    this.isAnimating = false;
                }
            }
        },
        onClickInterview: function(e) {

            if(!this.isAnimating && !!this.subView) {
                var youtubeId = e.currentTarget.getAttribute('data-youtube-id');

                this.showInterview(youtubeId);
            }
        },
        onCloseInterview: function(e) {
            if(!this.isAnimating && !!this.subView) {
                this.closeInterview();
            }
        },
        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.rootedItem - 1;

            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;
            var socialShare = this.characters[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    picture: socialShare.picture,
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        },
        onPreventDefault: function(e)
        {
            e.preventDefault();
        }
    });

module.exports = CharactersView;

},{"../../../../templates/sections/tablet/characters.hbs":79,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../HorizontalScrollView.js":18,"../../sections/partials/characters/youtube.js":44}],49:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/tablet/fight.hbs");

var Omniture = require("../../../services/Omniture.js");
var Social = require("../../../services/Social.js");

var FightView = View.extend(
    {
        events :
        {
            'click .partners-btn': 'showPartnersResources',
            'click .data-btn': 'showDataVisualization',
            'click .switch': 'togglePartnersResourcesContent',
            'click .arrow': 'onPrevNextDataPoint',
            'click .close': 'closeSubView',
            'click .info-ctr > a': 'onPartnerClick',
            'click div.social-ctr > img': 'onClickSocial',
            'click .know_status': 'onPartnerClick'
        },
        initialize : function (options)
        {
            this._super(options);
            this.template = template;

            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
        },

        setup : function ()
        {
            this._super();

            this.bgImg = this.$('.videoImage');

            this.$dataPoints = this.$el.find('div.data-point');

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        render : function ()
        {
            return this._super();
        },

        handleRoute: function(subsection, detail)
        {

            this._super(subsection, detail);
        },

        showSubView : function (viewName, options)
        {
            this._super(viewName, options);

            if (viewName == 'data')
            {
                var dv = $('.data-visualization-ctr');
                this.subView = dv;
                var mask = $('.mask');
                var tl = new TimelineLite();
                this.isAnimating = true;
                var me = this;
                tl.to(dv, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                })
                .to(dv, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.showOrHideArrow();
                    }
                })
                .to(mask, 0, {
                    className: '+=active',
                    ease: Power1.easeOut,
                    onComplete: function() {
                        me.isAnimating = false;
                        dv.addClass('active');
                        me.showOrHideArrow();
                    }
                });
            }
            if (viewName == 'partners-resources')
            {
                var pr = $('.partners-resources-ctr');
                this.subView = pr;
                var me = this;
                var tl = new TimelineLite();
                tl.to(pr, 0, {
                    css: {
                        display: 'block'
                    },
                    ease: Power1.easeOut
                }).to(pr, 0.25, {
                    css: {
                        left: 0
                    },
                    ease: Power1.easeOut,
                    onComplete: function() {
                        pr.addClass('active');
                        me.showOrHideArrow();
                    }
                });
            }
        },

        closeSubView: function()
        {
            if(!this.subView)
            {
                return;
            }

            this._super();

            var tl = new TimelineLite();
            var sub = this.subView;
            var mask = $('.mask');
            var me = this;
            tl.to(mask, 0, {
                className: '-=active',
                ease: Power1.easeOut
            })
            .to(sub, 0.25, {
                css: {
                    left: function() {
                        if(sub.hasClass('data-visualization-ctr')) {
                            return '-100%';
                        } else if(sub.hasClass('partners-resources-ctr')) {
                            return '100%';
                        }
                    }()
                },
                onComplete: function() {
                    this.subView = null;
                    sub.removeClass('active');
                    me.showOrHideArrow();
                },
                ease: Power1.easeOut
            });
        },

        onSectionActivate: function(el)
        {
            if(el[0] == this.el)
            {

            }
        },

        showPartnersResources : function ()
        {
            this.showSubView('partners-resources');
        },

        showDataVisualization : function ()
        {
            this.showSubView('data');
        },

        togglePartnersResourcesContent : function (e) {
            var pc = $('.pr-ctr.partners-ctr');
            var rc = $('.pr-ctr.resources-ctr');

            if($('.partners-ctr').hasClass('active')) {
                var prActive = pc;
                var prInactive = rc;
            } else if($('.resources-ctr').hasClass('active')) {
                var prActive = rc;
                var prInactive = pc;
            }

            var me = this;
            this.isAnimating = true;

            var tl = new TimelineLite();
            tl.to(prActive, 0.25, {
                css: {
                    opacity: 0
                },
                ease: Power1.easeOut
            })
            .to(prActive, 0, {
                css: {
                    display: 'none'
                },
                ease: Power1.easeOut
            })
            .set(prActive, {
                className: '-=active'
            })
            .to(prInactive, 0, {
                css: {
                    display: 'block'
                },
                ease: Power1.easeOut
            })
            .set(prInactive, {
                className: '+=active'
            })
            .to(prInactive, 0.25, {
                css: {
                    opacity: 1
                },
                onComplete: function() {
                    me.isAnimating = false;
                    me.showOrHideArrow();
                },
                ease: Power1.easeOut
            });
        },

        onPrevNextDataPoint : function(e)
        {
            if(this.isAnimating == true) {
                return;
            }
            if($('.partners-resources-ctr').hasClass('active')) {
                this.togglePartnersResourcesContent();
                return;
            }

            var target = $(e.target);
            var cur = $('.data-point.active');
            var me = this;

            //Next
            var next = cur.next();
            var direction = 'right';
            if(cur.index('.data-point') == $('.data-point').length-1) {
                next = $('.data-point').first();
            }
            if(target.hasClass('arrow-left')) {
                //Prev
                next = cur.prev();
                direction = 'left';
                if(cur.index('.data-point') == 0) {
                    next = $('.data-point').last();
                }
            }

            var tl = new TimelineLite();
            this.isAnimating = true;
            tl.to(next, 0, {
                className: '+=active',
                ease: Power1.easeOut
            })
            .to(next, 0, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '100%';
                        } else {
                            return '-100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            })
            .to(cur, 0.5, {
                css: {
                    left: function() {
                        if(direction == 'right') {
                            return '-100%';
                        } else {
                            return '100%';
                        }
                    }()
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(next, 0.5, {
                css: {
                    left: '0'
                },
                ease: Power1.easeOut
            }, 'grp1')
            .to(cur, 0, {
                className: '-=active',
                ease: Power1.easeOut,
                onComplete: function() {
                    me.showOrHideArrow();
                    me.isAnimating = false;
                }
            });
        },

        showOrHideArrow: function() {
            if($('.data-visualization-ctr').hasClass('active')) {
                if($('.data-point.active').index('.data-point') == $('.data-point').length-1) {
                    //Last slide
                    $('.arrow-right').hide();
                    $('.arrow-left').show();
                } else if($('.data-point.active').index('.data-point') == 0) {
                    //First slide
                    $('.arrow-right').show();
                    $('.arrow-left').hide();
                } else {
                    //Middle slide
                    $('.arrow-right').show();
                    $('.arrow-left').show();
                }
            } else if($('.partners-resources-ctr').hasClass('active')) {
                if($('.partners-ctr').hasClass('active')) {
                    $('.arrow-right').show();
                    $('.arrow-left').hide();
                } else if($('.resources-ctr').hasClass('active')) {
                    $('.arrow-right').hide();
                    $('.arrow-left').show();
                }
            } else {
                $('.arrow-right').hide();
                $('.arrow-left').hide();
            }
        },

        onPartnerClick: function(e)
        {
            Omniture.onPartnerLink({URL: e.currentTarget.href});
        },

        onClickSocial: function(e) {
            e.preventDefault();

            var itemIndex = this.$dataPoints.filter('.active').index();       // Putting 2 arrows in the same container as the data points was a bad decision
            var type = e.currentTarget.getAttribute('data-share');

            var link = document.URL;

            var socialShare = this.model.dataPoints[itemIndex].socialShare[type];

            if(typeof this.social[type] === 'function' && socialShare) {

                this.social[type]({
                    picture: socialShare.image,
                    title: socialShare.title,
                    description: socialShare.copy,
                    link: link
                });
            }
        }
    });

module.exports = FightView;

},{"../../../../templates/sections/tablet/fight.hbs":80,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../View.js":23}],50:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/tablet/home.hbs");


var HomeView = View.extend(
{
    events:
    {
        "click .scroll-down" : "onScrollButtonClicked",
        "touchend .scroll-down" : "onScrollButtonClicked",
        "click .trailer" : "onPlayTrailer",
        "touchend .trailer" : "onPlayTrailer",
        "touchend .hbo-films" : "onHBOFilms",
        "click .news" : "onNews",
        "touchend .news" : "onNews",
        "touchend .modal .close" : "onClose",
        "touchend .overlay" : "onClose"
    },

    initialize: function(options)
    {
      this._super(options);
      this.template = template;

      Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
    },

    setup: function()
    {
      this.isModal = false;
    },

    render: function()
    {
      return this._super();
    },

    initRouter: function(root)
    {
        this._super(root);
        App.router.route("", "homeRoute");
    },

    handleRoute: function(subsection, detail)
    {
      this._super(subsection, detail);

      this.onSectionActivate(this.$el);
    },

    onSectionActivate: function(el)
    {
        if(el == this.$el)
        {
            var bb = $('.billing-block');
            var lu = $('.lock-up');
            var pc = $('.premiere-ctr')
            var tl = new TimelineLite();
            tl.to(bb, 2, {
                css: {
                    opacity: 1,
                    top: 0
                },
                ease: Power1.easeOut
            }, '-=0.5')
            .to([lu, pc], 2, {
                css: {
                    opacity: 1
                },
                ease: Power1.easeOut
            }, '-=0.5');
        }
        else
        {
          if(this.subView)
          {
            this.onClose(null);
          }
        }
    },

    onScrollButtonClicked: function(e)
    {
        Backbone.history.navigate("/to-win-a-war", true);
    },

    onPlayTrailer: function(e)
    {
        Backbone.history.navigate("/media/trailer/", true);
    },

    onHBOFilms: function(e)
    {
        window.open("http://www.hbo.com/movies/the-normal-heart?icid=ABC1516");
    },

     onNews: function(e) {

          console.log("opening modal now");

          if(this.isModal == true)
          {
            return;
          }

          this.isModal = true;

          var ol = $('.overlay');
          var md = $('.modal');

          this.subView = md;

          var tl = new TimelineLite();
          tl.to([ol, md], 0, {
              css: {
                  display: 'block'
              }
          }).to([ol, md], .5, {
              className: '+=active',
              ease: Power1.easeOut
          });

          Backbone.Notifications.trigger("SubView.Opened");
      },

      onClose: function(e) {

          console.log("closing modal now");
          if(this.isModal == false)
          {
            return;
          }

          this.isModal = false;

          var ol = $('.overlay');
          var md = $('.modal');

          var tl = new TimelineLite();
          tl.to([ol, md], .5, {
              className: '-=active',
              ease: Power1.easeOut
          }).to([ol, md], 0, {
              css: {
                  display: 'none'
              },
              onComplete: function() {
                  Backbone.Notifications.trigger("SubView.Closed");
                  this.subView = null;
              }
          });
      }
});


module.exports = HomeView;

},{"../../../../templates/sections/tablet/home.hbs":81,"../../View.js":23}],51:[function(require,module,exports){
var HorizontalScrollView = require("../../HorizontalScrollView.js");
var template = require("../../../../templates/sections/tablet/media.hbs");

var Omniture = require("../../../services/Omniture.js");
var Social = require("../../../services/Social.js");

var vidDetail = require("../partials/VideoDetailView.js");
var galleryDetail = require("../partials/GalleryDetailView.js");

var MediaView = HorizontalScrollView.extend({
    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Initialization ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    events: function () {
        return _.extend({}, HorizontalScrollView.prototype.events, {
            'tap div.social > a': 'onClickSocial',
            'touchend div.social > a': 'onPreventDefault'
        });
    },
    initialize: function (options) {
        this._super(options);

        this.template = template;
    },

    mediaElements: document.createDocumentFragment(),

    setup: function () {
        this._super();

        if (this.$items.length > 0) {
            this.$allItemsContainer.css('width', this.$items.length + '00%');

            var itemWidth = 100 / this.$items.length + '%';

            this.$items.width(itemWidth);

            this.initDraggable(this.$items.length, this.$allItemsContainer);
            this.initSocialFunctions();

            this.detailViews =
            {
                "video": vidDetail,
                "gallery": galleryDetail
            };

            _.each(this.$items, function(element, index, list)
            {
                var mediaData = this.model.items[index];
                var mediaType = mediaData.type;

                if(mediaType == "landing")
                {
                    this.mediaElements.appendChild(document.createTextNode(''));
                    return;
                }

                element.detailView = new this.detailViews[mediaType]({model: mediaData});
                this.mediaElements.appendChild(element.detailView.render().el);//.appendTo(container);

                if(mediaData.images)
                {
                    element.detailView.showItem("");
                }

            }.bind(this));
        }
    },

    render: function () {
        return this._super();
    },
    initJqueryVariables: function () {
        this._super();
    },
    initSocialFunctions: function() {
        this.social = {};

        this.social.facebook = _.bind(Social.ShareFacebook, Social);
        this.social.twitter = _.bind(Social.ShareTwitter, Social);
        this.social.tumblr = _.bind(Social.ShareTumblr, Social);
    },

    showSubView: function (viewName, options)
    {

        if(!options)
        {
            options = "";
        }

        App.router.navigate(this.base + "/"+viewName +"/" + options);

        this.runShowSubView(viewName);
    },

    closeSubView: function()
    {
        if(this.subView) {
            App.router.navigate(this.base);
            this.runCloseSubView();
        }
    },
    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Window Resize Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    onWindowResize: function() {
        var width = this.$window.width();
        var height = this.$window.height();

        this._super(width, height);

        if(this.subView) {
            this.resizeInterview(width, height);
        }
    },
    resizeInterview: function(windowWidth, windowHeight) {
        var $contentCtr = this.subView.find('div.content-ctr');

        if($contentCtr.data('type') !== 'video') return;

        var ratio = 480/853;

        var maxHeight = windowHeight - 280;
        var maxWidth = Math.min(windowWidth * 0.85, 1080);

        if(maxHeight/ratio < maxWidth) {
            $contentCtr.width(maxHeight/ratio);
        } else {
            $contentCtr.css('width','');
        }
    },
    resizeAllItemsContainer: function (windowWidth, windowHeight) {
        return windowWidth * this.$items.length;
    },

    // ======================================================================================
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Draggable Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ======================================================================================
    initDraggable: function (numItems, $draggableDiv) {
        var startSeconds, startX, endSeconds, endX;

        Draggable.create($draggableDiv, {
            type: "x",
            edgeResistance: 0.5,
            throwProps: true,
            zIndexBoost: false,
            cursor: "pointer",
            onDragEnd: function () {
                endX = $draggableDiv[0]._gsTransform.x;
                endSeconds = new Date().getTime() / 1000;

                this.decelerateAndSnap((endX - startX) / (endSeconds - startSeconds), numItems, $draggableDiv);
                //this.snapToNearestItem.bind(this, numItems)
            }.bind(this),
            onDragStart: function () {
                startX = $draggableDiv[0]._gsTransform.x;
                startSeconds = new Date().getTime() / 1000;

                this.isAnimating = true;
            }.bind(this)
        });
    },
    decelerateAndSnap: function (velocity, numItems, $draggableDiv) {
        velocity = Math.min(velocity, 3000);
        velocity = Math.max(velocity, -3000);

        var resistance = 4;
        var animationTime = 0.4 * Math.abs(velocity) / 3000;

        var xTo = $draggableDiv[0]._gsTransform.x + velocity / resistance;
        xTo = Math.min(xTo, 0);

        var divWidth = $draggableDiv.width();

        var closestItemIndex = Math.round((Math.abs(xTo)/divWidth) * this.$items.length);
        closestItemIndex = Math.min(closestItemIndex, this.$items.length-1);

        var newX = -closestItemIndex * divWidth/this.$items.length;

        TweenLite.to($draggableDiv, animationTime, {
            x: newX,
            ease: 'Circ.easeOut',
            onComplete: function () {
                //this.snapToNearestItem(numItems, $draggableDiv);
                if(closestItemIndex === 0) {
                    this.closeSubView();

                } else {
                    var dataId = this.$items.eq(closestItemIndex).attr('data-id');


                    this.showSubView(dataId);
                }

                this.isAnimating = false;

            }.bind(this)
        });
    },

    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~ Insert/remove Media Nodes ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    insertMediaNode: function(index)
    {

        // remove the current element from the document fragment and put it in the dom
        var nextMediaNode = this.mediaElements.childNodes[index];

        var mediaNodeContainer = this.$items.eq(index).find('> div > .content-ctr')[0];
        mediaNodeContainer.appendChild(nextMediaNode);

        if($(mediaNodeContainer).data('type') == "gallery")
        {
            Omniture.onSlideshowItemOpen({mediaTitle: "gallery"});
        }
    },

    reclaimMediaNode: function(index)
    {
        // remove the previously appended element from the dom and put it back in the document fragment
        this.mediaElements.insertBefore(
            // the first div in .content-ctr is the same node as mediaNodeContainer
            // from any previous calls to runShowSubView
            this.$items.eq(index).find('> div > .content-ctr > div')[0],
            this.mediaElements.childNodes[index]
        );
    },

    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Show/Close/Swap Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    runShowSubView: function (viewName) {
        var $item = this.$items.filter(function () {
            return this.getAttribute('data-id') === viewName;
        });

        var index = $item.index();
        var oldIndex = this.rootedItem;

        this.subView = $item;

        if(index !== oldIndex) {

            if(oldIndex !== 0) {
                this.reclaimMediaNode(oldIndex);
            }

            this.animateToItem(index, 0.35, undefined, _.bind(function() {
                this.insertMediaNode(index);
                this.onWindowResize();

            }, this));
        }


    },
    runCloseSubView: function () {
        delete this.subView;

        if(this.rootedItem !== 0) {
            this.animateToItem(0, 0.35, undefined, this.reclaimMediaNode.bind(this, this.rootedItem));
        }
    },


    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~ Create/Position/Pre-animation Functions ~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //


    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Animation Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //



    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Items Container Functions ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //


    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Arrow Stuff ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    detectAndToggleArrows: function () {
        this.toggleItemContainerArrows();
    },

    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Section activate/deactivate ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //


    // ====================================================================================== //
    /* ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ Event Listeners ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ */
    // ====================================================================================== //
    onNext: function () {
        if (!this.isAnimating) {
            this.isAnimating = true;

            var newItem = this.rootedItem + 1;

            if (newItem >= this.$items.length) {
                this.isAnimating = false;
                return;
            }

            this.showSubView(this.$items.eq(newItem).attr('data-id'));
        }
    },
    onPrev: function () {
        if (!this.isAnimating) {
            this.isAnimating = true;

            var newItem = this.rootedItem - 1;

            if (newItem > 0) {
                this.showSubView(this.$items.eq(newItem).attr('data-id'));
            } else {
                this.closeSubView();
            }
        }
    },
    onClickSocial: function(e) {
        e.preventDefault();

        var itemIndex = this.rootedItem;
        var type = e.currentTarget.getAttribute('data-share');

        var link = document.URL;

        var dv = this.subView[0].detailView;

        if(dv.itemName)
        {
            var itemName = dv.itemName;
            var socialShare = this.model.items[itemIndex].images[itemName].socialShare[type];
        }
        else
        {
            var socialShare = this.model.items[itemIndex].socialShare[type];
        }

        if(typeof this.social[type] === 'function' && socialShare) {

            this.social[type]({
                title: socialShare.title,
                description: socialShare.copy,
                link: link
            });
        }
    },

    onPreventDefault: function(e)
    {
        e.preventDefault();
    }
});

module.exports = MediaView;

},{"../../../../templates/sections/tablet/media.hbs":82,"../../../services/Omniture.js":15,"../../../services/Social.js":16,"../../HorizontalScrollView.js":18,"../partials/GalleryDetailView.js":42,"../partials/VideoDetailView.js":43}],52:[function(require,module,exports){
var View = require("../../View.js");
var template = require("../../../../templates/sections/tablet/story.hbs");
var ScrollBarView = require("../../ScrollBarView.js");

var Social = require("../../../services/Social.js");

var StoryView = View.extend(
    {
        events : {
            "tap .read-more"       : "onReadMoreClicked",
            "tap .bio-link-murphy" : "onMurphyClicked",
            "tap .bio-link-kramer" : "onKramerClicked",
            "tap .close"           : "onClose",
            'tap div.social > a'   : 'onClickSocial',

            "click .bio-link-murphy" : 'onPreventDefault',
            "click .bio-link-kramer" : 'onPreventDefault',
            'click div.social > a'   : 'onPreventDefault',
            "touchend .bio-link-murphy" : 'onPreventDefault',
            "touchend .bio-link-kramer" : 'onPreventDefault',
            'touchend div.social > a'   : 'onPreventDefault'
        },

        initialize : function (options)
        {
            this._super(options);
            this.template = template;
            this.readMore = false;

            Backbone.Notifications.on("window.resize", this.onWindowResize, this);
            Backbone.Notifications.on('section.beforeActive', this.onSectionActivate, this);
            Backbone.Notifications.on('section.afterActive', this.onSectionActivate, this);
        },

        setup : function ()
        {
            var self = this, pages, index;

            pages = ['mainCopy', 'ryan-murphy', 'larry-kramer'];

            this["ryan-murphy"] = this.$('.bio-murphy');
            this["larry-kramer"] = this.$('.bio-kramer');

            this.story = this.$('.story');

            this.moreCopyParagraphs = this.story.find('.more');

            this.murphyPages = this.$('.bio-page.murphy').children();

            this.bgImg = this.$('.videoImage');

            this.initSocialFunctions();
        },
        initSocialFunctions: function() {
            this.social = {};

            this.social.facebook = _.bind(Social.ShareFacebook, Social);
            this.social.twitter = _.bind(Social.ShareTwitter, Social);
            this.social.tumblr = _.bind(Social.ShareTumblr, Social);
        },

        updateScrolling: function(container, e)
        {
            var percent = e.percent/100;

            container.scrollTop( ( ( HelperFuncs.Element.contentHeight(container[0] ) - container.outerHeight(true) ) * percent) );
        },

        handleRoute : function (subsection, detail)
        {
            // cleanup
            if (!subsection)
            {
                //this.closeSubView();
                this.closeReadMore();
            }

            this._super(subsection, detail);
        },

        onSectionActivate : function (el)
        {
            if (el[0] == this.el)
            {
                this.onWindowResize();
            }
        },

        showSubView : function (viewName, options)
        {
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (this.subView)
            {
                this.closeSubView();
            }

            this._super(viewName, options);

            this.subView = this[viewName];

            if (viewName == 'ryan-murphy')
            {
                // animate in from the left
                this.subView.css("left", -this.subView.width() + "px");
            }

            if (viewName == 'larry-kramer')
            {
                // animate in from the right
                this.subView.css("left", $(window).width() + "px");
            }

            this.subView.css("display", "block");

            // trigger slide animation
            TweenLite.to(this.subView, 0.5, {
                css  : {
                    'left' : 0
                },
                ease : Power1.easeOut
            });
        },

        closeSubView : function ()
        {
            this._super();
            if (this.readMore)
            {
                this.closeReadMore();
            }

            if (!this.subView)
            {
                return;
            }

            TweenLite.to(this.subView, 0.5, {
                css  : {
                    'left' : this.subView === this['ryan-murphy'] ? '-100%' : '100%'
                },
                ease : Power1.easeOut,
                onComplete: this.destroySubView.bind(this)
            });
        },

        destroySubView: function()
        {
            this.subView.css("display", "");
            this.subView = null;

            if (this.subView === this['ryan-murphy'])
            {
                this.murphySlider.destroySlider();
            }

            if (this.subView === this['larry-kramer'])
            {
                this.kramerSlider.destroySlider();
            }
        },

        /**
         *
         * @param {event} [e]
         */
        openReadMore : function (e)
        {
            this.$el.addClass('read-more');
            this.readMore = true;
            this.story.parent().addClass('more');
            this.moreCopyParagraphs.addClass('active');
            Backbone.Notifications.trigger("SubView.Opened");
        },

        /**
         *
         * @param {event} [e]
         */
        closeReadMore : function (e)
        {
            this.$el.removeClass('read-more');
            this.readMore = false;
            this.story.parent().removeClass('more');
            this.moreCopyParagraphs.removeClass('active');
            Backbone.Notifications.trigger("SubView.Closed");
        },

        onReadMoreClicked : function (e)
        {
            e.preventDefault();

            if (this.$el.hasClass('read-more'))
            {
                this.closeReadMore();
            }
            else
            {
                this.openReadMore();
            }
        },

        onMurphyClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("ryan-murphy");
        },

        onKramerClicked : function (e)
        {
            e.preventDefault();
            this.showSubView("larry-kramer");
        },

        onWindowResize : function (e)
        {
            // FIXME memory
            var halfWinW = $(window).width() / 2;
            var halfWinH = $(window).height() / 2;

            this.bgImg.css("left", (halfWinW - (this.bgImg.width() / 2)) + "px");
            this.bgImg.css("top", (halfWinH - (this.bgImg.height() / 2)) + "px");
        },

        onClickSocial: function(e) {
            e.preventDefault();

            var link = document.URL;
            var type = e.currentTarget.getAttribute('data-share');
            var socialId;
            if(this.subView.hasClass('bio-murphy')) {
                socialId = 'ryanMurphy';
            } else {
                socialId = 'larryKramer';
            }
            var socialShare = this.model.socialCopy[socialId];

            this.social[type]({
                picture: socialShare.thumb,
                title: socialShare.title,
                description: socialShare[type],
                link: link
            });
        },

        onClose: function(e) {
            e.preventDefault();

            this.closeSubView();
        },
        onPreventDefault: function(e) {
            e.preventDefault();
        }
    });

module.exports = StoryView;

},{"../../../../templates/sections/tablet/story.hbs":83,"../../../services/Social.js":16,"../../ScrollBarView.js":21,"../../View.js":23}],53:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div>\n  <ul>\n    <li>THE</li>\n    <li>DEFAULT</li>\n    <li>VIEW</li>\n    <li>TEMPLATE</li>\n  </ul>\n</div>\n";
  });

},{"hbsfy/runtime":92}],54:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                    <li>\n                        <a class=\"menu-item\" href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                            <div class=\"text\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                                <div class=\"border\"></div>\n                            </div>\n                        </a>\n                    </li>\n                ";
  return buffer;
  }

  buffer += "<div id=\"menu\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/menu/bg.016d8243b56d83c6ef189eb8261f4ecf.jpg);\">\n    <div class=\"top-bar\">\n        <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/menu/logo@2x.2b8d8bc8c0e219af0810f7ec7583a8bd.png\"/>\n    </div>\n    <div class=\"desktop-logo\">\n        <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/logo.5d33dbe4fe419fe992247792c394f52b.png\"/>\n    </div>\n    <div class=\"menu-container\">\n        <div class=\"menu-items-ctn\">\n            <ul>\n                ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.items), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n            </ul>\n        </div>\n        <div class=\"menu-hbo-ctn\">\n			<div>\n				<a class=\"tap-hack\" href=\"http://www.hbogo.com/#movies/video&assetID=GOROSTGP43099?videoMode=infopagePreview/\" target=\"_blank\">\n                    <img class=\"hbo-logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/menu/hbo_go.d5ebd611f95fe840741e6b33820874c3.png\" alt=\"HBOGO Logo\">\n                </a>\n\n                <a href=\"http://store.hbo.com/the-normal-heart-blu-ray-with-digital-hd/detail.php?p=588153&ecid=PRF-HBO-803303&pa=PRF-HBO-803303\" target=\"_blank\">\n                  <button class=\"buy-btn tap-hack\">Buy the DVD now</button>\n                </a>\n\n				<div class=\"social\">\n					<a href=\"#\" class=\"facebook-share ir\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/menu/fb-share.856bb609a6becea19a2023248d879e6c.png);\">share on facebook</a>\n					<!-- <div class=\"fb-like\" data-href=\"http://normalheartmovie.com\" data-layout=\"button_count\" data-action=\"like\" data-show-faces=\"false\" data-share=\"false\"></div> -->\n					<div class=\"facebook-like\">\n                        <iframe src=\"//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fnormalheartmovie.com&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=1390597394498520\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; height:21px;\" allowTransparency=\"true\"></iframe>\n					</div>\n				</div>\n				<a class=\"tap-hack view-schedule\" href=\"http://www.hbo.com/#/schedule/detail/focusId/756997?startTime=2014-04-16T15:16:16Z&cmpid=ABC464?icid=ABC1516\" class=\"schedule\" target=\"_blank\">\n                    View the schedule\n                </a>\n			</div>\n        </div>\n    </div>\n    <div class=\"hamburger\" data-state=\"menu\" href=\"#\" style=\"background-image:url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/menu/menu-icon@2x.d1514abca55cc1599c87ff4b21784128.png')\"></div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],55:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"preloaderContainer\">\n  <svg width=\"250\" height=\"250\" viewbox=\"0 0 250 250\">\n    <path class=\"border\" transform=\"translate(125, 125)\"/>\n    <path class=\"loader\" transform=\"translate(125, 125) scale(.94)\"/>\n  </svg>\n  <img class=\"logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/logo@2x.ade6d79bece1a468ec35823d27c63b6b.png\"/>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],56:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div class=\"scrollbar\">\n  <div class=\"track\"></div>\n  <div class=\"handle\"></div>\n</div>\n";
  });

},{"hbsfy/runtime":92}],57:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div class=\"container\">\n\n</div>\n";
  });

},{"hbsfy/runtime":92}],58:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                <div class=\"item\" data-pos=\""
    + escapeExpression(((stack1 = (depth0 && depth0.contentPosition)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                    <div class=\"full-relative\">\n                        <div class=\"background\" style=\"";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.photo), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\">\n                        </div>\n                        ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.actorName), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n                </div>\n            ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += " background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.src)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "); background-position:"
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.position)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ";";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                            <div class=\"content-ctr\">\n                                <div class=\"header-ctr\">\n                                    <h2>"
    + escapeExpression(((stack1 = (depth0 && depth0.actorName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + " as</h2>\n                                    <h1>"
    + escapeExpression(((stack1 = (depth0 && depth0.characterName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</h1>\n                                </div>\n                                <div class=\"detail-ctr\">\n                                    <div class=\"copy\">\n                                        "
    + escapeExpression(((stack1 = (depth0 && depth0.quote)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                                    </div>\n                                    <div class=\"cta-ctr clearfix\">\n                                        ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interview), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                                        <div class=\"social\">\n                                            <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                                            <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                                            <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                                        </div>\n                                    </div>\n                                    <button class=\"close\">X Close</button>\n                                </div>\n                            </div>\n                        ";
  return buffer;
  }
function program5(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                                            <div class=\"interview\" style=\"background-image:url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/media_play.eee6c9b787a7703cd1f789dfde308d66.png');\" data-youtube-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.interview)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                                                Interview\n                                            </div>\n                                        ";
  return buffer;
  }

  buffer += "<div class=\"characters-page\">\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <div class=\"all-items-ctr\">\n        <div class=\"full-relative\">\n            ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.characters), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n        </div>\n    </div>\n    <div class=\"active-item-ctr\">\n\n    </div>\n    <div class=\"youtube-embed-ctr\">\n        <!-- youtube.js partial template is injected here. -->\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],59:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                    <div class=\"info-ctr\">\n                        <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                            <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                                <div class=\"empty-space\"></div>\n                                <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                            </div>\n                        </a>\n                        <div class=\"copy\">\n                            "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                        </div>\n                    </div>\n                ";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

function program5(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n            <div class=\"data-point "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "')\">\n                <div class=\"body-ctr\">\n                    <div class=\"header-ctr\">\n                        <h1>";
  stack1 = ((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h1>\n                        <h2>\n                            ";
  stack1 = ((stack1 = (depth0 && depth0.subHeader)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                        </h2>\n                        <div class=\"social-ctr\">\n                            <img data-share=\"twitter\" class=\"twitter\" alt=\"Twitter\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHdpdHRlcl9feDI4X2FsdF94MjlfIiBmaWxsPSIjRkZGRkZGIiBkPSJNODQuODAzLDQ2LjU2NGM1LjA1NS0wLjQxNyw4LjQ4My0yLjcxNSw5LjgwMy01LjgzMw0KCWMtMS44MjMsMS4xMi03LjQ4MywyLjM0MS0xMC42MDksMS4xNzhjLTAuMTUzLTAuNzM0LTAuMzI0LTEuNDMyLTAuNDkyLTIuMDYyYy0yLjM4Mi04Ljc0Ni0xMC41MzctMTUuNzkyLTE5LjA4Mi0xNC45NDENCgljMC42OTEtMC4yNzksMS4zOTMtMC41MzksMi4wOTItMC43NzJjMC45NC0wLjMzNyw2LjQ1OS0xLjIzNSw1LjU5LTMuMTgzYy0wLjczMi0xLjcxMy03LjQ3NSwxLjI5NS04Ljc0NCwxLjY4OA0KCWMxLjY3Ni0wLjYzLDQuNDQ3LTEuNzE0LDQuNzQ0LTMuNjRjLTIuNTY3LDAuMzUyLTUuMDg4LDEuNTY2LTcuMDM1LDMuMzMxYzAuNzAzLTAuNzU3LDEuMjM2LTEuNjc5LDEuMzUtMi42NzINCgljLTYuODQ4LDQuMzc1LTEwLjg0OCwxMy4xOTUtMTQuMDg1LDIxLjc1Yy0yLjU0Mi0yLjQ2My00Ljc5NS00LjQwMy02LjgxNi01LjQ4Yy01LjY3LTMuMDQxLTEyLjQ0OS02LjIxMy0yMy4wOTEtMTAuMTY0DQoJYy0wLjMyNywzLjUyMSwxLjc0MSw4LjIwMyw3LjcsMTEuMzE2Yy0xLjI5MS0wLjE3My0zLjY1MiwwLjIxMy01LjU0LDAuNjY1YzAuNzY5LDQuMDM0LDMuMjgsNy4zNTcsMTAuMDc5LDguOTY0DQoJYy0zLjEwNywwLjIwNS00LjcxMywwLjkxMi02LjE2OCwyLjQzNmMxLjQxNSwyLjgwNSw0Ljg2OCw2LjEwNywxMS4wOCw1LjQyOWMtNi45MDYsMi45NzctMi44MTYsOC40OSwyLjgwNCw3LjY2Nw0KCUMyOC43OTQsNzIuMTQzLDEzLjY3OSw3MS40MTYsNSw2My4xMzRjMjIuNjYxLDMwLjg4LDcxLjkyMSwxOC4yNjMsNzkuMjYyLTExLjQ4MWM1LjUsMC4wNDgsOC43MzMtMS45MDQsMTAuNzM4LTQuMDU2DQoJQzkxLjgzMSw0OC4xMzQsODcuMjM4LDQ3LjU3OCw4NC44MDMsNDYuNTY0eiIvPg0KPC9zdmc+DQo=\" />\n                            <img data-share=\"facebook\" class=\"facebook\" alt=\"Facebook\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iRmFjZWJvb2siIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zOC4wNzgsMjIuNDMxYzAsMi4yNjgsMCwxMi4zOTEsMCwxMi4zOTFIMjl2MTUuMTUyaDkuMDc4Vjk1aDE4LjY0OFY0OS45NzVINjkuMjQNCgljMCwwLDEuMTcyLTcuMjY1LDEuNzQtMTUuMjA5Yy0xLjYyOSwwLTE0LjE4NCwwLTE0LjE4NCwwczAtOC44MTUsMC0xMC4zNmMwLTEuNTQ4LDIuMDMzLTMuNjMxLDQuMDQzLTMuNjMxYzIuMDA2LDAsNi4yMzksMCwxMC4xNiwwDQoJYzAtMi4wNjMsMC05LjE5MSwwLTE1Ljc3NGMtNS4yMzQsMC0xMS4xODksMC0xMy44MTQsMEMzNy42MTcsNSwzOC4wNzgsMjAuMTY3LDM4LjA3OCwyMi40MzF6Ii8+DQo8L3N2Zz4NCg==\" />\n                            <img data-share=\"tumblr\" class=\"tumblr\" alt=\"Tumblr\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHVtYmxyIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTcuODk2LDc4LjU1OWMtMS41MTMtMC44ODktMi45MDEtMi40MTYtMy40NTUtMy44OWMtMC41NjEtMS40ODMtMC40ODktNC40ODktMC40ODktOS43MTMNCglWNDEuODc4aDIwLjk4N1YyNS44MTVINTMuOTUzVjVINDEuMDRjLTAuNTc2LDQuNjM2LTEuNjM3LDguNDY2LTMuMTc2LDExLjQ3Yy0xLjU0MiwzLjAwOC0zLjU3Niw1LjU3OC02LjEyNiw3LjcyNg0KCUMyOS4yLDI2LjM0LDI1LjA2NCwyNy45OTIsMjEuNSwyOS4xMzJ2MTIuNzQ2aDEyLjMyOXYzMS41NjJjMCw0LjEyMSwwLjQzNyw3LjI2NSwxLjMwNiw5LjQyOWMwLjg3MywyLjE2MiwyLjQzMiw0LjIxMSw0LjY4NCw2LjEzOQ0KCWMyLjI1MiwxLjkwNyw0Ljk3MSwzLjM5Niw4LjE2MSw0LjQ0MUM1MS4xNjYsOTQuNDgyLDUzLjYxNiw5NSw1Ny43NjYsOTVjMy42NSwwLDcuMDQ5LTAuMzY4LDEwLjItMS4wODgNCgljMy4xNDctMC43MzgsNi42NjEtMi4wMSwxMC41MzQtMy44MTJWNzUuOWMtNC41NDUsMi45NjUtOS4xMTYsNC40NC0xMy43MTMsNC40NEM2Mi4yLDgwLjM0Miw1OS45MTMsNzkuNzQ3LDU3Ljg5Niw3OC41NTl6Ii8+DQo8L3N2Zz4NCg==\" />\n                        </div>\n                    </div>\n                    <div class=\"chart\">\n                        <img class=\"visible-sm\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.tabletChart)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" />\n                        <img class=\"hidden-sm ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.chartSequence), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\" style=\"width: 93%\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.chart)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" />\n                    </div>\n                </div>\n                <div class=\"source\">\n                    <div class=\"copy\">\n                        <span>\n                            ";
  stack1 = ((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                        </span>\n                    </div>\n                    <a href=\"http://www.unaids.org/\" target=\"_blank\">\n                        <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/data-vis/unaids.39ee97b011dee96262eabec65d99f20f.png\" />\n                    </a>\n                </div>\n                <button class=\"close\">x close</button>\n            </div>\n        ";
  return buffer;
  }
function program6(depth0,data) {
  
  
  return "chartSequence";
  }

  buffer += "<div class=\"fight-page\">\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <img class=\"bg visible-xs\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/fight-continues.24fbd0995e711063031b5c354a5f3e00.jpg\" />\n    <img class=\"bg visible-sm\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/tablet/fight-continues.c277d9470ce325dfafa7d10fc4a18aa0.jpg\" />\n    <video poster=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/video_poster.771c98b1c972c26500b9fd68b4088a7c.jpg\">\n        <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/fight/video.80f4cd4bedf830e5980a0091f4006fb3.webm\" preload=\"auto\" type=\"video/webm\">\n        <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/fight/video.23c85f9013ab1adbc57870cb8e992b06.mp4\" preload=\"auto\" type=\"video/mp4\">\n        <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/fight/video.30255b88f69f33289bd43c60a323a6b2.ogv\" preload=\"auto\" type=\"video/ogv\">\n    </video>\n    <div class=\"fight-ctr\">\n        <div class=\"body-ctr\">\n            <div class=\"copy\">\n                <p>\n                    The crusade against HIV/AIDS has raged for more than 30 years, resulting in some big wins: Treatments\n                    are keeping people with HIV living longer, yearly deaths worldwide have declined since 2005, and researchers\n                    continue to work to unlock the mysteries of this disease. But the war against HIV/AIDS is far from over—and it won’t be until a vaccine is discovered.\n                </p>\n                <p>\n                    Join the fight today by visiting <em>The Normal Heart’s</em> partners and resources and arming yourself with\n                    knowledge about where the battle stands today.\n                </p>\n            </div>\n\n            <div class=\"button data-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-data-btn.52a909c6c3e81a539374f439a603ce82.png)\"></div>\n                <div class=\"copy\">\n                    <h2>learn more</h2>\n                    <h1><strong>HIV/AIDS:</strong> Where We Stand Today</h1>\n                </div>\n            </div>\n\n            <div class=\"button partners-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-partners-btn.6bf04c2446f072cc6bec7f6f06deff15.png)\"></div>\n                <div class=\"copy\">\n                    <h2>find information</h2>\n                    <h1><strong>Partners & Resources</strong></h1>\n                </div>\n            </div>\n\n            <a class=\"know_status\" href=\"http://locator.aids.gov/\" target=\"_blank\">\n                <div class=\"button tested-btn\">\n                    <div class=\"copy\">\n                        <h2>know your status</h2>\n                        <h1>Get tested and find services <br/>with the AIDS.gov locator</h1>\n                    </div>\n                </div>\n            </a>\n        </div>\n    </div>\n\n    <div class=\"partners-resources-ctr\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-bg-no-text.217879ad16c0ea555d13512e722165b9.jpg);\">\n        <div class=\"pr-ctr partners-ctr active\">\n            <h1>Partners</h1>\n            <div class=\"body-ctr\">\n                ";
  stack1 = helpers.each.call(depth0, ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.partners), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n            </div>\n        </div>\n\n        <div class=\"pr-ctr resources-ctr\">\n            <h1>Resources</h1>\n            <div class=\"body-ctr\">\n                <div class=\"row-top\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-top']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n                <div class=\"row-bottom\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-bottom']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n\n        <div class=\"switch\">\n            <button class=\"close\">x close</button>\n        </div>\n    </div>\n\n    <div class=\"data-visualization-ctr\">\n        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.dataPoints), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n    </div>\n    <div class=\"mask\"></div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],60:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"footer-page\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/bg.697be273335840f31565f1272f0a16c4.jpg');\">\n    <div class=\"footer-ctr\">\n        <div class=\"footer-ctr-ctr\">\n            <a href=\"http://www.hbo.com\" target=\"_blank\">\n                <img class=\"hbo-logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/hbo.cc9c872dfba7968927bcb0473804d168.png\" />\n            </a>\n\n            <img class=\"title-treatment visible-xs\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/mobile/title-treatment@2x.cd797cf262fecf24efdf25e200f4531d.png\" />\n            <img class=\"title-treatment hidden-xs\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/title-treatment.d7a0bb7ec0000617d27303b2cdb9462e.png\" />\n\n            <div class=\"visible-xs premiere\">\n                <a href=\"http://www.hbo.com/#/schedule/detail/focusId/756997?startTime=2014-04-16T15:16:16Z&cmpid=ABC464?icid=ABC1516\" target=\"_blank\">View the schedule</a>\n            </div>\n            <div class=\"hidden-xs premiere\">\n                <a href=\"http://www.hbo.com/#/schedule/detail/focusId/756997?startTime=2014-04-16T15:16:16Z&cmpid=ABC464\" target=\"_blank\">View the schedule</a>\n            </div>\n\n            <a href=\"http://www.hbogo.com/#movies/video&assetID=GOROSTGP43099?videoMode=infopagePreview/\" target=\"_blank\">\n                <img class=\"hbo-logo hbo-go\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/hbo_go.fded8871496f5fff070e12b25f69c145.png\" />\n            </a>\n\n            <a href=\"http://store.hbo.com/the-normal-heart-blu-ray-with-digital-hd/detail.php?p=588153&ecid=PRF-HBO-803303&pa=PRF-HBO-803303\" target=\"_blank\">\n              <button class=\"tap-hack\">Buy the DVD now</button>\n            </a>\n\n            <a class=\"join hidden-xs\" href=\"http://connect.hbo.com/the-normal-heart\" target=\"_blank\">\n                Join the Conversation\n                <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/hbo-connect.76986bf27254274279f69eb08c935486.png\" />\n            </a>\n\n            <img class=\"credits\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/legal.b5f5151a3fa51121b4d2ea4cb4d7e929.png\" />\n\n            <div class=\"footer\">\n                <div class=\"visible-xs social\">\n                    <div class=\"facebook-like\">\n                        <iframe src=\"//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fnormalheartmovie.com&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=1390597394498520\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; height:21px;\" allowTransparency=\"true\"></iframe>\n                    </div>\n                    <a href=\"https://www.facebook.com/TheNormalHeartonHBO\" target=\"_blank\">\n                        <img class=\"facebook\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/facebook.37447ad1444e5b3a287b5fd560750e66.png\" />\n                    </a>\n                </div>\n                <div class=\"legal\">\n                    <span>\n                        <a href=\"http://www.hbo.com/html/privacy-policy/index.html\" target=\"_blank\">\n                            Privacy Policy\n                        </a>\n                    </span>\n                    <span>\n                        <a href=\"http://www.hbo.com/html/terms-of-use/index.html\" target=\"_blank\">\n                            Terms of Use\n                        </a>\n                    </span>\n                    <div>\n                        © Home Box Office Inc. All Rights Reserved.<br class=\"visible-xs\" />\n                        This website contains adult content.\n                    </div>\n                </div>\n                <div class=\"hidden-xs social\">\n                    <div class=\"facebook-like\">\n                        <iframe src=\"//www.facebook.com/plugins/like.php?href=https%3A%2F%2Fnormalheartmovie.com&amp;width&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=false&amp;height=21&amp;appId=1390597394498520\" scrolling=\"no\" frameborder=\"0\" style=\"border:none; overflow:hidden; height:21px;\" allowTransparency=\"true\"></iframe>\n                    </div>\n                    <a href=\"https://www.facebook.com/TheNormalHeartonHBO\" target=\"_blank\">\n                        <img class=\"facebook\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/footer/facebook.37447ad1444e5b3a287b5fd560750e66.png\" />\n                    </a>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],61:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"home-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/bg.d159934e57a6f95405451f3a2ada249c.jpg)\">\n    <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/ruff.ca2069a383594f6d8450a2b2545583e2.png\" class=\"character character-left\"/>\n    <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/julia.6472596a668668f62819de637f644b73.png\" class=\"character character-right\"/>\n    <div class=\"billing-block\">\n\n        <div class=\"cast-ctr\">\n            <img class=\"cast\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/cast.fb25e098baf3c4c47a7881534b17275a.png\"/>\n        </div>\n\n        <div class=\"logo-container\">\n            <img class=\"logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/logo.1cc6af49aca9d6210ae298055280f2b1.png\"/>\n\n            <div class=\"btn-ctr\">\n              <button class=\"news tap-hack\">Awards News</button>\n              <button class=\"trailer tap-hack\">\n                  <img class=\"trailerPlay\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/trailer_icon.11d35b033d587403f9cb9797abd17ebf.png\"/>\n                  <div>Watch Trailer</div>\n              </button>\n            </div>\n\n            <div class=\"premiere-ctr\">\n                <a class=\"tap-hack\" href=\"http://www.hbogo.com/#movies/video&assetID=GOROSTGP43099?videoMode=infopagePreview/\" target=\"_blank\">\n                    <div class=\"hbo-logo\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo_go.d917bae106992334c705af7de8a08fa7.png)\"></div>\n                </a>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"lock-up\">\n        <div class=\"scroll-down\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/scroll-down.d3a4a305d93118f611d5e3278f3336d4.png)\"></div>\n        <div class=\"hbo-films\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo-films.bb5747f624558eaab10cf901712d2f6f.png)\"></div>\n    </div>\n\n    <div class=\"overlay\"></div>\n    <div class=\"modal\">\n        <div class=\"close\">X</div>\n        <div class=\"overflow-container\">\n            <div class=\"content-ctr\">\n                <div class=\"content\">\n                  <h1>HBO's <i>The Normal Heart</i> Wins One SAG Award, One Golden Globe, Two Emmys</h1>\n                  <p><i>The Normal Heart</i> prevailed at the Jan. 25 Screen Actors Guild Awards ceremony, with Mark Ruffalo taking home a statue for his role as HIV/AIDS activist Ned Weeks. Ruffalo won for Outstanding Performance by a Male Actor in a Television Movie or Miniseries.</p>\n                  <p>Previously, <i>The Normal Heart</i> took home one Golden Globe Award for Matt Bomer's portrayal of New Your Times reporter Felix Turner in a ceremony put on Jan. 11, 2015, by the Hollywood Foreign Press Association. <i>The Normal Heart</i> also nabbed two Primetime Emmy Awards, awarded by the Television Academy in ceremonies on Aug. 16 and 25, 2014. The awards included Outstanding Television Movie and Outstanding Makeup For A Miniseries or a Movie (Non-Prosthetic).</p>\n                  <div class=\"padding\"></div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <!--<div class=\"play-ctr\">-->\n    <!--<img alt=\"\" id=\"drop-shadow\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzEuNjE4cHgiIGhlaWdodD0iMzEuNjE4cHgiIHZpZXdCb3g9IjAgMCAzMS42MTggMzEuNjE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMS42MTggMzEuNjE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMC41LDAuODA5IDAuNSwzMC44MDkgMzAuNSwxNS44MDkgIi8+DQo8L3N2Zz4NCg==\" />-->\n    <!--</div>-->\n</div>\n\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],62:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"intro-page\" data-duration=\""
    + escapeExpression(((stack1 = (depth0 && depth0.animationDuration)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n  <canvas class=\"intro-canvas\"></canvas>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],63:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n            <div class=\"media-item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                <div class=\"full-relative\">\n                    ";
  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isLanding), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    <div class=\"background\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.photoSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ")\">\n                        <div class=\"filter\"></div>\n                    </div>\n                    <div class=\"content-ctr\" data-type=\""
    + escapeExpression(((stack1 = (depth0 && depth0.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n\n                    </div>\n\n                    <div class=\"title-ctr\">\n                        "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                    </div>\n                </div>\n            </div>\n        ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <span class=\"icon\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.icon)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ");\"></span>\n                    ";
  return buffer;
  }

  buffer += "<div class=\"media-page\">\n\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <div class=\"media-ctr\">\n        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.items), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n    </div>\n    <div class=\"active-item-container\">\n\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],64:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n            <div class=\"item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.actorName), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n				";
  stack1 = helpers.unless.call(depth0, (depth0 && depth0.actorName), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n            </div>\n       ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n					<div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                    <div class=\"content-ctr\">\n                        <div class=\"header-ctr\">\n                            <h2>"
    + escapeExpression(((stack1 = (depth0 && depth0.actorName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + " as</h2>\n                            <h1>"
    + escapeExpression(((stack1 = (depth0 && depth0.characterName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</h1>\n							<div><button class=\"open\">more</button></div>\n                        </div>\n                        <div class=\"detail-ctr\">\n\n                        </div>\n                    </div>\n                ";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n				<div class=\"background landing\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n				<div class=\"arrow arrow-right active\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n				";
  return buffer;
  }

  buffer += "<div class=\"characters-page\">\n    <div class=\"bg-filter\"></div>\n    <div class=\"all-items-ctr\">\n       ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.characters), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n    </div>\n    <div class=\"active-item-ctr\">\n\n    </div>\n\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],65:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n\n	              <div class=\"youtube-container\">\n	                <img />\n	                <a class=\"youtube-embed\" href=\"//www.youtube.com/watch?v="
    + escapeExpression(((stack1 = (depth0 && depth0.interview)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "&html5=1\" target=\"_blank\"> <div class=\"play-but\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/media_play@2x.e983502ceaa64aa1432963f856321696.png);\"></div>\n	                </a>\n	              </div>\n	            ";
  return buffer;
  }

  buffer += "<div class=\"detail-background\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ");\">\n</div>\n<div class=\"detail-content\">\n	<div class=\"header-ctr\">\n	  <h2>"
    + escapeExpression(((stack1 = (depth0 && depth0.actorName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + " as</h2>\n	  <h1>"
    + escapeExpression(((stack1 = (depth0 && depth0.characterName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</h1>\n	</div>\n	<div class=\"copy\">\n	    <div class=\"copy-wrapper\">\n	        <div class=\"copy-ctn\">\n	            <div class=\"quote\">"
    + escapeExpression(((stack1 = (depth0 && depth0.quote)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</div>\n	            ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interview), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n                <div class=\"social\">\n                    <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                    <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                    <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                </div>\n	        </div>\n	    </div>\n	</div>\n</div>\n\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],66:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                                    <div class=\"empty-space\"></div>\n                                    <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                                </div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

  buffer += "<div class=\"fight-page\">\n    <div class=\"fight-continues visible-xs\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/fight-continues.24fbd0995e711063031b5c354a5f3e00.jpg)\"></div>\n    <div class=\"fight-ctr\">\n        <div class=\"body-ctr\">\n            <div class=\"button learn-btn\">\n                Learn about the fight\n            </div>\n\n            <a class=\"know_status\" href=\"http://locator.aids.gov/\" target=\"_blank\">\n                <div class=\"button tested-btn\">\n                    <div class=\"copy\">\n                        <h1>Get tested and find services <br/>with the AIDS.gov locator</h1>\n                    </div>\n                </div>\n            </a>\n\n            <div class=\"button data-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-data-btn.52a909c6c3e81a539374f439a603ce82.png)\"></div>\n                <div class=\"copy\">\n                    <h2>learn more</h2>\n                    <h1><strong>HIV/AIDS:</strong> Where We Stand Today</h1>\n                </div>\n            </div>\n\n            <div class=\"button partners-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-partners-btn.6bf04c2446f072cc6bec7f6f06deff15.png)\"></div>\n                <div class=\"copy\">\n                    <h2>find information</h2>\n                    <h1><strong>Partners & Resources</strong></h1>\n                </div>\n            </div>\n        </div>\n\n        <div class=\"learn\">\n            <p>\n                The crusade against HIV/AIDS has raged for more than 30 years, resulting in some big wins: Treatments\n                are keeping people with HIV living longer, yearly deaths worldwide have declined since 2005, and researchers\n                continue to work to unlock the mysteries of this disease. But the war against HIV/AIDS is far from over\n                — and it won’t be until a vaccine is discovered.\n            </p>\n            <p>\n                Join the fight today by visiting <em>The Normal Heart’s</em> partners and resources and arming yourself with\n                knowledge about where the battle stands today.\n            </p>\n        </div>\n    </div>\n\n    <div class=\"partners-resources-ctr\">\n        <div class=\"inner\">\n            <div class=\"pr-ctr partners-ctr active\">\n                <h1>Partners</h1>\n                <div class=\"body-ctr clearfix\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.partners), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n\n            <h1 class=\"resources\">Resources</h1>\n\n            <div class=\"pr-ctr resources-ctr\">\n                <div class=\"body-ctr clearfix\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-top']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-bottom']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"data-visualization-ctr\">\n        <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/sm-arrow-left.34aa1a04951fb0005bb6447a23c0a20f.png');\"></div>\n        <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/sm-arrow-right.73c7a63894bca0a51ea30b461b4b103a.png');\"></div>\n\n        <div class=\"data-point active dp-worldwide\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/bg1.09c8d9643e75c6caa4194737970fc85e.jpg)\">\n            <div class=\"body-ctr\">\n                <div class=\"header-ctr\">\n                    <h1>MORE ARE INFECTED WITH <br/>HIV EVERY YEAR</h1>\n                    <h2>\n                        Since the epidemic began, the United Nations estimates that 75 million people\n                        have become infected with HIV and 36 million have died of AIDS through 2012,\n                        the most recent year statistics are available.\n                    </h2>\n                </div>\n            </div>\n            <img class=\"chart\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/chart1.77980ac1fc1bde4e038d44457fa94627.png\" />\n            <div class=\"social-ctr\">\n                <img data-share=\"twitter\" class=\"twitter\" alt=\"Twitter\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHdpdHRlcl9feDI4X2FsdF94MjlfIiBmaWxsPSIjRkZGRkZGIiBkPSJNODQuODAzLDQ2LjU2NGM1LjA1NS0wLjQxNyw4LjQ4My0yLjcxNSw5LjgwMy01LjgzMw0KCWMtMS44MjMsMS4xMi03LjQ4MywyLjM0MS0xMC42MDksMS4xNzhjLTAuMTUzLTAuNzM0LTAuMzI0LTEuNDMyLTAuNDkyLTIuMDYyYy0yLjM4Mi04Ljc0Ni0xMC41MzctMTUuNzkyLTE5LjA4Mi0xNC45NDENCgljMC42OTEtMC4yNzksMS4zOTMtMC41MzksMi4wOTItMC43NzJjMC45NC0wLjMzNyw2LjQ1OS0xLjIzNSw1LjU5LTMuMTgzYy0wLjczMi0xLjcxMy03LjQ3NSwxLjI5NS04Ljc0NCwxLjY4OA0KCWMxLjY3Ni0wLjYzLDQuNDQ3LTEuNzE0LDQuNzQ0LTMuNjRjLTIuNTY3LDAuMzUyLTUuMDg4LDEuNTY2LTcuMDM1LDMuMzMxYzAuNzAzLTAuNzU3LDEuMjM2LTEuNjc5LDEuMzUtMi42NzINCgljLTYuODQ4LDQuMzc1LTEwLjg0OCwxMy4xOTUtMTQuMDg1LDIxLjc1Yy0yLjU0Mi0yLjQ2My00Ljc5NS00LjQwMy02LjgxNi01LjQ4Yy01LjY3LTMuMDQxLTEyLjQ0OS02LjIxMy0yMy4wOTEtMTAuMTY0DQoJYy0wLjMyNywzLjUyMSwxLjc0MSw4LjIwMyw3LjcsMTEuMzE2Yy0xLjI5MS0wLjE3My0zLjY1MiwwLjIxMy01LjU0LDAuNjY1YzAuNzY5LDQuMDM0LDMuMjgsNy4zNTcsMTAuMDc5LDguOTY0DQoJYy0zLjEwNywwLjIwNS00LjcxMywwLjkxMi02LjE2OCwyLjQzNmMxLjQxNSwyLjgwNSw0Ljg2OCw2LjEwNywxMS4wOCw1LjQyOWMtNi45MDYsMi45NzctMi44MTYsOC40OSwyLjgwNCw3LjY2Nw0KCUMyOC43OTQsNzIuMTQzLDEzLjY3OSw3MS40MTYsNSw2My4xMzRjMjIuNjYxLDMwLjg4LDcxLjkyMSwxOC4yNjMsNzkuMjYyLTExLjQ4MWM1LjUsMC4wNDgsOC43MzMtMS45MDQsMTAuNzM4LTQuMDU2DQoJQzkxLjgzMSw0OC4xMzQsODcuMjM4LDQ3LjU3OCw4NC44MDMsNDYuNTY0eiIvPg0KPC9zdmc+DQo=\" />\n                <img data-share=\"facebook\" class=\"facebook\" alt=\"Facebook\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iRmFjZWJvb2siIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zOC4wNzgsMjIuNDMxYzAsMi4yNjgsMCwxMi4zOTEsMCwxMi4zOTFIMjl2MTUuMTUyaDkuMDc4Vjk1aDE4LjY0OFY0OS45NzVINjkuMjQNCgljMCwwLDEuMTcyLTcuMjY1LDEuNzQtMTUuMjA5Yy0xLjYyOSwwLTE0LjE4NCwwLTE0LjE4NCwwczAtOC44MTUsMC0xMC4zNmMwLTEuNTQ4LDIuMDMzLTMuNjMxLDQuMDQzLTMuNjMxYzIuMDA2LDAsNi4yMzksMCwxMC4xNiwwDQoJYzAtMi4wNjMsMC05LjE5MSwwLTE1Ljc3NGMtNS4yMzQsMC0xMS4xODksMC0xMy44MTQsMEMzNy42MTcsNSwzOC4wNzgsMjAuMTY3LDM4LjA3OCwyMi40MzF6Ii8+DQo8L3N2Zz4NCg==\" />\n                <img data-share=\"tumblr\" class=\"tumblr\" alt=\"Tumblr\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHVtYmxyIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTcuODk2LDc4LjU1OWMtMS41MTMtMC44ODktMi45MDEtMi40MTYtMy40NTUtMy44OWMtMC41NjEtMS40ODMtMC40ODktNC40ODktMC40ODktOS43MTMNCglWNDEuODc4aDIwLjk4N1YyNS44MTVINTMuOTUzVjVINDEuMDRjLTAuNTc2LDQuNjM2LTEuNjM3LDguNDY2LTMuMTc2LDExLjQ3Yy0xLjU0MiwzLjAwOC0zLjU3Niw1LjU3OC02LjEyNiw3LjcyNg0KCUMyOS4yLDI2LjM0LDI1LjA2NCwyNy45OTIsMjEuNSwyOS4xMzJ2MTIuNzQ2aDEyLjMyOXYzMS41NjJjMCw0LjEyMSwwLjQzNyw3LjI2NSwxLjMwNiw5LjQyOWMwLjg3MywyLjE2MiwyLjQzMiw0LjIxMSw0LjY4NCw2LjEzOQ0KCWMyLjI1MiwxLjkwNyw0Ljk3MSwzLjM5Niw4LjE2MSw0LjQ0MUM1MS4xNjYsOTQuNDgyLDUzLjYxNiw5NSw1Ny43NjYsOTVjMy42NSwwLDcuMDQ5LTAuMzY4LDEwLjItMS4wODgNCgljMy4xNDctMC43MzgsNi42NjEtMi4wMSwxMC41MzQtMy44MTJWNzUuOWMtNC41NDUsMi45NjUtOS4xMTYsNC40NC0xMy43MTMsNC40NEM2Mi4yLDgwLjM0Miw1OS45MTMsNzkuNzQ3LDU3Ljg5Niw3OC41NTl6Ii8+DQo8L3N2Zz4NCg==\" />\n            </div>\n            <div class=\"source\">\n                <div class=\"copy\">\n                <span>\n                    <strong>Source:</strong> UNAIDS Global Fact Sheet 2013\n                </span>\n                </div>\n                <a class=\"tap-hack\" href=\"http://www.unaids.org/\" target=\"_blank\">\n                    <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/data-vis/unaids.39ee97b011dee96262eabec65d99f20f.png\" />\n                </a>\n            </div>\n        </div>\n\n        <div class=\"data-point dp-africa\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/bg2.1dc7c1a0dddc5fddbefecd15747ff261.jpg)\">\n            <div class=\"body-ctr\">\n                <div class=\"header-ctr\">\n                    <h1>HIV/AIDS IS A <br/>CRISIS IN AFRICA</h1>\n                    <h2>\n                        The UN says that 1.6 million died of AIDS globally in 2012,\n                        the majority from Sub-Saharan Africa, where 1.2 million—\n                        or 75 percent of the worldwide total—perished.\n                    </h2>\n                </div>\n            </div>\n            <img class=\"chart\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/chart2.7ec4035c83b39e2c530d432b24b0937c.png\" />\n            <div class=\"social-ctr\">\n                <img data-share=\"twitter\" class=\"twitter\" alt=\"Twitter\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHdpdHRlcl9feDI4X2FsdF94MjlfIiBmaWxsPSIjRkZGRkZGIiBkPSJNODQuODAzLDQ2LjU2NGM1LjA1NS0wLjQxNyw4LjQ4My0yLjcxNSw5LjgwMy01LjgzMw0KCWMtMS44MjMsMS4xMi03LjQ4MywyLjM0MS0xMC42MDksMS4xNzhjLTAuMTUzLTAuNzM0LTAuMzI0LTEuNDMyLTAuNDkyLTIuMDYyYy0yLjM4Mi04Ljc0Ni0xMC41MzctMTUuNzkyLTE5LjA4Mi0xNC45NDENCgljMC42OTEtMC4yNzksMS4zOTMtMC41MzksMi4wOTItMC43NzJjMC45NC0wLjMzNyw2LjQ1OS0xLjIzNSw1LjU5LTMuMTgzYy0wLjczMi0xLjcxMy03LjQ3NSwxLjI5NS04Ljc0NCwxLjY4OA0KCWMxLjY3Ni0wLjYzLDQuNDQ3LTEuNzE0LDQuNzQ0LTMuNjRjLTIuNTY3LDAuMzUyLTUuMDg4LDEuNTY2LTcuMDM1LDMuMzMxYzAuNzAzLTAuNzU3LDEuMjM2LTEuNjc5LDEuMzUtMi42NzINCgljLTYuODQ4LDQuMzc1LTEwLjg0OCwxMy4xOTUtMTQuMDg1LDIxLjc1Yy0yLjU0Mi0yLjQ2My00Ljc5NS00LjQwMy02LjgxNi01LjQ4Yy01LjY3LTMuMDQxLTEyLjQ0OS02LjIxMy0yMy4wOTEtMTAuMTY0DQoJYy0wLjMyNywzLjUyMSwxLjc0MSw4LjIwMyw3LjcsMTEuMzE2Yy0xLjI5MS0wLjE3My0zLjY1MiwwLjIxMy01LjU0LDAuNjY1YzAuNzY5LDQuMDM0LDMuMjgsNy4zNTcsMTAuMDc5LDguOTY0DQoJYy0zLjEwNywwLjIwNS00LjcxMywwLjkxMi02LjE2OCwyLjQzNmMxLjQxNSwyLjgwNSw0Ljg2OCw2LjEwNywxMS4wOCw1LjQyOWMtNi45MDYsMi45NzctMi44MTYsOC40OSwyLjgwNCw3LjY2Nw0KCUMyOC43OTQsNzIuMTQzLDEzLjY3OSw3MS40MTYsNSw2My4xMzRjMjIuNjYxLDMwLjg4LDcxLjkyMSwxOC4yNjMsNzkuMjYyLTExLjQ4MWM1LjUsMC4wNDgsOC43MzMtMS45MDQsMTAuNzM4LTQuMDU2DQoJQzkxLjgzMSw0OC4xMzQsODcuMjM4LDQ3LjU3OCw4NC44MDMsNDYuNTY0eiIvPg0KPC9zdmc+DQo=\" />\n                <img data-share=\"facebook\" class=\"facebook\" alt=\"Facebook\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iRmFjZWJvb2siIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zOC4wNzgsMjIuNDMxYzAsMi4yNjgsMCwxMi4zOTEsMCwxMi4zOTFIMjl2MTUuMTUyaDkuMDc4Vjk1aDE4LjY0OFY0OS45NzVINjkuMjQNCgljMCwwLDEuMTcyLTcuMjY1LDEuNzQtMTUuMjA5Yy0xLjYyOSwwLTE0LjE4NCwwLTE0LjE4NCwwczAtOC44MTUsMC0xMC4zNmMwLTEuNTQ4LDIuMDMzLTMuNjMxLDQuMDQzLTMuNjMxYzIuMDA2LDAsNi4yMzksMCwxMC4xNiwwDQoJYzAtMi4wNjMsMC05LjE5MSwwLTE1Ljc3NGMtNS4yMzQsMC0xMS4xODksMC0xMy44MTQsMEMzNy42MTcsNSwzOC4wNzgsMjAuMTY3LDM4LjA3OCwyMi40MzF6Ii8+DQo8L3N2Zz4NCg==\" />\n                <img data-share=\"tumblr\" class=\"tumblr\" alt=\"Tumblr\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHVtYmxyIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTcuODk2LDc4LjU1OWMtMS41MTMtMC44ODktMi45MDEtMi40MTYtMy40NTUtMy44OWMtMC41NjEtMS40ODMtMC40ODktNC40ODktMC40ODktOS43MTMNCglWNDEuODc4aDIwLjk4N1YyNS44MTVINTMuOTUzVjVINDEuMDRjLTAuNTc2LDQuNjM2LTEuNjM3LDguNDY2LTMuMTc2LDExLjQ3Yy0xLjU0MiwzLjAwOC0zLjU3Niw1LjU3OC02LjEyNiw3LjcyNg0KCUMyOS4yLDI2LjM0LDI1LjA2NCwyNy45OTIsMjEuNSwyOS4xMzJ2MTIuNzQ2aDEyLjMyOXYzMS41NjJjMCw0LjEyMSwwLjQzNyw3LjI2NSwxLjMwNiw5LjQyOWMwLjg3MywyLjE2MiwyLjQzMiw0LjIxMSw0LjY4NCw2LjEzOQ0KCWMyLjI1MiwxLjkwNyw0Ljk3MSwzLjM5Niw4LjE2MSw0LjQ0MUM1MS4xNjYsOTQuNDgyLDUzLjYxNiw5NSw1Ny43NjYsOTVjMy42NSwwLDcuMDQ5LTAuMzY4LDEwLjItMS4wODgNCgljMy4xNDctMC43MzgsNi42NjEtMi4wMSwxMC41MzQtMy44MTJWNzUuOWMtNC41NDUsMi45NjUtOS4xMTYsNC40NC0xMy43MTMsNC40NEM2Mi4yLDgwLjM0Miw1OS45MTMsNzkuNzQ3LDU3Ljg5Niw3OC41NTl6Ii8+DQo8L3N2Zz4NCg==\" />\n            </div>\n            <div class=\"source\">\n                <div class=\"copy\">\n                <span>\n                    <strong>Source:</strong> UNAIDS Global Fact Sheet 2013\n                </span>\n                </div>\n                <a class=\"tap-hack\" href=\"http://www.unaids.org/\" target=\"_blank\">\n                    <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/data-vis/unaids.39ee97b011dee96262eabec65d99f20f.png\" />\n                </a>\n            </div>\n        </div>\n\n        <div class=\"data-point dp-women\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/bg3.17e3943fae3eed31a57f49b3cf863054.jpg)\">\n            <div class=\"body-ctr\">\n                <div class=\"header-ctr\">\n                    <h1>MORE WOMEN THAN <br/>MEN HAVE HIV/AIDS</h1>\n                    <h2>\n                        Worldwide, an estimated 35 million people live with HIV/AIDS, <br/>\n                        and 52 percent of those people are women, according to the UN.\n                    </h2>\n                </div>\n            </div>\n            <img class=\"chart\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/mobile/chart3.6e2e9050f9c8e004b1578bcdf2fe0db9.png\" />\n            <div class=\"social-ctr\">\n                <img data-share=\"twitter\" class=\"twitter\" alt=\"Twitter\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHdpdHRlcl9feDI4X2FsdF94MjlfIiBmaWxsPSIjRkZGRkZGIiBkPSJNODQuODAzLDQ2LjU2NGM1LjA1NS0wLjQxNyw4LjQ4My0yLjcxNSw5LjgwMy01LjgzMw0KCWMtMS44MjMsMS4xMi03LjQ4MywyLjM0MS0xMC42MDksMS4xNzhjLTAuMTUzLTAuNzM0LTAuMzI0LTEuNDMyLTAuNDkyLTIuMDYyYy0yLjM4Mi04Ljc0Ni0xMC41MzctMTUuNzkyLTE5LjA4Mi0xNC45NDENCgljMC42OTEtMC4yNzksMS4zOTMtMC41MzksMi4wOTItMC43NzJjMC45NC0wLjMzNyw2LjQ1OS0xLjIzNSw1LjU5LTMuMTgzYy0wLjczMi0xLjcxMy03LjQ3NSwxLjI5NS04Ljc0NCwxLjY4OA0KCWMxLjY3Ni0wLjYzLDQuNDQ3LTEuNzE0LDQuNzQ0LTMuNjRjLTIuNTY3LDAuMzUyLTUuMDg4LDEuNTY2LTcuMDM1LDMuMzMxYzAuNzAzLTAuNzU3LDEuMjM2LTEuNjc5LDEuMzUtMi42NzINCgljLTYuODQ4LDQuMzc1LTEwLjg0OCwxMy4xOTUtMTQuMDg1LDIxLjc1Yy0yLjU0Mi0yLjQ2My00Ljc5NS00LjQwMy02LjgxNi01LjQ4Yy01LjY3LTMuMDQxLTEyLjQ0OS02LjIxMy0yMy4wOTEtMTAuMTY0DQoJYy0wLjMyNywzLjUyMSwxLjc0MSw4LjIwMyw3LjcsMTEuMzE2Yy0xLjI5MS0wLjE3My0zLjY1MiwwLjIxMy01LjU0LDAuNjY1YzAuNzY5LDQuMDM0LDMuMjgsNy4zNTcsMTAuMDc5LDguOTY0DQoJYy0zLjEwNywwLjIwNS00LjcxMywwLjkxMi02LjE2OCwyLjQzNmMxLjQxNSwyLjgwNSw0Ljg2OCw2LjEwNywxMS4wOCw1LjQyOWMtNi45MDYsMi45NzctMi44MTYsOC40OSwyLjgwNCw3LjY2Nw0KCUMyOC43OTQsNzIuMTQzLDEzLjY3OSw3MS40MTYsNSw2My4xMzRjMjIuNjYxLDMwLjg4LDcxLjkyMSwxOC4yNjMsNzkuMjYyLTExLjQ4MWM1LjUsMC4wNDgsOC43MzMtMS45MDQsMTAuNzM4LTQuMDU2DQoJQzkxLjgzMSw0OC4xMzQsODcuMjM4LDQ3LjU3OCw4NC44MDMsNDYuNTY0eiIvPg0KPC9zdmc+DQo=\" />\n                <img data-share=\"facebook\" class=\"facebook\" alt=\"Facebook\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iRmFjZWJvb2siIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zOC4wNzgsMjIuNDMxYzAsMi4yNjgsMCwxMi4zOTEsMCwxMi4zOTFIMjl2MTUuMTUyaDkuMDc4Vjk1aDE4LjY0OFY0OS45NzVINjkuMjQNCgljMCwwLDEuMTcyLTcuMjY1LDEuNzQtMTUuMjA5Yy0xLjYyOSwwLTE0LjE4NCwwLTE0LjE4NCwwczAtOC44MTUsMC0xMC4zNmMwLTEuNTQ4LDIuMDMzLTMuNjMxLDQuMDQzLTMuNjMxYzIuMDA2LDAsNi4yMzksMCwxMC4xNiwwDQoJYzAtMi4wNjMsMC05LjE5MSwwLTE1Ljc3NGMtNS4yMzQsMC0xMS4xODksMC0xMy44MTQsMEMzNy42MTcsNSwzOC4wNzgsMjAuMTY3LDM4LjA3OCwyMi40MzF6Ii8+DQo8L3N2Zz4NCg==\" />\n                <img data-share=\"tumblr\" class=\"tumblr\" alt=\"Tumblr\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHVtYmxyIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTcuODk2LDc4LjU1OWMtMS41MTMtMC44ODktMi45MDEtMi40MTYtMy40NTUtMy44OWMtMC41NjEtMS40ODMtMC40ODktNC40ODktMC40ODktOS43MTMNCglWNDEuODc4aDIwLjk4N1YyNS44MTVINTMuOTUzVjVINDEuMDRjLTAuNTc2LDQuNjM2LTEuNjM3LDguNDY2LTMuMTc2LDExLjQ3Yy0xLjU0MiwzLjAwOC0zLjU3Niw1LjU3OC02LjEyNiw3LjcyNg0KCUMyOS4yLDI2LjM0LDI1LjA2NCwyNy45OTIsMjEuNSwyOS4xMzJ2MTIuNzQ2aDEyLjMyOXYzMS41NjJjMCw0LjEyMSwwLjQzNyw3LjI2NSwxLjMwNiw5LjQyOWMwLjg3MywyLjE2MiwyLjQzMiw0LjIxMSw0LjY4NCw2LjEzOQ0KCWMyLjI1MiwxLjkwNyw0Ljk3MSwzLjM5Niw4LjE2MSw0LjQ0MUM1MS4xNjYsOTQuNDgyLDUzLjYxNiw5NSw1Ny43NjYsOTVjMy42NSwwLDcuMDQ5LTAuMzY4LDEwLjItMS4wODgNCgljMy4xNDctMC43MzgsNi42NjEtMi4wMSwxMC41MzQtMy44MTJWNzUuOWMtNC41NDUsMi45NjUtOS4xMTYsNC40NC0xMy43MTMsNC40NEM2Mi4yLDgwLjM0Miw1OS45MTMsNzkuNzQ3LDU3Ljg5Niw3OC41NTl6Ii8+DQo8L3N2Zz4NCg==\" />\n            </div>\n            <div class=\"source\">\n                <div class=\"copy\">\n                <span>\n                    <strong>Sources:</strong> UNAIDS Global Fact Sheet 2013; <br/>\n                    UNAIDS Report on the Global AIDS Epidemic 2013\n                </span>\n                </div>\n                <a class=\"tap-hack\" href=\"http://www.unaids.org/\" target=\"_blank\">\n                    <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/data-vis/unaids.39ee97b011dee96262eabec65d99f20f.png\" />\n                </a>\n            </div>\n        </div>\n\n    </div>\n    <div class=\"mask\" style=\"clear:both;\"></div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],67:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"home-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/mobile/bg.00d94f5858e6b1877275050a42171090.jpg)\">\n    <div class=\"billing-block\">\n        <div class=\"cast-ctr\">\n            <img class=\"cast\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/cast.fb25e098baf3c4c47a7881534b17275a.png\"/>\n        </div>\n\n        <div class=\"logo-ctr\">\n            <img class=\"logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/mobile/lockup@2x.fc1610c82d76ee258cbca5aa2256b999.png\" />\n            <button class=\"news\">Awards News</button>\n        </div>\n\n        <div class=\"premiere-ctr\">\n            <a class=\"tap-hack\" href=\"http://www.hbogo.com/#movies/video&assetID=GOROSTGP43099?videoMode=infopagePreview/\" target=\"_blank\">\n                <div class=\"hbo-logo\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo_go.d917bae106992334c705af7de8a08fa7.png)\"></div>\n            </a>\n        </div>\n    </div>\n\n    <div class=\"lock-up\">\n        <div class=\"scroll-down\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/mobile/scroll@2x.5c4630c5da07827e88abd1aeb14558ec.png)\"></div>\n        <span>scroll down to continue</span>\n    </div>\n\n    <div class=\"hbo-films\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo-films.bb5747f624558eaab10cf901712d2f6f.png)\"></div>\n\n    <div class=\"modal\">\n      <div class=\"content-ctr\">\n        <div class=\"content\">\n          <h1>HBO's <i>The Normal Heart</i> Wins One SAG Award, One Golden Globe, Two Emmys</h1>\n                  <p><i>The Normal Heart</i> prevailed at the Jan. 25 Screen Actors Guild Awards ceremony, with Mark Ruffalo taking home a statue for his role as HIV/AIDS activist Ned Weeks. Ruffalo won for Outstanding Performance by a Male Actor in a Television Movie or Miniseries.</p>\n                  <p>Previously, <i>The Normal Heart</i> took home one Golden Globe Award for Matt Bomer's portrayal of New Your Times reporter Felix Turner in a ceremony put on Jan. 11, 2015, by the Hollywood Foreign Press Association. <i>The Normal Heart</i> also nabbed two Primetime Emmy Awards, awarded by the Television Academy in ceremonies on Aug. 16 and 25, 2014. The awards included Outstanding Television Movie and Outstanding Makeup For A Miniseries or a Movie (Non-Prosthetic).</p>\n        </div>\n      </div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],68:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"intro-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.mobile)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ")\"></div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],69:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n            <div class=\"item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                ";
  stack1 = helpers.unless.call(depth0, (depth0 && depth0.isLanding), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n				\n				";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.isLanding), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n            </div>\n       ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                    <div class=\"content-ctr\">\n                        <span class=\"icon\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.iconMobile)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ");\"></span>\n                        <div class=\"header-ctr\">\n                            <h2>"
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</h2>\n                        </div>\n                        <div class=\"detail-ctr\">\n\n                        </div>\n                    </div>\n                ";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n				 <div class=\"arrow arrow-right active\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n				 ";
  return buffer;
  }

  buffer += "<div class=\"media-page\">\n    <div class=\"bg-filter\"></div>\n    <div class=\"all-items-ctr\">\n       ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.items), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n    </div>\n    <div class=\"active-item-ctr\">\n\n    </div>\n\n   \n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],70:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", self=this, escapeExpression=this.escapeExpression;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                <p>\n                    ";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </p>\n            ";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <h4>";
  stack1 = ((stack1 = (depth0 && depth0.question)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h4>\n\n                                ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.answer), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </article>\n                        ";
  return buffer;
  }
function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                                    <p>";
  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                                ";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <p>";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                            </article>\n                        ";
  return buffer;
  }

  buffer += "<div class=\"story-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/mobile/bg@2x.5c0a8011516ea927fd15eb979d795033.jpg);\">\n    <div class=\"bg-filter\"></div>\n    <div class=\"story\">\n        <div class=\"mainCopy\">\n            <div class=\"closeButton\">X</div>\n            ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.mainCopy), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n        </div>\n    </div>\n    <div class=\"read-more\">read</div>\n    <a href=\"#\" class=\"bio-link bio-link-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>conversation with</span>\n                <h5>Ryan Murphy</h5>\n            </div>\n        </div>\n    </a>\n    <a href=\"#\" class=\"bio-link bio-link-kramer\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>biography of</span>\n                <h5>Larry Kramer</h5>\n            </div>\n        </div>\n    </a>\n\n    <div class=\"bio bio-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\"></div>\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>a conversation with ryan murphy</h2>\n\n                    <div class=\"bio-page murphy\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.ryanMurphy), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                    <div class=\"social\">\n                        <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                        <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                        <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- /.bio-murphy -->\n\n    <div class=\"bio bio-kramer\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\"></div>\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>the biography of Larry Kramer</h2>\n\n                    <div class=\"bio-page kramer\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.larryKramer), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                    <div class=\"social\">\n                        <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                        <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                        <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- /.bio-kramer -->\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],71:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                <div class=\"item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                    <div class=\"full-relative\">\n                        <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n\n                        <div class=\"year\">"
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</div>\n                        <div class=\"summary\">\n                            <div class=\"full-relative\">\n                                <div class=\"content\">\n                                    ";
  stack1 = ((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                                    <div class=\"buttons\">\n                                        <button data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" class=\"open\">more</button>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            ";
  return buffer;
  }

  buffer += "<div class=\"timeline-page\">\n    <div class=\"timeline\">\n        <div class=\"all-items-ctr\">\n            ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.years), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n        </div>\n        <div class=\"active-item-ctr\">\n\n        </div>\n		<div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n		 <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],72:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  


  return "<div class=\"full-relative\">\n    <div class=\"overlay\"></div>\n    <div class=\"youtube-resizer\">\n        <div class=\"full-relative\">\n            <div class=\"empty-space\"></div>\n            <div class=\"youtube-embed\" allowfullscreen></div>\n            <div class=\"close-interview\">X</div>\n        </div>\n    </div>\n</div>";
  });

},{"hbsfy/runtime":92}],73:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"gallery-table\">\n    <div class=\"gallery-cell\">\n        <div class=\"nav img-controls clearfix\">\n          <div class=\"pagination\"><span class=\"prevImage\">&lt; Previous Image</span>|<span class=\"nextImage\">Next Image &gt;</span></div>\n	        <button class=\"close\">X</button>\n		</div>\n        <img class=\"galleryImage\" />\n        <div class=\"copy-ctr\">\n            <div class=\"copy\">\n\n            </div>\n            <div class=\"numbers\">\n            </div>\n			<div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n			</div>\n        </div>\n\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],74:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"empty-space\"></div>\n<div class=\"media-table\">\n    <div class=\"media-cell\">\n        <div class=\"nav img-controls clearfix\">\n            <button class=\"close\">X</button>\n        </div>\n        <div class=\"media\">\n            <div class=\"full-relative\">\n                <div class=\"youtube-embed\" allowfullscreen></div>\n            </div>\n        </div>\n        <div class=\"copy-ctr\">\n            <div class=\"copy\">\n                "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n            </div>\n            <div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n            </div>\n        </div>\n    </div>\n\n\n    <!--<div class=\"play-ctr\">-->\n    <!--<img alt=\"\" id=\"drop-shadow\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzEuNjE4cHgiIGhlaWdodD0iMzEuNjE4cHgiIHZpZXdCb3g9IjAgMCAzMS42MTggMzEuNjE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMS42MTggMzEuNjE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMC41LDAuODA5IDAuNSwzMC44MDkgMzAuNSwxNS44MDkgIi8+DQo8L3N2Zz4NCg==\" />-->\n    <!--</div>-->\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],75:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"gallery-table\">\n    <div class=\"gallery-cell\">\n        <img class=\"galleryImage\" />\n        <div class=\"copy-ctr\">\n            <div class=\"copy\">\n\n            </div>\n            <div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n            </div>\n        </div>\n\n        <div class=\"arrow arrow-left active prevImage\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n        <div class=\"arrow arrow-right active nextImage\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n        <div class=\"numbers\">\n        </div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],76:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"detail-background\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.mobileSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ");\"></div>\n<div class=\"media-table\">\n    <div class=\"media-cell\">\n        <div class=\"media\">\n                <iframe src=\"//www.youtube.com/embed/"
    + escapeExpression(((stack1 = (depth0 && depth0.videoId)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "?rel=0\" frameborder=\"0\" allowfullscreen></iframe>\n        </div>\n	    <div class=\"copy-ctr\">\n	        <div class=\"copy\">\n	            "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n	        </div>\n			<div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n			</div>\n	    </div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],77:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div>\n    <div class=\"empty-space\"></div>\n    <div class=\"media-table\">\n        <div class=\"media-cell\">\n            <div class=\"nav img-controls clearfix\">\n                <button class=\"close\">X</button>\n            </div>\n            <div class=\"media\">\n                <div class=\"full-relative\">\n                    <iframe src=\"//www.youtube.com/embed/"
    + escapeExpression(((stack1 = (depth0 && depth0.videoId)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "?rel=0&autoplay=1&html5=1\" frameborder=\"0\" allowfullscreen></iframe>\n                </div>\n            </div>\n            <div class=\"copy-ctr\">\n                <div class=\"copy\">\n                    "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                </div>\n                <div class=\"social\">\n                    <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                    <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                    <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                </div>\n            </div>\n        </div>\n\n\n        <!--<div class=\"play-ctr\">-->\n        <!--<img alt=\"\" id=\"drop-shadow\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB3aWR0aD0iMzEuNjE4cHgiIGhlaWdodD0iMzEuNjE4cHgiIHZpZXdCb3g9IjAgMCAzMS42MTggMzEuNjE4IiBlbmFibGUtYmFja2dyb3VuZD0ibmV3IDAgMCAzMS42MTggMzEuNjE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxwb2x5Z29uIGZpbGw9IiNGRkZGRkYiIHBvaW50cz0iMC41LDAuODA5IDAuNSwzMC44MDkgMzAuNSwxNS44MDkgIi8+DQo8L3N2Zz4NCg==\" />-->\n        <!--</div>-->\n    </div>\n</div>";
  return buffer;
  });

},{"hbsfy/runtime":92}],78:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper, options;
  buffer += "\n                        ";
  stack1 = (helper = helpers.ifCond || (depth0 && depth0.ifCond),options={hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data},helper ? helper.call(depth0, (data == null || data === false ? data : data.index), ">", 1, options) : helperMissing.call(depth0, "ifCond", (data == null || data === false ? data : data.index), ">", 1, options));
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <p class=\"more\">\n                                ";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </p>\n                        ";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <p>\n                                ";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </p>\n                        ";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <h4>";
  stack1 = ((stack1 = (depth0 && depth0.question)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h4>\n\n                                ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.answer), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </article>\n                        ";
  return buffer;
  }
function program7(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                                    <p>";
  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                                ";
  return buffer;
  }

function program9(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <p>";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                            </article>\n                        ";
  return buffer;
  }

  buffer += "<div class=\"story-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/bg.80774f6bcc4b4b3546dc8d4ec2de2d18.jpg);\">\n    <img class=\"videoImage\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/video.1eedd089dcc152f90cdace3b1047e602.jpg\">\n    <video poster=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/video_poster.0690a449367beea764f040a8524ae67b.jpg\">\n      <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/story/video.9f05d376b0c0a06cb6847f30e6ac99ac.webm\" preload=\"auto\" type=\"video/webm\">\n      <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/story/video.f4af5b1bcade5b312102dfa7c466472e.mp4\" preload=\"auto\" type=\"video/mp4\">\n      <source src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/videos/story/video.df26db09ae1296b48b41d5537625b00a.ogv\" preload=\"auto\" type=\"video/ogv\">\n    </video>\n    <div class=\"bg-filter\"></div>\n    <div class=\"storyOverflowWrapper\">\n        <div class=\"story\">\n            <div class=\"pageContainer\">\n                <div class=\"mainCopy\">\n                    ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.mainCopy), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"read-more\"><!--content in CSS--></div>\n    <a href=\"#\" class=\"bio-link bio-link-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>conversation with</span>\n                <h5>Ryan Murphy</h5>\n            </div>\n        </div>\n    </a>\n    <a href=\"#\" class=\"bio-link bio-link-kramer\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>biography of</span>\n                <h5>Larry Kramer</h5>\n            </div>\n        </div>\n    </a>\n\n    <div class=\"bio bio-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\">\n            <button class=\"close with-text sub-view\">X Close</button>\n        </div>\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>a conversation with ryan murphy</h2>\n\n                    <div class=\"bio-page murphy\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.ryanMurphy), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                    <div class=\"social\">\n                        <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                        <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                        <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n    <!-- /.bio-murphy -->\n\n    <div class=\"bio bio-kramer\">\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>the biography of Larry Kramer</h2>\n\n                    <div class=\"bio-page kramer\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.larryKramer), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                    <div class=\"social\">\n                        <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                        <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                        <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\">\n            <button class=\"close with-text sub-view\">X Close</button>\n        </div>\n    </div>\n    <!-- /.bio-kramer -->\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],79:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n            <div class=\"item\" data-pos=\""
    + escapeExpression(((stack1 = (depth0 && depth0.contentPosition)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                <div class=\"full-relative\">\n                    <div class=\"background\" style=\"";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.photo), {hash:{},inverse:self.noop,fn:self.program(2, program2, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\">\n                    </div>\n                    ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.actorName), {hash:{},inverse:self.noop,fn:self.program(4, program4, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += " background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.tabletSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "); background-position:"
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.position)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ";";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"content-ctr\">\n                            <div class=\"header-ctr\">\n                                <h2>"
    + escapeExpression(((stack1 = (depth0 && depth0.actorName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + " as</h2>\n                                <h1>"
    + escapeExpression(((stack1 = (depth0 && depth0.characterName)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</h1>\n                            </div>\n                            <div class=\"detail-ctr\">\n                                <div class=\"copy\">\n                                    "
    + escapeExpression(((stack1 = (depth0 && depth0.quote)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                                </div>\n                                <div class=\"cta-ctr clearfix\">\n                                    ";
  stack1 = helpers['if'].call(depth0, (depth0 && depth0.interview), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                                    <div class=\"social\">\n                                        <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                                        <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                                        <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n                                    </div>\n                                </div>\n                                <button class=\"close\">X Close</button>\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }
function program5(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                                        <div class=\"interview\" style=\"background-image:url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/media_play.eee6c9b787a7703cd1f789dfde308d66.png');\" data-youtube-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.interview)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                                            Interview\n                                        </div>\n                                    ";
  return buffer;
  }

  buffer += "<div class=\"characters-page\">\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <div class=\"all-items-ctr\">\n        <div class=\"full-relative\">\n        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.characters), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n        </div>\n    </div>\n    <div class=\"active-item-ctr\">\n\n    </div>\n    <div class=\"youtube-embed-ctr\">\n        <!-- youtube embed template goes here -->\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],80:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                                    <div class=\"empty-space\"></div>\n                                    <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                                </div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

function program3(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

function program5(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                        <div class=\"info-ctr\">\n                            <a href=\""
    + escapeExpression(((stack1 = (depth0 && depth0.link)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" target=\"_blank\">\n                                <div class=\"logo-ctr "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "');\"></div>\n                            </a>\n                            <div class=\"copy\">\n                                "
    + escapeExpression(((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                            </div>\n                        </div>\n                    ";
  return buffer;
  }

function program7(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n            <div class=\"data-point "
    + escapeExpression(((stack1 = (depth0 && depth0['class'])),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.image)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "')\">\n                <div class=\"body-ctr\">\n                    <div class=\"header-ctr\">\n                        <h1>";
  stack1 = ((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h1>\n                        <h2>\n                            ";
  stack1 = ((stack1 = (depth0 && depth0.subHeader)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                        </h2>\n                        <div class=\"social-ctr\">\n                            <img data-share=\"twitter\" class=\"twitter\" alt=\"Twitter\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHdpdHRlcl9feDI4X2FsdF94MjlfIiBmaWxsPSIjRkZGRkZGIiBkPSJNODQuODAzLDQ2LjU2NGM1LjA1NS0wLjQxNyw4LjQ4My0yLjcxNSw5LjgwMy01LjgzMw0KCWMtMS44MjMsMS4xMi03LjQ4MywyLjM0MS0xMC42MDksMS4xNzhjLTAuMTUzLTAuNzM0LTAuMzI0LTEuNDMyLTAuNDkyLTIuMDYyYy0yLjM4Mi04Ljc0Ni0xMC41MzctMTUuNzkyLTE5LjA4Mi0xNC45NDENCgljMC42OTEtMC4yNzksMS4zOTMtMC41MzksMi4wOTItMC43NzJjMC45NC0wLjMzNyw2LjQ1OS0xLjIzNSw1LjU5LTMuMTgzYy0wLjczMi0xLjcxMy03LjQ3NSwxLjI5NS04Ljc0NCwxLjY4OA0KCWMxLjY3Ni0wLjYzLDQuNDQ3LTEuNzE0LDQuNzQ0LTMuNjRjLTIuNTY3LDAuMzUyLTUuMDg4LDEuNTY2LTcuMDM1LDMuMzMxYzAuNzAzLTAuNzU3LDEuMjM2LTEuNjc5LDEuMzUtMi42NzINCgljLTYuODQ4LDQuMzc1LTEwLjg0OCwxMy4xOTUtMTQuMDg1LDIxLjc1Yy0yLjU0Mi0yLjQ2My00Ljc5NS00LjQwMy02LjgxNi01LjQ4Yy01LjY3LTMuMDQxLTEyLjQ0OS02LjIxMy0yMy4wOTEtMTAuMTY0DQoJYy0wLjMyNywzLjUyMSwxLjc0MSw4LjIwMyw3LjcsMTEuMzE2Yy0xLjI5MS0wLjE3My0zLjY1MiwwLjIxMy01LjU0LDAuNjY1YzAuNzY5LDQuMDM0LDMuMjgsNy4zNTcsMTAuMDc5LDguOTY0DQoJYy0zLjEwNywwLjIwNS00LjcxMywwLjkxMi02LjE2OCwyLjQzNmMxLjQxNSwyLjgwNSw0Ljg2OCw2LjEwNywxMS4wOCw1LjQyOWMtNi45MDYsMi45NzctMi44MTYsOC40OSwyLjgwNCw3LjY2Nw0KCUMyOC43OTQsNzIuMTQzLDEzLjY3OSw3MS40MTYsNSw2My4xMzRjMjIuNjYxLDMwLjg4LDcxLjkyMSwxOC4yNjMsNzkuMjYyLTExLjQ4MWM1LjUsMC4wNDgsOC43MzMtMS45MDQsMTAuNzM4LTQuMDU2DQoJQzkxLjgzMSw0OC4xMzQsODcuMjM4LDQ3LjU3OCw4NC44MDMsNDYuNTY0eiIvPg0KPC9zdmc+DQo=\" />\n                            <img data-share=\"facebook\" class=\"facebook\" alt=\"Facebook\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iRmFjZWJvb2siIGZpbGw9IiNGRkZGRkYiIGQ9Ik0zOC4wNzgsMjIuNDMxYzAsMi4yNjgsMCwxMi4zOTEsMCwxMi4zOTFIMjl2MTUuMTUyaDkuMDc4Vjk1aDE4LjY0OFY0OS45NzVINjkuMjQNCgljMCwwLDEuMTcyLTcuMjY1LDEuNzQtMTUuMjA5Yy0xLjYyOSwwLTE0LjE4NCwwLTE0LjE4NCwwczAtOC44MTUsMC0xMC4zNmMwLTEuNTQ4LDIuMDMzLTMuNjMxLDQuMDQzLTMuNjMxYzIuMDA2LDAsNi4yMzksMCwxMC4xNiwwDQoJYzAtMi4wNjMsMC05LjE5MSwwLTE1Ljc3NGMtNS4yMzQsMC0xMS4xODksMC0xMy44MTQsMEMzNy42MTcsNSwzOC4wNzgsMjAuMTY3LDM4LjA3OCwyMi40MzF6Ii8+DQo8L3N2Zz4NCg==\" />\n                            <img data-share=\"tumblr\" class=\"tumblr\" alt=\"Tumblr\" src=\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9Ikljb25zIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgd2lkdGg9IjEwMHB4IiBoZWlnaHQ9IjEwMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEwMCIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTAwIDEwMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBpZD0iVHVtYmxyIiBmaWxsPSIjRkZGRkZGIiBkPSJNNTcuODk2LDc4LjU1OWMtMS41MTMtMC44ODktMi45MDEtMi40MTYtMy40NTUtMy44OWMtMC41NjEtMS40ODMtMC40ODktNC40ODktMC40ODktOS43MTMNCglWNDEuODc4aDIwLjk4N1YyNS44MTVINTMuOTUzVjVINDEuMDRjLTAuNTc2LDQuNjM2LTEuNjM3LDguNDY2LTMuMTc2LDExLjQ3Yy0xLjU0MiwzLjAwOC0zLjU3Niw1LjU3OC02LjEyNiw3LjcyNg0KCUMyOS4yLDI2LjM0LDI1LjA2NCwyNy45OTIsMjEuNSwyOS4xMzJ2MTIuNzQ2aDEyLjMyOXYzMS41NjJjMCw0LjEyMSwwLjQzNyw3LjI2NSwxLjMwNiw5LjQyOWMwLjg3MywyLjE2MiwyLjQzMiw0LjIxMSw0LjY4NCw2LjEzOQ0KCWMyLjI1MiwxLjkwNyw0Ljk3MSwzLjM5Niw4LjE2MSw0LjQ0MUM1MS4xNjYsOTQuNDgyLDUzLjYxNiw5NSw1Ny43NjYsOTVjMy42NSwwLDcuMDQ5LTAuMzY4LDEwLjItMS4wODgNCgljMy4xNDctMC43MzgsNi42NjEtMi4wMSwxMC41MzQtMy44MTJWNzUuOWMtNC41NDUsMi45NjUtOS4xMTYsNC40NC0xMy43MTMsNC40NEM2Mi4yLDgwLjM0Miw1OS45MTMsNzkuNzQ3LDU3Ljg5Niw3OC41NTl6Ii8+DQo8L3N2Zz4NCg==\" />\n                        </div>\n                    </div>\n                    <div class=\"chart\">\n                        <img class=\"visible-sm\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.tabletChart)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" />\n                        <img class=\"hidden-sm\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.chart)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" />\n                    </div>\n                </div>\n                <div class=\"source\">\n                    <div class=\"copy\">\n                        <span>\n                            ";
  stack1 = ((stack1 = (depth0 && depth0.copy)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                        </span>\n                    </div>\n                    <a href=\"http://www.unaids.org/\" target=\"_blank\">\n                        <img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/data-vis/unaids.39ee97b011dee96262eabec65d99f20f.png\" />\n                    </a>\n                </div>\n                <button class=\"close\">x close</button>\n            </div>\n        ";
  return buffer;
  }

  buffer += "<div class=\"fight-page\">\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <div class=\"videoImage\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/tablet/video.822150a1bf321e3f90cbd857edd24232.jpg')\">\n    </div>\n    <div class=\"fight-ctr\">\n        <div class=\"body-ctr\">\n            <div class=\"copy\">\n                <p>\n                    The crusade against HIV/AIDS has raged for more than 30 years, resulting in some big wins: Treatments\n                    are keeping people with HIV living longer, yearly deaths worldwide have declined since 2005, and researchers\n                    continue to work to unlock the mysteries of this disease. But the war against HIV/AIDS is far from over—and it won’t be until a vaccine is discovered.\n                </p>\n                <p>\n                    Join the fight today by visiting <em>The Normal Heart’s</em> partners and resources and arming yourself with\n                    knowledge about where the battle stands today.\n                </p>\n            </div>\n\n            <div class=\"button data-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-data-btn.52a909c6c3e81a539374f439a603ce82.png)\"></div>\n                <div class=\"copy\">\n                    <h2>learn more</h2>\n                    <h1><strong>HIV/AIDS:</strong> Where We Stand Today</h1>\n                </div>\n            </div>\n\n            <div class=\"button partners-btn\">\n                <div class=\"image\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-partners-btn.6bf04c2446f072cc6bec7f6f06deff15.png)\"></div>\n                <div class=\"copy\">\n                    <h2>find information</h2>\n                    <h1><strong>Partners & Resources</strong></h1>\n                </div>\n            </div>\n\n            <a class=\"know_status\" href=\"http://locator.aids.gov/\" target=\"_blank\">\n                <div class=\"button tested-btn\">\n                    <div class=\"copy\">\n                        <h2>know your status</h2>\n                        <h1>Get tested and find services <br/>with the AIDS.gov locator</h1>\n                    </div>\n                </div>\n            </a>\n        </div>\n    </div>\n\n    <div class=\"partners-resources-ctr\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/fight/fight-bg-no-text.217879ad16c0ea555d13512e722165b9.jpg);\">\n        <div class=\"pr-ctr partners-ctr active\">\n            <div class=\"full-relative\">\n                <h1>Partners</h1>\n                <div class=\"body-ctr clearfix\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.partners), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n\n        <div class=\"pr-ctr resources-ctr\">\n            <h1>Resources</h1>\n            <div class=\"body-ctr\">\n                <div class=\"row-top\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-top']), {hash:{},inverse:self.noop,fn:self.program(3, program3, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n                <div class=\"row-bottom\">\n                    ";
  stack1 = helpers.each.call(depth0, ((stack1 = ((stack1 = (depth0 && depth0.partnersAndResources)),stack1 == null || stack1 === false ? stack1 : stack1.resources)),stack1 == null || stack1 === false ? stack1 : stack1['row-bottom']), {hash:{},inverse:self.noop,fn:self.program(5, program5, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n\n        <div class=\"switch\">\n            <button class=\"close\">x close</button>\n        </div>\n    </div>\n\n    <div class=\"data-visualization-ctr\">\n        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.dataPoints), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n\n    </div>\n    <div class=\"mask\"></div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],81:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression;


  buffer += "<div class=\"home-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/tablet/bg.b81a14b535d2b991374b6a44172696ea.jpg)\">\n    <!--<img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/ruff.ca2069a383594f6d8450a2b2545583e2.png\" class=\"character character-left\"/>-->\n    <!--<img src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/julia.6472596a668668f62819de637f644b73.png\" class=\"character character-right\"/>-->\n    <div class=\"billing-block\">\n\n        <div class=\"cast-ctr\">\n            <img class=\"cast\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/cast.fb25e098baf3c4c47a7881534b17275a.png\"/>\n        </div>\n\n        <div class=\"logo-container\">\n            <img class=\"logo\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/logo.1cc6af49aca9d6210ae298055280f2b1.png\"/>\n\n            <div class=\"btn-ctr\">\n              <button class=\"news tap-hack\">Awards News</button>\n              <button class=\"trailer tap-hack\">\n                  <img class=\"trailerPlay\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/trailer_icon.11d35b033d587403f9cb9797abd17ebf.png\"/>\n                  <div>Watch Trailer</div>\n              </button>\n            </div>\n\n            <div class=\"premiere-ctr\">\n                <a class=\"tap-hack\" href=\"http://www.hbogo.com/#movies/video&assetID=GOROSTGP43099?videoMode=infopagePreview/\" target=\"_blank\">\n                    <div class=\"hbo-logo\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo_go.d917bae106992334c705af7de8a08fa7.png)\"></div>\n                </a>\n            </div>\n        </div>\n\n    </div>\n\n    <div class=\"lock-up\">\n        <div class=\"scroll-down\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/scroll-down.d3a4a305d93118f611d5e3278f3336d4.png)\"></div>\n        <div class=\"hbo-films\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/home/hbo-films.bb5747f624558eaab10cf901712d2f6f.png)\"></div>\n    </div>\n\n    <div class=\"overlay\"></div>\n    <div class=\"modal\">\n      <div class=\"close\">X</div>\n      <div class=\"content-ctr\">\n        <div class=\"content\">\n          <h1>HBO's <i>The Normal Heart</i> Wins One SAG Award, One Golden Globe, Two Emmys</h1>\n                  <p><i>The Normal Heart</i> prevailed at the Jan. 25 Screen Actors Guild Awards ceremony, with Mark Ruffalo taking home a statue for his role as HIV/AIDS activist Ned Weeks. Ruffalo won for Outstanding Performance by a Male Actor in a Television Movie or Miniseries.</p>\n                  <p>Previously, <i>The Normal Heart</i> took home one Golden Globe Award for Matt Bomer's portrayal of New Your Times reporter Felix Turner in a ceremony put on Jan. 11, 2015, by the Hollywood Foreign Press Association. <i>The Normal Heart</i> also nabbed two Primetime Emmy Awards, awarded by the Television Academy in ceremonies on Aug. 16 and 25, 2014. The awards included Outstanding Television Movie and Outstanding Makeup For A Miniseries or a Movie (Non-Prosthetic).</p>\n        </div>\n      </div>\n    </div>\n</div>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],82:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n            <div class=\"item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.id)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                <div class=\"full-relative\">\n                    <div class=\"background\" style=\"background-image:url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = (depth0 && depth0.photoSrc)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ")\">\n                        <div class=\"filter\"></div>\n                    </div>\n                    <div class=\"content-ctr\" data-type=\""
    + escapeExpression(((stack1 = (depth0 && depth0.type)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n\n                    </div>\n\n                    <div class=\"title-ctr\">\n                        "
    + escapeExpression(((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\n                    </div>\n                </div>\n            </div>\n        ";
  return buffer;
  }

  buffer += "<div class=\"media-page\">\n    <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n    <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n\n    <div class=\"all-items-ctr\">\n        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.items), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],83:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", self=this, helperMissing=helpers.helperMissing, escapeExpression=this.escapeExpression;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper, options;
  buffer += "\n                        ";
  stack1 = (helper = helpers.ifCond || (depth0 && depth0.ifCond),options={hash:{},inverse:self.program(4, program4, data),fn:self.program(2, program2, data),data:data},helper ? helper.call(depth0, (data == null || data === false ? data : data.index), ">", 1, options) : helperMissing.call(depth0, "ifCond", (data == null || data === false ? data : data.index), ">", 1, options));
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    ";
  return buffer;
  }
function program2(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <p class=\"more\">\n                                ";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </p>\n                        ";
  return buffer;
  }

function program4(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <p>\n                                ";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </p>\n                        ";
  return buffer;
  }

function program6(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <h4>";
  stack1 = ((stack1 = (depth0 && depth0.question)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</h4>\n\n                                ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.answer), {hash:{},inverse:self.noop,fn:self.program(7, program7, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </article>\n                        ";
  return buffer;
  }
function program7(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                                    <p>";
  stack1 = (typeof depth0 === functionType ? depth0.apply(depth0) : depth0);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                                ";
  return buffer;
  }

function program9(depth0,data) {
  
  var buffer = "", stack1;
  buffer += "\n                            <article>\n                                <p>";
  stack1 = ((stack1 = (depth0 && depth0.paragraph)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "</p>\n                            </article>\n                        ";
  return buffer;
  }

  buffer += "<div class=\"story-page\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/tablet/bg.9a52e0f57bbc847f1cb58d68627649c6.jpg);\">\n    <img class=\"videoImage\" src=\"";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/video.1eedd089dcc152f90cdace3b1047e602.jpg\">\n    <div class=\"bg-filter\"></div>\n    <div class=\"storyOverflowWrapper\">\n        <div class=\"story allow-touch\">\n            <div class=\"pageContainer\">\n                <div class=\"mainCopy\">\n                    ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.mainCopy), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"read-more\"><!--content in CSS--></div>\n    <a href=\"#\" class=\"bio-link bio-link-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>conversation with</span>\n                <h5>Ryan Murphy</h5>\n            </div>\n        </div>\n    </a>\n    <a href=\"#\" class=\"bio-link bio-link-kramer\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\"></div>\n        <div class=\"text\">\n            <div>\n                <span>biography of</span>\n                <h5>Larry Kramer</h5>\n            </div>\n        </div>\n    </a>\n\n    <div class=\"bio bio-murphy\">\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-murphy.0a52d1e9226b66beba016576eaa68281.jpg);\">\n            <button class=\"close with-text sub-view\">X Close</button>\n        </div>\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>a conversation with ryan murphy</h2>\n\n                    <div class=\"bio-page murphy allow-touch\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.ryanMurphy), {hash:{},inverse:self.noop,fn:self.program(6, program6, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                </div>\n            </div>\n            <div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n            </div>\n        </div>\n    </div>\n    <!-- /.bio-murphy -->\n\n    <div class=\"bio bio-kramer\">\n        <div class=\"copy\">\n            <div class=\"copy-wrapper\">\n                <div class=\"copy-ctn\">\n                    <h2>the biography of Larry Kramer</h2>\n\n                    <div class=\"bio-page kramer allow-touch\">\n                        ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.larryKramer), {hash:{},inverse:self.noop,fn:self.program(9, program9, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                    </div>\n\n                </div>\n            </div>\n            <div class=\"social\">\n                <a href=\"#\" data-share=\"twitter\" class=\"twitter ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">twitter</a>\n                <a href=\"#\" data-share=\"facebook\" class=\"fb ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">facebook</a>\n                <a href=\"#\" data-share=\"tumblr\" class=\"tumblr ir\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/social-icons@2x.9d816012b929911596be2879367835eb.png');\">tumblr</a>\n            </div>\n        </div>\n        <div class=\"headshot\" style=\"background-image: url(";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/story/headshot-kramer.6806c4940f039e6a78a7903e17499de2.jpg);\">\n            <button class=\"close with-text sub-view\">X Close</button>\n        </div>\n    </div>\n    <!-- /.bio-kramer -->\n</div>";
  return buffer;
  });

},{"hbsfy/runtime":92}],84:[function(require,module,exports){
// hbsfy compiled Handlebars template
var Handlebars = require('hbsfy/runtime');
module.exports = Handlebars.template(function (Handlebars,depth0,helpers,partials,data) {
  this.compilerInfo = [4,'>= 1.0.0'];
helpers = this.merge(helpers, Handlebars.helpers); data = data || {};
  var buffer = "", stack1, helper, functionType="function", escapeExpression=this.escapeExpression, self=this;

function program1(depth0,data) {
  
  var buffer = "", stack1, helper;
  buffer += "\n                <div class=\"item\" data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\">\n                    <div class=\"full-relative\">\n                        <div class=\"background\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.src)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "'); background-position: "
    + escapeExpression(((stack1 = ((stack1 = (depth0 && depth0.photo)),stack1 == null || stack1 === false ? stack1 : stack1.position)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + ";\"></div>\n\n                        <div class=\"year\">"
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "</div>\n                        <div class=\"summary\">\n                            <div class=\"full-relative\">\n                                ";
  stack1 = ((stack1 = (depth0 && depth0.title)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1);
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n                            </div>\n                        </div>\n\n                        <div class=\"buttons\">\n                            <button data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" class=\"open\">open</button>\n                            <button data-id=\""
    + escapeExpression(((stack1 = (depth0 && depth0.year)),typeof stack1 === functionType ? stack1.apply(depth0) : stack1))
    + "\" class=\"close\">x close</button>\n                        </div>\n                    </div>\n                </div>\n            ";
  return buffer;
  }

  buffer += "<div class=\"timeline-page\">\n\n    <div class=\"timeline\">\n        <div class=\"all-items-ctr\">\n            ";
  stack1 = helpers.each.call(depth0, (depth0 && depth0.years), {hash:{},inverse:self.noop,fn:self.program(1, program1, data),data:data});
  if(stack1 || stack1 === 0) { buffer += stack1; }
  buffer += "\n        </div>\n        <div class=\"active-item-ctr\">\n\n        </div>\n        <div class=\"arrow arrow-left\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_left.243c2d4496b59ef9862be428b5cb2eb8.png');\"></div>\n        <div class=\"arrow arrow-right\" style=\"background-image: url('";
  if (helper = helpers.CDN) { stack1 = helper.call(depth0, {hash:{},data:data}); }
  else { helper = (depth0 && depth0.CDN); stack1 = typeof helper === functionType ? helper.call(depth0, {hash:{},data:data}) : helper; }
  buffer += escapeExpression(stack1)
    + "/images/UI/arrow_right.e5e667999baee5e8f326811d83f0f64c.png');\"></div>\n    </div>\n</div>\n";
  return buffer;
  });

},{"hbsfy/runtime":92}],85:[function(require,module,exports){
"use strict";
/*globals Handlebars: true */
var base = require("./handlebars/base");

// Each of these augment the Handlebars object. No need to setup here.
// (This is done to easily share code between commonjs and browse envs)
var SafeString = require("./handlebars/safe-string")["default"];
var Exception = require("./handlebars/exception")["default"];
var Utils = require("./handlebars/utils");
var runtime = require("./handlebars/runtime");

// For compatibility and usage outside of module systems, make the Handlebars object a namespace
var create = function() {
  var hb = new base.HandlebarsEnvironment();

  Utils.extend(hb, base);
  hb.SafeString = SafeString;
  hb.Exception = Exception;
  hb.Utils = Utils;

  hb.VM = runtime;
  hb.template = function(spec) {
    return runtime.template(spec, hb);
  };

  return hb;
};

var Handlebars = create();
Handlebars.create = create;

exports["default"] = Handlebars;
},{"./handlebars/base":86,"./handlebars/exception":87,"./handlebars/runtime":88,"./handlebars/safe-string":89,"./handlebars/utils":90}],86:[function(require,module,exports){
"use strict";
var Utils = require("./utils");
var Exception = require("./exception")["default"];

var VERSION = "1.3.0";
exports.VERSION = VERSION;var COMPILER_REVISION = 4;
exports.COMPILER_REVISION = COMPILER_REVISION;
var REVISION_CHANGES = {
  1: '<= 1.0.rc.2', // 1.0.rc.2 is actually rev2 but doesn't report it
  2: '== 1.0.0-rc.3',
  3: '== 1.0.0-rc.4',
  4: '>= 1.0.0'
};
exports.REVISION_CHANGES = REVISION_CHANGES;
var isArray = Utils.isArray,
    isFunction = Utils.isFunction,
    toString = Utils.toString,
    objectType = '[object Object]';

function HandlebarsEnvironment(helpers, partials) {
  this.helpers = helpers || {};
  this.partials = partials || {};

  registerDefaultHelpers(this);
}

exports.HandlebarsEnvironment = HandlebarsEnvironment;HandlebarsEnvironment.prototype = {
  constructor: HandlebarsEnvironment,

  logger: logger,
  log: log,

  registerHelper: function(name, fn, inverse) {
    if (toString.call(name) === objectType) {
      if (inverse || fn) { throw new Exception('Arg not supported with multiple helpers'); }
      Utils.extend(this.helpers, name);
    } else {
      if (inverse) { fn.not = inverse; }
      this.helpers[name] = fn;
    }
  },

  registerPartial: function(name, str) {
    if (toString.call(name) === objectType) {
      Utils.extend(this.partials,  name);
    } else {
      this.partials[name] = str;
    }
  }
};

function registerDefaultHelpers(instance) {
  instance.registerHelper('helperMissing', function(arg) {
    if(arguments.length === 2) {
      return undefined;
    } else {
      throw new Exception("Missing helper: '" + arg + "'");
    }
  });

  instance.registerHelper('blockHelperMissing', function(context, options) {
    var inverse = options.inverse || function() {}, fn = options.fn;

    if (isFunction(context)) { context = context.call(this); }

    if(context === true) {
      return fn(this);
    } else if(context === false || context == null) {
      return inverse(this);
    } else if (isArray(context)) {
      if(context.length > 0) {
        return instance.helpers.each(context, options);
      } else {
        return inverse(this);
      }
    } else {
      return fn(context);
    }
  });

  instance.registerHelper('each', function(context, options) {
    var fn = options.fn, inverse = options.inverse;
    var i = 0, ret = "", data;

    if (isFunction(context)) { context = context.call(this); }

    if (options.data) {
      data = createFrame(options.data);
    }

    if(context && typeof context === 'object') {
      if (isArray(context)) {
        for(var j = context.length; i<j; i++) {
          if (data) {
            data.index = i;
            data.first = (i === 0);
            data.last  = (i === (context.length-1));
          }
          ret = ret + fn(context[i], { data: data });
        }
      } else {
        for(var key in context) {
          if(context.hasOwnProperty(key)) {
            if(data) { 
              data.key = key; 
              data.index = i;
              data.first = (i === 0);
            }
            ret = ret + fn(context[key], {data: data});
            i++;
          }
        }
      }
    }

    if(i === 0){
      ret = inverse(this);
    }

    return ret;
  });

  instance.registerHelper('if', function(conditional, options) {
    if (isFunction(conditional)) { conditional = conditional.call(this); }

    // Default behavior is to render the positive path if the value is truthy and not empty.
    // The `includeZero` option may be set to treat the condtional as purely not empty based on the
    // behavior of isEmpty. Effectively this determines if 0 is handled by the positive path or negative.
    if ((!options.hash.includeZero && !conditional) || Utils.isEmpty(conditional)) {
      return options.inverse(this);
    } else {
      return options.fn(this);
    }
  });

  instance.registerHelper('unless', function(conditional, options) {
    return instance.helpers['if'].call(this, conditional, {fn: options.inverse, inverse: options.fn, hash: options.hash});
  });

  instance.registerHelper('with', function(context, options) {
    if (isFunction(context)) { context = context.call(this); }

    if (!Utils.isEmpty(context)) return options.fn(context);
  });

  instance.registerHelper('log', function(context, options) {
    var level = options.data && options.data.level != null ? parseInt(options.data.level, 10) : 1;
    instance.log(level, context);
  });
}

var logger = {
  methodMap: { 0: 'debug', 1: 'info', 2: 'warn', 3: 'error' },

  // State enum
  DEBUG: 0,
  INFO: 1,
  WARN: 2,
  ERROR: 3,
  level: 3,

  // can be overridden in the host environment
  log: function(level, obj) {
    if (logger.level <= level) {
      var method = logger.methodMap[level];
      if (typeof console !== 'undefined' && console[method]) {
        console[method].call(console, obj);
      }
    }
  }
};
exports.logger = logger;
function log(level, obj) { logger.log(level, obj); }

exports.log = log;var createFrame = function(object) {
  var obj = {};
  Utils.extend(obj, object);
  return obj;
};
exports.createFrame = createFrame;
},{"./exception":87,"./utils":90}],87:[function(require,module,exports){
"use strict";

var errorProps = ['description', 'fileName', 'lineNumber', 'message', 'name', 'number', 'stack'];

function Exception(message, node) {
  var line;
  if (node && node.firstLine) {
    line = node.firstLine;

    message += ' - ' + line + ':' + node.firstColumn;
  }

  var tmp = Error.prototype.constructor.call(this, message);

  // Unfortunately errors are not enumerable in Chrome (at least), so `for prop in tmp` doesn't work.
  for (var idx = 0; idx < errorProps.length; idx++) {
    this[errorProps[idx]] = tmp[errorProps[idx]];
  }

  if (line) {
    this.lineNumber = line;
    this.column = node.firstColumn;
  }
}

Exception.prototype = new Error();

exports["default"] = Exception;
},{}],88:[function(require,module,exports){
"use strict";
var Utils = require("./utils");
var Exception = require("./exception")["default"];
var COMPILER_REVISION = require("./base").COMPILER_REVISION;
var REVISION_CHANGES = require("./base").REVISION_CHANGES;

function checkRevision(compilerInfo) {
  var compilerRevision = compilerInfo && compilerInfo[0] || 1,
      currentRevision = COMPILER_REVISION;

  if (compilerRevision !== currentRevision) {
    if (compilerRevision < currentRevision) {
      var runtimeVersions = REVISION_CHANGES[currentRevision],
          compilerVersions = REVISION_CHANGES[compilerRevision];
      throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. "+
            "Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").");
    } else {
      // Use the embedded version info since the runtime doesn't know about this revision yet
      throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. "+
            "Please update your runtime to a newer version ("+compilerInfo[1]+").");
    }
  }
}

exports.checkRevision = checkRevision;// TODO: Remove this line and break up compilePartial

function template(templateSpec, env) {
  if (!env) {
    throw new Exception("No environment passed to template");
  }

  // Note: Using env.VM references rather than local var references throughout this section to allow
  // for external users to override these as psuedo-supported APIs.
  var invokePartialWrapper = function(partial, name, context, helpers, partials, data) {
    var result = env.VM.invokePartial.apply(this, arguments);
    if (result != null) { return result; }

    if (env.compile) {
      var options = { helpers: helpers, partials: partials, data: data };
      partials[name] = env.compile(partial, { data: data !== undefined }, env);
      return partials[name](context, options);
    } else {
      throw new Exception("The partial " + name + " could not be compiled when running in runtime-only mode");
    }
  };

  // Just add water
  var container = {
    escapeExpression: Utils.escapeExpression,
    invokePartial: invokePartialWrapper,
    programs: [],
    program: function(i, fn, data) {
      var programWrapper = this.programs[i];
      if(data) {
        programWrapper = program(i, fn, data);
      } else if (!programWrapper) {
        programWrapper = this.programs[i] = program(i, fn);
      }
      return programWrapper;
    },
    merge: function(param, common) {
      var ret = param || common;

      if (param && common && (param !== common)) {
        ret = {};
        Utils.extend(ret, common);
        Utils.extend(ret, param);
      }
      return ret;
    },
    programWithDepth: env.VM.programWithDepth,
    noop: env.VM.noop,
    compilerInfo: null
  };

  return function(context, options) {
    options = options || {};
    var namespace = options.partial ? options : env,
        helpers,
        partials;

    if (!options.partial) {
      helpers = options.helpers;
      partials = options.partials;
    }
    var result = templateSpec.call(
          container,
          namespace, context,
          helpers,
          partials,
          options.data);

    if (!options.partial) {
      env.VM.checkRevision(container.compilerInfo);
    }

    return result;
  };
}

exports.template = template;function programWithDepth(i, fn, data /*, $depth */) {
  var args = Array.prototype.slice.call(arguments, 3);

  var prog = function(context, options) {
    options = options || {};

    return fn.apply(this, [context, options.data || data].concat(args));
  };
  prog.program = i;
  prog.depth = args.length;
  return prog;
}

exports.programWithDepth = programWithDepth;function program(i, fn, data) {
  var prog = function(context, options) {
    options = options || {};

    return fn(context, options.data || data);
  };
  prog.program = i;
  prog.depth = 0;
  return prog;
}

exports.program = program;function invokePartial(partial, name, context, helpers, partials, data) {
  var options = { partial: true, helpers: helpers, partials: partials, data: data };

  if(partial === undefined) {
    throw new Exception("The partial " + name + " could not be found");
  } else if(partial instanceof Function) {
    return partial(context, options);
  }
}

exports.invokePartial = invokePartial;function noop() { return ""; }

exports.noop = noop;
},{"./base":86,"./exception":87,"./utils":90}],89:[function(require,module,exports){
"use strict";
// Build out our basic SafeString type
function SafeString(string) {
  this.string = string;
}

SafeString.prototype.toString = function() {
  return "" + this.string;
};

exports["default"] = SafeString;
},{}],90:[function(require,module,exports){
"use strict";
/*jshint -W004 */
var SafeString = require("./safe-string")["default"];

var escape = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': "&quot;",
  "'": "&#x27;",
  "`": "&#x60;"
};

var badChars = /[&<>"'`]/g;
var possible = /[&<>"'`]/;

function escapeChar(chr) {
  return escape[chr] || "&amp;";
}

function extend(obj, value) {
  for(var key in value) {
    if(Object.prototype.hasOwnProperty.call(value, key)) {
      obj[key] = value[key];
    }
  }
}

exports.extend = extend;var toString = Object.prototype.toString;
exports.toString = toString;
// Sourced from lodash
// https://github.com/bestiejs/lodash/blob/master/LICENSE.txt
var isFunction = function(value) {
  return typeof value === 'function';
};
// fallback for older versions of Chrome and Safari
if (isFunction(/x/)) {
  isFunction = function(value) {
    return typeof value === 'function' && toString.call(value) === '[object Function]';
  };
}
var isFunction;
exports.isFunction = isFunction;
var isArray = Array.isArray || function(value) {
  return (value && typeof value === 'object') ? toString.call(value) === '[object Array]' : false;
};
exports.isArray = isArray;

function escapeExpression(string) {
  // don't escape SafeStrings, since they're already safe
  if (string instanceof SafeString) {
    return string.toString();
  } else if (!string && string !== 0) {
    return "";
  }

  // Force a string conversion as this will be done by the append regardless and
  // the regex test will do this transparently behind the scenes, causing issues if
  // an object's to string has escaped characters in it.
  string = "" + string;

  if(!possible.test(string)) { return string; }
  return string.replace(badChars, escapeChar);
}

exports.escapeExpression = escapeExpression;function isEmpty(value) {
  if (!value && value !== 0) {
    return true;
  } else if (isArray(value) && value.length === 0) {
    return true;
  } else {
    return false;
  }
}

exports.isEmpty = isEmpty;
},{"./safe-string":89}],91:[function(require,module,exports){
// Create a simple path alias to allow browserify to resolve
// the runtime on a supported path.
module.exports = require('./dist/cjs/handlebars.runtime');

},{"./dist/cjs/handlebars.runtime":85}],92:[function(require,module,exports){
module.exports = require("handlebars/runtime")["default"];

},{"handlebars/runtime":91}]},{},[1,17,19,20,21,22,23,25])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL2FwcC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9jb2xsZWN0aW9ucy9TZWN0aW9uc0NvbGxlY3Rpb24uanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvbW9kZWxzL3NlY3Rpb25zL2NoYXJhY3RlcnMvQ2hhcmFjdGVyc01vYmlsZU1vZGVsLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL21vZGVscy9zZWN0aW9ucy9jaGFyYWN0ZXJzL0NoYXJhY3RlcnNNb2RlbC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9tb2RlbHMvc2VjdGlvbnMvZmlnaHQvRmlnaHRNb2RlbC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9tb2RlbHMvc2VjdGlvbnMvZm9vdGVyL0Zvb3Rlck1vZGVsLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL21vZGVscy9zZWN0aW9ucy9ob21lL0hvbWVNb2RlbC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9tb2RlbHMvc2VjdGlvbnMvaW50cm8vSW50cm9Nb2RlbC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9tb2RlbHMvc2VjdGlvbnMvaW50cm8vSW50cm9Ud29Nb2RlbC5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy9tb2RlbHMvc2VjdGlvbnMvbWVkaWEvTWVkaWFEZXNrdG9wTW9kZWwuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvbW9kZWxzL3NlY3Rpb25zL21lZGlhL01lZGlhTW9kZWwuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvbW9kZWxzL3NlY3Rpb25zL3N0b3J5L1N0b3J5TW9kZWwuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvbW9kZWxzL3NlY3Rpb25zL3RpbWVsaW5lL1RpbWVsaW5lTW9kZWwuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvc2VydmljZXMvT21uaXR1cmUuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvc2VydmljZXMvU29jaWFsLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL0FwcFZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3MvSG9yaXpvbnRhbFNjcm9sbFZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3MvTWVudVZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3MvUHJlbG9hZGVyVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9TY3JvbGxCYXJWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL1NlY3Rpb25zVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9WaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL2hlbHBlcnMvSGVscGVycy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9DaGFyYWN0ZXJzVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9GaWdodFZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvRm9vdGVyVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9Ib21lVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9JbnRyb1ZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvTWVkaWFWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL3NlY3Rpb25zL1N0b3J5Vmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9UaW1lbGluZVZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvbW9iaWxlL0NoYXJhY3RlcnNWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL3NlY3Rpb25zL21vYmlsZS9GaWdodFZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvbW9iaWxlL0hvbWVWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL3NlY3Rpb25zL21vYmlsZS9JbnRyb1ZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvbW9iaWxlL01lZGlhVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9tb2JpbGUvTWVudVZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvbW9iaWxlL1N0b3J5Vmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9tb2JpbGUvVGltZWxpbmVWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL3NlY3Rpb25zL3BhcnRpYWxzL0dhbGxlcnlEZXRhaWxWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL2phdmFzY3JpcHRzL3ZpZXdzL3NlY3Rpb25zL3BhcnRpYWxzL1ZpZGVvRGV0YWlsVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9wYXJ0aWFscy9jaGFyYWN0ZXJzL3lvdXR1YmUuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvcGFydGlhbHMvbWVkaWEveW91dHViZS5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy9wYXJ0aWFscy9tb2JpbGUvR2FsbGVyeURldGFpbFZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvcGFydGlhbHMvbW9iaWxlL1ZpZGVvRGV0YWlsVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy90YWJsZXQvQ2hhcmFjdGVyc1ZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvdGFibGV0L0ZpZ2h0Vmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy90YWJsZXQvSG9tZVZpZXcuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvamF2YXNjcmlwdHMvdmlld3Mvc2VjdGlvbnMvdGFibGV0L01lZGlhVmlldy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC9qYXZhc2NyaXB0cy92aWV3cy9zZWN0aW9ucy90YWJsZXQvU3RvcnlWaWV3LmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9kZWZhdWx0LmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvbWVudS5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3ByZWxvYWRlci5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3Njcm9sbGJhci5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvY2hhcmFjdGVycy5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL2ZpZ2h0LmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvZm9vdGVyLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvaG9tZS5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL2ludHJvLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvbWVkaWEuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvY2hhcmFjdGVycy5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL21vYmlsZS9jaGFyYWN0ZXJzRGV0YWlsLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvbW9iaWxlL2ZpZ2h0LmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvbW9iaWxlL2hvbWUuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvaW50cm8uaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvbWVkaWEuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvc3RvcnkuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvdGltZWxpbmUuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9wYXJ0aWFscy9jaGFyYWN0ZXJzL3lvdXR1YmUuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy9wYXJ0aWFscy9nYWxsZXJ5RGV0YWlsLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvcGFydGlhbHMvbWVkaWEveW91dHViZS5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL21vYmlsZS9nYWxsZXJ5RGV0YWlsLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvcGFydGlhbHMvbW9iaWxlL3ZpZGVvRGV0YWlsLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvcGFydGlhbHMvdGFibGV0L3ZpZGVvRGV0YWlsLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvc3RvcnkuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvYXBwL3RlbXBsYXRlcy9zZWN0aW9ucy90YWJsZXQvY2hhcmFjdGVycy5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL3RhYmxldC9maWdodC5oYnMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9hcHAvdGVtcGxhdGVzL3NlY3Rpb25zL3RhYmxldC9ob21lLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvdGFibGV0L21lZGlhLmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvdGFibGV0L3N0b3J5LmhicyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L2FwcC90ZW1wbGF0ZXMvc2VjdGlvbnMvdGltZWxpbmUuaGJzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvbm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy5ydW50aW1lLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvbm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9iYXNlLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvbm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy9leGNlcHRpb24uanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9ub2RlX21vZHVsZXMvaGFuZGxlYmFycy9kaXN0L2Nqcy9oYW5kbGViYXJzL3J1bnRpbWUuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9ub2RlX21vZHVsZXMvaGFuZGxlYmFycy9kaXN0L2Nqcy9oYW5kbGViYXJzL3NhZmUtc3RyaW5nLmpzIiwiL1VzZXJzL250YWJuZXIvZGV2L25vcm1hbC1oZWFydC9ub3JtYWwtaGVhcnQvbm9kZV9tb2R1bGVzL2hhbmRsZWJhcnMvZGlzdC9janMvaGFuZGxlYmFycy91dGlscy5qcyIsIi9Vc2Vycy9udGFibmVyL2Rldi9ub3JtYWwtaGVhcnQvbm9ybWFsLWhlYXJ0L25vZGVfbW9kdWxlcy9oYW5kbGViYXJzL3J1bnRpbWUuanMiLCIvVXNlcnMvbnRhYm5lci9kZXYvbm9ybWFsLWhlYXJ0L25vcm1hbC1oZWFydC9ub2RlX21vZHVsZXMvaGJzZnkvcnVudGltZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNU5BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3REQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDNUpBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqZEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNySUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2pUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7O0FDN1dBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcnBCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzloQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuV0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNscEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4UEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hkQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM1R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeklBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDdlRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BMQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BYQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDcFdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzVKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMVdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDblFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaERBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNuSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0NBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDM0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDakRBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN6R0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDVkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3ZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3pCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaENBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9DQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQy9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbkxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3hJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ1ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzNFQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJ2YXIgQXBwVmlldyA9IHJlcXVpcmUoJy4vdmlld3MvQXBwVmlldy5qcycpO1xudmFyIFNlY3Rpb25zQ29sbGVjdGlvbiA9IHJlcXVpcmUoXCIuL2NvbGxlY3Rpb25zL1NlY3Rpb25zQ29sbGVjdGlvbi5qc1wiKTtcbnZhciBIZWxwZXJzID0gcmVxdWlyZSgnLi92aWV3cy9oZWxwZXJzL0hlbHBlcnMuanMnKTtcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZShcImhic2Z5L3J1bnRpbWVcIik7XG5cbnZhciBBcHAgPSAoZnVuY3Rpb24oKVxue1xuICBmdW5jdGlvbiBBcHAoKXt9XG5cbiAgQXBwLnByb3RvdHlwZS5zaXplRXZlbnQgPSBcInJlc2l6ZVwiO1xuXG4gIEFwcC5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKClcbiAge1xuICAgICAgLy8gbWFrZSBzdXJlIHdlIGFyZSBwcmVwZW5kaW5nIHRoZSBDRE4gcHJlZml4IG9uIG91ciBhc3NldHNcbiAgICAgIEhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ0NETicsIGZ1bmN0aW9uKGJsb2NrKVxuICAgICAge1xuICAgICAgICByZXR1cm4gd2luZG93LmNkbjtcbiAgICAgIH0pO1xuXG4gICAgICBIYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZkNvbmQnLCBmdW5jdGlvbiAodjEsIG9wZXJhdG9yLCB2Miwgb3B0aW9ucylcbiAgICAgIHtcbiAgICAgICAgICBzd2l0Y2ggKG9wZXJhdG9yKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgICAgY2FzZSAnPT0nOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuICh2MSA9PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgICAgICAgICAgICBjYXNlICc9PT0nOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuICh2MSA9PT0gdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICAgICAgICAgICAgY2FzZSAnPCc6XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKHYxIDwgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICAgICAgICAgICAgY2FzZSAnPD0nOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuICh2MSA8PSB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgICAgICAgICAgICBjYXNlICc+JzpcbiAgICAgICAgICAgICAgICAgIHJldHVybiAodjEgPiB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgICAgICAgICAgICBjYXNlICc+PSc6XG4gICAgICAgICAgICAgICAgICByZXR1cm4gKHYxID49IHYyKSA/IG9wdGlvbnMuZm4odGhpcykgOiBvcHRpb25zLmludmVyc2UodGhpcyk7XG4gICAgICAgICAgICAgIGNhc2UgJyYmJzpcbiAgICAgICAgICAgICAgICAgIHJldHVybiAodjEgJiYgdjIpID8gb3B0aW9ucy5mbih0aGlzKSA6IG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICAgICAgICAgICAgY2FzZSAnfHwnOlxuICAgICAgICAgICAgICAgICAgcmV0dXJuICh2MSB8fCB2MikgPyBvcHRpb25zLmZuKHRoaXMpIDogb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcbiAgICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIHBvbHlmaWxsXG4gICAgICAoZnVuY3Rpb24oKVxuICAgICAgIHtcbiAgICAgICAgdmFyIGxhc3RUaW1lID0gMDtcbiAgICAgICAgdmFyIHZlbmRvcnMgPSBbJ3dlYmtpdCcsICdtb3onXTtcbiAgICAgICAgZm9yKHZhciB4ID0gMDsgeCA8IHZlbmRvcnMubGVuZ3RoICYmICF3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lOyArK3gpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsQW5pbWF0aW9uRnJhbWUnXSB8fCB3aW5kb3dbdmVuZG9yc1t4XSsnQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lJ107XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpXG4gICAgICAgIHtcbiAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lID0gZnVuY3Rpb24oY2FsbGJhY2ssIGVsZW1lbnQpXG4gICAgICAgICAge1xuICAgICAgICAgICAgICB2YXIgY3VyclRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcbiAgICAgICAgICAgICAgdmFyIHRpbWVUb0NhbGwgPSBNYXRoLm1heCgwLCAxNiAtIChjdXJyVGltZSAtIGxhc3RUaW1lKSk7XG4gICAgICAgICAgICAgIHZhciBpZCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBjYWxsYmFjayhjdXJyVGltZSArIHRpbWVUb0NhbGwpOyB9LFxuICAgICAgICAgICAgICAgIHRpbWVUb0NhbGwpO1xuICAgICAgICAgICAgICBsYXN0VGltZSA9IGN1cnJUaW1lICsgdGltZVRvQ2FsbDtcbiAgICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCF3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUpXG4gICAgICAgIHtcbiAgICAgICAgICB3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWUgPSBmdW5jdGlvbihpZClcbiAgICAgICAgICB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaWQpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgIH0oKSk7XG5cblxuICAgICAgdmFyIGRhdGFVUkwgPSB3aW5kb3cuY2RuICsgXCIvamF2YXNjcmlwdHMvZGF0YS9kYXRhLmpzb25cIjtcblxuICAgICAgJC5hamF4KHtcbiAgICAgICAgICB1cmw6IGRhdGFVUkwsXG4gICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSwgdGV4dFN0YXR1cykge1xuXG4gICAgICAgICAgICAgIC8vIG92ZXJsb2FkIGRhdGEga2V5cyBmb3IgdGhvc2UgdGhhdCB3ZSBoYXZlIGV4cGxpY2l0IG1vZGVscyBmb3JcbiAgICAgICAgICAgICAgZGF0YS5zZWN0aW9ucyA9IG5ldyBTZWN0aW9uc0NvbGxlY3Rpb24odW5kZWZpbmVkLCBkYXRhKTtcblxuICAgICAgICAgICAgICB0aGlzLnZpZXcgPSBuZXcgQXBwVmlldyh7XG4gICAgICAgICAgICAgICAgICBlbDogJCgnI2FwcENvbnRhaW5lcicpLFxuICAgICAgICAgICAgICAgICAgbW9kZWw6IGRhdGFcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHRoaXMudmlldy5yZW5kZXJQcmVsb2FkZXIoKTtcbiAgICAgICAgICAgICAgLy8gbW92ZWQgaGlzdG9yeSBzdGFydCB0byBhZnRlciBwcmVsb2FkZXIgY29tcGxldGVcbiAgICAgICAgICAgICAgLy9CYWNrYm9uZS5oaXN0b3J5LnN0YXJ0KHtwdXNoU3RhdGU6IHRydWV9KTtcbiAgICAgICAgICB9XG4gICAgICB9KVxuICB9O1xuXG4gIHJldHVybiBBcHA7XG5cbn0pKCk7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKClcbntcbiAgQmFja2JvbmUuJCA9ICQ7XG4gIEJhY2tib25lLk5vdGlmaWNhdGlvbnMgPSB7fTtcbiAgXy5leHRlbmQoQmFja2JvbmUuTm90aWZpY2F0aW9ucywgQmFja2JvbmUuRXZlbnRzKTtcblxuICBBcHAucm91dGVyID0gbmV3IEJhY2tib25lLlJvdXRlcih7IHRyYWlsaW5nU2xhc2hJc1NpZ25pZmljYW50IDogZmFsc2UgfSk7XG5cbiAgdmFyICRodG1sRWxlbSA9ICQoZG9jdW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQgfHwgKGRvY3VtZW50LmNoaWxkTm9kZXMgJiYgZG9jdW1lbnQuY2hpbGROb2Rlc1tkb2N1bWVudC5jaGlsZE5vZGVzLmxlbmd0aCAtIDFdKSB8fCAoZG9jdW1lbnQuY2hpbGRyZW4gJiYgZG9jdW1lbnQuY2hpbGRyZW5bMF0pKTtcblxuICAkaHRtbEVsZW0uYWRkQ2xhc3MoSGVscGVycy5EZXZpY2UuY3VycmVudERldmljZSgpKTtcblxuICBpZiAoIWRvY3VtZW50LmllKVxuICB7XG4gICAgdGhpcy5hcHAgPSBuZXcgQXBwKCk7XG4gICAgdGhpcy5hcHAuaW5pdGlhbGl6ZSgpO1xuICB9XG5cbiAgICAvLyB0dXJuIG9mZiBydWJiZXJiYW5kaW5nIG9uIHRvdWNoIGRldmljZXNcblxuICAgIGlmKEhlbHBlcnMuRGV2aWNlLmlzVGFibGV0KCkgfHwgSGVscGVycy5EZXZpY2UuaXNNb2JpbGUoKSlcbiAgICB7XG4gICAgICAgIHRoaXMuYXBwLnNpemVFdmVudCA9IFwib3JpZW50YXRpb25jaGFuZ2VcIjtcblxuICAgICAgICAvLyBQcmV2ZW50IHRvdWNobW92ZSBmcm9tIG9jY3VycmluZyBpZiB0aGUgdGFyZ2V0IGRvZXMgbm90IGhhdmUgYSBwYXJlbnRcbiAgICAgICAgLy8gd2l0aCB0aGUgY2xhc3MgXCJhbGxvdy10b3VjaC5cIiBUaGlzIGRldGVjdGlvbiBpcyBoYW5kbGVkIGluIHRvdWNoc3RhcnRcbiAgICAgICAgLy8gc28gdGhlIGNoZWNrIGRvZXNuJ3QgbmVlZCB0byBydW4gZXZlcnkgdGltZSB0aGUgYm9keSBpcyB0b3VjaCBtb3ZlZC5cbiAgICAgICAgKGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRvdWNoVGFyZ2V0QWxsb3dzU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAkKCdib2R5JylcbiAgICAgICAgICAgICAgICAub24oXCJ0b3VjaHN0YXJ0XCIsIGZ1bmN0aW9uKGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0b3VjaFRhcmdldEFsbG93c1Njcm9sbCA9ICEhJChlLnRhcmdldCkuY2xvc2VzdCgnLmFsbG93LXRvdWNoJykubGVuZ3RoO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKFwidG91Y2htb3ZlXCIsIGZ1bmN0aW9uKGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAodG91Y2hUYXJnZXRBbGxvd3NTY3JvbGwpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIC5vbihcInRvdWNoZW5kXCIsIGZ1bmN0aW9uKGUpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgIHRvdWNoVGFyZ2V0QWxsb3dzU2Nyb2xsID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pKCk7XG5cbi8vICAgICAgICB2YXIgcmVzaXplV2luZG93ID0gXy50aHJvdHRsZShmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgJCgnaHRtbCcpLmhlaWdodCh3aW5kb3cuaW5uZXJIZWlnaHQpO1xuLy8gICAgICAgIH0sIDMwMCk7XG4vL1xuLy8gICAgICAgIHJlc2l6ZVdpbmRvdygpO1xuICAgIH1cblxuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgICBpZihlLndoaWNoID09PSAzOSkge1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwia2V5cHJlc3MucmlnaHRBcnJvd1wiKTtcbiAgICAgICAgfSBlbHNlIGlmKGUud2hpY2ggPT09IDM3KSB7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJrZXlwcmVzcy5sZWZ0QXJyb3dcIik7XG4gICAgICAgIH0gZWxzZSBpZihlLndoaWNoID09PSAzOCkge1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwia2V5cHJlc3MudXBBcnJvd1wiKTtcbiAgICAgICAgfSBlbHNlIGlmKGUud2hpY2ggPT09IDQwKSB7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJrZXlwcmVzcy5kb3duQXJyb3dcIik7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICQoZG9jdW1lbnQpLm9uKFwic2Nyb2xsXCIsIGZ1bmN0aW9uKGUpIHtcblxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICAgICAgICBzY3JvbGxUbygwLCAxKTtcbiAgICAgIH0sIDApO1xuXG4gIH0pO1xuXG4gIC8vIGNoZWNrIGZvciByZXNpemUgZXZlbnRzXG4gICQod2luZG93KS5vbih0aGlzLmFwcC5zaXplRXZlbnQsIGZ1bmN0aW9uKGUpXG4gIHtcbi8vICAgICAgaWYoXy5pc0Z1bmN0aW9uKHJlc2l6ZVdpbmRvdykpIHtcbi8vICAgICAgICAgIHJlc2l6ZVdpbmRvdygpO1xuLy8gICAgICB9XG5cbiAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgc2Nyb2xsVG8oMCwgMSk7XG4gICAgICB9LCAwKTtcblxuICAgICAgLy8gc3RvcCBwcmV2aW91cyByZXNpemUgYW5pbWF0aW5nXG4gICAgICAkKCdib2R5LCBodG1sJykuc3RvcCgpO1xuXG4gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJ3aW5kb3cucmVzaXplXCIsXG4gICAgICB7XG4gICAgICAgICAgcmVzaXplOiB0cnVlLFxuICAgICAgICAgIGV2ZW50OmVcbiAgICAgIH0pO1xuXG5cbiAgfSk7XG5cbiAgLy8gY2hlY2sgZm9yIG1vdXNldXAgZXZlbnRzXG4gICQod2luZG93KS5vbignbW91c2V1cCcsIGZ1bmN0aW9uKGUpXG4gIHtcbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIndpbmRvdy5tb3VzZXVwXCIpO1xuICB9KTtcblxuICAvLyBjaGVjayBmb3IgbW91c2Vtb3ZlIGV2ZW50c1xuICAkKHdpbmRvdykub24oJ21vdXNlbW92ZScsIGZ1bmN0aW9uKGUpXG4gIHtcbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIndpbmRvdy5tb3VzZW1vdmVcIiwge3lQb3M6IGUuY2xpZW50WX0pO1xuICB9KTtcblxufSk7XG5cbndpbmRvdy5BcHAgPSBBcHA7XG4iLCIvLyBUaGUgbW9kZWwgZm9yIHRoZSBjb2xsZWN0aW9uXG52YXIgU2VjdGlvbnNNb2RlbCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VjdGlvbnMvU2VjdGlvbnNNb2RlbC5qc1wiKTtcblxuLy8gVGhlIGluZGl2aWR1YWwgc2VjdGlvbiBtb2RlbHNcblxudmFyIENoYXJhY3RlcnNNb2RlbCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VjdGlvbnMvY2hhcmFjdGVycy9DaGFyYWN0ZXJzTW9kZWwuanNcIik7XG52YXIgQ2hhcmFjdGVyc01vYmlsZU1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9jaGFyYWN0ZXJzL0NoYXJhY3RlcnNNb2JpbGVNb2RlbC5qc1wiKTtcblxuXG52YXIgSG9tZU1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9ob21lL0hvbWVNb2RlbC5qc1wiKTtcbnZhciBJbnRyb01vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9pbnRyby9JbnRyb01vZGVsLmpzXCIpO1xudmFyIEludHJvVHdvTW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3NlY3Rpb25zL2ludHJvL0ludHJvVHdvTW9kZWwuanNcIik7XG5cbnZhciBNZWRpYU1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9tZWRpYS9NZWRpYU1vZGVsLmpzXCIpO1xudmFyIE1lZGlhRGVza3RvcE1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9tZWRpYS9NZWRpYURlc2t0b3BNb2RlbC5qc1wiKTtcblxudmFyIFN0b3J5TW9kZWwgPSByZXF1aXJlKFwiLi4vbW9kZWxzL3NlY3Rpb25zL3N0b3J5L1N0b3J5TW9kZWwuanNcIik7XG52YXIgVGltZWxpbmVNb2RlbCA9IHJlcXVpcmUoXCIuLi9tb2RlbHMvc2VjdGlvbnMvdGltZWxpbmUvVGltZWxpbmVNb2RlbC5qc1wiKTtcbnZhciBGaWdodE1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9maWdodC9GaWdodE1vZGVsLmpzXCIpO1xudmFyIEZvb3Rlck1vZGVsID0gcmVxdWlyZShcIi4uL21vZGVscy9zZWN0aW9ucy9mb290ZXIvRm9vdGVyTW9kZWwuanNcIik7XG52YXIgSGVscGVyRnVuY3MgPSByZXF1aXJlKFwiLi4vdmlld3MvaGVscGVycy9IZWxwZXJzLmpzXCIpO1xuXG52YXIgU2VjdGlvbnNDb2xsZWN0aW9uID0gQmFja2JvbmUuQ29sbGVjdGlvbi5leHRlbmQoXG4gICAge1xuICAgICAgICAvL21vZGVsICAgICAgOiBTZWN0aW9uc01vZGVsLFxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKGF0dHJzLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBVbml2ZXJzYWwgbW9kZWxzLiBUaGVzZSBkbyBub3QgaGF2ZSBkZXZpY2Utc3BlY2lmaWMgYmVoYXZpb3IuXG4gICAgICAgICAgICB0aGlzLmFkZChbbmV3IEhvbWVNb2RlbCh1bmRlZmluZWQsIG9wdGlvbnMpXSk7XG4gICAgICAgICAgICB0aGlzLmFkZChbbmV3IEludHJvTW9kZWwodW5kZWZpbmVkLCBvcHRpb25zKV0pO1xuICAgICAgICAgICAgdGhpcy5hZGQoW25ldyBJbnRyb1R3b01vZGVsKHVuZGVmaW5lZCwgb3B0aW9ucyldKTtcblxuICAgICAgICAgICAgdGhpcy5hZGQoW25ldyBTdG9yeU1vZGVsKHVuZGVmaW5lZCwgb3B0aW9ucyldKTtcbiAgICAgICAgICAgIHRoaXMuYWRkKFtuZXcgVGltZWxpbmVNb2RlbCh1bmRlZmluZWQsIG9wdGlvbnMpXSk7XG4gICAgICAgICAgICB0aGlzLmFkZChbbmV3IEZpZ2h0TW9kZWwodW5kZWZpbmVkLCBvcHRpb25zKV0pO1xuICAgICAgICAgICAgdGhpcy5hZGQoW25ldyBGb290ZXJNb2RlbCh1bmRlZmluZWQsIG9wdGlvbnMpXSk7XG5cblxuICAgICAgICAgICAgaWYoSGVscGVyRnVuY3MuRGV2aWNlLmlzTW9iaWxlKCkgfHwgSGVscGVyRnVuY3MuRGV2aWNlLmlzVGFibGV0KCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoW25ldyBDaGFyYWN0ZXJzTW9iaWxlTW9kZWwodW5kZWZpbmVkLCBvcHRpb25zKV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKFtuZXcgTWVkaWFNb2RlbCh1bmRlZmluZWQsIG9wdGlvbnMpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5hZGQoW25ldyBDaGFyYWN0ZXJzTW9kZWwodW5kZWZpbmVkLCBvcHRpb25zKV0pO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkKFtuZXcgTWVkaWFEZXNrdG9wTW9kZWwodW5kZWZpbmVkLCBvcHRpb25zKV0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNlY3Rpb25zQ29sbGVjdGlvbjtcbiIsInZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi92aWV3cy9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBTZWN0aW9uc01vZGVsID0gQmFja2JvbmUuTW9kZWwuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgaWRBdHRyaWJ1dGUgOiBcImlkXCIsXG4gICAgICAgIHNlY3Rpb24gICAgIDoge30sXG4gICAgICAgIGRhdGEgICAgICAgIDoge30sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChhdHRycywgb3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGsgPSBudWxsLFxuICAgICAgICAgICAgICAgIHNlY3Rpb24gPSB7fSxcbiAgICAgICAgICAgICAgICBkYXRhID0ge307XG5cbiAgICAgICAgICAgIHNlY3Rpb24gPSBvcHRpb25zLnNlY3Rpb25zW3RoaXMubmFtZV1bSGVscGVyRnVuY3MuRGV2aWNlLmN1cnJlbnREZXZpY2UoKV07XG5cbiAgICAgICAgICAgIGlmKCFzZWN0aW9uKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZm9yIChrIGluIG9wdGlvbnNbc2VjdGlvbi5tb2RlbF0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgZGF0YSA9IG9wdGlvbnNbc2VjdGlvbi5tb2RlbF07XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5oYXNPd25Qcm9wZXJ0eShrKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtrXSA9IGRhdGFba107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNldCgnaWQnLCB0aGlzLmlkKTtcbiAgICAgICAgICAgIHRoaXMuc2V0KCduYW1lJywgdGhpcy5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuc2V0KCdzZWN0aW9uJywgc2VjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNldCgnZGF0YScsIGRhdGEpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2VjdGlvbnNNb2RlbDtcbiIsInZhciBTZWN0aW9uc01vZGVsID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVscy9zZWN0aW9ucy9TZWN0aW9uc01vZGVsLmpzXCIpO1xuXG52YXIgQ2hhcmFjdGVyc01vYmlsZU1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJDaGFyYWN0ZXJzTW9kZWxcIixcbiAgICAgICAgbmFtZSA6IFwiY2hhcmFjdGVyc1wiXG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gQ2hhcmFjdGVyc01vYmlsZU1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbmZ1bmN0aW9uIGFkZExhc3RQYWdlSXRlbXMocm93cywgbGFzdFBhZ2VJdGVtcywgcm93c1BlclBhZ2UpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIGxhc3RQYWdlSXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtLCBpKSB7XG4gICAgICAgIHZhciByb3dJbmRleCA9IGkgJSByb3dzUGVyUGFnZTtcblxuXG4gICAgICAgIGlmKCFyb3dzW3Jvd0luZGV4XSkge1xuICAgICAgICAgICAgcm93c1tyb3dJbmRleF0gPSBbXTtcbiAgICAgICAgfVxuICAgICAgICByb3dzW3Jvd0luZGV4XS5wdXNoKGl0ZW0pO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBhZGRFbXB0eUNlbGxzKHJvd3MpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcbiAgICBpZihyb3dzLmxlbmd0aCA8IDIpIHJldHVybjtcblxuICAgIHZhciBlbXB0eUNlbGwgPSB7XG4gICAgICAgIGlkOiAwLFxuICAgICAgICBpc0VtcHR5OiB0cnVlXG4gICAgfTtcblxuICAgIHZhciBmaXJzdFJvd0xlbmd0aCA9IHJvd3NbMF0ubGVuZ3RoO1xuXG4gICAgcm93cy5mb3JFYWNoKGZ1bmN0aW9uKHJvdykge1xuICAgICAgICBmb3IodmFyIGkgPSAwLCBlbmQgPSAoZmlyc3RSb3dMZW5ndGggLSByb3cubGVuZ3RoKTsgaSA8IGVuZDsgaSsrKSB7XG4gICAgICAgICAgICByb3cucHVzaChlbXB0eUNlbGwpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIHNwbGl0SW50b1Jvd3MoYXJyLCBudW1QZXJQYWdlLCByb3dzUGVyUGFnZSkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIG51bVBlclJvdyA9IG51bVBlclBhZ2Uvcm93c1BlclBhZ2U7XG5cbiAgICByZXR1cm4gYXJyLnJlZHVjZShmdW5jdGlvbihyb3dzLCBpdGVtLCBpKSB7XG5cbiAgICAgICAgdmFyIHJvd0luZGV4ID0gTWF0aC5mbG9vcihpL251bVBlclJvdykgJSByb3dzUGVyUGFnZTtcblxuICAgICAgICBpZighcm93c1tyb3dJbmRleF0pXG4gICAgICAgICAgICByb3dzW3Jvd0luZGV4XSA9IFtdO1xuXG4gICAgICAgIHJvd3Nbcm93SW5kZXhdLnB1c2goaXRlbSk7XG5cbiAgICAgICAgcmV0dXJuIHJvd3M7XG4gICAgfSwgW10pO1xufVxuXG5mdW5jdGlvbiBvcmdhbml6ZUl0ZW1zKGFyciwgbnVtUGVyUGFnZSwgcm93c1BlclBhZ2UpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBudW1Pbkxhc3RQYWdlID0gYXJyLmxlbmd0aCAlIG51bVBlclBhZ2U7XG5cbiAgICB2YXIgaXRlbXNOb3RPbkxhc3RQYWdlID0gYXJyLnNsaWNlKDAsIGFyci5sZW5ndGggLSBudW1Pbkxhc3RQYWdlKTtcbiAgICB2YXIgbGFzdFBhZ2VJdGVtcyA9IG51bU9uTGFzdFBhZ2UgPyBhcnIuc2xpY2UoLW51bU9uTGFzdFBhZ2UpIDogW107XG5cbiAgICB2YXIgcm93cyA9IHNwbGl0SW50b1Jvd3MoaXRlbXNOb3RPbkxhc3RQYWdlLCBudW1QZXJQYWdlLCByb3dzUGVyUGFnZSk7XG5cbiAgICBhZGRMYXN0UGFnZUl0ZW1zKHJvd3MsIGxhc3RQYWdlSXRlbXMsIHJvd3NQZXJQYWdlKTtcbiAgICBhZGRFbXB0eUNlbGxzKHJvd3MpO1xuXG4gICAgcmV0dXJuIEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHJvd3MpO1xufVxuXG5cblxuXG5cblxudmFyIENoYXJhY3RlcnNEZXNrdG9wTW9kZWwgPSBTZWN0aW9uc01vZGVsLmV4dGVuZCh7XG4gICAgaWQ6IFwiQ2hhcmFjdGVyc01vZGVsXCIsXG4gICAgbmFtZTogXCJjaGFyYWN0ZXJzXCIsXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAoYXR0cnMsIG9wdGlvbnMpIHtcbiAgICAgICAgdGhpcy5fc3VwZXIoYXR0cnMsIG9wdGlvbnMpO1xuXG4gICAgICAgIC8vIFN0YXRpYyBWYXJpYWJsZXNcbiAgICAgICAgdmFyIGNlbGxzUGVyUGFnZSA9IDg7XG4gICAgICAgIHZhciByb3dzUGVyUGFnZSA9IDI7XG5cbiAgICAgICAgdmFyIGl0ZW1zID0gb3JnYW5pemVJdGVtcyh0aGlzLmdldCgnZGF0YScpLmNoYXJhY3RlcnMsIGNlbGxzUGVyUGFnZSwgcm93c1BlclBhZ2UpO1xuXG4gICAgICAgIHRoaXMuc2V0KCdkYXRhJywge1xuICAgICAgICAgICAgY2hhcmFjdGVyczogaXRlbXNcbiAgICAgICAgfSk7XG4gICAgfVxufSk7XG5cblxuXG5cblxubW9kdWxlLmV4cG9ydHMgPSBDaGFyYWN0ZXJzRGVza3RvcE1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBGaWdodE1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJGaWdodE1vZGVsXCIsXG4gICAgICAgIG5hbWUgOiBcInRoZS1maWdodC1jb250aW51ZXNcIlxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZpZ2h0TW9kZWw7XG4iLCJ2YXIgU2VjdGlvbnNNb2RlbCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHMvc2VjdGlvbnMvU2VjdGlvbnNNb2RlbC5qc1wiKTtcblxudmFyIEZvb3Rlck1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJGb290ZXJNb2RlbFwiLFxuICAgICAgICBuYW1lIDogXCJmb290ZXJcIlxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZvb3Rlck1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBIb21lTW9kZWwgPSBTZWN0aW9uc01vZGVsLmV4dGVuZChcbiAgICB7XG4gICAgICAgIGlkICAgOiBcIkhvbWVNb2RlbFwiLFxuICAgICAgICBuYW1lIDogXCJob21lXCJcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBIb21lTW9kZWw7XG4iLCJ2YXIgU2VjdGlvbnNNb2RlbCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9tb2RlbHMvc2VjdGlvbnMvU2VjdGlvbnNNb2RlbC5qc1wiKTtcblxudmFyIEludHJvTW9kZWwgPSBTZWN0aW9uc01vZGVsLmV4dGVuZChcbiAgICB7XG4gICAgICAgIGlkICAgOiBcIkludHJvTW9kZWxcIixcbiAgICAgICAgbmFtZSA6IFwidG8td2luLWEtd2FyXCJcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBJbnRyb01vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBJbnRyb1R3b01vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJJbnRyb1R3b01vZGVsXCIsXG4gICAgICAgIG5hbWUgOiBcInlvdS1oYXZlLXRvLXN0YXJ0LW9uZVwiXG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gSW50cm9Ud29Nb2RlbDtcbiIsInZhciBTZWN0aW9uc01vZGVsID0gcmVxdWlyZShcIi4uLy4uLy4uL21vZGVscy9zZWN0aW9ucy9TZWN0aW9uc01vZGVsLmpzXCIpO1xuXG5mdW5jdGlvbiBhZGRMYXN0UGFnZUl0ZW1zKHJvd3MsIGxhc3RQYWdlSXRlbXMsIHJvd3NQZXJQYWdlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBsYXN0UGFnZUl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbSwgaSkge1xuICAgICAgICB2YXIgcm93SW5kZXggPSBpICUgcm93c1BlclBhZ2U7XG5cblxuICAgICAgICBpZighcm93c1tyb3dJbmRleF0pIHtcbiAgICAgICAgICAgIHJvd3Nbcm93SW5kZXhdID0gW107XG4gICAgICAgIH1cbiAgICAgICAgcm93c1tyb3dJbmRleF0ucHVzaChpdGVtKTtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gYWRkRW1wdHlDZWxscyhyb3dzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYocm93cy5sZW5ndGggPCAyKSByZXR1cm47XG5cbiAgICB2YXIgZW1wdHlDZWxsID0ge1xuICAgICAgICBpZDogMCxcbiAgICAgICAgaXNFbXB0eTogdHJ1ZVxuICAgIH07XG5cbiAgICB2YXIgZmlyc3RSb3dMZW5ndGggPSByb3dzWzBdLmxlbmd0aDtcblxuICAgIHJvd3MuZm9yRWFjaChmdW5jdGlvbihyb3cpIHtcbiAgICAgICAgZm9yKHZhciBpID0gMCwgZW5kID0gKGZpcnN0Um93TGVuZ3RoIC0gcm93Lmxlbmd0aCk7IGkgPCBlbmQ7IGkrKykge1xuICAgICAgICAgICAgcm93LnB1c2goZW1wdHlDZWxsKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBzcGxpdEludG9Sb3dzKGFyciwgbnVtUGVyUGFnZSwgcm93c1BlclBhZ2UpIHtcbiAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgIHZhciBudW1QZXJSb3cgPSBudW1QZXJQYWdlL3Jvd3NQZXJQYWdlO1xuXG4gICAgcmV0dXJuIGFyci5yZWR1Y2UoZnVuY3Rpb24ocm93cywgaXRlbSwgaSkge1xuXG4gICAgICAgIHZhciByb3dJbmRleCA9IE1hdGguZmxvb3IoaS9udW1QZXJSb3cpICUgcm93c1BlclBhZ2U7XG5cbiAgICAgICAgaWYoIXJvd3Nbcm93SW5kZXhdKVxuICAgICAgICAgICAgcm93c1tyb3dJbmRleF0gPSBbXTtcblxuICAgICAgICByb3dzW3Jvd0luZGV4XS5wdXNoKGl0ZW0pO1xuXG4gICAgICAgIHJldHVybiByb3dzO1xuICAgIH0sIFtdKTtcbn1cblxuZnVuY3Rpb24gb3JnYW5pemVJdGVtcyhhcnIsIG51bVBlclBhZ2UsIHJvd3NQZXJQYWdlKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgbnVtT25MYXN0UGFnZSA9IGFyci5sZW5ndGggJSBudW1QZXJQYWdlO1xuXG4gICAgdmFyIGl0ZW1zTm90T25MYXN0UGFnZSA9IGFyci5zbGljZSgwLCBhcnIubGVuZ3RoIC0gbnVtT25MYXN0UGFnZSk7XG4gICAgdmFyIGxhc3RQYWdlSXRlbXMgPSBudW1Pbkxhc3RQYWdlID8gYXJyLnNsaWNlKC1udW1Pbkxhc3RQYWdlKSA6IFtdO1xuXG4gICAgdmFyIHJvd3MgPSBzcGxpdEludG9Sb3dzKGl0ZW1zTm90T25MYXN0UGFnZSwgbnVtUGVyUGFnZSwgcm93c1BlclBhZ2UpO1xuXG4gICAgYWRkTGFzdFBhZ2VJdGVtcyhyb3dzLCBsYXN0UGFnZUl0ZW1zLCByb3dzUGVyUGFnZSk7XG4gICAgYWRkRW1wdHlDZWxscyhyb3dzKTtcblxuICAgIHJldHVybiBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCByb3dzKTtcbn1cblxuXG5cblxuXG52YXIgTWVkaWFNb2RlbCA9IFNlY3Rpb25zTW9kZWwuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgaWQgICA6IFwiTWVkaWFNb2RlbFwiLFxuICAgICAgICBuYW1lIDogXCJtZWRpYVwiLFxuXG4gICAgICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIChhdHRycywgb3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoYXR0cnMsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICAvLyBTdGF0aWMgVmFyaWFibGVzXG4gICAgICAgICAgICB2YXIgY2VsbHNQZXJQYWdlID0gMTI7XG4gICAgICAgICAgICB2YXIgcm93c1BlclBhZ2UgPSAzO1xuXG5cbiAgICAgICAgICAgIHZhciBpdGVtcyA9IG9yZ2FuaXplSXRlbXModGhpcy5nZXQoJ2RhdGEnKS5pdGVtcywgY2VsbHNQZXJQYWdlLCByb3dzUGVyUGFnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0KCdkYXRhJywge1xuICAgICAgICAgICAgICAgIGl0ZW1zOiBpdGVtc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZWRpYU1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBNZWRpYU1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJNZWRpYU1vZGVsXCIsXG4gICAgICAgIG5hbWUgOiBcIm1lZGlhXCJcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZWRpYU1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBTdG9yeU1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJTdG9yeU1vZGVsXCIsXG4gICAgICAgIG5hbWUgOiBcInN0b3J5XCJcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBTdG9yeU1vZGVsO1xuIiwidmFyIFNlY3Rpb25zTW9kZWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vbW9kZWxzL3NlY3Rpb25zL1NlY3Rpb25zTW9kZWwuanNcIik7XG5cbnZhciBUaW1lbGluZU1vZGVsID0gU2VjdGlvbnNNb2RlbC5leHRlbmQoXG4gICAge1xuICAgICAgICBpZCAgIDogXCJUaW1lbGluZU1vZGVsXCIsXG4gICAgICAgIG5hbWUgOiBcInRpbWVsaW5lXCJcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUaW1lbGluZU1vZGVsO1xuIiwidmFyIEhlbHBlckZ1bmNzID0gcmVxdWlyZSgnLi4vdmlld3MvaGVscGVycy9IZWxwZXJzLmpzJyk7XG5cbnZhciBPbW5pdHVyZSA9IChmdW5jdGlvbigpXG57XG4gIHZhciBpc01vYmlsZSA9IEhlbHBlckZ1bmNzLkRldmljZS5pc01vYmlsZSgpO1xuXG4gIGZ1bmN0aW9uIE9tbml0dXJlKCkge31cblxuICBPbW5pdHVyZS5mcmFuY2hpc2UgPSAnTW92aWVzJztcblxuICBPbW5pdHVyZS5jdXJyZW50UGFnZU5hbWUgPSAnbW92aWVzOiB0aGUtbm9ybWFsLWhlYXJ0OiBpbnNpZGU6IG1pY3Jvc2l0ZTogJztcblxuICBpZiAoIWlzTW9iaWxlKVxuICB7XG4gICAgT21uaXR1cmUubW9iaWxlID0gZmFsc2U7XG4gIH1cbiAgZWxzZVxuICB7XG4gICAgT21uaXR1cmUubW9iaWxlID0gSGVscGVyRnVuY3MuRGV2aWNlLmN1cnJlbnREZXZpY2VOYW1lKCk7XG4gIH1cblxuICBPbW5pdHVyZS5vblBhZ2VMb2FkID0gZnVuY3Rpb24ob3B0aW9ucylcbiAge1xuICAgIHZhciBzID0gc19naShzX2FjY291bnQpO1xuXG4gICAgdGhpcy5DbGVhclZhcnMocyk7XG5cbiAgICBPbW5pdHVyZS5jdXJyZW50UGFnZU5hbWUgPSAnbW92aWVzOiB0aGUtbm9ybWFsLWhlYXJ0OiBpbnNpZGU6IG1pY3Jvc2l0ZTogJyArIG9wdGlvbnMucGFnZU5hbWU7XG4gICAgcy5saW5rVHJhY2tWYXJzID0gXCJldmVudHMsZVZhcjEsaGllcjEsZVZhcjEwLHByb3AxMCxlVmFyMzAscHJvcDMwLGVWYXI0Mixwcm9wNDJcIjtcbiAgICBzLnByb3AxMCA9IHMuZVZhcjEwID0gT21uaXR1cmUuZnJhbmNoaXNlO1xuICAgIHMucHJvcDMwID0gcy5lVmFyMzAgPSBPbW5pdHVyZS5tb2JpbGUgPT0gdHJ1ZSA/ICd5ZXMnIDogJ25vJztcbiAgICBpZiAoT21uaXR1cmUubW9iaWxlKVxuICAgIHtcbiAgICAgIHMucHJvcDQyID0gcy5lVmFyNDIgPSBPbW5pdHVyZS5tb2JpbGU7XG4gICAgfVxuICAgIHMuZXZlbnRzID0gJ2V2ZW50MSc7XG4gICAgcy5wYWdlTmFtZSA9IHMuZVZhcjEgPSBzLmhpZXIxID0gT21uaXR1cmUuY3VycmVudFBhZ2VOYW1lO1xuICAgIHMucGFnZVVSTCA9IGRvY3VtZW50LlVSTDtcbiAgICB2YXIgc19jb2RlID0gcy50KCk7XG5cbiAgICBpZiAoc19jb2RlKSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQud3JpdGUoc19jb2RlKTtcbiAgICB9XG4gIH07XG5cbiAgT21uaXR1cmUub25WaWRlb1BsYXkgPSBmdW5jdGlvbihvcHRpb25zKVxuICB7XG5cbiAgICB2YXIgcyA9IHNfZ2koc19hY2NvdW50KTtcbiAgICBzLmxpbmtUcmFja1ZhcnMgPSAnZXZlbnRzLGhpZXIxLGVWYXIxMCxwcm9wMTAsZVZhcjE5LHByb3AxOSxlVmFyMzAscHJvcDMwLGVWYXI0Mixwcm9wNDIsZXZhcjU1LHByb3A1NSc7XG4gICAgcy5wcm9wMTAgPSBzLmVWYXIxMCA9IE9tbml0dXJlLmZyYW5jaGlzZTtcbiAgICBzLnByb3AzMCA9IHMuZVZhcjMwID0gT21uaXR1cmUubW9iaWxlID09PSB0cnVlID8gJ3llcycgOiAnbm8nO1xuICAgIGlmIChPbW5pdHVyZS5tb2JpbGUpIHtcbiAgICAgIHMucHJvcDQyID0gcy5lVmFyNDIgPSBPbW5pdHVyZS5tb2JpbGU7XG4gICAgfVxuICAgIHMucHJvcDE5ID0gcy5lVmFyMTkgPSBcIk1vdmllczogVGhlIE5vcm1hbCBIZWFydDogXCIgKyBvcHRpb25zLm1lZGlhVGl0bGU7XG4gICAgcy5ldmVudHMgPSBzLmxpbmtUcmFja0V2ZW50cyA9ICdldmVudDYxJztcbiAgICBzLnBhZ2VOYW1lID0gcy5lVmFyMSA9IHMuaGllcjEgPSBPbW5pdHVyZS5jdXJyZW50UGFnZU5hbWU7XG4gICAgcmV0dXJuIHMudGwodGhpcywgJ28nLCAnVmlkZW8gVHJhY2tpbmcnKTtcbiAgfTtcblxuICBPbW5pdHVyZS5vblNvY2lhbEZvbGxvdyA9IGZ1bmN0aW9uKG9wdGlvbnMpXG4gIHtcblxuICAgIC8vIG9wdGlvbnMucGxhdGZvcm0gPSBGYWNlYm9vaywgVHdpdHRlciwgVHVtYmxyLCBldGMuXG4gICAgLy8gb3B0aW9ucy5hY3Rpb24gPSBMaWtlLCBTaGFyZSwgZXRjLlxuXG4gICAgdmFyIHM7XG4gICAgcyA9IHNfZ2koc19hY2NvdW50KTtcbiAgICBzLmxpbmtUcmFja1ZhcnMgPSAnZXZlbnRzLGhpZXIxLGVWYXIxMCxwcm9wMTAsZVZhcjMwLHByb3AzMCxlVmFyMzMscHJvcDMzLGVWYXIzNCxwcm9wMzQsZVZhcjQyLHByb3A0Mic7XG4gICAgcy5wcm9wMTAgPSBzLmVWYXIxMCA9IE9tbml0dXJlLmZyYW5jaGlzZTtcbiAgICBzLnByb3AzMCA9IHMuZVZhcjMwID0gT21uaXR1cmUubW9iaWxlID09PSB0cnVlID8gJ3llcycgOiAnbm8nO1xuICAgIGlmIChPbW5pdHVyZS5tb2JpbGUpIHtcbiAgICAgIHMucHJvcDQyID0gcy5lVmFyNDIgPSBPbW5pdHVyZS5tb2JpbGU7XG4gICAgfVxuICAgIHMuZXZlbnRzID0gcy5saW5rVHJhY2tFdmVudHMgPSAnZXZlbnQxOCc7XG4gICAgcy5wcm9wMzMgPSBzLmVWYXIzMyA9IG9wdGlvbnMucGxhdGZvcm07XG4gICAgcy5wcm9wMzQgPSBzLmVWYXIzNCA9IG9wdGlvbnMuYWN0aW9uO1xuICAgIHMucGFnZU5hbWUgPSBzLmVWYXIxID0gcy5oaWVyMSA9IE9tbml0dXJlLmN1cnJlbnRQYWdlTmFtZTtcbiAgICByZXR1cm4gcy50bCh0aGlzLCAnbycsICdFdmVudCBUcmFja2luZycpO1xuICB9O1xuXG4gIE9tbml0dXJlLm9uU29jaWFsU2hhcmUgPSBmdW5jdGlvbihvcHRpb25zKVxuICB7XG5cbiAgICAvLyBvcHRpb25zLnBsYXRmb3JtID0gRmFjZWJvb2ssIFR3aXR0ZXIsIFR1bWJsciwgZXRjLlxuICAgIC8vIG9wdGlvbnMuYWN0aW9uID0gTGlrZSwgU2hhcmUsIGV0Yy5cblxuICAgIHZhciBzO1xuICAgIHMgPSBzX2dpKHNfYWNjb3VudCk7XG4gICAgcy5wcm9wMTAgPSBzLmVWYXIxMCA9IE9tbml0dXJlLmZyYW5jaGlzZTtcbiAgICBzLnByb3AzMCA9IHMuZVZhcjMwID0gT21uaXR1cmUubW9iaWxlID09PSB0cnVlID8gJ3llcycgOiAnbm8nO1xuICAgIGlmIChPbW5pdHVyZS5tb2JpbGUpIHtcbiAgICAgIHMucHJvcDQyID0gcy5lVmFyNDIgPSBPbW5pdHVyZS5tb2JpbGU7XG4gICAgfVxuICAgIHMubGlua1RyYWNrVmFycyA9ICdldmVudHMsaGllcjEsZVZhcjEwLHByb3AxMCxlVmFyMzAscHJvcDMwLGVWYXIzMyxwcm9wMzMsZVZhcjM0LHByb3AzNCxlVmFyNDIscHJvcDQyJztcbiAgICBzLmV2ZW50cyA9IHMubGlua1RyYWNrRXZlbnRzID0gJ2V2ZW50MTcnO1xuICAgIHMucHJvcDMzID0gcy5lVmFyMzMgPSBvcHRpb25zLnBsYXRmb3JtO1xuICAgIHMucHJvcDM0ID0gcy5lVmFyMzQgPSBvcHRpb25zLmFjdGlvbjtcbiAgICBzLnBhZ2VOYW1lID0gcy5lVmFyMSA9IHMuaGllcjEgPSBPbW5pdHVyZS5jdXJyZW50UGFnZU5hbWU7XG4gICAgcmV0dXJuIHMudGwodGhpcywgJ28nLCAnRXZlbnQgVHJhY2tpbmcnKTtcbiAgfTtcblxuICBPbW5pdHVyZS5vblNsaWRlc2hvd0l0ZW1PcGVuID0gZnVuY3Rpb24ob3B0aW9ucylcbiAge1xuXG4gICAgdmFyIHMgPSBzX2dpKHNfYWNjb3VudCk7XG4gICAgcy5saW5rVHJhY2tWYXJzID0gJ2V2ZW50cyxoaWVyMSxlVmFyMTAscHJvcDEwLGVWYXIzMCxwcm9wMzAsZVZhcjQyLHByb3A0MixlVmFyNTUscHJvcDU1JztcbiAgICBzLnByb3AxMCA9IHMuZVZhcjEwID0gT21uaXR1cmUuZnJhbmNoaXNlO1xuICAgIHMucHJvcDMwID0gcy5lVmFyMzAgPSBPbW5pdHVyZS5tb2JpbGUgPT09IHRydWUgPyAneWVzJyA6ICdubyc7XG4gICAgaWYgKE9tbml0dXJlLm1vYmlsZSkge1xuICAgICAgcy5wcm9wNDIgPSBzLmVWYXI0MiA9IE9tbml0dXJlLm1vYmlsZTtcbiAgICB9XG4gICAgcy5wcm9wNTUgPSBzLmVWYXI1NSA9IG9wdGlvbnMubWVkaWFUaXRsZTtcbiAgICBzLmV2ZW50cyA9IHMubGlua1RyYWNrRXZlbnRzID0gJ2V2ZW50MjEnO1xuICAgIHMucGFnZU5hbWUgPSBzLmVWYXIxID0gcy5oaWVyMSA9IE9tbml0dXJlLmN1cnJlbnRQYWdlTmFtZTtcbiAgICByZXR1cm4gcy50bCh0aGlzLCAnbycsICdFdmVudCBUcmFja2luZycpO1xuICB9O1xuXG4gIE9tbml0dXJlLm9uUGFydG5lckxpbmsgPSBmdW5jdGlvbihvcHRpb25zKVxuICB7XG4gICAgdmFyIHM7XG4gICAgcyA9IHNfZ2koc19hY2NvdW50KTtcbiAgICBzLnByb3AxMCA9IHMuZVZhcjEwID0gT21uaXR1cmUuZnJhbmNoaXNlO1xuICAgIHMucHJvcDMwID0gcy5lVmFyMzAgPSBPbW5pdHVyZS5tb2JpbGUgPT09IHRydWUgPyAneWVzJyA6ICdubyc7XG4gICAgaWYgKE9tbml0dXJlLm1vYmlsZSkge1xuICAgICAgcy5wcm9wNDIgPSBzLmVWYXI0MiA9IE9tbml0dXJlLm1vYmlsZTtcbiAgICB9XG4gICAgcy5saW5rVHJhY2tWYXJzID0gJ2V2ZW50cyxoaWVyMSxlVmFyMTAscHJvcDEwLGVWYXIzMCxwcm9wMzAsZVZhcjMzLHByb3AzMyxlVmFyMzQscHJvcDM0LGVWYXI0Mixwcm9wNDIsZVZhcjU3LHByb3A1Nyc7XG4gICAgcy5ldmVudHMgPSBzLmxpbmtUcmFja0V2ZW50cyA9ICdldmVudDY1JztcbiAgICBzLnByb3A1NyA9IHMuZVZhcjU3ID0gXCJOb3JtYWwgSGVhcnQgfCBMaW5rIHwgXCIgKyBvcHRpb25zLlVSTDtcbiAgICBzLnBhZ2VOYW1lID0gcy5lVmFyMSA9IHMuaGllcjEgPSBPbW5pdHVyZS5jdXJyZW50UGFnZU5hbWU7XG4gICAgcmV0dXJuIHMudGwodGhpcywgJ28nLCAnRXZlbnQgVHJhY2tpbmcnKTtcbiAgfTtcblxuICBPbW5pdHVyZS5DbGVhclZhcnMgPSBmdW5jdGlvbihzX29iKVxuICB7XG4gICAgZm9yICh2YXIgaT0wOyBpIDwgNzU7IGkrKylcbiAgICB7XG4gICAgICBzX29iWydwcm9wJytpXT0nJztcbiAgICAgIHNfb2JbJ2VWYXInK2ldPScnO1xuICAgICAgaWYoaTw9NSlcbiAgICAgICAgc19vYlsnaGllcicraV09Jyc7XG4gICAgIH1cbiAgICAgc3ZhckFyciA9IFsncGFnZU5hbWUnLCdjaGFubmVsJywncHJvZHVjdHMnLCdldmVudHMnLCdjYW1wYWlnbicsJ3B1cmNoYXNlSUQnLCdzdGF0ZScsJ3ppcCcsJ3NlcnZlcicsJ2xpbmtOYW1lJ107XG4gICAgZm9yICh2YXIgaT0wOyBpIDwgc3ZhckFyci5sZW5ndGggOyBpKyspXG4gICAge1xuICAgICAgIHNfb2Jbc3ZhckFycltpXV09Jyc7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiBPbW5pdHVyZTtcblxufSkoKTtcblxubW9kdWxlLmV4cG9ydHMgPSBPbW5pdHVyZTtcbiIsInZhciBPbW5pdHVyZSA9IHJlcXVpcmUoXCIuL09tbml0dXJlLmpzXCIpO1xuXG52YXIgU29jaWFsID0gKGZ1bmN0aW9uKClcbntcbiAgZnVuY3Rpb24gU29jaWFsKCkge31cblxuICAgIGZ1bmN0aW9uIHNldERlZmF1bHRzKHNoYXJlKSB7XG4gICAgICAgIHNoYXJlID0gc2hhcmUgfHwge307XG4gICAgICAgIHNoYXJlLnBpY3R1cmUgPSAod2luZG93LkNETiB8fCAnaHR0cDovL3RoZW5vcm1hbGhlYXJ0Lmhiby5jb20nKSArIChzaGFyZS5waWN0dXJlIHx8IFwiL2ltYWdlcy90bmgtb2cuanBnXCIpO1xuICAgICAgICBzaGFyZS50aXRsZSA9IHNoYXJlLnRpdGxlIHx8IFwiVGhlIE5vcm1hbCBIZWFydCB8IEhCT1wiO1xuICAgICAgICBzaGFyZS5kZXNjcmlwdGlvbiA9IHNoYXJlLmRlc2NyaXB0aW9uIHx8IFwiVG8gd2luIGEgd2FyLCB5b3UgaGF2ZSB0byBzdGFydCBvbmUuIFZpc2l0IHRoZSBvZmZpY2lhbCB3ZWJzaXRlIGZvciBUaGUgTm9ybWFsIEhlYXJ0LCBvbmx5IG9uIEhCTy5cIjtcbiAgICAgICAgc2hhcmUubGluayA9IHNoYXJlLmxpbmsgfHwgJ2h0dHA6Ly9ub3JtYWxoZWFydG1vdmllLmNvbS8nO1xuXG4gICAgICAgIHJldHVybiBzaGFyZTtcbiAgICB9XG5cbiAgU29jaWFsLlNoYXJlRmFjZWJvb2sgPSBmdW5jdGlvbihzaGFyZSlcbiAge1xuICAgIHNoYXJlID0gc2V0RGVmYXVsdHMoc2hhcmUpO1xuXG4gICAgRkIudWkoe1xuICAgICAgICBtZXRob2Q6ICdmZWVkJyxcbiAgICAgICAgbmFtZTogc2hhcmUudGl0bGUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBzaGFyZS5kZXNjcmlwdGlvbixcbiAgICAgICAgbGluazogc2hhcmUubGluayxcbiAgICAgICAgcGljdHVyZTogc2hhcmUucGljdHVyZVxuICAgIH0sIGZ1bmN0aW9uKHJlc3BvbnNlKXtcblxuICAgIH0pO1xuXG4gICAgT21uaXR1cmUub25Tb2NpYWxTaGFyZSh7cGxhdGZvcm06J0ZhY2Vib29rJywgYWN0aW9uOidTaGFyZSd9KTtcbiAgfTtcblxuICBTb2NpYWwuU2hhcmVUd2l0dGVyID0gZnVuY3Rpb24oc2hhcmUpXG4gIHtcbiAgICBzaGFyZSA9IHNldERlZmF1bHRzKHNoYXJlKTtcblxuICAgIHZhciB0d2l0dGVyQ29weSA9IGVuY29kZVVSSUNvbXBvbmVudChzaGFyZS5kZXNjcmlwdGlvbiArIFwiIFwiICsgc2hhcmUubGluayk7XG5cbiAgICB2YXIgdXJsID0gXCJodHRwczovL3R3aXR0ZXIuY29tL2ludGVudC90d2VldD90ZXh0PVwiICsgdHdpdHRlckNvcHk7XG4gICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJywgJ3Rvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllcyx3aWR0aD03MDBweCxoZWlnaHQ9NDMwcHgnKTtcblxuICAgIE9tbml0dXJlLm9uU29jaWFsU2hhcmUoe3BsYXRmb3JtOidUd2l0dGVyJywgYWN0aW9uOidUd2VldCd9KTtcbiAgfTtcblxuICBTb2NpYWwuU2hhcmVUdW1ibHIgPSBmdW5jdGlvbihzaGFyZSlcbiAge1xuICAgIHNoYXJlID0gc2V0RGVmYXVsdHMoc2hhcmUpO1xuXG4gICAgdmFyIHR1bWJsckNvcHkgPSBlbmNvZGVVUklDb21wb25lbnQoc2hhcmUuZGVzY3JpcHRpb24gKyAnICcgKyBzaGFyZS5saW5rKTtcbiAgICB2YXIgcGljdHVyZSA9IGVuY29kZVVSSUNvbXBvbmVudChzaGFyZS5waWN0dXJlKTtcblxuICAgIHZhciB1cmwgPSBcImh0dHA6Ly93d3cudHVtYmxyLmNvbS9zaGFyZS9waG90bz9zb3VyY2U9XCIgKyBwaWN0dXJlICsgXCImY2FwdGlvbj1cIiArIHR1bWJsckNvcHk7XG4gICAgd2luZG93Lm9wZW4odXJsLCAnX2JsYW5rJywgJ3Rvb2xiYXI9bm8sbG9jYXRpb249bm8sc3RhdHVzPW5vLG1lbnViYXI9bm8sc2Nyb2xsYmFycz15ZXMscmVzaXphYmxlPXllcyx3aWR0aD00NTBweCxoZWlnaHQ9NDI4cHgnKTtcblxuICAgIE9tbml0dXJlLm9uU29jaWFsU2hhcmUoe3BsYXRmb3JtOidUdW1ibHInLCBhY3Rpb246J1RzaGFyZSd9KTtcbiAgfTtcblxuICByZXR1cm4gU29jaWFsO1xuXG59KSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNvY2lhbDtcbiIsIi8vIEFsbCBzdWJ2aWV3cyBsb2FkZWQgaGVyZSwgcG9zc2libHkgZG8gdGhpcyBkeW5hbWljYWxseSB3aXRoIHRoZSBUT0RPIGxpc3RlZCBiZWxvd1xudmFyIE1lbnVWaWV3ID0gcmVxdWlyZShcIi4vTWVudVZpZXcuanNcIik7XG52YXIgTWVudVZpZXdNb2JpbGUgPSByZXF1aXJlKCcuL3NlY3Rpb25zL21vYmlsZS9NZW51Vmlldy5qcycpO1xudmFyIFNjcm9sbEJhclZpZXcgPSByZXF1aXJlKFwiLi9TY3JvbGxCYXJWaWV3LmpzXCIpO1xudmFyIFNlY3Rpb25zVmlldyA9IHJlcXVpcmUoXCIuL1NlY3Rpb25zVmlldy5qc1wiKTtcbnZhciBQcmVsb2FkZXJWaWV3ID0gcmVxdWlyZShcIi4vUHJlbG9hZGVyVmlldy5qc1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoJy4vaGVscGVycy9IZWxwZXJzLmpzJyk7XG5cbnZhciBBcHBWaWV3ID0gQmFja2JvbmUuVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBjbGFzc05hbWUgOiBcImFwcENvbnRhaW5lclwiLFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnByZWxvYWRlclZpZXcgPSBuZXcgUHJlbG9hZGVyVmlldyh7bW9kZWwgOiB0aGlzLm1vZGVsLnByZWxvYWRlckRhdGF9KTtcblxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbmNlKFwicHJlbG9hZGVyLmNvbXBsZXRlXCIsIHRoaXMub25QcmVsb2FkZXJDb21wbGV0ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uY2UoXCJwcmVsb2FkZXIuYW5pbWF0aW9uQ29tcGxldGVcIiwgdGhpcy5vblByZWxvYWRlckFuaW1Db21wbGV0ZSwgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyUHJlbG9hZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuXG4gICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy5wcmVsb2FkZXJWaWV3LnJlbmRlcigpLmVsKTtcbiAgICAgICAgICAgIHRoaXMucHJlbG9hZGVyVmlldy5wcmVsb2FkKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25QcmVsb2FkZXJDb21wbGV0ZSA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgLy8gVGhpcyByb3V0ZSBpcyBub3QgYWRkZWQgdG8gdGhlIF9ldmVudHMgbGlzdCBpbiBBcHAucm91dGVyLlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBva2F5LCBhcyB3ZSB3aWxsIGp1c3QgZm9yd2FyZCB0aGUgdXNlciB0byAvIGlmIGFuIGludmFsaWQgVVJMIGlzIGhpdC5cbiAgICAgICAgICAgIEFwcC5yb3V0ZXIucm91dGUoXCIqY2F0Y2hBbGxcIiwgJ2NhdGNoQWxsUm91dGUnLCBmdW5jdGlvbigpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSgnLycsXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyOiB0cnVlLCAvLyBDYWxsIHRoZSByb3V0ZSBoYW5kbGVyIGZvciBcIkhvbWVWaWV3LlwiXG4gICAgICAgICAgICAgICAgICAgIHJlcGxhY2U6IHRydWUgIC8vIERvbid0IHNhdmUgdGhlIGJyb2tlbiBVUkwgaW4gdGhlIGJyb3dzZXIncyBoaXN0b3J5LlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGxvYWQgaW4gb3VyIHZpZXdzXG4gICAgICAgICAgICBpZiAoSGVscGVyRnVuY3MuRGV2aWNlLmN1cnJlbnREZXZpY2UoKSA9PSAnbW9iaWxlJykge1xuICAgICAgICAgICAgICAgIHRoaXMubWVudVZpZXcgPSBuZXcgTWVudVZpZXdNb2JpbGUoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbCA6IHRoaXMubW9kZWwubWVudUl0ZW1zXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMubWVudVZpZXcgPSBuZXcgTWVudVZpZXcoe1xuICAgICAgICAgICAgICAgICAgICBtb2RlbCA6IHRoaXMubW9kZWwubWVudUl0ZW1zXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghTW9kZXJuaXpyLnRvdWNoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsQmFyVmlldyA9IG5ldyBTY3JvbGxCYXJWaWV3KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2VjdGlvbnNWaWV3ID0gbmV3IFNlY3Rpb25zVmlldyh7XG4gICAgICAgICAgICAgICAgbW9kZWwgOiB0aGlzLm1vZGVsXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblByZWxvYWRlckFuaW1Db21wbGV0ZSA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLnByZWxvYWRlclZpZXcuJGVsLCAxLCB7b3BhY2l0eTogMCwgb25Db21wbGV0ZTogZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmVsb2FkZXJWaWV3LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZWxvYWRlclZpZXcudW5iaW5kKCk7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpfSk7XG4gICAgICAgICAgICAvLyBzdGFydCB0aGUgcm91dGVyIG5vdyB0aGF0IHRoZSBwcmVsb2FkZXIgaXMgY29tcGxldGVcbiAgICAgICAgICAgIEJhY2tib25lLmhpc3Rvcnkuc3RhcnQoe3B1c2hTdGF0ZSA6IHRydWV9KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy5zZWN0aW9uc1ZpZXcucmVuZGVyKCkuZWwpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxCYXJWaWV3ICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHRoaXMuc2Nyb2xsQmFyVmlldy5yZW5kZXIoKS5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy5tZW51Vmlldy5yZW5kZXIoKS5lbCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBBcHBWaWV3O1xuIiwidmFyIFZpZXcgPSByZXF1aXJlKFwiLi9WaWV3LmpzXCIpO1xudmFyIEhlbHBlckZ1bmNzID0gcmVxdWlyZShcIi4vaGVscGVycy9IZWxwZXJzLmpzXCIpO1xuXG52YXIgSG9yaXpvbnRhbFNjcm9sbFZpZXcgPSBWaWV3LmV4dGVuZCh7XG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogSW5pdGlhbGl6YXRpb24gU3R1ZmYgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgZXZlbnRzOiB7XG4gICAgICAgICdjbGljayAuYXJyb3ctcmlnaHQnOiAnb25OZXh0JyxcbiAgICAgICAgJ2NsaWNrIC5hcnJvdy1sZWZ0JzogJ29uUHJldicsXG4gICAgICAgICdjbGljayBidXR0b24ub3Blbic6ICdvbkNob29zZUl0ZW0nLFxuICAgICAgICAnY2xpY2sgYnV0dG9uLmNsb3NlJzogJ29uQ2xvc2VJdGVtJyxcblxuICAgICAgICAndGFwIC5hcnJvdy1yaWdodCc6ICdvbk5leHQnLFxuICAgICAgICAndGFwIC5hcnJvdy1sZWZ0JzogJ29uUHJldicsXG4gICAgICAgICd0YXAgYnV0dG9uLm9wZW4nOiAnb25DaG9vc2VJdGVtJyxcbiAgICAgICAgJ3RhcCBidXR0b24uY2xvc2UnOiAnb25DbG9zZUl0ZW0nXG4gICAgfSxcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLnJvb3RlZEl0ZW0gPSAwO1xuXG4gICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYWZ0ZXJBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG4gICAgfSxcblxuICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuaW5pdEpxdWVyeVZhcmlhYmxlcygpO1xuICAgICAgICB0aGlzLm9uV2luZG93UmVzaXplKCk7ICAvL3RyaWdnZXIgcmVzaXplIGV2ZW50XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICB9LFxuICAgIGluaXRKcXVlcnlWYXJpYWJsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy4kbGVmdEFycm93ID0gdGhpcy4kZWwuZmluZCgnZGl2LmFycm93LmFycm93LWxlZnQnKTtcbiAgICAgICAgdGhpcy4kcmlnaHRBcnJvdyA9IHRoaXMuJGVsLmZpbmQoJ2Rpdi5hcnJvdy5hcnJvdy1yaWdodCcpO1xuXG4gICAgICAgIHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2LmFsbC1pdGVtcy1jdHInKTtcbiAgICAgICAgdGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lciA9IHRoaXMuJGVsLmZpbmQoJ2Rpdi5hY3RpdmUtaXRlbS1jdHInKTtcblxuICAgICAgICB0aGlzLiRpdGVtcyA9IHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyLmZpbmQoJ2Rpdi5pdGVtJyk7XG5cbiAgICAgICAgdGhpcy4kd2luZG93ID0gJCh3aW5kb3cpO1xuICAgIH0sXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gV2luZG93IFJlc2l6ZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgcmVzaXplQWxsSXRlbXNDb250YWluZXI6IGZ1bmN0aW9uICh3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KSB7XG4gICAgICAgIHZhciBjb250YWluZXJNaW5XaWR0aCA9IHdpbmRvd1dpZHRoICogdGhpcy4kaXRlbXMubGVuZ3RoO1xuXG5cbiAgICAgICAgdGhpcy4kYWxsSXRlbXNDb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICd3aWR0aCc6IHRoaXMuJGl0ZW1zLmxlbmd0aCArICcwMCUnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXJNaW5XaWR0aDtcbiAgICB9LFxuXG4gICAgcmVwb3NpdGlvbkl0ZW1zQ29udGFpbmVyU2hpZnQ6IGZ1bmN0aW9uIChjb250YWluZXJNaW5XaWR0aCwgd2luZG93V2lkdGgpIHtcbiAgICAgICAgdmFyIGxhc3RQb3NzaWJsZUxlZnRJdGVtID0gdGhpcy5nZXRMYXN0SXRlbVJvb3RMZWZ0KGNvbnRhaW5lck1pbldpZHRoLCB3aW5kb3dXaWR0aCk7XG5cbiAgICAgICAgdmFyIG5ld0l0ZW07XG4gICAgICAgIGlmICh0aGlzLnJvb3RlZEl0ZW0gPiBsYXN0UG9zc2libGVMZWZ0SXRlbSAmJiBjb250YWluZXJNaW5XaWR0aCA+IHdpbmRvd1dpZHRoKSB7XG4gICAgICAgICAgICAvL3Jvb3QgdG8gcmlnaHQgbW9zdCBpdGVtXG4gICAgICAgICAgICBuZXdJdGVtID0gdGhpcy4kaXRlbXMubGVuZ3RoIC0gMTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChjb250YWluZXJNaW5XaWR0aCA8PSB3aW5kb3dXaWR0aCkge1xuICAgICAgICAgICAgLy9yb290IHRvIGxlZnQgbW9zdCBpdGVtXG4gICAgICAgICAgICBuZXdJdGVtID0gMDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vcmVwb3NpdGlvbiBzbyBjdXJyZW50IGl0ZW0gaXMgY29ycmVjdGx5IHBvc2l0aW9uZWRcbiAgICAgICAgICAgIG5ld0l0ZW0gPSB0aGlzLnJvb3RlZEl0ZW07XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFuaW1hdGVUb0l0ZW0obmV3SXRlbSwgMC4xKTtcbiAgICB9LFxuICAgIG9uV2luZG93UmVzaXplOiBmdW5jdGlvbiAod2lkdGgsIGhlaWdodCkge1xuICAgICAgICBpZiAodHlwZW9mIHdpZHRoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgd2lkdGggPSB0aGlzLiR3aW5kb3cud2lkdGgoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIGhlaWdodCA9IHRoaXMuJHdpbmRvdy5oZWlnaHQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjb250YWluZXJNaW5XaWR0aCA9IHRoaXMucmVzaXplQWxsSXRlbXNDb250YWluZXIod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgdGhpcy5yZXBvc2l0aW9uSXRlbXNDb250YWluZXJTaGlmdChjb250YWluZXJNaW5XaWR0aCwgd2lkdGgpO1xuXG4gICAgICAgIHJldHVybiBjb250YWluZXJNaW5XaWR0aDtcbiAgICB9LFxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IENyZWF0ZS9TaG93L0Nsb3NlL1N3YXAgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBjcmVhdGVTdWJWaWV3OiBmdW5jdGlvbiAoJHZpZXcpIHtcbiAgICAgICAgdmFyIG5ld1ZpZXcgPSAkdmlldy5jbG9uZShmYWxzZSk7XG4gICAgICAgIG5ld1ZpZXcub2dFbCA9ICR2aWV3O1xuXG4gICAgICAgIHJldHVybiBuZXdWaWV3O1xuICAgIH0sXG5cbiAgICAvLyoqKioqKioqKioqKiogT3BlbiBWaWV3ICoqKioqKioqKioqKipcbiAgICBzaG93U3ViVmlldzogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3N1cGVyKHZpZXdOYW1lLCBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnJ1blNob3dTdWJWaWV3KHZpZXdOYW1lKTtcbiAgICB9LFxuICAgIHJ1blNob3dTdWJWaWV3OiBmdW5jdGlvbih2aWV3TmFtZSkge1xuICAgICAgICB2YXIgJGl0ZW0gPSB0aGlzLiRpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IHZpZXdOYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgJG5ld1N1YlZpZXcgPSB0aGlzLmNyZWF0ZVN1YlZpZXcoJGl0ZW0pO1xuXG4gICAgICAgICRuZXdTdWJWaWV3Lm9nRWwuYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAvLyBpZiB0aGVyZSBpcyBhbHJlYWR5IGEgc3ViVmlldyBvcGVuLCB0cmFuc2l0aW9uIGJldHdlZW4gdGhlIHR3b1xuICAgICAgICBpZiAodGhpcy5zdWJWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLnN3YXBTdWJWaWV3KCRuZXdTdWJWaWV3KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGFjdGl2ZUl0ZW1Db250YWluZXIuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25OZXdTdWJWaWV3KCRuZXdTdWJWaWV3KTtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9ICRuZXdTdWJWaWV3O1xuICAgICAgICAgICAgdGhpcy5hbmltYXRlU3ViVmlld09wZW4oKTtcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8qKioqKioqKioqKioqIENsb3NlIFZpZXcgKioqKioqKioqKioqKlxuICAgIGNsb3NlU3ViVmlldzogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAodGhpcy5zdWJWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICAgICAgICB0aGlzLnJ1bkNsb3NlU3ViVmlldygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBydW5DbG9zZVN1YlZpZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGVTdWJWaWV3Q2xvc2VkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5vZ0VsLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICB0aGlzLiRhY3RpdmVJdGVtQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG5cbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5yZW1vdmUoKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnN1YlZpZXc7XG5cbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyoqKioqKioqKioqKiogU3dhcCBWaWV3ICoqKioqKioqKioqKipcbiAgICBzd2FwU3ViVmlldzogZnVuY3Rpb24gKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSAoJG5ld1N1YlZpZXcub2dFbC5pbmRleCgpID4gdGhpcy5zdWJWaWV3Lm9nRWwuaW5kZXgoKSkgPyAncmlnaHQnIDogJ2xlZnQnO1xuXG4gICAgICAgIHRoaXMucG9zaXRpb25OZXdTdWJWaWV3KCRuZXdTdWJWaWV3LCBkaXJlY3Rpb24pO1xuXG4gICAgICAgIHRoaXMuYW5pbWF0ZVN1YlZpZXdTaGlmdCgkbmV3U3ViVmlldywgZGlyZWN0aW9uLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcub2dFbC5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgdGhpcy5zdWJWaWV3LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSAkbmV3U3ViVmlldztcbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBQb3NpdGlvbi9QcmUtYW5pbWF0aW9uIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgcG9zaXRpb25TdWJWaWV3VG9PcGVuOiBmdW5jdGlvbiAoJG5ld1N1YlZpZXcpIHtcbiAgICAgICAgJG5ld1N1YlZpZXcuY3NzKHtcbiAgICAgICAgICAgIGxlZnQ6ICRuZXdTdWJWaWV3Lm9nRWwub2Zmc2V0KCkubGVmdCArICdweCcsXG4gICAgICAgICAgICB3aWR0aDogJG5ld1N1YlZpZXcub2dFbC53aWR0aCgpXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBwb3NpdGlvblN1YlZpZXdUb1N3YXA6IGZ1bmN0aW9uICgkbmV3U3ViVmlldywgZGlyZWN0aW9uKSB7XG4gICAgICAgICRuZXdTdWJWaWV3LmNzcyh7XG4gICAgICAgICAgICBsZWZ0OiAoZGlyZWN0aW9uID09PSAnbGVmdCcpID8gJy0xMDAlJyA6ICcxMDAlJ1xuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgcG9zaXRpb25OZXdTdWJWaWV3OiBmdW5jdGlvbiAoJG5ld1N1YlZpZXcsIGRpcmVjdGlvbikge1xuICAgICAgICBpZiAodHlwZW9mIGRpcmVjdGlvbiA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdWJWaWV3VG9PcGVuKCRuZXdTdWJWaWV3KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdWJWaWV3VG9Td2FwKCRuZXdTdWJWaWV3LCBkaXJlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgICRuZXdTdWJWaWV3LmFwcGVuZFRvKHRoaXMuJGFjdGl2ZUl0ZW1Db250YWluZXIpO1xuICAgIH0sXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IFN1YiBWaWV3IEFuaW1hdGlvbiBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgYW5pbWF0ZVN1YlZpZXdPcGVuOiBmdW5jdGlvbiAodGltZWxpbmUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aW1lbGluZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25UaW1lID0gMC42O1xuXG4gICAgICAgICAgICB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50byh0aGlzLnN1YlZpZXcsIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMi5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGltZWxpbmUucGxheSgpO1xuICAgIH0sXG5cbiAgICBhbmltYXRlU3ViVmlld0Nsb3NlZDogZnVuY3Rpb24gKGNhbGxiYWNrLCB0aW1lbGluZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRpbWVsaW5lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRpbWUgPSAwLjY7XG4gICAgICAgICAgICB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmJpbmQodGhpcykoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMi5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGltZWxpbmUucGxheSgpO1xuICAgIH0sXG5cbiAgICBhbmltYXRlU3ViVmlld1NoaWZ0OiBmdW5jdGlvbiAobmV3VmlldywgZGlyZWN0aW9uLCBjYWxsYmFjaywgdGltZWxpbmUpIHtcbiAgICAgICAgdmFyIGxlZnRUbyA9IChkaXJlY3Rpb24gPT09ICdyaWdodCcpID8gJy0xMDAlJyA6ICcxMDAlJztcblxuICAgICAgICBpZiAodHlwZW9mIHRpbWVsaW5lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRpbWUgPSAwLjc7XG4gICAgICAgICAgICB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmJpbmQodGhpcykoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIGxlZnQ6IGxlZnRUbyxcbiAgICAgICAgICAgICAgICBlYXNlOiAnUG93ZXIyLmVhc2VJbk91dCdcbiAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8obmV3VmlldywgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMi5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdGltZWxpbmUucGxheSgpO1xuXG4gICAgICAgIC8vbW92ZSB0aGUgdGltZWxpbmUgdW5kZXJuZWF0aFxuICAgICAgICB0aGlzLnNoaWZ0QWxsSXRlbXNDb250YWluZXIoZGlyZWN0aW9uLCAwKTtcbiAgICB9LFxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEl0ZW1zIENvbnRhaW5lciBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIHNoaWZ0QWxsSXRlbXNDb250YWluZXI6IGZ1bmN0aW9uIChkaXJlY3Rpb24sIGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgdmFyIGxhc3RMZWZ0SXRlbSA9IHRoaXMuZ2V0TGFzdEl0ZW1Sb290TGVmdCgpO1xuICAgICAgICB2YXIgbmV3SXRlbTtcblxuICAgICAgICBpZiAoZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yb290ZWRJdGVtICsgMSA+IGxhc3RMZWZ0SXRlbSkge1xuICAgICAgICAgICAgICAgIG5ld0l0ZW0gPSB0aGlzLiRpdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvSXRlbSh0aGlzLiRpdGVtcy5sZW5ndGggLSAxLCBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIG5ld0l0ZW0gPSB0aGlzLnJvb3RlZEl0ZW0gKyAxO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvSXRlbSh0aGlzLnJvb3RlZEl0ZW0gKyAxLCBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvb3RlZEl0ZW0gLSAxIDwgbGFzdExlZnRJdGVtKSB7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IHRoaXMucm9vdGVkSXRlbSAtIDE7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlVG9JdGVtKHRoaXMucm9vdGVkSXRlbSAtIDEsIGFuaW1hdGlvblRpbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3SXRlbSA9IGxhc3RMZWZ0SXRlbTtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVUb0l0ZW0obGFzdExlZnRJdGVtLCBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBuZXdJdGVtO1xuICAgIH0sXG4gICAgLy90aGUgbGFzdCBpdGVtIHRoYXQgY2FuIGJlIHJvb3RlZCB0byB0aGUgbGVmdCBzaWRlIG9mIHRoZSBzY3JlZW4gd2l0aG91dCBleHBvc2luZyBhIGJsYWNrIGJhciBvbiB0aGUgcmlnaHRcbiAgICBnZXRMYXN0SXRlbVJvb3RMZWZ0OiBmdW5jdGlvbiAoY29udGFpbmVyTWluV2lkdGgsIHdpbmRvd1dpZHRoKSB7XG4gICAgICAgIGlmICh0eXBlb2YgY29udGFpbmVyTWluV2lkdGggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBjb250YWluZXJNaW5XaWR0aCA9IHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyLndpZHRoKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvd1dpZHRoID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgd2luZG93V2lkdGggPSB0aGlzLiR3aW5kb3cud2lkdGgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtYXhPZmZzZXQgPSBjb250YWluZXJNaW5XaWR0aCAtIHdpbmRvd1dpZHRoO1xuICAgICAgICBtYXhPZmZzZXQgPSAobWF4T2Zmc2V0IDwgMCkgPyAwIDogbWF4T2Zmc2V0O1xuXG4gICAgICAgIHJldHVybiBIZWxwZXJGdW5jcy5mbG9vck5lYXJlc3RGYWN0b3IobWF4T2Zmc2V0LCBjb250YWluZXJNaW5XaWR0aCwgdGhpcy4kaXRlbXMubGVuZ3RoKTtcbiAgICB9LFxuICAgIGFuaW1hdGVUb0l0ZW06IGZ1bmN0aW9uIChpdGVtSW5kZXgsIGFuaW1hdGlvblRpbWUsIGVhc2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChpdGVtSW5kZXggPCAwKSB7XG4gICAgICAgICAgICBpdGVtSW5kZXggPSAwO1xuICAgICAgICB9XG4gICAgICAgIGVhc2UgPSBlYXNlIHx8ICdQb3dlcjIuZWFzZUluT3V0JztcblxuICAgICAgICB2YXIgY29udGFpbmVyV2lkdGggPSB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lci53aWR0aCgpO1xuICAgICAgICB2YXIgd2luZG93V2lkdGggPSB0aGlzLiR3aW5kb3cud2lkdGgoKTtcblxuICAgICAgICB2YXIgeFRvID0gY29udGFpbmVyV2lkdGggKiBpdGVtSW5kZXggLyB0aGlzLiRpdGVtcy5sZW5ndGg7XG5cbiAgICAgICAgaWYgKGl0ZW1JbmRleCA+PSB0aGlzLiRpdGVtcy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICBpdGVtSW5kZXggPSB0aGlzLiRpdGVtcy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgeFRvID0gY29udGFpbmVyV2lkdGggLSB3aW5kb3dXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvb3RlZEl0ZW0gPSBpdGVtSW5kZXg7XG5cbiAgICAgICAgdGhpcy5kZXRlY3RBbmRUb2dnbGVBcnJvd3MoKTtcblxuICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyLCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICB4OiAteFRvLFxuICAgICAgICAgICAgb3ZlcndyaXRlOiAnYWxsJyxcbiAgICAgICAgICAgIGVhc2U6IGVhc2UsXG4gICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgaWYodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgIH0pO1xuICAgIH0sXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBBcnJvdyBTdHVmZiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGRldGVjdEFuZFRvZ2dsZUFycm93czogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoISF0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB0aGlzLnRvZ2dsZVN1YlZpZXdBcnJvd3MoKTtcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhpcy50b2dnbGVJdGVtQ29udGFpbmVyQXJyb3dzKCk7XG4gICAgfSxcbiAgICB0b2dnbGVTdWJWaWV3QXJyb3dzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuc3ViVmlldy5vZ0VsLmluZGV4KCk7XG5cbiAgICAgICAgaWYgKGluZGV4ID4gMSlcbiAgICAgICAgICAgIHRoaXMuJGxlZnRBcnJvdy5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuJGxlZnRBcnJvdy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgaWYgKGluZGV4IDwgdGhpcy4kaXRlbXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIHRoaXMuJHJpZ2h0QXJyb3cuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLiRyaWdodEFycm93LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9LFxuICAgIHRvZ2dsZUl0ZW1Db250YWluZXJBcnJvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHRoaXMucm9vdGVkSXRlbSA+IDApXG4gICAgICAgICAgICB0aGlzLiRsZWZ0QXJyb3cuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aGlzLiRsZWZ0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIGlmICh0aGlzLnJvb3RlZEl0ZW0gPCB0aGlzLiRpdGVtcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgdGhpcy4kcmlnaHRBcnJvdy5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHRoaXMuJHJpZ2h0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIH0sXG4gICAgdHVybk9mZkFycm93czogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLiRsZWZ0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLiRyaWdodEFycm93LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9LFxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IFNlY3Rpb24gYWN0aXZhdGUvZGVhY3RpdmF0ZSB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgb25TZWN0aW9uQWN0aXZhdGU6IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoZWxbMF0gPT09IHRoaXMuJGVsWzBdKSB7XG4gICAgICAgICAgICB0aGlzLmRldGVjdEFuZFRvZ2dsZUFycm93cygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjbGVhbnVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIHRoaXMudHVybk9mZkFycm93cygpO1xuICAgIH0sXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBFdmVudCBMaXN0ZW5lcnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICBvbkNob29zZUl0ZW06IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FuaW1hdGluZyAmJiAhdGhpcy5zdWJWaWV3ICYmIGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSAhPT0gJycpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQ2xvc2VJdGVtOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcgJiYgISF0aGlzLnN1YlZpZXcpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbk5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIHZhciAkbmV4dFZpZXcgPSB0aGlzLnN1YlZpZXcub2dFbC5uZXh0KCk7XG4gICAgICAgICAgICAgICAgdmFyIGRhdGFJZCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKCRuZXh0Vmlldy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YUlkID0gJG5leHRWaWV3WzBdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChkYXRhSWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoZGF0YUlkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRBbGxJdGVtc0NvbnRhaW5lcigncmlnaHQnLCAwLjM1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25QcmV2OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN1YlZpZXcpIHtcbiAgICAgICAgICAgICAgICB2YXIgJHByZXZWaWV3ID0gdGhpcy5zdWJWaWV3Lm9nRWwucHJldigpO1xuICAgICAgICAgICAgICAgIHZhciBkYXRhSWQgPSAnJztcblxuICAgICAgICAgICAgICAgIGlmICgkcHJldlZpZXcubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGRhdGFJZCA9ICRwcmV2Vmlld1swXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoZGF0YUlkID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KGRhdGFJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNoaWZ0QWxsSXRlbXNDb250YWluZXIoJ2xlZnQnLCAwLjM1KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhvcml6b250YWxTY3JvbGxWaWV3O1xuIiwidmFyIFZpZXcgPSByZXF1aXJlKFwiLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uL3RlbXBsYXRlcy9tZW51Lmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuL2hlbHBlcnMvSGVscGVycy5qc1wiKTtcbnZhciBTb2NpYWwgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvU29jaWFsLmpzXCIpO1xuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKiBTdGF0aWMgVmFyaWFibGVzICoqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXG4vLyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogTWVudSBWaWV3ICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxudmFyIE1lbnVWaWV3ID0gVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBldmVudHMgOiB7XG4gICAgICAgICAgICBcImNsaWNrIC5oYW1idXJnZXJcIiAgICA6IFwidG9nZ2xlTWVudVwiLFxuICAgICAgICAgICAgXCJ0b3VjaGVuZCAuaGFtYnVyZ2VyXCIgOiBcInRvZ2dsZU1lbnVcIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLm1lbnUtaXRlbVwiIDogXCJvbk1lbnVJdGVtQ2xpY2tlZFwiLFxuICAgICAgICAgICAgXCJjbGljayAubWVudS1pdGVtXCIgICAgOiBcIm9uTWVudUl0ZW1DbGlja2VkXCIsXG5cdFx0XHRcImNsaWNrIC5mYWNlYm9vay1zaGFyZVwiIDogXCJmYWNlYm9va1NoYXJlXCJcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uU3BlZWQgPSAwLjI1O1xuICAgICAgICAgICAgdGhpcy5vcGVuV2lkdGggPSBIZWxwZXJGdW5jcy5EZXZpY2UuY3VycmVudERldmljZSgpID09IFwibW9iaWxlXCIgPyBcIjEwMCVcIiA6IFwiMzAwcHhcIjtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuLy8gICAgICAgICAgICB0aGlzLm92ZXJsYXkgPSBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5oYW1idXJnZXIgPSB0aGlzLiQoJy5oYW1idXJnZXInKTtcbiAgICAgICAgICAgIHRoaXMudG9wQmFyTG9nbyA9IHRoaXMuJCgnLmRlc2t0b3AtbG9nbyA+aW1nJyk7XG4gICAgICAgICAgICB0aGlzLnRvcEJhckxvZ28uaGlkZSgpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcInNlY3Rpb24uYWZ0ZXJBY3RpdmVcIiwgdGhpcy5vblNlY3Rpb25DaGFuZ2UsIHRoaXMpO1xuXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2sgdG91Y2hlbmQnLCBmdW5jdGlvbihlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgICAgIGlmICghJHRoaXMuaGFzQ2xhc3MoJy5oYW1idXJnZXInKSAmJiAkdGhpcy5jbG9zZXN0KCcjbWVudScpLmxlbmd0aCA9PT0gMClcbiAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5vcGVuKVxuICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsb3NlTWVudTogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgdHdlZW5UbyA9IDA7XG5cbiAgICAgICAgICAgIHZhciBlYXNpbmcgPSAnUG93ZXIyLmVhc2VJbk91dCc7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLmVsLCB0aGlzLmFuaW1hdGlvblNwZWVkLCB7XG4gICAgICAgICAgICAgICAgd2lkdGggOiB0d2VlblRvLFxuICAgICAgICAgICAgICAgIGVhc2UgIDogZWFzaW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9IGZhbHNlO1xuXG4gICAgICAgICAgICB2YXIgaGFtQkcgPSB0aGlzLm9wZW4gPyBcIi9pbWFnZXMvbWVudS94LnBuZ1wiIDogXCIvaW1hZ2VzL21lbnUvbWVudS1pY29uLnBuZ1wiO1xuICAgICAgICAgICAgdGhpcy5oYW1idXJnZXIuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybChcIit3aW5kb3cuY2RuKyBoYW1CRyArXCIpXCIpO1xuXG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnb3BlbicpO1xuXG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3LkNsb3NlZFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICB0b2dnbGVNZW51IDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHR3ZWVuVG8gPSB0aGlzLm9wZW4gPyAwIDogdGhpcy5vcGVuV2lkdGg7XG5cbiAgICAgICAgICAgIHZhciBlYXNpbmcgPSAnUG93ZXIyLmVhc2VJbk91dCc7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLmVsLCB0aGlzLmFuaW1hdGlvblNwZWVkLCB7XG4gICAgICAgICAgICAgICAgd2lkdGggOiB0d2VlblRvLFxuICAgICAgICAgICAgICAgIGVhc2UgIDogZWFzaW5nXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMub3BlbiA9ICF0aGlzLm9wZW47XG5cbiAgICAgICAgICAgIHZhciBoYW1CRyA9IHRoaXMub3BlbiA/IFwiL2ltYWdlcy9tZW51L3gucG5nXCIgOiBcIi9pbWFnZXMvbWVudS9tZW51LWljb24ucG5nXCI7XG4gICAgICAgICAgICB0aGlzLmhhbWJ1cmdlci5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKFwiK3dpbmRvdy5jZG4rIGhhbUJHICtcIilcIik7XG5cbiAgICAgICAgICAgIHRoaXMuJGVsLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG5cbiAgICAgICAgICAgIGlmKHRoaXMub3BlbilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3Lk9wZW5lZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3LkNsb3NlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvbk1lbnVJdGVtQ2xpY2tlZCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKCQoZS5jdXJyZW50VGFyZ2V0KS5hdHRyKFwiaHJlZlwiKSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLnRvZ2dsZU1lbnUoZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25TZWN0aW9uQ2hhbmdlOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoZS5pbmRleCgpID09IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3BCYXJMb2dvLmZhZGVPdXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvcEJhckxvZ28uZmFkZUluKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblx0XHRmYWNlYm9va1NoYXJlIDogZnVuY3Rpb24gKGUpXG5cdFx0e1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBTb2NpYWwuU2hhcmVGYWNlYm9vaygpO1xuXHRcdH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZW51VmlldztcbiIsInZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi8uLi90ZW1wbGF0ZXMvcHJlbG9hZGVyLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoJy4vaGVscGVycy9IZWxwZXJzLmpzJyk7XG5cblxudmFyIFByZWxvYWRlclZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zZXRFbGVtZW50KHRlbXBsYXRlKCkpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICBwcmVsb2FkIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5sb2FkZXIgPSB0aGlzLiQoJy5sb2FkZXInKTtcbiAgICAgICAgICAgIHRoaXMuYm9yZGVyID0gdGhpcy4kKCcuYm9yZGVyJyk7XG4gICAgICAgICAgICB0aGlzLs6xID0gMDtcbiAgICAgICAgICAgIHRoaXMuz4AgPSBNYXRoLlBJO1xuICAgICAgICAgICAgdGhpcy50ID0gMzA7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2FkZWQgPSAwO1xuICAgICAgICAgICAgdGhpcy5sb2FkY29tcGxldGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZUxpc3QgPSB0aGlzLm1vZGVsW0hlbHBlckZ1bmNzLkRldmljZS5jdXJyZW50RGV2aWNlKCldO1xuXG4gICAgICAgICAgICB0aGlzLnN0ZXAgPSAzNjAgLyB0aGlzLmltYWdlTGlzdC5sZW5ndGg7XG5cbiAgICAgICAgICAgIF8uZWFjaCh0aGlzLmltYWdlTGlzdCwgZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBsaXN0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKTtcbiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudExvYWRlZCArPSB0aGlzLnN0ZXA7XG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBpbWc7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSBmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2FkZWQgKz0gdGhpcy5zdGVwO1xuICAgICAgICAgICAgICAgICAgICBkZWxldGUgaW1nO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKTtcblxuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuY2RuICsgbGlzdFtpbmRleF07XG4gICAgICAgICAgICB9LCB0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZHJhdyA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLs6xIDwgdGhpcy5jdXJyZW50TG9hZGVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuzrEgKz0gNTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLs6xID49IDM2MClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLs6xID0gMzU5Ljk5O1xuICAgICAgICAgICAgICAgIHRoaXMubG9hZGNvbXBsZXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vdGhpcy7OsSAlPSAzNjA7XG5cblxuICAgICAgICAgICAgdmFyIHIgPSAoIHRoaXMuzrEgKiB0aGlzLs+AIC8gMTgwIClcbiAgICAgICAgICAgICAgICAsIHggPSBNYXRoLnNpbihyKSAqIDEyNVxuICAgICAgICAgICAgICAgICwgeSA9IE1hdGguY29zKHIpICogLTEyNVxuICAgICAgICAgICAgICAgICwgbWlkID0gKCB0aGlzLs6xID4gMTgwICkgPyAxIDogMFxuICAgICAgICAgICAgICAgICwgYW5pbSA9ICdNIDAgMCB2IC0xMjUgQSAxMjUgMTI1IDEgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIG1pZCArICcgMSAnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgeCArICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIHkgKyAnIHonO1xuXG4gICAgICAgICAgICB0aGlzLmxvYWRlci5hdHRyKCdkJywgYW5pbSk7XG4gICAgICAgICAgICB0aGlzLmJvcmRlci5hdHRyKCdkJywgYW5pbSk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5sb2FkY29tcGxldGUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SUQgPSBzZXRUaW1lb3V0KHRoaXMuZHJhdy5iaW5kKHRoaXMpLCB0aGlzLnQpOyAvLyBSZWRyYXdcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyB3YWl0IGEgYmVhdCB0byBlbnN1cmUgYW5pbWF0aW9uIGhhcyBjb21wbGV0ZWQsIHRoZW4gdHJpZ2dlciBjb21wbGV0ZSBldmVudFxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcigncHJlbG9hZGVyLmNvbXBsZXRlJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxvZ28gPSB0aGlzLiQoJy5wcmVsb2FkZXJDb250YWluZXIgPiAubG9nbycpO1xuXG4gICAgICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLiQoJ3N2ZycpLCAwLjMsIHtzY2FsZVg6MCwgc2NhbGVZOjAsIG9uQ29tcGxldGU6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8obG9nbywgMSwge29wYWNpdHk6IDAsIG9uQ29tcGxldGU6IGZ1bmN0aW9uKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcigncHJlbG9hZGVyLmFuaW1hdGlvbkNvbXBsZXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfX0pO1xuICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJRCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFByZWxvYWRlclZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vdGVtcGxhdGVzL3Njcm9sbGJhci5oYnNcIik7XG52YXIgSGVscGVyRnVuY3MgPSByZXF1aXJlKFwiLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBTY3JvbGxCYXJWaWV3ID0gVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBldmVudHMgOiB7XG4gICAgICAgICAgICBcIm1vdXNlZG93biAuaGFuZGxlXCIgOiBcIm9uSGFuZGxlRG93blwiLFxuICAgICAgICAgICAgXCJtb3VzZW92ZXJcIiAgICAgICAgIDogXCJvbk1vdXNlT3ZlclwiLFxuICAgICAgICAgICAgXCJtb3VzZWxlYXZlXCIgICAgICAgIDogXCJvbk1vdXNlTGVhdmVcIixcbiAgICAgICAgICAgIFwicmVuZGVyXCIgICAgICAgICAgICA6IFwicmVuZGVyQWZ0ZXJcIlxuICAgICAgICB9LFxuXG4gICAgICAgIHZpZXdOYW1lICAgICAgICAgICAgOiAnJywgICAgICAgIC8vIFVzZWQgdG8gbmFtZXNwYWNlIGV2ZW50cyBmb3Igc2Nyb2xsYmFycyB0aGF0IGFyZSBjb250YWluZWQgd2l0aGluIGEgc3Vidmlldy5cbiAgICAgICAgY29udGFpbmVyICAgICAgICAgICA6IHVuZGVmaW5lZCwgLy8gVGhlIGNvbnRhaW5lciB0aGF0IHRoZSBzY3JvbGxiYXIgZXhpc3RzIHdpdGhpbiBpZiBpdCBpcyBjb250YWluZWQgd2l0aGluIGEgc3Vidmlldy5cbiAgICAgICAgY29udGFpbmVyT2Zmc2V0VG9wICA6IDAsICAgICAgICAgLy8gSW4gb3JkZXIgdG8gYWNjdXJhdGVseSB0cmFjayB0aGUgaGFuZGxlIHBvc2l0aW9uIGluc2lkZSBjb250YWluZXJzIHRoYXQgYXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFic29sdXRlbHkgcG9zaXRpb25lZCwgdGhlIG9mZnNldCBvZiB0aGF0IGNvbnRhaW5lciBuZWVkcyB0byBiZSB0cmFja2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIG9mZnNldCBpcyB1c2VkIHRvIGNvcnJlY3RseSBtYXAgdGhlIGhhbmRsZSBwb3NpdGlvbiB0byB0aGUgY3Vyc29yIHBvc2l0aW9uLlxuICAgICAgICBhbmltYXRlU2Nyb2xsSGFuZGxlIDogdHJ1ZSwgICAgICAvLyBXaGV0aGVyIHRvIGFuaW1hdGUgdGhlIHNjcm9sbGJhciB0aHVtYi5cbiAgICAgICAgYW5pbWF0ZU9wYWNpdHkgICAgICA6IHRydWUsICAgICAgLy8gV2hldGhlciB0byBjaGFuZ2UgdGhlIG9wYWNpdHkgd2hlbiB0aGUgc2Nyb2xsYmFyIGlzIHZpc2libGUuXG4gICAgICAgIHNjcm9sbFBlcmNlbnRhZ2UgICAgOiAwLFxuICAgICAgICBpc01vdXNlRG93biAgICAgICAgIDogZmFsc2UsXG4gICAgICAgIHNjcm9sbGluZ0VuYWJsZWQgICAgOiB0cnVlLFxuICAgICAgICB0aW1lb3V0SUQgICAgICAgICAgIDogdW5kZWZpbmVkLFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAoYXR0cnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIGlmIChhdHRycyAmJiBhdHRycy52aWV3TmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdOYW1lID0gYXR0cnMudmlld05hbWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdHRycyAmJiBhdHRycy5jb250YWluZXIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXIgPSBhdHRycy5jb250YWluZXI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdHRycyAmJiB0eXBlb2YgYXR0cnMuYW5pbWF0ZVNjcm9sbEhhbmRsZSA9PT0gJ2Jvb2xlYW4nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVNjcm9sbEhhbmRsZSA9IGF0dHJzLmFuaW1hdGVTY3JvbGxIYW5kbGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhdHRycyAmJiB0eXBlb2YgYXR0cnMuYW5pbWF0ZU9wYWNpdHkgPT09ICdib29sZWFuJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVPcGFjaXR5ID0gYXR0cnMuYW5pbWF0ZU9wYWNpdHk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24odGhpcy5ldmVudE5hbWVQcmVmaXgoKSArIFwiU2VjdGlvbi5GaW5hbFBvc2l0aW9uXCIsIHRoaXMub25TZWN0aW9uQW5pbWF0ZWQsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5jb250YWluZXIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIlN1YlZpZXcuT3BlbmVkXCIsIHRoaXMubG9ja1Njcm9sbCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIlN1YlZpZXcuQ2xvc2VkXCIsIHRoaXMudW5sb2NrU2Nyb2xsLCB0aGlzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBldmVudE5hbWVQcmVmaXg6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMudmlld05hbWUgPyB0aGlzLnZpZXdOYW1lICsgJy4nIDogJyc7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmhhbmRsZSA9IHRoaXMuJCgnLmhhbmRsZScpWzBdO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uIChoaWRlT25SZW5kZXIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0ZU9wYWNpdHkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50aW1lb3V0SUQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLiRlbC5hbmltYXRlKHtvcGFjaXR5IDogMH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChoaWRlT25SZW5kZXIgPT09IHRydWUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuY3NzKHtvcGFjaXR5OiAwfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF8uZGVmZXIodGhpcy5yZW5kZXJBZnRlci5iaW5kKHRoaXMsIGhpZGVPblJlbmRlcikpO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXJBZnRlciA6IGZ1bmN0aW9uKGhpZGVPblJlbmRlcilcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGhpZGVPblJlbmRlciAhPT0gdHJ1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNldFNjcm9sbGJhclZpc2liaWxpdHkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5jYWxjdWxhdGVPZmZzZXQoKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0IHRoZSBzY3JvbGxiYXIgb3BhY2l0eSBiYXNlZCBvbiB0aGUgd2hldGhlciB0aGUgY29udGFpbmVyIGhhcyBzY3JvbGxhYmxlIGNvbnRlbnQgb3Igbm90LlxuICAgICAgICAgKiBAcGFyYW0ge2ludH0gW29wYWNpdHldIE9wdGlvbmFsbHkgZm9yY2UgdGhlIG9wYWNpdHkgdG8gdGhpcyB2YWx1ZS5cbiAgICAgICAgICogQHBhcmFtIHtmdW5jdGlvbn0gW2NhbGxiYWNrXSBDYWxsIHRoaXMgZnVuY3Rpb24gYWZ0ZXIgdGhlIG9wYWNpdHkgaGFzIGZpbmlzaGVkIGFuaW1hdGluZy5cbiAgICAgICAgICovXG4gICAgICAgIHNldFNjcm9sbGJhclZpc2liaWxpdHk6IGZ1bmN0aW9uKG9wYWNpdHksIGNhbGxiYWNrKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGFpbmVyKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBjb250YWluZXJIZWlnaHQsIGNvbnRhaW5lckNvbnRlbnRIZWlnaHQ7XG5cbiAgICAgICAgICAgIC8vIGRvZXNuJ3QgdmFsaWRhdGUgbnVtYmVycywgYnV0IHRoaXMgY2hlY2sga2VlcHMgdXMgZnJvbSBnb2luZyBpbnRvIHRoZSBjb2RlIGZvbGxvd2luZyB0aGlzIGJsb2NrXG4gICAgICAgICAgICBpZiAob3BhY2l0eSAhPT0gdW5kZWZpbmVkICYmIG9wYWNpdHkgPj0gMCAmJiBvcGFjaXR5IDw9IDEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYW5pbWF0ZSh7b3BhY2l0eSA6IG9wYWNpdHl9LCAyMDAsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGNvbnRhaW5lckhlaWdodCA9IHRoaXMuY29udGFpbmVyLm91dGVySGVpZ2h0KHRydWUpO1xuICAgICAgICAgICAgY29udGFpbmVyQ29udGVudEhlaWdodCA9IEhlbHBlckZ1bmNzLkVsZW1lbnQuY29udGVudEhlaWdodCh0aGlzLmNvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIGlmIChjb250YWluZXJIZWlnaHQgPCBjb250YWluZXJDb250ZW50SGVpZ2h0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFuaW1hdGUoe29wYWNpdHkgOiAxfSwgMjAwLCBjYWxsYmFjayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuYW5pbWF0ZSh7b3BhY2l0eSA6IDB9LCAyMDAsIGNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FsY3VsYXRlIHRoZSB0b3Agb2ZmZXN0IHBvc2l0aW9uIG9mIHRoZSBlbGVtZW50cyBjb250YWluZXIuXG4gICAgICAgICAqIFRoaXMgaXMgaW1wb3J0YW50IGZvciBjb250YWluZXJzIHRoYXQgaGF2ZSBhbiBhYnNvbHV0ZSBwb3NpdGlvbiBzZXQuXG4gICAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JvbGxVcF0gV2hldGhlciB0byB0cmFuc3ZlcnNlIHRoZSBET00gdG8gY2FsY3VsYXRlIHRoZSBvZmZzZXRzIG9mIGFsbCBwYXJlbnQgY29udGFpbmVycy4gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICAgICAqL1xuICAgICAgICBjYWxjdWxhdGVPZmZzZXQgOiBmdW5jdGlvbihyb2xsVXApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJvbGxVcCA9ICEhcm9sbFVwO1xuXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lck9mZnNldFRvcCA9IDA7XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtZW50ID0gdGhpcy5lbC5wYXJlbnRFbGVtZW50O1xuXG4gICAgICAgICAgICBpZiAoIXBhcmVudEVsZW1lbnQpIHJldHVybjtcblxuICAgICAgICAgICAgZG9cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lck9mZnNldFRvcCArPSBwYXJlbnRFbGVtZW50Lm9mZnNldFRvcDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEFzc2lnbm1lbnQgdG8gcGFyZW50RWxlbWVudCBpcyBpbnRlbnRpb25hbC5cbiAgICAgICAgICAgIC8vIFRoaXMgd2lsbCByZXR1cm4gbnVsbCB3aGVuIHRoZSBsYXN0IHBhcmVudCBlbGVtZW50IGlzIHJlYWNoZWQuXG4gICAgICAgICAgICB3aGlsZSAocm9sbFVwICYmIChwYXJlbnRFbGVtZW50ID0gcGFyZW50RWxlbWVudC5wYXJlbnRFbGVtZW50KSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25IYW5kbGVEb3duIDogZnVuY3Rpb24gKGV2ZW50KVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIHRoaXMuJCh0aGlzLmhhbmRsZSkuc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IHRydWU7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIodGhpcy5ldmVudE5hbWVQcmVmaXgoKSArIFwiU2Nyb2xsQmFyLkhhbmRsZURvd25cIik7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cubW91c2Vtb3ZlXCIsIHRoaXMub25IYW5kbGVNb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cubW91c2V1cFwiLCB0aGlzLm9uSGFuZGxlVXAsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uSGFuZGxlTW92ZSA6IGZ1bmN0aW9uIChldmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHBZID0gZXZlbnQueVBvcyAtIHRoaXMuY29udGFpbmVyT2Zmc2V0VG9wO1xuXG4gICAgICAgICAgICB2YXIgaGFuZGxlT2Zmc2V0ID0gdGhpcy4kKHRoaXMuaGFuZGxlKS5oZWlnaHQoKSAvIDI7XG5cbiAgICAgICAgICAgIGlmIChwWSA8IGhhbmRsZU9mZnNldClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwWSA9IGhhbmRsZU9mZnNldDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHBZID4gdGhpcy5lbC5vZmZzZXRIZWlnaHQgLSBoYW5kbGVPZmZzZXQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcFkgPSB0aGlzLmVsLm9mZnNldEhlaWdodCAtIGhhbmRsZU9mZnNldDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy4kKHRoaXMuaGFuZGxlKS5jc3MoXCJ0b3BcIiwgKHBZIC0gaGFuZGxlT2Zmc2V0ICsgXCJweFwiKSk7XG5cbiAgICAgICAgICAgIC8vIGNhbGMgcGVyY2VudGFnZSBvZiBoYW5kbGUgcG9zaXRpb25cbiAgICAgICAgICAgIHZhciBzY3JvbGxQZXJjZW50YWdlID0gMTAwICogcGFyc2VJbnQodGhpcy5oYW5kbGUuc3R5bGUudG9wKSAvICh0aGlzLmVsLmNsaWVudEhlaWdodCAtIHRoaXMuaGFuZGxlLmNsaWVudEhlaWdodCk7XG5cbiAgICAgICAgICAgIGlmIChzY3JvbGxQZXJjZW50YWdlICE9IHRoaXMuc2Nyb2xsUGVyY2VudGFnZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBjYXAgdGhlIG1heCBwZXJjZW50YWdlIGF0IDEwMCBvciBzZXQgaXQgdG8gdGhlIGNhbGN1bGF0ZWQgcGVyY2VudGFnZVxuICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsUGVyY2VudGFnZSA9IChzY3JvbGxQZXJjZW50YWdlID4gMTAwID8gMTAwIDogc2Nyb2xsUGVyY2VudGFnZSk7XG5cbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIodGhpcy5ldmVudE5hbWVQcmVmaXgoKSArIFwiU2Nyb2xsQmFyLlVwZGF0ZVBvc2l0aW9uXCIsIHtwZXJjZW50IDogdGhpcy5zY3JvbGxQZXJjZW50YWdlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25IYW5kbGVVcCA6IGZ1bmN0aW9uIChldmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5pc01vdXNlRG93biA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLm9uTW91c2VMZWF2ZSh7fSk7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub2ZmKFwid2luZG93Lm1vdXNlbW92ZVwiLCB0aGlzLm9uSGFuZGxlTW92ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9mZihcIndpbmRvdy5tb3VzZXVwXCIsIHRoaXMub25IYW5kbGVVcCwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIodGhpcy5ldmVudE5hbWVQcmVmaXgoKSArIFwiU2Nyb2xsQmFyLkhhbmRsZVVwXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VjdGlvbkFuaW1hdGVkIDogZnVuY3Rpb24gKGV2ZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcG9zLCAkaGFuZGxlO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuaGFuZGxlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGV2ZW50LnBlcmNlbnQgPT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3MgPSAodGhpcy5jb250YWluZXIub2Zmc2V0KCkudG9wIC8gdGhpcy5jb250YWluZXIub3V0ZXJIZWlnaHQodHJ1ZSkpICogKHRoaXMuZWwuY2xpZW50SGVpZ2h0IC0gdGhpcy5oYW5kbGUuY2xpZW50SGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwb3MgPSAoZXZlbnQucGVyY2VudCAqICh0aGlzLmVsLmNsaWVudEhlaWdodCAtIHRoaXMuaGFuZGxlLmNsaWVudEhlaWdodCkpIC8gMTAwO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAkaGFuZGxlID0gdGhpcy4kKHRoaXMuaGFuZGxlKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0ZVNjcm9sbEhhbmRsZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZiAoJGhhbmRsZS5pcygnOmFuaW1hdGVkJykpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAkaGFuZGxlLnN0b3AoKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAkaGFuZGxlLmFuaW1hdGUoe3RvcCA6IHBvc30sIDUwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJGhhbmRsZS5jc3MoJ3RvcCcsIHBvcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25XaW5kb3dSZXNpemUgOiBmdW5jdGlvbiAoZXZlbnQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuJCh0aGlzLmhhbmRsZSkuc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy5zZXRTY3JvbGxiYXJWaXNpYmlsaXR5KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25Nb3VzZU92ZXIgIDogZnVuY3Rpb24gKGV2ZW50KVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYW5pbWF0ZU9wYWNpdHkpIHJldHVybjtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nRW5hYmxlZCA9PSBmYWxzZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnRpbWVvdXRJRCAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRJRCk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMudGltZW91dElEO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy4kZWwuc3RvcCgpO1xuICAgICAgICAgICAgdGhpcy4kZWwuYW5pbWF0ZSh7b3BhY2l0eSA6IDF9LCAyMDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uTW91c2VMZWF2ZSA6IGZ1bmN0aW9uIChldmVudClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFuaW1hdGVPcGFjaXR5KSByZXR1cm47XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmlzTW91c2VEb3duID09PSB0cnVlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuJGVsLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuJGVsLmFuaW1hdGUoe29wYWNpdHkgOiAwfSwgMjAwKTtcbiAgICAgICAgfSxcblxuICAgICAgICBsb2NrU2Nyb2xsIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5pbWF0ZU9wYWNpdHkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy4kZWwuc3RvcCgpO1xuICAgICAgICAgICAgICAgIHRoaXMuJGVsLmFuaW1hdGUoe29wYWNpdHkgOiAwfSwgMjAwLCBmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAge1xuXHQgICAgICAgICAgICAgICAgc2VsZi4kZWwuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHVubG9ja1Njcm9sbCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG5cdCAgICAgICAgdGhpcy4kZWwuc2hvdygpO1xuICAgICAgICAgICAgdGhpcy5zY3JvbGxpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNjcm9sbEJhclZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuL2hlbHBlcnMvSGVscGVycy5qc1wiKTtcblxuLy8gcmVxdWlyZWQgZm9yIGJyb3dzZXJpZnkgdG8gZHluYW1pY2FsbHkgbG9hZCBjbGFzcyBmaWxlcyBmcm9tIGRhdGFcbi8vIFRPRE86IGNvbnNpZGVyIGRlbGV0aW5nIHRoZXNlIG1hbnVhbGx5IGFmdGVyIGFsbCBzZWN0aW9ucyBhcmUgaW5pdGlhbGl6ZWRcbnZhciBpbnRyb1ZpZXcgPSByZXF1aXJlKFwiLi9zZWN0aW9ucy9JbnRyb1ZpZXcuanNcIik7XG52YXIgaW50cm9WaWV3TW9iaWxlID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvbW9iaWxlL0ludHJvVmlldy5qc1wiKTtcblxudmFyIGhvbWVWaWV3ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvSG9tZVZpZXcuanNcIik7XG52YXIgaG9tZVZpZXdNb2JpbGUgPSByZXF1aXJlKFwiLi9zZWN0aW9ucy9tb2JpbGUvSG9tZVZpZXcuanNcIik7XG52YXIgaG9tZVZpZXdUYWJsZXQ9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL3RhYmxldC9Ib21lVmlldy5qc1wiKTtcblxudmFyIFN0b3J5VmlldyA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL1N0b3J5Vmlldy5qc1wiKTtcbnZhciBTdG9yeVZpZXdNb2JpbGUgPSByZXF1aXJlKFwiLi9zZWN0aW9ucy9tb2JpbGUvU3RvcnlWaWV3LmpzXCIpO1xudmFyIFN0b3J5Vmlld1RhYmxldCA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL3RhYmxldC9TdG9yeVZpZXcuanNcIik7XG5cbnZhciBDaGFyYWN0ZXJzVmlldyA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL0NoYXJhY3RlcnNWaWV3LmpzXCIpO1xudmFyIENoYXJhY3RlcnNWaWV3TW9iaWxlID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvbW9iaWxlL0NoYXJhY3RlcnNWaWV3LmpzXCIpO1xudmFyIENoYXJhY3RlcnNWaWV3VGFibGV0ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvdGFibGV0L0NoYXJhY3RlcnNWaWV3LmpzXCIpO1xuXG52YXIgTWVkaWFWaWV3ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvTWVkaWFWaWV3LmpzXCIpO1xudmFyIE1lZGlhVmlld01vYmlsZSA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL21vYmlsZS9NZWRpYVZpZXcuanNcIik7XG52YXIgTWVkaWFWaWV3VGFibGV0ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvdGFibGV0L01lZGlhVmlldy5qc1wiKTtcblxudmFyIFRpbWVsaW5lVmlldyA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL1RpbWVsaW5lVmlldy5qc1wiKTtcbnZhciBUaW1lbGluZVZpZXdNb2JpbGUgPSByZXF1aXJlKFwiLi9zZWN0aW9ucy9tb2JpbGUvVGltZWxpbmVWaWV3LmpzXCIpO1xuXG52YXIgRmlnaHRWaWV3ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvRmlnaHRWaWV3LmpzXCIpO1xudmFyIEZpZ2h0Vmlld1RhYmxldCA9IHJlcXVpcmUoXCIuL3NlY3Rpb25zL3RhYmxldC9GaWdodFZpZXcuanNcIik7XG52YXIgRmlnaHRWaWV3TW9iaWxlID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvbW9iaWxlL0ZpZ2h0Vmlldy5qc1wiKTtcbnZhciBGb290ZXJWaWV3ID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvRm9vdGVyVmlldy5qc1wiKTtcblxudmFyIFNlY3Rpb25zVmlldyA9IFZpZXcuZXh0ZW5kKFxue1xuICAgIGV2ZW50czpcbiAgICB7XG4gICAgICBcIm1vdXNld2hlZWxcIiA6IFwib25TZWN0aW9uQ2hhbmdlUmVxdWVzdFwiLFxuICAgICAgXCJET01Nb3VzZVNjcm9sbFwiIDogXCJvblNlY3Rpb25DaGFuZ2VSZXF1ZXN0XCJcbiAgICB9LFxuXG4gICAgaGFtbWVyRXZlbnRzOlxuICAgIHtcbiAgICAgICdzd2lwZSc6ICdvblNlY3Rpb25DaGFuZ2VSZXF1ZXN0J1xuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbigpXG4gICAge1xuXG4gICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgICB0aGlzLnNlY3Rpb25LZXlzID0gSGVscGVyRnVuY3MuQXJyYXkuY2xlYW4odGhpcy5tb2RlbC5zZWN0aW9ucy5tb2RlbHNcbiAgICAgICAgICAubWFwKGZ1bmN0aW9uKG1vZGVsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBpZighbW9kZWwuZ2V0KFwic2VjdGlvblwiKSlcbiAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBzZWN0aW9ucyA9XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZSA6IG1vZGVsLmdldChcIm5hbWVcIiksXG4gICAgICAgICAgICAgICAgICAgIGluZGV4IDogbW9kZWwuZ2V0KFwic2VjdGlvblwiKS5pbmRleFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gc2VjdGlvbnM7XG4gICAgICAgICAgICB9KSwgLTEpXG4gICAgICAgICAgLnNvcnQodGhpcy5zZWN0aW9uU29ydCk7XG5cbiAgICAgIHRoaXMucm91dGVJbml0aWFsaXplZCA9IGZhbHNlO1xuICAgICAgdGhpcy5hbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuc2Nyb2xsaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICB0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggPSAwO1xuXG4gICAgICAvLyBsb2FkIGluIHRoZSBzZWN0aW9ucyBmcm9tIG91ciBtb2RlbFxuICAgICAgdGhpcy5tb2RlbC5zZWN0aW9ucy5lYWNoKGZ1bmN0aW9uKG1vZGVsLCBpbmRleCwgbGlzdClcbiAgICAgIHtcbiAgICAgICAgaWYoIW1vZGVsLmdldChcInNlY3Rpb25cIikpXG4gICAgICAgIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbW9kZWxOYW1lID0gbW9kZWwuZ2V0KFwibmFtZVwiKTtcblxuICAgICAgICB2YXIgbW9kID0gcmVxdWlyZShcIi4vc2VjdGlvbnMvXCIgKyBtb2RlbC5nZXQoXCJzZWN0aW9uXCIpLm1vZHVsZSk7XG5cbiAgICAgICAgaWYgKCFtb2RlbE5hbWUpIHRocm93IFwiTW9kZWwgd2l0aCBJRCBcIiArIG1vZGVsLmdldChcImlkXCIpICsgXCIgaGFzIG5vIHNlY3Rpb24gbmFtZS5cIjtcblxuICAgICAgICB0aGlzW21vZGVsTmFtZV0gPSBuZXcgbW9kKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG1vZGVsOiBtb2RlbC5nZXQoXCJkYXRhXCIpLFxuICAgICAgICAgICAgICAgIGJhc2U6IG1vZGVsTmFtZVxuICAgICAgICAgICAgfSk7XG4gICAgICB9LCB0aGlzKTtcblxuLy8gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwiZG9jdW1lbnQuc2Nyb2xsXCIsIHRoaXMub25Eb2N1bWVudFNjcm9sbGVkLCB0aGlzKTtcblxuLy8gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwid2luZG93LnJlc2l6ZVwiLCB0aGlzLm9uV2luZG93UmVzaXplLCB0aGlzKTtcblxuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIlNjcm9sbEJhci5VcGRhdGVQb3NpdGlvblwiLCB0aGlzLnVwZGF0ZVNjcm9sbGluZywgdGhpcyk7XG4gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwiU2Nyb2xsQmFyLkhhbmRsZURvd25cIiwgdGhpcy5zY3JvbGxTdGFydCwgdGhpcyk7XG4gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwiU2Nyb2xsQmFyLkhhbmRsZVVwXCIsIHRoaXMuc2Nyb2xsRW5kLCB0aGlzKTtcblxuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIlN1YlZpZXcuT3BlbmVkXCIsIHRoaXMubG9ja1Njcm9sbCwgdGhpcyk7XG4gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwiU3ViVmlldy5DbG9zZWRcIiwgdGhpcy51bmxvY2tTY3JvbGwsIHRoaXMpO1xuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIlNlY3Rpb24uUmVxdWVzdEFjdGl2ZVwiLCB0aGlzLm9uU2VjdGlvblJlcXVlc3RBY3RpdmUsIHRoaXMpO1xuXG4gICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwia2V5cHJlc3MudXBBcnJvd1wiLCB0aGlzLm9uVXBBcnJvdywgdGhpcyk7XG4gICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJrZXlwcmVzcy5kb3duQXJyb3dcIiwgdGhpcy5vbkRvd25BcnJvdywgdGhpcyk7XG5cblxuICAgICAgdGhpcy4kd2luZG93ID0gJCh3aW5kb3cpO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgIHNjcm9sbFRvKDAsIDEpO1xuICAgICAgfSwgMCk7XG5cbiAgICAgIF8uZWFjaCh0aGlzLnNlY3Rpb25LZXlzLCBmdW5jdGlvbihzZWN0aW9uLCBpbmRleCwgbGlzdClcbiAgICAgIHtcbiAgICAgICAgaWYodGhpc1tzZWN0aW9uLnNlY3Rpb25OYW1lXSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHRFbDtcbiAgICAgICAgICAgIHRyeVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRFbCA9IHRoaXNbc2VjdGlvbi5zZWN0aW9uTmFtZV0ucmVuZGVyKCkuZWw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaChlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb3VsZCBub3QgcmVuZGVyIHZpZXcgJyArIHNlY3Rpb24uc2VjdGlvbk5hbWUgKyAnLicsIGUsIGUuc3RhY2spO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0RWwpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcblxuICAgICAgdGhpcy4kc2VjdGlvbnMgPSB0aGlzLiRlbC5jaGlsZHJlbigpO1xuICAgICAgdGhpcy5udW1TZWN0aW9ucyA9IHRoaXMuJHNlY3Rpb25zLmxlbmd0aDtcblxuICAgICAgdGhpcy5jdXJyZW50RWxlbWVudCA9IHRoaXMuJHNlY3Rpb25zLmVxKHRoaXMuY3VycmVudFNlY3Rpb25JbmRleCk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFsZWMncyBDaGFuZ2VzIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgYW5pbWF0ZVRvQ2xvc2VzdFNlY3Rpb246IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgdGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgIHZhciB0b3AgPSBwYXJzZUludCh0aGlzLiRlbC5jc3MoJ3RvcCcpKTtcbiAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuJHNlY3Rpb25zLmVxKDApLmhlaWdodCgpO1xuXG4gICAgICAgIHZhciBjbG9zZXN0SW5kZXggPSBNYXRoLmFicyhNYXRoLnJvdW5kKHRvcC9oZWlnaHQpKTtcblxuICAgICAgICB2YXIgbmV3VG9wID0gLShjbG9zZXN0SW5kZXggKiAxMDApO1xuICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNDtcblxuICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJzZWN0aW9uLmJlZm9yZUFjdGl2ZVwiLCB0aGlzLiRzZWN0aW9ucy5lcShjbG9zZXN0SW5kZXgpKTtcblxuICAgICAgICAvLyBmbGFnIHRoZSBjdXJyZW50IHZpZXcgYXMgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgIHRoaXNbdGhpcy5zZWN0aW9uS2V5c1tjbG9zZXN0SW5kZXhdLnNlY3Rpb25OYW1lXS5pc0FjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMuJGVsLCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICB0b3A6IG5ld1RvcCAgKyAnJScsXG4gICAgICAgICAgICBvblVwZGF0ZTogXy5iaW5kKHRoaXMub25BbmltYXRpb25VcGRhdGUsIHRoaXMpLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogXy5iaW5kKHRoaXMub25BbmltYXRpb25Db21wbGV0ZSwgdGhpcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRTY3JvbGxiYXJGaW5hbFBvc2l0aW9uKGNsb3Nlc3RJbmRleCk7XG4gICAgfSxcbiAgICBhbmltYXRlVG9TZWN0aW9uOiBmdW5jdGlvbihpbmRleCwgb3B0aW9ucykge1xuICAgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgICAgaW5kZXggPSBNYXRoLm1heChpbmRleCwgMCk7XG4gICAgICAgIGluZGV4ID0gTWF0aC5taW4oaW5kZXgsIHRoaXMubnVtU2VjdGlvbnMtMSk7XG5cbiAgICAgICAgaWYoaW5kZXggPT09IHRoaXMuY3VycmVudFNlY3Rpb25JbmRleCkgcmV0dXJuO1xuXG4gICAgICAgIHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgdmFyIHN0YXJ0SW5kZXggPSB0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXg7XG5cbiAgICAgICAgdmFyIG5ld1RvcCA9IC0oaW5kZXggKiAxMDApO1xuXG4gICAgICAgIGlmKF8uaXNVbmRlZmluZWQob3B0aW9ucy5hbmltYXRpb25UaW1lKSlcbiAgICAgICAgICAgIG9wdGlvbnMuYW5pbWF0aW9uVGltZSA9IHRoaXMuZ2V0QW5pbWF0aW9uVGltZShzdGFydEluZGV4LCBpbmRleCk7XG5cbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwic2VjdGlvbi5iZWZvcmVBY3RpdmVcIiwgdGhpcy4kc2VjdGlvbnMuZXEoaW5kZXgpKTtcblxuICAgICAgICAvLyBmbGFnIHRoZSBjdXJyZW50IHZpZXcgYXMgdGhlIGFjdGl2ZSB2aWV3XG4gICAgICAgIHRoaXNbdGhpcy5zZWN0aW9uS2V5c1tpbmRleF0uc2VjdGlvbk5hbWVdLmlzQWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICBUd2VlbkxpdGUudG8odGhpcy4kZWwsIG9wdGlvbnMuYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgdG9wOiBuZXdUb3AgKyAnJScsXG4gICAgICAgICAgICBvblVwZGF0ZTogXy5iaW5kKHRoaXMub25BbmltYXRpb25VcGRhdGUsIHRoaXMsIHN0YXJ0SW5kZXgsIG9wdGlvbnMudXBkYXRlUm91dGUpLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogXy5iaW5kKHRoaXMub25BbmltYXRpb25Db21wbGV0ZSwgdGhpcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5zZXRTY3JvbGxiYXJGaW5hbFBvc2l0aW9uKGluZGV4KTtcbiAgICB9LFxuICAgIGdldEFuaW1hdGlvblRpbWU6IGZ1bmN0aW9uKHN0YXJ0SW5kZXgsIGVuZEluZGV4KSB7XG4gICAgICAgIHZhciBkdXJhdGlvbjtcbiAgICAgICAgdmFyIGRpc3RhbmNlID0gTWF0aC5hYnMoc3RhcnRJbmRleCAtIGVuZEluZGV4KTtcblxuICAgICAgICBpZihkaXN0YW5jZSA9PT0gMSkge1xuICAgICAgICAgICAgZHVyYXRpb24gPSBwYXJzZUludCh0aGlzLiRzZWN0aW9ucy5lcShlbmRJbmRleCkuZGF0YSgnZHVyYXRpb24nKSkgfHwgNjAwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZHVyYXRpb24gPSA2MDAgKyA2MDAgKiAoZGlzdGFuY2UgLSAxKS8odGhpcy5udW1TZWN0aW9ucyAtIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGR1cmF0aW9uLzEwMDA7XG4gICAgfSxcbiAgICBzZXRTY3JvbGxiYXJGaW5hbFBvc2l0aW9uOiBmdW5jdGlvbihpbmRleCkge1xuICAgICAgICB2YXIgcG9zUGVyY2VudCA9IGluZGV4Lyh0aGlzLm51bVNlY3Rpb25zIC0gMSkgKiAxMDA7XG4gICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIlNlY3Rpb24uRmluYWxQb3NpdGlvblwiLCB7cGVyY2VudDogcG9zUGVyY2VudH0pO1xuICAgIH0sXG5cbiAgICBvbkFuaW1hdGlvblVwZGF0ZTogZnVuY3Rpb24oc3RhcnRJbmRleCwgdXBkYXRlUm91dGUpIHtcbiAgICAgICAgdXBkYXRlUm91dGUgPSBfLmlzVW5kZWZpbmVkKHVwZGF0ZVJvdXRlKSA/IHRydWUgOiB1cGRhdGVSb3V0ZTtcblxuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gdGhpcy4kc2VjdGlvbnMuZXEoMCkuaGVpZ2h0KCk7XG4gICAgICAgIHZhciB0b3AgPSBwYXJzZUludCh0aGlzLiRlbC5jc3MoJ3RvcCcpKTtcblxuICAgICAgICB2YXIgdmlzaWJsZUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLmFicyh0b3ApL3dpbmRvd0hlaWdodCk7XG5cbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiZG9jdW1lbnQuc2Nyb2xsXCIpO1xuXG4gICAgICAgIGlmKHZpc2libGVJbmRleCAhPT0gdGhpcy5jdXJyZW50U2VjdGlvbkluZGV4KSB7XG4gICAgICAgICAgICB2YXIgcmVwbGFjZSA9ICh0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggIT09IHN0YXJ0SW5kZXgpO1xuXG5cblxuICAgICAgICAgICAgLy8gY2xlYW4gdXAgdGhlIGN1cnJlbnQgc2VjdGlvbiBiZWZvcmUgY2hhbmdpbmcgdG8gdGhlIG5leHRcbiAgICAgICAgICAgIHRoaXNbdGhpcy5zZWN0aW9uS2V5c1t0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXhdLnNlY3Rpb25OYW1lXS5jbGVhbnVwKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudFNlY3Rpb25JbmRleCA9IHZpc2libGVJbmRleDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEVsZW1lbnQgPSB0aGlzLiRzZWN0aW9ucy5lcSh2aXNpYmxlSW5kZXgpO1xuXG4gICAgICAgICAgICBpZih1cGRhdGVSb3V0ZSkge1xuICAgICAgICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIvXCIgKyB0aGlzLnNlY3Rpb25LZXlzW3RoaXMuY3VycmVudFNlY3Rpb25JbmRleF0uc2VjdGlvbk5hbWUsIHt0cmlnZ2VyOiB0cnVlLCByZXBsYWNlOiByZXBsYWNlfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uQW5pbWF0aW9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJzZWN0aW9uLmFmdGVyQWN0aXZlXCIsIHRoaXMuY3VycmVudEVsZW1lbnQpO1xuXG4gICAgICAgIHRoaXMudW5sb2NrQW5pbWF0aW5nKCk7XG4gICAgfSxcblxuXG4gICAgb25TZWN0aW9uUmVxdWVzdEFjdGl2ZTogZnVuY3Rpb24oc2VjdGlvbk5hbWUpIHtcblxuICAgICAgICB2YXIgc2VjdGlvblZpZXcgPSB0aGlzW3NlY3Rpb25OYW1lXTtcbiAgICAgICAgdmFyIGluZGV4ID0gc2VjdGlvblZpZXcuJGVsLmluZGV4KCk7XG5cbiAgICAgICAgaWYodGhpcy5jdXJyZW50U2VjdGlvbkluZGV4ICE9PSBpbmRleCkge1xuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLnJvdXRlSW5pdGlhbGl6ZWQgPyB7dXBkYXRlUm91dGU6IGZhbHNlfSA6IHt1cGRhdGVSb3V0ZTogZmFsc2UsIGFuaW1hdGlvblRpbWU6IDB9O1xuXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVUb1NlY3Rpb24oaW5kZXgsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVJbml0aWFsaXplZCA9IHRydWU7XG4gICAgfSxcblxuICAgIC8vIG9ubHkgdHJpZ2dlcmVkIGZyb20gbW91c2Ugc2Nyb2xsaW5nIGV2ZW50cyBhbmQgc3dpcGluZ1xuICAgIG9uU2VjdGlvbkNoYW5nZVJlcXVlc3Q6IGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgICBpZih0aGlzLmFuaW1hdGluZyB8fCB0aGlzLnNjcm9sbGluZ0VuYWJsZWQgPT0gZmFsc2UpXG4gICAgICAgIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmFuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgdmFyIHNpZ247XG5cbiAgICAgICAgaWYoZS5nZXN0dXJlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZihlLmdlc3R1cmUuZGlyZWN0aW9uICE9PSAndXAnICYmIGUuZ2VzdHVyZS5kaXJlY3Rpb24gIT09ICdkb3duJykge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzaWduID0gKGUuZ2VzdHVyZS5kaXJlY3Rpb24gPT09IFwidXBcIikgPyAtMSA6IDE7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgaWYoTWF0aC5hYnMoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEpIDw9IDkwKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGQgPSAoZS5vcmlnaW5hbEV2ZW50LndoZWVsRGVsdGEgfHwgLWUub3JpZ2luYWxFdmVudC5kZXRhaWwpO1xuICAgICAgICAgICAgc2lnbiA9IGQ/ZDwwPy0xOjE6MDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKChzaWduID09IC0xICYmIHRoaXMuY3VycmVudFNlY3Rpb25JbmRleCA9PSB0aGlzLiRzZWN0aW9ucy5sZW5ndGgtMSkgfHwgKHNpZ24gPT0gMSAmJiB0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggPT0gMCkpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggLSBzaWduO1xuXG4gICAgICAgIHRoaXMuYW5pbWF0ZVRvU2VjdGlvbihuZXdJbmRleCk7XG4gICAgfSxcbiAgICBzY3JvbGxTdGFydDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsU3RhcnRJbmRleCA9IHRoaXMuY3VycmVudFNlY3Rpb25JbmRleDtcbiAgICAgICAgdGhpcy5sb2NrQW5pbWF0aW5nKCk7XG4gICAgfSxcbiAgICBzY3JvbGxFbmQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmFuaW1hdGVUb0Nsb3Nlc3RTZWN0aW9uKCk7XG4gICAgfSxcblxuXG5cblxuXG5cblxuXG5cbiAgICB1cGRhdGVTY3JvbGxpbmc6IGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgICB2YXIgdG9wID0gLShlLnBlcmNlbnQgKiAodGhpcy5udW1TZWN0aW9ucyAtIDEpKSArICclJztcblxuICAgICAgICB0aGlzLiRlbC5jc3MoJ3RvcCcsIHRvcCk7XG5cbiAgICAgICAgdGhpcy5vbkFuaW1hdGlvblVwZGF0ZSh0aGlzLnNjcm9sbFN0YXJ0SW5kZXgpO1xuICAgIH0sXG5cbiAgICBsb2NrQW5pbWF0aW5nOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgIHRoaXMuYW5pbWF0aW5nID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgdW5sb2NrQW5pbWF0aW5nOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgIHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG4gICAgfSxcblxuXG5cbiAgICBsb2NrU2Nyb2xsOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgIHRoaXMuc2Nyb2xsaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICB1bmxvY2tTY3JvbGw6IGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgdGhpcy5zY3JvbGxpbmdFbmFibGVkID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgc2VjdGlvblNvcnQ6IGZ1bmN0aW9uKGEsYikge1xuICAgICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSxcbiAgICBvblVwQXJyb3c6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICBpZih0aGlzLmFuaW1hdGluZyB8fCB0aGlzLnNjcm9sbGluZ0VuYWJsZWQgPT0gZmFsc2UgfHwgdGhpcy5jdXJyZW50U2VjdGlvbkluZGV4ID09PSAwKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG5cbiAgICAgICAgdGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmFuaW1hdGVUb1NlY3Rpb24odGhpcy5jdXJyZW50U2VjdGlvbkluZGV4IC0gMSk7XG4gICAgfSxcbiAgICBvbkRvd25BcnJvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgIGlmKHRoaXMuYW5pbWF0aW5nIHx8IHRoaXMuc2Nyb2xsaW5nRW5hYmxlZCA9PSBmYWxzZSB8fCB0aGlzLmN1cnJlbnRTZWN0aW9uSW5kZXggPT09IHRoaXMubnVtU2VjdGlvbnMgLSAxKVxuICAgICAgICAgICAgcmV0dXJuO1xuXG5cbiAgICAgICAgdGhpcy5hbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICB0aGlzLmFuaW1hdGVUb1NlY3Rpb24odGhpcy5jdXJyZW50U2VjdGlvbkluZGV4ICsgMSk7XG4gICAgfVxuXG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFNlY3Rpb25zVmlldztcbiIsInZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi8uLi90ZW1wbGF0ZXMvZGVmYXVsdC5oYnNcIik7XG52YXIgT21uaXR1cmUgPSByZXF1aXJlKFwiLi4vc2VydmljZXMvT21uaXR1cmUuanNcIik7XG5cblxudmFyIFZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZChcbntcbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKVxuICAgIHtcbiAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgIHRoaXMuY2xlYW5pbmdMaXN0ID0ge307XG4gICAgICBpZihvcHRpb25zKVxuICAgICAge1xuICAgICAgICB0aGlzLmJhc2UgPSBvcHRpb25zLmJhc2U7XG4gICAgICAgIHRoaXMuaW5pdFJvdXRlcih0aGlzLmJhc2UpO1xuICAgICAgfVxuICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICBzZXR1cDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIC8qIGNhbGxlZCBhZnRlciByZW5kZXIgaGFzIGNvbXBsZXRlZFxuICAgICAgIHBsYWNlIERPTS1zcGVjaWZpYyBpbml0aWFsaXphdGlvbiBoZXJlICovXG4gICAgfSxcblxuICAgIGluaXRSb3V0ZXI6IGZ1bmN0aW9uKHJvb3QpXG4gICAge1xuICAgICAgICB2YXIgcnQgPSByb290ICsgXCIoLzpzdWJzZWN0aW9uKSgvOmRldGFpbClcIjtcbiAgICAgICAgdmFyIGNiID0gcm9vdCArIFwiUm91dGVcIjtcbiAgICAgICAgdmFyIGNhID0gcm9vdCArIFwiQ2F0Y2hBbGxSb3V0ZVwiO1xuXG4gICAgICAgIC8vIGFkZCBvdXIgZGVmYXVsdCByb3V0ZSB0byBoYW5kbGUgZm9yIHRoaXMgdmlld1xuICAgICAgICBBcHAucm91dGVyLnJvdXRlKHJ0LCBjYik7XG5cbiAgICAgICAgQXBwLnJvdXRlci5vbihcInJvdXRlOlwiK2NiLCB0aGlzLmhhbmRsZVJvdXRlLmJpbmQodGhpcykpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBTZW5kIHRoZSBicm93c2VyIHRvIHRoZSBiYXNlIFVSTCBmb3IgdGhlIHNlY3Rpb24uXG4gICAgICogRG9lcyBub3QgYWRkIHRvIHRoZSBoaXN0b3J5IHN0YWNrLCBhbmQgY2FsbHMgdGhlIHNlY3Rpb24gcm91dGUgbWV0aG9kLlxuICAgICAqL1xuICAgIHNob3dWaWV3Um9vdDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSgnLycgKyB0aGlzLmJhc2UsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZXBsYWNlOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgaGFuZGxlUm91dGU6IGZ1bmN0aW9uKHN1YnNlY3Rpb24sIGRldGFpbClcbiAgICB7XG4gICAgICB2YXIgc3ViID0gXCJcIjtcbiAgICAgIGlmKHN1YnNlY3Rpb24pXG4gICAgICB7XG4gICAgICAgICAgc3ViID0gXCI6IFwiK3N1YnNlY3Rpb247XG4gICAgICB9XG4gICAgICBPbW5pdHVyZS5vblBhZ2VMb2FkKHtwYWdlTmFtZTogdGhpcy5iYXNlK3N1Yn0pO1xuXG4gICAgICBpZihzdWJzZWN0aW9uKVxuICAgICAge1xuICAgICAgICB0aGlzLmZyb21Sb3V0ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoc3Vic2VjdGlvbiwgZGV0YWlsKTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcbiAgICAgICAgaWYodGhpcy5zdWJWaWV3KVxuICAgICAgICB7XG4gICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU2VjdGlvbi5SZXF1ZXN0QWN0aXZlXCIsIHRoaXMuYmFzZSk7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIGlmKCF0aGlzLm1vZGVsKVxuICAgICAge1xuICAgICAgICB0aGlzLm1vZGVsID17fTtcbiAgICAgIH1cblxuICAgICAgdGhpcy5zZXRFbGVtZW50KHRoaXMudGVtcGxhdGUodGhpcy5tb2RlbCkpO1xuICAgICAgdGhpcy5zZXR1cCgpO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgc2hvd1N1YlZpZXc6IGZ1bmN0aW9uKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgIHtcbiAgICAgIGlmKCFvcHRpb25zKVxuICAgICAge1xuICAgICAgICBvcHRpb25zID0gXCJcIjtcbiAgICAgIH1cbiAgICAgIGlmKCF0aGlzLmZyb21Sb3V0ZSlcbiAgICAgIHtcbiAgICAgICAgT21uaXR1cmUub25QYWdlTG9hZCh7cGFnZU5hbWU6IHRoaXMuYmFzZStcIjogXCIrdmlld05hbWV9KTtcbiAgICAgIH1cbiAgICAgIGVsc2VcbiAgICAgIHtcbiAgICAgICAgdGhpcy5mcm9tUm91dGUgPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSh0aGlzLmJhc2UgKyBcIi9cIit2aWV3TmFtZSArXCIvXCIgKyBvcHRpb25zKTtcbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIlN1YlZpZXcuT3BlbmVkXCIpO1xuICAgIH0sXG5cbiAgICBjbG9zZVN1YlZpZXc6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICBpZighdGhpcy5zdWJWaWV3KVxuICAgICAge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmKHRoaXMuaXNBY3RpdmUpXG4gICAgICB7XG4gICAgICAgIE9tbml0dXJlLm9uUGFnZUxvYWQoe3BhZ2VOYW1lOiB0aGlzLmJhc2V9KTtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSh0aGlzLmJhc2UpO1xuICAgICAgfVxuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU3ViVmlldy5DbG9zZWRcIik7XG4gICAgfSxcblxuICAgIGNsZWFudXA6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgLy8gVE9ETzogaXRlcmF0ZSBvdmVyIGNsZWFuaW5nIGxpc3QgZnVuY3Rpb25zIGFuZCBjYWxsIHRoZW0gaW4gb3JkZXJcbiAgICB9XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IFZpZXc7XG4iLCJmdW5jdGlvbiBIZWxwZXJzKCkge31cblxuSGVscGVycy5wcm90b3R5cGUucG9zVG9wID0gZnVuY3Rpb24gKClcbntcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdy5wYWdlWU9mZnNldCAhPSAndW5kZWZpbmVkJyA/IHdpbmRvdy5wYWdlWU9mZnNldCA6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxUb3AgPyBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIDogZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPyBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCA6IDA7XG59O1xuXG5IZWxwZXJzLnByb3RvdHlwZS5EZXZpY2UgPSB7XG4gICAgaXNBbmRyb2lkICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpICE9PSBudWxsO1xuICAgIH0sXG4gICAgaXNBbmRyb2lkVGFibGV0IDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9BbmRyb2lkL2kpICE9PSBudWxsXG5cdCAgICAmJiAoXG5cdCAgICAoKHdpbmRvdy5vcmllbnRhdGlvbiA9PT0gMCB8fCB3aW5kb3cub3JpZW50YXRpb24gPT09IDE4MCApICYmIHNjcmVlbi53aWR0aCA+IDY0MClcblx0XHR8fCAoKHdpbmRvdy5vcmllbnRhdGlvbiA9PT0gLTkwIHx8IHdpbmRvdy5vcmllbnRhdGlvbiA9PT0gOTApICYmIHNjcmVlbi5oZWlnaHQgPiA2NDApXG5cdCAgICApO1xuICAgIH0sXG4gICAgaXNCbGFja0JlcnJ5ICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9CbGFja0JlcnJ5L2kpICE9PSBudWxsO1xuICAgIH0sXG4gICAgaXNJT1MgICAgICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBhZHxpUG9kL2kpICE9PSBudWxsO1xuICAgIH0sXG4gICAgaXNJcGFkICAgICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUGFkL2kpICE9PSBudWxsO1xuICAgIH0sXG4gICAgaXNPcGVyYSAgICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9PcGVyYSBNaW5pL2kpICE9PSBudWxsO1xuICAgIH0sXG4gICAgaXNXaW5kb3dzICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9JRU1vYmlsZS9pKSAhPT0gbnVsbDtcbiAgICB9LFxuICAgIGlzVGFibGV0ICAgICAgICA6IGZ1bmN0aW9uICgpXG4gICAge1xuXHRyZXR1cm4gdGhpcy5pc0FuZHJvaWRUYWJsZXQoKSB8fCB0aGlzLmlzSXBhZCgpO1xuICAgIH0sXG4gICAgaXNNb2JpbGUgICAgICAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdHJldHVybiAhdGhpcy5pc1RhYmxldCgpICYmICh0aGlzLmlzQW5kcm9pZCgpIHx8IHRoaXMuaXNCbGFja0JlcnJ5KCkgfHwgdGhpcy5pc0lPUygpIHx8IHRoaXMuaXNPcGVyYSgpIHx8IHRoaXMuaXNXaW5kb3dzKCkpO1xuICAgIH0sXG4gICAgY3VycmVudERldmljZSAgIDogZnVuY3Rpb24gKClcbiAgICB7XG5cdGlmKHRoaXMuaXNNb2JpbGUoKSlcblx0ICAgIHJldHVybiBcIm1vYmlsZVwiO1xuXHRlbHNlIGlmICh0aGlzLmlzVGFibGV0KCkpXG5cdCAgICByZXR1cm4gXCJ0YWJsZXRcIjtcblx0ZWxzZVxuXHQgICAgcmV0dXJuIFwiZGVza3RvcFwiO1xuICAgIH0sXG4gICAgY3VycmVudERldmljZU5hbWUgOiBmdW5jdGlvbigpXG4gICAge1xuXHRzd2l0Y2godHJ1ZSlcblx0e1xuXHQgICAgY2FzZSB0aGlzLmlzQW5kcm9pZCgpOlxuXHQgICAge1xuXHRcdHJldHVybiBcIkFuZHJvaWRcIjtcblx0ICAgIH1cblxuXHQgICAgY2FzZSB0aGlzLmlzQmxhY2tCZXJyeSgpOlxuXHQgICAge1xuXHRcdHJldHVybiBcIkJsYWNrQmVycnlcIjtcblx0ICAgIH1cblxuXHQgICAgY2FzZSB0aGlzLmlzT3BlcmEoKTpcblx0ICAgIHtcblx0XHRyZXR1cm4gXCJPcGVyYSBNaW5pXCI7XG5cdCAgICB9XG5cblx0ICAgIGNhc2UgdGhpcy5pc1dpbmRvd3MoKTpcblx0ICAgIHtcblx0XHRyZXR1cm4gXCJJRU1vYmlsZVwiO1xuXHQgICAgfVxuXG5cdCAgICBjYXNlIHRoaXMuaXNJT1MoKTpcblx0ICAgIHtcblx0XHRpZih0aGlzLmlzSXBhZCgpKVxuXHRcdHtcblx0XHQgICAgcmV0dXJuIFwiaVBhZFwiXG5cdFx0fVxuXHRcdGVsc2Vcblx0XHR7XG5cdFx0ICAgIC8vIHRyZWF0IGlQb2QgYW5kIGlQaG9uZSBhcyB0aGUgc2FtZVxuXHRcdCAgICByZXR1cm4gXCJpUGhvbmVcIlxuXHRcdH1cblx0ICAgIH1cblxuXHQgICAgZGVmYXVsdDpcblx0ICAgIHtcblx0XHRyZXR1cm4gXCJEZXNrdG9wXCJcblx0ICAgIH1cblx0fVxuICAgIH1cbn07XG5cbkhlbHBlcnMucHJvdG90eXBlLnJvdW5kTmVhcmVzdEZhY3RvciA9IGZ1bmN0aW9uICh4LCB5LCBmKVxue1xuICAgIHJldHVybiBNYXRoLnJvdW5kKHggKiBmIC8geSlcbn07XG5cbkhlbHBlcnMucHJvdG90eXBlLmZsb29yTmVhcmVzdEZhY3RvciA9IGZ1bmN0aW9uICh4LCB5LCBmKVxue1xuICAgIHJldHVybiBNYXRoLmZsb29yKHggKiBmIC8geSk7XG59O1xuXG4vLyBleDogeCA9IDE0NDYsIHkgPSA1MDAwLCBmID0gNlxuLy8gcmV0dXJucyAxNjY2LjY2XG5IZWxwZXJzLnByb3RvdHlwZS5yb3VuZE5lYXJlc3RNdWx0aXBsZSA9IGZ1bmN0aW9uICh4LCB5LCBmKVxue1xuICAgIHJldHVybiB0aGlzLnJvdW5kTmVhcmVzdEZhY3Rvcih4LCB5LCBmKSAqIHkgLyBmO1xufTtcblxuSGVscGVycy5wcm90b3R5cGUuZmxvb3JOZWFyZXN0TXVsdGlwbGUgPSBmdW5jdGlvbiAoeCwgeSwgZilcbntcbiAgICByZXR1cm4gdGhpcy5yb3VuZE5lYXJlc3RNdWx0aXBsZSh4LCB5LCBmKSAqIHkgLyBmO1xufTtcblxuSGVscGVycy5wcm90b3R5cGUuQXJyYXkgPSB7fTtcblxuSGVscGVycy5wcm90b3R5cGUuQXJyYXkuY2xlYW4gPSBmdW5jdGlvbihhcnJheSwgZGVsZXRlVmFsdWUpXG57XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspXG4gIHtcbiAgICBpZiAoYXJyYXlbaV0gPT0gZGVsZXRlVmFsdWUpXG4gICAge1xuICAgICAgYXJyYXkuc3BsaWNlKGksIDEpO1xuICAgICAgaS0tO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYXJyYXk7XG59O1xuXG5cbkhlbHBlcnMucHJvdG90eXBlLkVsZW1lbnQgPSB7fTtcbi8qKlxuICogUmV0dXJuIHRoZSBoZWlnaHQgb2YgYWxsIG9mIGFuIGVsZW1lbnRzIGNoaWxkcmVuLiBFeGNsdWRlcyB0ZXh0IG5vZGVzLlxuICogQHBhcmFtIGVsZW1lbnQgVGhlIGVsZW1lbnQgbm9kZSB3aG9zZSBoZWlnaHQgdG8gcmV0dXJuXG4gKiBAcmV0dXJucyBJbnRlZ2VyIFRoZSBoZWlnaHQgb2YgYWxsIHRoZSBlbGVtZW50J3MgY2hpbGRyZW5cbiAqL1xuSGVscGVycy5wcm90b3R5cGUuRWxlbWVudC5jb250ZW50SGVpZ2h0ID0gZnVuY3Rpb24gKGVsZW1lbnQpXG57XG4gICAgdmFyIHJhbmdlLCByZWN0O1xuXG4gICAgaWYgKGVsZW1lbnQgaW5zdGFuY2VvZiBqUXVlcnkpXG4gICAge1xuICAgICAgICBpZiAoZWxlbWVudC5sZW5ndGggPT09IDEpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGVsZW1lbnQgPSBlbGVtZW50WzBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgdGhyb3cgXCJNdWx0aXBsZSBqUXVlcnkgZWxlbWVudHMgd2VyZSBwYXNzZWQsIGJ1dCB0aGlzIG1ldGhvZCBleHBlY3RzIG9ubHkgb25lIGVsZW1lbnQuXCI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBjcmVhdGVSYW5nZSBpcyBhdmFpbGFibGUsIHVzZSB0aGF0IHRvIGdldCB0aGUgYm91bmRpbmcgaGVpZ2h0IG9mIHRoZSBlbGVtZW50LlxuICAgIC8vIFdvcmtzIHdoZW4gdGhlIGxhc3QgZWxlbWVudCBvZiB0aGUgc2Vjb25kLXRvLWxhc3QgY2hpbGQgaXMgYSB0ZXh0Tm9kZS5cbiAgICBpZiAoZG9jdW1lbnQuY3JlYXRlUmFuZ2UpXG4gICAge1xuICAgICAgICByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7XG4gICAgICAgIHJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyhlbGVtZW50KTtcbiAgICAgICAgcmVjdCA9IHJhbmdlLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gICAgICAgIHJldHVybiByZWN0LmJvdHRvbSAtIHJlY3QudG9wO1xuXG4gICAgfVxuICAgIC8vIFRoaXMgd29ya3Mgb25seSBpZiB0aGUgbGFzdCBlbGVtZW50IGluIHRoZSBzZWNvbmQtdG8tbGFzdCBjaGlsZCBpcyBOT1QgYSB0ZXh0Tm9kZS5cbiAgICBlbHNlXG4gICAge1xuICAgICAgICBpZiAoIWVsZW1lbnQuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gJChlbGVtZW50KS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRoZSBsYXN0IGNoaWxkJ3Mgb2Zmc2V0IGZyb20gdGhlIHRvcCArIGl0cyBoZWlnaHQgd2lsbCBnaXZlIHVzIHRoZSBjb250YWluZXIncyBjb250ZW50IGhlaWdodFxuICAgICAgICB2YXIgbGFzdENoaWxkID0gZWxlbWVudC5jaGlsZHJlbltlbGVtZW50LmNoaWxkcmVuLmxlbmd0aCAtIDFdO1xuXG4gICAgICAgIGlmIChsYXN0Q2hpbGQuY2hpbGRyZW4ubGVuZ3RoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gSGVscGVycy5wcm90b3R5cGUuRWxlbWVudC5jb250ZW50SGVpZ2h0KGxhc3RDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGFzdENoaWxkLm9mZnNldFRvcCArICQobGFzdENoaWxkKS5vdXRlckhlaWdodCh0cnVlKTtcbiAgICB9XG59O1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbi8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IERyYWdnYWJsZSBTdHVmZiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG5mdW5jdGlvbiBnZXRWZWxvY2l0eShsb2NhdGlvbk92ZXJUaW1lKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICB2YXIgdmVsb2NpdHk7XG4gICAgdmFyIGxhc3RGaXZlVGltZXMgPSBfLmxhc3QoXy5rZXlzKGxvY2F0aW9uT3ZlclRpbWUpLCA1KTsgICAgLy9vbmx5IHVzZSBsYXN0IDUgZ2VuZXJhdGVkIHRpbWVzIHRvIGNhbGMgdmVsb2NpdHlcblxuICAgIHZhciB5RGlmZmVyZW5jZSA9ICAobG9jYXRpb25PdmVyVGltZVtfLmxhc3QobGFzdEZpdmVUaW1lcyldIC0gbG9jYXRpb25PdmVyVGltZVtsYXN0Rml2ZVRpbWVzWzBdXSk7XG4gICAgdmFyIHRpbWVEaWZmZXJlbmNlID0gXy5sYXN0KGxhc3RGaXZlVGltZXMpIC0gbGFzdEZpdmVUaW1lc1swXTtcblxuICAgIHZlbG9jaXR5ID0geURpZmZlcmVuY2UvdGltZURpZmZlcmVuY2U7XG4gICAgdmVsb2NpdHkgPSBNYXRoLm1heChNYXRoLm1pbigzMDAwLCB2ZWxvY2l0eSksIC0zMDAwKTtcblxuICAgIHJldHVybiB2ZWxvY2l0eTtcbn1cbmZ1bmN0aW9uIGdldE1pblkoJGRyYWdnYWJsZURpdiwgJHBhcmVudCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgICRwYXJlbnQgPSAkcGFyZW50IHx8ICRkcmFnZ2FibGVEaXYucGFyZW50KCk7XG5cbiAgICB2YXIgbWluWTtcblxuLy8gICAgY29uc29sZS5sb2coJ3BhcmVudCBzY3JvbGxoZWlnaHQnLCAkcGFyZW50WzBdLnNjcm9sbEhlaWdodCk7XG4vLyAgICBjb25zb2xlLmxvZygnZHJhZ2dhYmxlIHNjcm9sbGhlaWdodCcsICRkcmFnZ2FibGVEaXZbMF0uc2Nyb2xsSGVpZ2h0KTtcbi8vICAgIGNvbnNvbGUubG9nKCdwYXJlbnQgaGVpZ2h0JywgJHBhcmVudC5oZWlnaHQoKSk7XG4vLyAgICBjb25zb2xlLmxvZygnZHJhZ2dhYmxlIGhlaWdodCcsICRkcmFnZ2FibGVEaXYuaGVpZ2h0KCkpO1xuXG4gICAgaWYoJHBhcmVudFswXS5zY3JvbGxIZWlnaHQgPT09ICRkcmFnZ2FibGVEaXZbMF0uc2Nyb2xsSGVpZ2h0ICYmICRwYXJlbnQuaGVpZ2h0KCkgPCAkZHJhZ2dhYmxlRGl2LmhlaWdodCgpKSB7XG5cdG1pblkgPSAkZHJhZ2dhYmxlRGl2LmhlaWdodCgpIC0gJHBhcmVudC5oZWlnaHQoKTtcbiAgICB9IGVsc2Uge1xuXHRtaW5ZID0gJHBhcmVudFswXS5zY3JvbGxIZWlnaHQgLSAkcGFyZW50LmhlaWdodCgpO1xuXHQvL3BsZWFzZSBkb24ndCBlcXVhbCAwLlxuXG5cdG1pblkgPSBtaW5ZIHx8ICRkcmFnZ2FibGVEaXZbMF0uc2Nyb2xsSGVpZ2h0IC0gJGRyYWdnYWJsZURpdi5oZWlnaHQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gLU1hdGguYWJzKG1pblkpO1xufVxuXG5IZWxwZXJzLnByb3RvdHlwZS5TY3JvbGxlciA9IHt9O1xuXG5IZWxwZXJzLnByb3RvdHlwZS5TY3JvbGxlci5pbml0RHJhZ2dhYmxlID0gZnVuY3Rpb24oJGRyYWdnYWJsZURpdiwgb3B0aW9ucylcbntcbiAgICB2YXIgc3RhcnRTZWNvbmRzLCBzdGFydFksIGVuZFNlY29uZHMsIGVuZFk7XG4gICAgdmFyIGxvY2F0aW9uT3ZlclRpbWUgPSB7fTtcblxuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdmFyIGJvdW5kcyA9IG9wdGlvbnMuYm91bmRzIHx8IHtcbiAgICAgICAgbWF4WTogMCxcbiAgICAgICAgbWF4WDogMFxuICAgIH07XG4gICAgdmFyIGVkZ2VSZXNpc3RhbmNlID0gb3B0aW9ucy5lZGdlUmVzaXN0YW5jZSB8fCAwLjk7XG5cblxuXG4gICAgdmFyIGRyYWcgPSBEcmFnZ2FibGUuY3JlYXRlKCRkcmFnZ2FibGVEaXYsIHtcblx0dHlwZSAgICAgICAgICAgOiBcInlcIixcblx0ZWRnZVJlc2lzdGFuY2UgOiBlZGdlUmVzaXN0YW5jZSxcblx0Ym91bmRzOiBib3VuZHMsXG5cdGRyYWdDbGlja2FibGVzOiB0cnVlLFxuXHRkcmFnUmVzaXN0YW5jZSA6IDAsXG5cdHRocm93UHJvcHMgICAgIDogdHJ1ZSxcblx0ekluZGV4Qm9vc3QgICAgOiBmYWxzZSxcblx0Y3Vyc29yICAgICAgICAgOiBcInBvaW50ZXJcIixcblx0b25EcmFnRW5kICAgICAgOiBmdW5jdGlvbiAoKVxuXHR7XG5cdCAgICBlbmRZID0gJGRyYWdnYWJsZURpdlswXS5fZ3NUcmFuc2Zvcm0ueTtcblx0ICAgIGVuZFNlY29uZHMgPSBfLm5vdygpIC8gMTAwMDtcblxuXHQgICAgbG9jYXRpb25PdmVyVGltZVtlbmRTZWNvbmRzXSA9IGVuZFk7XG5cblx0ICAgIHZhciB2ZWxvY2l0eSA9IGdldFZlbG9jaXR5KGxvY2F0aW9uT3ZlclRpbWUpO1xuXG5cdCAgICBIZWxwZXJzLnByb3RvdHlwZS5TY3JvbGxlci5kZWNlbGVyYXRlQW5kU25hcCh2ZWxvY2l0eSwgJGRyYWdnYWJsZURpdiwgdGhpcy5taW5ZLCB0aGlzLm1heFkpO1xuXHR9LFxuXHRvbkRyYWc6IGZ1bmN0aW9uKCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cblx0ICAgIGlmKHR5cGVvZiB0aGlzLm1pblkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICB2YXIgbWluWSA9IGdldE1pblkoJGRyYWdnYWJsZURpdik7XG5cbiAgICAgICAgICAgIGRyYWdbMF0uYXBwbHlCb3VuZHMoe1xuICAgICAgICAgICAgICAgIG1pblk6IG1pblksXG4gICAgICAgICAgICAgICAgbWF4WTogMFxuICAgICAgICAgICAgfSk7XG5cdCAgICB9XG5cblx0ICAgIHZhciB5ID0gJGRyYWdnYWJsZURpdlswXS5fZ3NUcmFuc2Zvcm0ueTtcblx0ICAgIHZhciBzZWNvbmRzID0gXy5ub3coKSAvIDEwMDA7XG5cblx0ICAgIGxvY2F0aW9uT3ZlclRpbWVbc2Vjb25kc10gPSB5O1xuXG5cdH0sXG5cdG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKVxuXHR7XG5cdCAgICBsb2NhdGlvbk92ZXJUaW1lID0ge307XG5cdCAgICBzdGFydFkgPSAkZHJhZ2dhYmxlRGl2WzBdLl9nc1RyYW5zZm9ybS55O1xuXHQgICAgc3RhcnRTZWNvbmRzID0gXy5ub3coKSAvIDEwMDA7XG5cblx0ICAgIGxvY2F0aW9uT3ZlclRpbWVbc3RhcnRTZWNvbmRzXSA9IHN0YXJ0WTtcblx0fVxuICAgIH0pO1xufTtcblxuXG5IZWxwZXJzLnByb3RvdHlwZS5TY3JvbGxlci5kZWNlbGVyYXRlQW5kU25hcCA9IGZ1bmN0aW9uICh2ZWxvY2l0eSwgJGRyYWdnYWJsZURpdiwgbWluWSwgbWF4WSlcbntcblxuICAgIG1pblkgPSBtaW5ZIHx8IGdldE1pblkoJGRyYWdnYWJsZURpdik7XG5cbiAgICB2YXIgY3VycmVudFkgPSBNYXRoLnJvdW5kKCRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLnkpO1xuICAgIG1pblkgPSBNYXRoLnJvdW5kKG1pblkpO1xuICAgIG1heFkgPSBNYXRoLnJvdW5kKG1heFkpO1xuXG4vLyAgICBjb25zb2xlLmxvZygndmVsb2NpdHknLCB2ZWxvY2l0eSk7XG4vLyAgICBjb25zb2xlLmxvZygnbWluWScsIG1pblkpO1xuLy8gICAgY29uc29sZS5sb2coJ21heFknLCBtYXhZKTtcbi8vICAgIGNvbnNvbGUubG9nKCdjdXJyZW50WScsIGN1cnJlbnRZKTtcblxuLy8gICAgY29uc29sZS5sb2coJ21pblknLCBtaW5ZKTtcblxuICAgIGlmKGN1cnJlbnRZID09PSBtaW5ZIHx8IGN1cnJlbnRZID09PSBtYXhZKSByZXR1cm47XG5cbiAgICB2YXIgcmVzaXN0YW5jZSA9IDQ7XG4gICAgdmFyIGFuaW1hdGlvblRpbWUgPSAwLjYgKiBNYXRoLmFicyh2ZWxvY2l0eSkgLyAzMDAwO1xuXG4gICAgdmFyIHlUbyA9ICRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLnkgKyB2ZWxvY2l0eSAvIHJlc2lzdGFuY2U7XG5cbiAgICB5VG8gPSBNYXRoLm1pbih5VG8sIG1heFkpO1xuICAgIHlUbyA9IE1hdGgubWF4KHlUbywgbWluWSk7XG5cblxuXG4vLyAgIGNvbnNvbGUubG9nKCd5VG8nLCB5VG8pO1xuXG5cbiAgICB2YXIgc3RhcnRUaW1lID0gXy5ub3coKS8xMDAwO1xuICAgIHZhciBkVHdlZW4gPSBUd2VlbkxpdGUudG8oJGRyYWdnYWJsZURpdiwgYW5pbWF0aW9uVGltZSwge1xuXHR5ICAgICAgICAgIDogeVRvLFxuXHRvdmVyd3JpdGU6IHRydWUsXG5cdGVhc2UgICAgICAgOiAnQ2lyYy5lYXNlT3V0Jyxcblx0b25VcGRhdGUgICA6IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBkID0gdGhpcy5jaGVja0FuZEZpeFNjcm9sUG9zKCRkcmFnZ2FibGVEaXYpO1xuXG5cdCAgICBpZighaXNOYU4oZCkpIHtcblx0XHRkVHdlZW4ua2lsbCgpO1xuXG5cdFx0dmFyIHRpbWVQYXNzZWQgPSBfLm5vdygpLzEwMDAgLSBzdGFydFRpbWU7XG5cdFx0dmFyIG5ld0FuaW1hdGlvblRpbWUgPSBhbmltYXRpb25UaW1lIC0gdGltZVBhc3NlZDtcblxuXHRcdFR3ZWVuTGl0ZS50bygkZHJhZ2dhYmxlRGl2LCBuZXdBbmltYXRpb25UaW1lLCB7XG5cdFx0ICAgIHkgICAgICAgICAgOiBkLFxuXHRcdCAgICBvdmVyd3JpdGUgIDogdHJ1ZSxcblx0XHQgICAgZWFzZSAgICAgICA6ICdDaXJjLmVhc2VPdXQnXG5cdFx0fSk7XG5cdCAgICB9XG5cdH0uYmluZCh0aGlzKVxuICAgIH0pO1xufTtcblxuSGVscGVycy5wcm90b3R5cGUuU2Nyb2xsZXIuY2hlY2tBbmRGaXhTY3JvbFBvcyA9IGZ1bmN0aW9uKCRkcmFnZ2FibGVEaXYpXG57XG4gICAgdmFyIHkgPSAkZHJhZ2dhYmxlRGl2WzBdLl9nc1RyYW5zZm9ybS55O1xuICAgIHZhciBtaW5ZID0gZ2V0TWluWSgkZHJhZ2dhYmxlRGl2KTtcblxuICAgIHJldHVybiAoeSA8IG1pblkpID8gbWluWSA6IE5hTjtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0gbmV3IEhlbHBlcnM7XG53aW5kb3cuSGVscGVyRnVuY3MgPSBtb2R1bGUuZXhwb3J0cztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL2NoYXJhY3RlcnMuaGJzXCIpO1xudmFyIE9tbml0dXJlID0gcmVxdWlyZShcIi4uLy4uL3NlcnZpY2VzL09tbml0dXJlLmpzXCIpO1xudmFyIFNvY2lhbCA9IHJlcXVpcmUoXCIuLi8uLi9zZXJ2aWNlcy9Tb2NpYWwuanNcIik7XG52YXIgUGFydGlhbENoYXJhY3RlcnNZb3V0dWJlVmlldyA9IHJlcXVpcmUoJy4uL3NlY3Rpb25zL3BhcnRpYWxzL2NoYXJhY3RlcnMveW91dHViZS5qcycpO1xuXG52YXIgQ2hhcmFjdGVyc1ZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBJbml0aWFsaXphdGlvbiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIG1lZGlhTGlnaHRib3hWaWV3IDogdW5kZWZpbmVkLFxuXG4gICAgICAgIGV2ZW50cyA6IHtcbiAgICAgICAgICAgICdjbGljayBkaXYuaXRlbSc6ICdvbkNob29zZUNoYXJhY3RlcicsXG4gICAgICAgICAgICAnY2xpY2sgYnV0dG9uLmNsb3NlJzogJ29uQ2xvc2UnLFxuICAgICAgICAgICAgJ2NsaWNrIGRpdi5hcnJvdy1yaWdodCc6ICdvbk5leHQnLFxuICAgICAgICAgICAgJ2NsaWNrIGRpdi5hcnJvdy1sZWZ0JzogJ29uUHJldicsXG4gICAgICAgICAgICAnY2xpY2sgZGl2LmludGVydmlldyc6ICdvbkNsaWNrSW50ZXJ2aWV3JyxcbiAgICAgICAgICAgICdjbGljayBkaXYuY2xvc2UtaW50ZXJ2aWV3JzogJ29uQ2xvc2VJbnRlcnZpZXcnLFxuICAgICAgICAgICAgJ2NsaWNrIGRpdi55b3V0dWJlLWVtYmVkLWN0ciBkaXYub3ZlcmxheSc6ICdvbkNsb3NlSW50ZXJ2aWV3JyxcbiAgICAgICAgICAgICdjbGljayBkaXYuc29jaWFsID4gYSc6ICdvbkNsaWNrU29jaWFsJ1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmcgPSAwO1xuICAgICAgICAgICAgdGhpcy5jb250ZW50UG9zaXRpb25zID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAnNTUlJyxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzEwJSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJpZ2h0OiB7XG4gICAgICAgICAgICAgICAgICAgIHRvcDogJzU1JScsXG4gICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAnMTAlJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cucmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemUsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaW5pdEpxdWVyeVZhcmlhYmxlcygpO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRJdGVtU2l6ZSgpO1xuICAgICAgICAgICAgdGhpcy5zZXRJdGVtUGFkZGluZyh0aGlzLiRjaGFyYWN0ZXJJdGVtcyk7XG5cbiAgICAgICAgICAgIHRoaXMub25XaW5kb3dSZXNpemUoKTsgIC8vdHJpZ2dlciByZXNpemUgZXZlbnRcbiAgICAgICAgICAgIHRoaXMuaW5pdFNvY2lhbEZ1bmN0aW9ucygpO1xuXG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmJlZm9yZUFjdGl2ZScsIF8udGhyb3R0bGUodGhpcy5vblNlY3Rpb25CZWZvcmVBY3RpdmUsIDEwMDAsIHt0cmFpbGluZzogZmFsc2V9KSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmFmdGVyQWN0aXZlJywgXy50aHJvdHRsZSh0aGlzLm9uU2VjdGlvbkFmdGVyQWN0aXZlLCAxMDAwLCB7dHJhaWxpbmc6IGZhbHNlfSksIHRoaXMpO1xuXG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdrZXlwcmVzcy5yaWdodEFycm93JywgdGhpcy5vblJpZ2h0QXJyb3dLZXksIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbigna2V5cHJlc3MubGVmdEFycm93JywgdGhpcy5vbkxlZnRBcnJvd0tleSwgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0SnF1ZXJ5VmFyaWFibGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuJHdpbmRvdyA9ICQod2luZG93KTtcblxuICAgICAgICAgICAgdGhpcy4kY2hhcmFjdGVySXRlbXMgPSB0aGlzLiRlbC5maW5kKCdkaXYuaXRlbScpO1xuXG4gICAgICAgICAgICB0aGlzLiRhY3RpdmVJdGVtQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2LmFjdGl2ZS1pdGVtLWN0cicpO1xuXG4gICAgICAgICAgICB0aGlzLiRsZWZ0QXJyb3cgPSB0aGlzLiRlbC5maW5kKCdkaXYuYXJyb3ctbGVmdCcpO1xuICAgICAgICAgICAgdGhpcy4kcmlnaHRBcnJvdyA9IHRoaXMuJGVsLmZpbmQoJ2Rpdi5hcnJvdy1yaWdodCcpO1xuXG4gICAgICAgICAgICB0aGlzLiR5b3V0dWJlQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2LnlvdXR1YmUtZW1iZWQtY3RyJyk7XG5cbiAgICAgICAgICAgIHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2LmFsbC1pdGVtcy1jdHInKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdEl0ZW1TaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgICAgICB2YXIgcm93TGVuZ3RoID0gdGhpcy4kY2hhcmFjdGVySXRlbXMubGVuZ3RoLzI7XG5cbiAgICAgICAgICAgIHZhciBjb250YWluZXJXaWR0aCA9IDEwMCAqIHJvd0xlbmd0aC80O1xuICAgICAgICAgICAgdmFyIGl0ZW1XaWR0aCA9IDEwMC9yb3dMZW5ndGg7XG5cbiAgICAgICAgICAgIHRoaXMuJGNoYXJhY3Rlckl0ZW1zLndpZHRoKGl0ZW1XaWR0aCArICclJyk7XG4gICAgICAgICAgICB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lci53aWR0aChjb250YWluZXJXaWR0aCArICclJyk7XG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lcldpZHRoID0gY29udGFpbmVyV2lkdGg7XG4gICAgICAgIH0sXG4gICAgICAgIHNldEl0ZW1QYWRkaW5nOiBmdW5jdGlvbigkaXRlbXMpIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICAgICAgdmFyIHJvd0xlbmd0aCA9ICRpdGVtcy5sZW5ndGgvMjtcblxuICAgICAgICAgICAgdmFyICRmaXJzdFJvdyA9ICRpdGVtcy5zbGljZSgwLCByb3dMZW5ndGgpO1xuICAgICAgICAgICAgdmFyICRsYXN0Um93ID0gJGl0ZW1zLnNsaWNlKC1yb3dMZW5ndGgpO1xuICAgICAgICAgICAgdmFyICRsZWZ0Q29sdW1uID0gJGl0ZW1zLmZpbHRlcihmdW5jdGlvbihpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgJSByb3dMZW5ndGggPT09IDA7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciAkcmlnaHRDb2x1bW4gPSAkaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaSAlIHJvd0xlbmd0aCA9PT0gKHJvd0xlbmd0aCAtIDEpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICRmaXJzdFJvdy5hZGRDbGFzcygnbm8tcGFkLXRvcCcpO1xuICAgICAgICAgICAgJGxhc3RSb3cuYWRkQ2xhc3MoJ25vLXBhZC1ib3R0b20nKTtcbiAgICAgICAgICAgICRsZWZ0Q29sdW1uLmFkZENsYXNzKCduby1wYWQtbGVmdCcpO1xuICAgICAgICAgICAgJHJpZ2h0Q29sdW1uLmFkZENsYXNzKCduby1wYWQtcmlnaHQnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlY3Rpb25CZWZvcmVBY3RpdmU6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICBpZiAoZWxbMF0gIT09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uU2VjdGlvbkFmdGVyQWN0aXZlOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIGlmKGVsWzBdID09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBXaW5kb3cgUmVzaXplIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICByZXNpemVJbnRlcnZpZXc6IGZ1bmN0aW9uKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5tZWRpYUxpZ2h0Ym94VmlldykgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgcmF0aW8gPSA0ODAvODUzO1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5tZWRpYUxpZ2h0Ym94Vmlldy4kcmVzaXplci53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMubWVkaWFMaWdodGJveFZpZXcuJHJlc2l6ZXIuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHZhciBtYXhIZWlnaHQgPSB3aW5kb3dIZWlnaHQgKiAwLjg1O1xuICAgICAgICAgICAgdmFyIG1heFdpZHRoID0gTWF0aC5taW4od2luZG93V2lkdGggKiAwLjg1LCAxMDgwKTtcblxuICAgICAgICAgICAgaWYoIWhlaWdodCB8fCAhd2lkdGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICBpZihtYXhIZWlnaHQvcmF0aW8gPCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcuJHJlc2l6ZXIud2lkdGgobWF4SGVpZ2h0L3JhdGlvKTtcblxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhTGlnaHRib3hWaWV3LiRyZXNpemVyLmNzcygnd2lkdGgnLCcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25XaW5kb3dSZXNpemU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHdpZHRoID0gdGhpcy4kd2luZG93LndpZHRoKCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy4kd2luZG93LmhlaWdodCgpO1xuXG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUludGVydmlldyh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gU2hvdy9DbG9zZS9Td2FwIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgc2V0Q29udGFpbmVyUG9zaXRpb246IGZ1bmN0aW9uKCRpdGVtKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSAkaXRlbS5vZmZzZXQoKS5sZWZ0O1xuXG4gICAgICAgICAgICBpZihsZWZ0T2Zmc2V0ID49IDAgJiYgbGVmdE9mZnNldCA8IHRoaXMuJHdpbmRvdy53aWR0aCgpKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciBsZWZ0UG9zaXRpb24gPSB0aGlzLmdldExlZnRQZXJjZW50YWdlKCk7XG4gICAgICAgICAgICB2YXIgbWluTGVmdCA9IC0odGhpcy5jb250YWluZXJXaWR0aCAtIDEwMCk7XG5cbiAgICAgICAgICAgIHZhciBsZWZ0UmVxdWlyZWQgPSBNYXRoLmZsb29yKCRpdGVtLnBvc2l0aW9uKCkubGVmdC90aGlzLiRlbC53aWR0aCgpKSAqIC0xMDA7XG5cbiAgICAgICAgICAgIHZhciBuZXdMZWZ0ID0gTWF0aC5tYXgobWluTGVmdCwgbGVmdFJlcXVpcmVkKTtcblxuICAgICAgICAgICAgaWYobGVmdFBvc2l0aW9uICE9PSBuZXdMZWZ0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYWxsSXRlbXNDb250YWluZXIuY3NzKCdsZWZ0JywgbmV3TGVmdCArICclJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd1N1YlZpZXc6IGZ1bmN0aW9uKHZpZXdOYW1lLCBvcHRpb25zKSB7XG4gICAgICAgICAgICB2YXIgJGl0ZW0gPSB0aGlzLiRjaGFyYWN0ZXJJdGVtcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IHZpZXdOYW1lO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGlmICghJGl0ZW0ubGVuZ3RoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNob3dWaWV3Um9vdCgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNSdW5uaW5nKys7XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKHZpZXdOYW1lLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdmFyICRuZXdTdWJWaWV3ID0gdGhpcy5jcmVhdGVTdWJWaWV3KCRpdGVtKTtcblxuICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAgICAgdGhpcy5zZXRDb250YWluZXJQb3NpdGlvbigkaXRlbSk7XG5cbiAgICAgICAgICAgIC8vIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzdWJWaWV3IG9wZW4sIHRyYW5zaXRpb24gYmV0d2VlbiB0aGUgdHdvXG4gICAgICAgICAgICBpZiAoISF0aGlzLnN1YlZpZXcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN3YXBTdWJWaWV3KCRuZXdTdWJWaWV3KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lci5hZGRDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgICRuZXdTdWJWaWV3Lm9nRWwuYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9ICRuZXdTdWJWaWV3O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3Lm9uKFwiY2xpY2tcIiwgdGhpcy5jbG9zZVN1YlZpZXcuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3Lm9uKFwidG91Y2hlbmRcIiwgdGhpcy5jbG9zZVN1YlZpZXcuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uTmV3U3ViVmlldygkbmV3U3ViVmlldyk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdEFuZFRvZ2dsZUFycm93cygpO1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVN1YlZpZXdPcGVuKCRuZXdTdWJWaWV3KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2VTdWJWaWV3OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLnN1YlZpZXcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNSdW5uaW5nKys7XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKHRoaXMuZ2V0TGVmdFBlcmNlbnRhZ2UoKSwgdHJ1ZSk7XG5cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVN1YlZpZXdDbG9zZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy4kY29udGVudC5yZW1vdmUoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy5vZ0VsLnJlbW92ZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAgICAgdGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lci5yZW1vdmVDbGFzcygnb3BlbicpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3Lm9mZihcImNsaWNrXCIsIHRoaXMuY2xvc2VTdWJWaWV3LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy5vZmYoXCJ0b3VjaGVuZFwiLCB0aGlzLmNsb3NlU3ViVmlldy5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zdWJWaWV3O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHN3YXBTdWJWaWV3IDogZnVuY3Rpb24gKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICAkbmV3U3ViVmlldy5vZ0VsLmFkZENsYXNzKCdvcGVuJyk7XG5cbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdWJWaWV3VG9Td2FwKCRuZXdTdWJWaWV3KTtcbiAgICAgICAgfSxcblxuICAgICAgICBnZXRMZWZ0UGVyY2VudGFnZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgdmFyIGxlZnRQaXhlbHMgPSBwYXJzZUludCh0aGlzLiRhbGxJdGVtc0NvbnRhaW5lci5jc3MoJ2xlZnQnKSk7XG4gICAgICAgICAgICB2YXIgc2VjdGlvbldpZHRoID0gdGhpcy4kZWwud2lkdGgoKTtcblxuICAgICAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoMTAwICogbGVmdFBpeGVscy9zZWN0aW9uV2lkdGgpO1xuICAgICAgICB9LFxuICAgICAgICBuZXh0UGFnZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmcrKztcblxuICAgICAgICAgICAgdmFyIGxlZnRQZXJjZW50YWdlID0gdGhpcy5nZXRMZWZ0UGVyY2VudGFnZSgpO1xuICAgICAgICAgICAgdmFyIG1pbkxlZnQgPSAtKHRoaXMuY29udGFpbmVyV2lkdGggLSAxMDApO1xuXG4gICAgICAgICAgICAvLyBpZiB3ZSBhcmUgYWxsIHRoZSB3YXkgdG8gdGhlIHJpZ2h0XG4gICAgICAgICAgICBpZihsZWZ0UGVyY2VudGFnZSA9PT0gbWluTGVmdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmctLTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhdExlYXN0T25lTW9yZVBhZ2UgPSBNYXRoLmFicyhtaW5MZWZ0IC0gbGVmdFBlcmNlbnRhZ2UpLzEwMCA+PSAxO1xuICAgICAgICAgICAgdmFyIG5ld0xlZnQgPSBhdExlYXN0T25lTW9yZVBhZ2UgPyBsZWZ0UGVyY2VudGFnZSAtIDEwMCA6IG1pbkxlZnQ7XG5cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVBhZ2VzKG5ld0xlZnQsIGxlZnRQZXJjZW50YWdlKTtcblxuICAgICAgICAgICAgdGhpcy5kZXRlY3RBbmRUb2dnbGVBcnJvd3MobmV3TGVmdCk7XG4gICAgICAgIH0sXG4gICAgICAgIHByZXZQYWdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zUnVubmluZysrO1xuXG4gICAgICAgICAgICB2YXIgbGVmdFBlcmNlbnRhZ2UgPSB0aGlzLmdldExlZnRQZXJjZW50YWdlKCk7XG5cbiAgICAgICAgICAgIGlmKGxlZnRQZXJjZW50YWdlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zUnVubmluZy0tO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGlzTGFzdFBhZ2UgPSBsZWZ0UGVyY2VudGFnZSAlIC0xMDAgIT09IDA7XG4gICAgICAgICAgICB2YXIgbmV3TGVmdCA9IGlzTGFzdFBhZ2UgPyBNYXRoLmZsb29yKGxlZnRQZXJjZW50YWdlLy0xMDApICogLTEwMCA6IGxlZnRQZXJjZW50YWdlICsgMTAwO1xuXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVQYWdlcyhuZXdMZWZ0LCBsZWZ0UGVyY2VudGFnZSk7XG5cbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKG5ld0xlZnQpO1xuICAgICAgICB9LFxuXG5cbiAgICAgICAgc2hvd0ludGVydmlldzogZnVuY3Rpb24oeW91dHViZUlkKSB7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNSdW5uaW5nKys7XG4gICAgICAgICAgICB0aGlzLm1lZGlhTGlnaHRib3hWaWV3ID0gbmV3IFBhcnRpYWxDaGFyYWN0ZXJzWW91dHViZVZpZXcoXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB5b3V0dWJlSWQ6IHlvdXR1YmVJZFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB2aWRlb1JlYWR5Q2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudC50YXJnZXQucGxheVZpZGVvKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHZpZGVvRmluaXNoZWRDYWxsYmFjayA6IHRoaXMuY2xvc2VJbnRlcnZpZXcuYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLiR5b3V0dWJlQ29udGFpbmVyXG4gICAgICAgICAgICAgICAgLmFwcGVuZCh0aGlzLm1lZGlhTGlnaHRib3hWaWV3LnJlbmRlcigpLiRlbClcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAgICAgdGhpcy5hbmltYXRlSW5Zb3V0dWJlRW1iZWQoKTtcbiAgICAgICAgfSxcbiAgICAgICAgY2xvc2VJbnRlcnZpZXc6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zUnVubmluZysrO1xuXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVPdXRZb3V0dWJlRW1iZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4keW91dHViZUNvbnRhaW5lci5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubWVkaWFMaWdodGJveFZpZXc7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IENyZWF0ZS9Qb3NpdGlvbi9QcmUtYW5pbWF0aW9uIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICBjcmVhdGVTdWJWaWV3IDogZnVuY3Rpb24gKG9yaWdpbmFsVmlldykge1xuICAgICAgICAgICAgdmFyIG5ld1ZpZXcgPSBvcmlnaW5hbFZpZXcuY2xvbmUoZmFsc2UpO1xuXG4gICAgICAgICAgICBuZXdWaWV3Lm9nRWwgPSBvcmlnaW5hbFZpZXc7XG4gICAgICAgICAgICBuZXdWaWV3LiRjb250ZW50ID0gbmV3Vmlldy5maW5kKCdkaXYuY29udGVudC1jdHInKTtcbiAgICAgICAgICAgIG5ld1ZpZXcuJGRldGFpbCA9IG5ld1ZpZXcuJGNvbnRlbnQuZmluZCgnZGl2LmRldGFpbC1jdHInKTtcblxuICAgICAgICAgICAgbmV3Vmlldy4kYWN0b3JOYW1lID0gbmV3Vmlldy4kY29udGVudC5maW5kKCdkaXYuaGVhZGVyLWN0ciBoMicpO1xuICAgICAgICAgICAgbmV3Vmlldy4kY2hhcmFjdGVyTmFtZSA9IG5ld1ZpZXcuJGNvbnRlbnQuZmluZCgnZGl2LmhlYWRlci1jdHIgaDEnKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ld1ZpZXc7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uTmV3U3ViVmlldzogZnVuY3Rpb24oJG5ld1N1YlZpZXcpIHtcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICRuZXdTdWJWaWV3Lm9nRWwucG9zaXRpb24oKTtcblxuICAgICAgICAgICAgdmFyIHBhZGRpbmdUb3AgPSBwYXJzZUludCgkbmV3U3ViVmlldy5vZ0VsLmNzcygncGFkZGluZy10b3AnKSk7XG4gICAgICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBwYXJzZUludCgkbmV3U3ViVmlldy5vZ0VsLmNzcygncGFkZGluZy1sZWZ0JykpO1xuXG4gICAgICAgICAgICAkbmV3U3ViVmlldy5jc3Moe1xuICAgICAgICAgICAgICAgIHRvcDogcG9zaXRpb24udG9wICsgcGFkZGluZ1RvcCArICdweCcsXG4gICAgICAgICAgICAgICAgbGVmdDogJG5ld1N1YlZpZXcub2dFbC5vZmZzZXQoKS5sZWZ0ICsgcGFkZGluZ0xlZnQgKyAncHgnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAkbmV3U3ViVmlldy5vZ0VsLndpZHRoKCksXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAkbmV3U3ViVmlldy5vZ0VsLmhlaWdodCgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRuZXdTdWJWaWV3LiRkZXRhaWwuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIHRvcDogJy00MHB4J1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5zZXQoJG5ld1N1YlZpZXcuJGNoYXJhY3Rlck5hbWUsIHtzY2FsZTogMX0pO1xuXG4gICAgICAgICAgICAkbmV3U3ViVmlldy4kYWN0b3JOYW1lLmNzcygnY29sb3InLCcjYWFhJyk7XG5cbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdWJWaWV3Q29udGVudCgkbmV3U3ViVmlldyk7XG5cbiAgICAgICAgICAgICRuZXdTdWJWaWV3LiRjb250ZW50LmFwcGVuZFRvKHRoaXMuJGFjdGl2ZUl0ZW1Db250YWluZXIpO1xuICAgICAgICAgICAgJG5ld1N1YlZpZXcuYXBwZW5kVG8odGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lcik7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uU3ViVmlld0NvbnRlbnQ6IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICB2YXIgJG9nQ29udGVudCA9ICRuZXdTdWJWaWV3Lm9nRWwuZmluZCgnZGl2LmNvbnRlbnQtY3RyJyk7XG4gICAgICAgICAgICB2YXIgY29udGVudE9mZnNldCA9ICRvZ0NvbnRlbnQub2Zmc2V0KCk7XG4gICAgICAgICAgICB2YXIgcG9zaXRpb24gPSAkbmV3U3ViVmlldy5hdHRyKCdkYXRhLXBvcycpO1xuXG4gICAgICAgICAgICB2YXIgdG9wID0gY29udGVudE9mZnNldC50b3AgLSB0aGlzLiRhY3RpdmVJdGVtQ29udGFpbmVyLm9mZnNldCgpLnRvcDtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gY29udGVudE9mZnNldC5sZWZ0O1xuICAgICAgICAgICAgdmFyIHJpZ2h0ID0gdGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lci53aWR0aCgpIC0gNDQwIC0gbGVmdDsgICAgIC8vNDQwIHNob3VsZCBub3QgYmUgaGFyZCBjb2RlZCBpbiBoZXJlXG5cbiAgICAgICAgICAgIHZhciBjc3MgPSB7XG4gICAgICAgICAgICAgICAgdG9wOiB0b3AgKyAncHgnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYocG9zaXRpb24gPT09ICdyaWdodCcpXG4gICAgICAgICAgICAgICAgY3NzLnJpZ2h0ID0gcmlnaHQgKyAncHgnO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGNzcy5sZWZ0ID0gbGVmdCArICdweCc7XG5cbiAgICAgICAgICAgICRuZXdTdWJWaWV3LiRjb250ZW50LmNzcyhjc3MpO1xuXG4gICAgICAgICAgICAvLyByZW1vdmUgZnJvbSBzdWJ2aWV3LCB0aGlzIHdpbGwgZ2V0IGFkZGVkIHRvIGFjdGl2ZSBpdGVtIGNvbnRhaW5lclxuICAgICAgICAgICAgJG5ld1N1YlZpZXcuJGNvbnRlbnQucmVtb3ZlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uU3ViVmlld1RvU3dhcDogZnVuY3Rpb24oJG5ld1N1YlZpZXcsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgJG5ld1N1YlZpZXcuY3NzKHtcbiAgICAgICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICAgICAgbGVmdDogJzEwMCUnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFuaW1hdGlvbiBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgU3ViVmlldyBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBhbmltYXRlU3ViVmlld09wZW46IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICB2YXIgdGltZWxpbmUgPSBuZXcgVGltZWxpbmVMaXRlKHtcbiAgICAgICAgICAgICAgICBwYXVzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmctLTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTdGF0aWMgVmFyaWFibGVzXG4gICAgICAgICAgICB2YXIgc3RhZ2VPbmVBbmltYXRpb25UaW1lID0gMC4zNTtcbiAgICAgICAgICAgIHZhciBzdGFnZVR3b0FuaW1hdGlvblRpbWUgPSAwLjM7XG5cbiAgICAgICAgICAgIC8vIERlcGVuZGVudCBvbiBzdGF0aWNzXG4gICAgICAgICAgICB2YXIgc3RhZ2VUd29TdGFydFRpbWUgPSBzdGFnZU9uZUFuaW1hdGlvblRpbWUgKiA1LzY7XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8oJG5ld1N1YlZpZXcsIHN0YWdlT25lQW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJzEwMCUnLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMS5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8oJG5ld1N1YlZpZXcuJGNoYXJhY3Rlck5hbWUsIHN0YWdlT25lQW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHNjYWxlOiAxLjQsXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtT3JpZ2luOlwibGVmdCB0b3BcIixcbiAgICAgICAgICAgICAgICBlYXNlOiAnUG93ZXIxLmVhc2VJbk91dCdcbiAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8oJG5ld1N1YlZpZXcuJGFjdG9yTmFtZSwgc3RhZ2VPbmVBbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICcjZmZmJ1xuICAgICAgICAgICAgfSksIDApO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKCRuZXdTdWJWaWV3LiRkZXRhaWwsIHN0YWdlVHdvQW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdQb3dlcjIuZWFzZUluT3V0J1xuICAgICAgICAgICAgfSksIHN0YWdlVHdvU3RhcnRUaW1lKTtcblxuICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25Db250ZW50UG9zaXRpb24odGltZWxpbmUsICRuZXdTdWJWaWV3LCBzdGFnZU9uZUFuaW1hdGlvblRpbWUsICRuZXdTdWJWaWV3LmF0dHIoJ2RhdGEtcG9zJykpO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5wbGF5KCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvbkNvbnRlbnRQb3NpdGlvbjogZnVuY3Rpb24odGltZWxpbmUsICRuZXdTdWJWaWV3LCBhbmltYXRpb25UaW1lLCBzY3JlZW5Qb3NpdGlvbikge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRQb3NpdGlvbiA9IHRoaXMuY29udGVudFBvc2l0aW9uc1tzY3JlZW5Qb3NpdGlvbl07XG5cbiAgICAgICAgICAgIHZhciBhdHRycyA9IHtcbiAgICAgICAgICAgICAgICB0b3A6IGNvbnRlbnRQb3NpdGlvbi50b3AsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMS5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYoc2NyZWVuUG9zaXRpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICBhdHRycy5yaWdodCA9IGNvbnRlbnRQb3NpdGlvbi5yaWdodDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYXR0cnMubGVmdCA9IGNvbnRlbnRQb3NpdGlvbi5sZWZ0O1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKCRuZXdTdWJWaWV3LiRjb250ZW50LCBhbmltYXRpb25UaW1lLCBhdHRycyksIDApO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT0gQW5pbWF0ZSBTdWJWaWV3IENsb3NlZCA9PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBhbmltYXRlU3ViVmlld0Nsb3NlZDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHZhciB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRpb25zUnVubmluZy0tO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrLmJpbmQodGhpcykoKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgc3RhZ2VPbmVBbmltYXRpb25UaW1lID0gMC4zNTtcblxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gdGhpcy5zdWJWaWV3Lm9nRWwucG9zaXRpb24oKTtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuc3ViVmlldy5vZ0VsLndpZHRoKCk7XG4gICAgICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5zdWJWaWV3Lm9nRWwuaGVpZ2h0KCk7XG4gICAgICAgICAgICB2YXIgdG9wID0gcG9zaXRpb24udG9wICsgcGFyc2VJbnQodGhpcy5zdWJWaWV3Lm9nRWwuY3NzKCdwYWRkaW5nLXRvcCcpKTtcbiAgICAgICAgICAgIHZhciBsZWZ0ID0gdGhpcy5zdWJWaWV3Lm9nRWwub2Zmc2V0KCkubGVmdCArIHBhcnNlSW50KHRoaXMuc3ViVmlldy5vZ0VsLmNzcygncGFkZGluZy1sZWZ0JykpO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgc3RhZ2VPbmVBbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgdG9wOiB0b3AsXG4gICAgICAgICAgICAgICAgbGVmdDogbGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHQsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMS5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LiRjaGFyYWN0ZXJOYW1lLCBzdGFnZU9uZUFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICBzY2FsZTogMSxcbiAgICAgICAgICAgICAgICB0cmFuc2Zvcm1PcmlnaW46XCJsZWZ0IHRvcFwiLFxuICAgICAgICAgICAgICAgIGVhc2U6ICdQb3dlcjEuZWFzZUluT3V0J1xuICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50byh0aGlzLnN1YlZpZXcuJGFjdG9yTmFtZSwgc3RhZ2VPbmVBbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgY29sb3I6ICcjYWFhJ1xuICAgICAgICAgICAgfSksIDApO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4kZGV0YWlsLCBzdGFnZU9uZUFuaW1hdGlvblRpbWUvMiwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMi5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG5cblxuICAgICAgICAgICAgdmFyICRvZ0NvbnRlbnQgPSB0aGlzLnN1YlZpZXcub2dFbC5maW5kKCdkaXYuY29udGVudC1jdHInKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50T2Zmc2V0ID0gJG9nQ29udGVudC5vZmZzZXQoKTtcblxuICAgICAgICAgICAgdmFyIGNvbnRlbnRUb3AgPSBjb250ZW50T2Zmc2V0LnRvcCAtIHRoaXMuJGFjdGl2ZUl0ZW1Db250YWluZXIub2Zmc2V0KCkudG9wO1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRMZWZ0ID0gY29udGVudE9mZnNldC5sZWZ0O1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4kY29udGVudCwgc3RhZ2VPbmVBbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgdG9wOiBjb250ZW50VG9wLFxuICAgICAgICAgICAgICAgIGxlZnQ6IGNvbnRlbnRMZWZ0LFxuICAgICAgICAgICAgICAgIGVhc2U6ICdQb3dlcjEuZWFzZUluT3V0J1xuICAgICAgICAgICAgfSksIDApO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5wbGF5KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PSBBbmltYXRlIFBhZ2VzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFuaW1hdGVQYWdlczogZnVuY3Rpb24obmV3TGVmdCwgbGVmdFBlcmNlbnRhZ2UpIHtcbiAgICAgICAgICAgIHZhciBhbmltYXRpb25UaW1lUmF0aW8gPSBNYXRoLmFicygobmV3TGVmdCAtIGxlZnRQZXJjZW50YWdlKS8xMDApO1xuICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRpbWUgPSAwLjQgKiBhbmltYXRpb25UaW1lUmF0aW87XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLiRhbGxJdGVtc0NvbnRhaW5lciwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIGxlZnQ6IG5ld0xlZnQgKyAnJScsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmctLTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGVTY29wZTogdGhpc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgSW4gWW91dHViZSBFbWJlZCA9PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgYW5pbWF0ZUluWW91dHViZUVtYmVkOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcuc2hvdygwLjMsIGZ1bmN0aW9uKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGlvbnNSdW5uaW5nLS07XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LFxuICAgICAgICBhbmltYXRlT3V0WW91dHViZUVtYmVkOiBmdW5jdGlvbihjYWxsYmFjaykge1xuICAgICAgICAgICAgdGhpcy5tZWRpYUxpZ2h0Ym94Vmlldy5oaWRlKDAuMywgZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uc1J1bm5pbmctLTtcblxuICAgICAgICAgICAgICAgIGlmKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gQXJyb3cgU3R1ZmYgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICBkZXRlY3RBbmRUb2dnbGVBcnJvd3M6IGZ1bmN0aW9uKGxlZnQsIHN1YlZpZXdPdmVycmlkZSkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuc3ViVmlldyAmJiAhc3ViVmlld092ZXJyaWRlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50dXJuT2ZmQXJyb3dzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihfLmlzVW5kZWZpbmVkKGxlZnQpKSBsZWZ0ID0gdGhpcy5nZXRMZWZ0UGVyY2VudGFnZSgpO1xuXG4gICAgICAgICAgICB2YXIgbWluTGVmdCA9IC0odGhpcy5jb250YWluZXJXaWR0aCAtIDEwMCk7XG5cbiAgICAgICAgICAgIHRoaXMuJGxlZnRBcnJvdy50b2dnbGVDbGFzcygnYWN0aXZlJywgbGVmdCAhPT0gMCk7XG4gICAgICAgICAgICB0aGlzLiRyaWdodEFycm93LnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBsZWZ0ICE9PSBtaW5MZWZ0KTtcbiAgICAgICAgfSxcbiAgICAgICAgdHVybk9mZkFycm93czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLiRsZWZ0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy4kcmlnaHRBcnJvdy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTZWN0aW9uIGFjdGl2YXRlL2RlYWN0aXZhdGUgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgY2xlYW51cDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICAgICAgdGhpcy50dXJuT2ZmQXJyb3dzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBFdmVudCBMaXN0ZW5lcnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5zdWJWaWV3Lm9nRWwuaW5kZXgoKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zaGFyZScpO1xuXG4gICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LlVSTDtcblxuICAgICAgICAgICAgdmFyIHNvY2lhbFNoYXJlID0gdGhpcy5tb2RlbC5jaGFyYWN0ZXJzW2l0ZW1JbmRleF0uc29jaWFsU2hhcmVbdHlwZV07XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLnNvY2lhbFt0eXBlXSA9PT0gJ2Z1bmN0aW9uJyAmJiBzb2NpYWxTaGFyZSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NpYWxbdHlwZV0oe1xuICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBzb2NpYWxTaGFyZS5waWN0dXJlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZS5jb3B5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xpY2tJbnRlcnZpZXc6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmFuaW1hdGlvbnNSdW5uaW5nICYmICEhdGhpcy5zdWJWaWV3KSB7XG4gICAgICAgICAgICAgICAgdmFyIHlvdXR1YmVJZCA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEteW91dHViZS1pZCcpO1xuICAgICAgICAgICAgICAgIE9tbml0dXJlLm9uVmlkZW9QbGF5KHttZWRpYVRpdGxlOiB0aGlzLnN1YlZpZXcuZGF0YSgnaWQnKX0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ludGVydmlldyh5b3V0dWJlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNsb3NlSW50ZXJ2aWV3OiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZighdGhpcy5hbmltYXRpb25zUnVubmluZyAmJiAhIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VJbnRlcnZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25DaG9vc2VDaGFyYWN0ZXI6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciB2aWV3TmFtZSA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblxuICAgICAgICAgICAgaWYoIXRoaXMuYW5pbWF0aW9uc1J1bm5pbmcgJiYgIXRoaXMuc3ViVmlldyAmJiB2aWV3TmFtZSAhPT0gJzAnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyh2aWV3TmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xvc2U6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZighdGhpcy5hbmltYXRpb25zUnVubmluZyAmJiAhIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTmV4dDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYoIXRoaXMuYW5pbWF0aW9uc1J1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICBpZighdGhpcy5zdWJWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmV4dFBhZ2UoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblByZXY6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmKCF0aGlzLmFuaW1hdGlvbnNSdW5uaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYoIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnByZXZQYWdlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvblJpZ2h0QXJyb3dLZXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkxlZnRBcnJvd0tleTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgaWYodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25QcmV2KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBDaGFyYWN0ZXJzVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL2ZpZ2h0Lmhic1wiKTtcblxudmFyIE9tbml0dXJlID0gcmVxdWlyZShcIi4uLy4uL3NlcnZpY2VzL09tbml0dXJlLmpzXCIpO1xudmFyIFNvY2lhbCA9IHJlcXVpcmUoXCIuLi8uLi9zZXJ2aWNlcy9Tb2NpYWwuanNcIik7XG5cbnZhciBGaWdodFZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6XG4gICAgICAgIHtcbiAgICAgICAgICAgICdjbGljayAucGFydG5lcnMtYnRuJzogJ3Nob3dQYXJ0bmVyc1Jlc291cmNlcycsXG4gICAgICAgICAgICAnY2xpY2sgLmRhdGEtYnRuJzogJ3Nob3dEYXRhVmlzdWFsaXphdGlvbicsXG4gICAgICAgICAgICAnY2xpY2sgLmFycm93JzogJ29uUHJldk5leHREYXRhUG9pbnQnLFxuICAgICAgICAgICAgJ2NsaWNrIC5jbG9zZSc6ICdjbG9zZVN1YlZpZXcnLFxuICAgICAgICAgICAgJ2NsaWNrIC5pbmZvLWN0ciA+IGEnOiAnb25QYXJ0bmVyQ2xpY2snLFxuICAgICAgICAgICAgJ2NsaWNrIGRpdi5zb2NpYWwtY3RyID4gaW1nJzogJ29uQ2xpY2tTb2NpYWwnLFxuICAgICAgICAgICAgJ2NsaWNrIC5rbm93X3N0YXR1cyc6ICdvblBhcnRuZXJDbGljaydcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmJlZm9yZUFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgdGhpcy5iZ1ZpZCA9IHRoaXMuJCgndmlkZW8nKTtcbiAgICAgICAgICAgIHRoaXMuYmdJbWcgPSB0aGlzLiQoJy52aWRlb0ltYWdlJyk7XG4gICAgICAgICAgICB0aGlzLmJnVmlkLm9uKFwiZW5kZWRcIiwgdGhpcy5vblZpZGVvQ29tcGxldGUuYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB0aGlzLmlzVmlkZW9Db21wbGV0ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLiRkYXRhUG9pbnRzID0gdGhpcy4kZWwuZmluZCgnZGl2LmRhdGEtcG9pbnQnKTtcblxuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcbiAgICAgICAgICAgIHRoaXMuJGRhdGFQb2ludHMuZWFjaChmdW5jdGlvbihpbmRleClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgc2VxID0gJCh0aGlzKS5maW5kKFwiLmNoYXJ0U2VxdWVuY2VcIik7XG5cbiAgICAgICAgICAgICAgICBpZihzZXEubGVuZ3RoICE9IDApXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZXEuYXR0cignc3JjJywgd2luZG93LmNkbittZS5tb2RlbC5kYXRhUG9pbnRzW2luZGV4XS5jaGFydFNlcXVlbmNlWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5pbml0U29jaWFsRnVuY3Rpb25zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhbmRsZVJvdXRlOiBmdW5jdGlvbihzdWJzZWN0aW9uLCBkZXRhaWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNWaWRlb0NvbXBsZXRlID09IGZhbHNlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuYmdWaWRbMF0ucGxheSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zdXBlcihzdWJzZWN0aW9uLCBkZXRhaWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dTdWJWaWV3IDogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcih2aWV3TmFtZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAnZGF0YScpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGR2ID0gJCgnLmRhdGEtdmlzdWFsaXphdGlvbi1jdHInKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBkdjtcbiAgICAgICAgICAgICAgICB2YXIgbWFzayA9ICQoJy5tYXNrJyk7XG4gICAgICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZlRFAgPSBkdi5maW5kKFwiZGl2LmRhdGEtcG9pbnQuYWN0aXZlXCIpO1xuICAgICAgICAgICAgICAgIHZhciBzZXEgPSBhY3RpdmVEUC5maW5kKFwiLmNoYXJ0U2VxdWVuY2VcIik7XG5cbiAgICAgICAgICAgICAgICBpZihzZXEubGVuZ3RoID4gMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHNlcS5hdHRyKCdzcmMnLCB3aW5kb3cuY2RuK21lLm1vZGVsLmRhdGFQb2ludHNbYWN0aXZlRFAuaW5kZXgoKV0uY2hhcnRTZXF1ZW5jZVswXSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRsLnRvKGR2LCAwLCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKGR2LCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKG1hc2ssIDAsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnKz1hY3RpdmUnLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHYuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlcS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtZS5jb25maWdBbmltRm9yRGF0YVBvaW50KGFjdGl2ZURQLCBtZSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlld05hbWUgPT0gJ3BhcnRuZXJzLXJlc291cmNlcycpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIHByID0gJCgnLnBhcnRuZXJzLXJlc291cmNlcy1jdHInKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBwcjtcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgICAgICB0bC50byhwciwgMCwge1xuICAgICAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgICAgICB9KS50byhwciwgMC4yNSwge1xuICAgICAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXQsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBjbG9zZVN1YlZpZXc6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYoIXRoaXMuc3ViVmlldylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG5cbiAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgIHZhciBzdWIgPSB0aGlzLnN1YlZpZXc7XG4gICAgICAgICAgICB2YXIgbWFzayA9ICQoJy5tYXNrJyk7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgdGwudG8obWFzaywgMCwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJy09YWN0aXZlJyxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50byhzdWIsIDAuMjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihzdWIuaGFzQ2xhc3MoJ2RhdGEtdmlzdWFsaXphdGlvbi1jdHInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnLTEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHN1Yi5oYXNDbGFzcygncGFydG5lcnMtcmVzb3VyY2VzLWN0cicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgc3ViLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25TZWN0aW9uQWN0aXZhdGU6IGZ1bmN0aW9uKGVsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZihlbFswXSA9PSB0aGlzLmVsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMub25XaW5kb3dSZXNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzaG93UGFydG5lcnNSZXNvdXJjZXMgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KCdwYXJ0bmVycy1yZXNvdXJjZXMnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93RGF0YVZpc3VhbGl6YXRpb24gOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KCdkYXRhJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlUGFydG5lcnNSZXNvdXJjZXNDb250ZW50IDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHBjID0gJCgnLnByLWN0ci5wYXJ0bmVycy1jdHInKTtcbiAgICAgICAgICAgIHZhciByYyA9ICQoJy5wci1jdHIucmVzb3VyY2VzLWN0cicpO1xuXG4gICAgICAgICAgICBpZigkKCcucGFydG5lcnMtY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByQWN0aXZlID0gcGM7XG4gICAgICAgICAgICAgICAgdmFyIHBySW5hY3RpdmUgPSByYztcbiAgICAgICAgICAgIH0gZWxzZSBpZigkKCcucmVzb3VyY2VzLWN0cicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHZhciBwckFjdGl2ZSA9IHJjO1xuICAgICAgICAgICAgICAgIHZhciBwckluYWN0aXZlID0gcGM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdGwudG8ocHJBY3RpdmUsIDAuMjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8ocHJBY3RpdmUsIDAsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zZXQocHJBY3RpdmUsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICctPWFjdGl2ZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8ocHJJbmFjdGl2ZSwgMCwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5zZXQocHJJbmFjdGl2ZSwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJys9YWN0aXZlJ1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50byhwckluYWN0aXZlLCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBtZS5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblByZXZOZXh0RGF0YVBvaW50IDogZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGhpcy5pc0FuaW1hdGluZyA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoJCgnLnBhcnRuZXJzLXJlc291cmNlcy1jdHInKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnRvZ2dsZVBhcnRuZXJzUmVzb3VyY2VzQ29udGVudCgpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdmFyIGN1ciA9ICQoJy5kYXRhLXBvaW50LmFjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICAgICAgLy9OZXh0XG4gICAgICAgICAgICB2YXIgbmV4dCA9IGN1ci5uZXh0KCk7XG5cbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAncmlnaHQnO1xuICAgICAgICAgICAgaWYoY3VyLmluZGV4KCcuZGF0YS1wb2ludCcpID09ICQoJy5kYXRhLXBvaW50JykubGVuZ3RoLTEpIHtcbiAgICAgICAgICAgICAgICBuZXh0ID0gJCgnLmRhdGEtcG9pbnQnKS5maXJzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGFyZ2V0Lmhhc0NsYXNzKCdhcnJvdy1sZWZ0JykpIHtcbiAgICAgICAgICAgICAgICAvL1ByZXZcbiAgICAgICAgICAgICAgICBuZXh0ID0gY3VyLnByZXYoKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnbGVmdCc7XG4gICAgICAgICAgICAgICAgaWYoY3VyLmluZGV4KCcuZGF0YS1wb2ludCcpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbmV4dCA9ICQoJy5kYXRhLXBvaW50JykubGFzdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0bC50byhuZXh0LCAwLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnKz1hY3RpdmUnLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKG5leHQsIDAsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkaXJlY3Rpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnLTEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKGN1ciwgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGlyZWN0aW9uID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSwgJ2dycDEnKVxuICAgICAgICAgICAgLnRvKG5leHQsIDAuNSwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMCdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9LCAnZ3JwMScpXG4gICAgICAgICAgICAudG8oY3VyLCAwLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnLT1hY3RpdmUnLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgbWUuaXNBbmltYXRpbmcgPSBmYWxzZTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VxID0gbmV4dC5maW5kKFwiLmNoYXJ0U2VxdWVuY2VcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoc2VxLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShtZS5jb25maWdBbmltRm9yRGF0YVBvaW50KG5leHQsIG1lKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBzZXEgPSBjdXIuZmluZChcIi5jaGFydFNlcXVlbmNlXCIpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHNlcS5sZW5ndGggPiAwKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXEuYXR0cignc3JjJywgd2luZG93LmNkbittZS5tb2RlbC5kYXRhUG9pbnRzW2N1ci5pbmRleCgpXS5jaGFydFNlcXVlbmNlWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNvbmZpZ0FuaW1Gb3JEYXRhUG9pbnQ6IGZ1bmN0aW9uKGRwLCBtZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHNlcSA9IGRwLmZpbmQoXCIuY2hhcnRTZXF1ZW5jZVwiKTtcblxuICAgICAgICAgICAgaWYoc2VxLmxlbmd0aCA+IDApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZHAuaW5kZXgoKTtcblxuICAgICAgICAgICAgICAgIHZhciBmcHMgICAgICAgICAgPSAzMCxcbiAgICAgICAgICAgICAgICBjdXJyZW50RnJhbWUgPSAwLFxuICAgICAgICAgICAgICAgIHRvdGFsRnJhbWVzICA9IG1lLm1vZGVsLmRhdGFQb2ludHNbaW5kZXhdLmNoYXJ0U2VxdWVuY2UubGVuZ3RoLTEsXG4gICAgICAgICAgICAgICAgaW1nICAgICAgICAgID0gc2VxLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRUaW1lICA9IHdpbmRvdy5wZXJmb3JtYW5jZS5ub3coKVxuICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBhbmltbG9vcCh0aW1lKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgIHZhciBkZWx0YSA9ICh0aW1lIC0gY3VycmVudFRpbWUpIC8gMTAwMDtcblxuICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lICs9IChkZWx0YSAqIGZwcyk7XG5cbiAgICAgICAgICAgICAgICAgIHZhciBmcmFtZU51bSA9IE1hdGguZmxvb3IoY3VycmVudEZyYW1lKTtcblxuICAgICAgICAgICAgICAgICAgaWYgKGZyYW1lTnVtID49IHRvdGFsRnJhbWVzKSB7XG4gICAgICAgICAgICAgICAgICAgIGZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudEZyYW1lID0gZnJhbWVOdW0gPSB0b3RhbEZyYW1lcztcbiAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgaWYoIWZpbmlzaGVkKVxuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShhbmltbG9vcCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBpbWcuYXR0cignc3JjJywgd2luZG93LmNkbittZS5tb2RlbC5kYXRhUG9pbnRzW2luZGV4XS5jaGFydFNlcXVlbmNlW2ZyYW1lTnVtXSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50VGltZSA9IHRpbWU7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gYW5pbWxvb3AuYmluZChtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd09ySGlkZUFycm93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmKCQoJy5kYXRhLXZpc3VhbGl6YXRpb24tY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgaWYoJCgnLmRhdGEtcG9pbnQuYWN0aXZlJykuaW5kZXgoJy5kYXRhLXBvaW50JykgPT0gJCgnLmRhdGEtcG9pbnQnKS5sZW5ndGgtMSkge1xuICAgICAgICAgICAgICAgICAgICAvL0xhc3Qgc2xpZGVcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LXJpZ2h0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3ctbGVmdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoJCgnLmRhdGEtcG9pbnQuYWN0aXZlJykuaW5kZXgoJy5kYXRhLXBvaW50JykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAvL0ZpcnN0IHNsaWRlXG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy9NaWRkbGUgc2xpZGVcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LXJpZ2h0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3ctbGVmdCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2UgaWYoJCgnLnBhcnRuZXJzLXJlc291cmNlcy1jdHInKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICBpZigkKCcucGFydG5lcnMtY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCQoJy5yZXNvdXJjZXMtY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkKCcuYXJyb3ctcmlnaHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25WaWRlb0NvbXBsZXRlOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmlzVmlkZW9Db21wbGV0ZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm9uV2luZG93UmVzaXplKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25QYXJ0bmVyQ2xpY2s6IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIE9tbml0dXJlLm9uUGFydG5lckxpbmsoe1VSTDogZS5jdXJyZW50VGFyZ2V0LmhyZWZ9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbldpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHdpblcgPSAkKHdpbmRvdykud2lkdGgoKTtcbiAgICAgICAgICAgIHZhciB3aW5IID0gJCh3aW5kb3cpLmhlaWdodCgpO1xuXG5cbiAgICAgICAgICAgIHRoaXMuYmdWaWQuY3NzKFwid2lkdGhcIiwgXCJhdXRvXCIpO1xuICAgICAgICAgICAgdGhpcy5iZ1ZpZC5jc3MoXCJoZWlnaHRcIiwgd2luSCk7XG5cblxuICAgICAgICAgICAgLy8gY2VudGVyIHRoZSB2aWRlb1xuICAgICAgICAgICAgdGhpcy5iZ1ZpZC5jc3MoXCJsZWZ0XCIsICh3aW5XLzIgLSAodGhpcy5iZ1ZpZC53aWR0aCgpIC8gMikpICsgXCJweFwiKTtcbiAgICAgICAgICAgIHRoaXMuYmdWaWQuY3NzKFwidG9wXCIsICh3aW5ILzIgLSAodGhpcy5iZ1ZpZC5oZWlnaHQoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgICAgIC8vIHRoaXMuYmdJbWcuY3NzKFwibGVmdFwiLCAoaGFsZldpblctKHRoaXMuYmdJbWcud2lkdGgoKS8yKSkrXCJweFwiKTtcbiAgICAgICAgICAgLy8gdGhpcy5iZ0ltZy5jc3MoXCJ0b3BcIiwgKGhhbGZXaW5ILSh0aGlzLmJnSW1nLmhlaWdodCgpLzIpKStcInB4XCIpO1xuICAgICAgICB9LFxuICAgICAgICBvbkNsaWNrU29jaWFsOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSB0aGlzLiRkYXRhUG9pbnRzLmZpbHRlcignLmFjdGl2ZScpLmluZGV4KCcuZGF0YS1wb2ludCcpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG5cbiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuVVJMO1xuXG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLmRhdGFQb2ludHNbaXRlbUluZGV4XS5zb2NpYWxTaGFyZVt0eXBlXTtcblxuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuc29jaWFsW3R5cGVdID09PSAnZnVuY3Rpb24nICYmIHNvY2lhbFNoYXJlKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNvY2lhbFt0eXBlXSh7XG4gICAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IHNvY2lhbFNoYXJlLmltYWdlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZS5jb3B5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBGaWdodFZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9mb290ZXIuaGJzXCIpO1xudmFyIEhlbHBlckZ1bmNzID0gcmVxdWlyZShcIi4uL2hlbHBlcnMvSGVscGVycy5qc1wiKTtcblxudmFyIEZvb3RlclZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEluaXRpYWxpemF0aW9uIFN0dWZmICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAgICBldmVudHMgOlxuICAgICAgICB7XG5cbiAgICAgICAgfSxcblxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZvb3RlclZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9ob21lLmhic1wiKTtcbnZhciBTY3JvbGxCYXJWaWV3ID0gcmVxdWlyZShcIi4uL1Njcm9sbEJhclZpZXcuanNcIik7XG52YXIgSGVscGVyRnVuY3MgPSByZXF1aXJlKFwiLi4vaGVscGVycy9IZWxwZXJzLmpzXCIpO1xuXG52YXIgSG9tZVZpZXcgPSBWaWV3LmV4dGVuZChcbntcbiAgICBldmVudHM6XG4gICAge1xuICAgICAgICBcImNsaWNrIC5zY3JvbGwtZG93blwiIDogXCJvblNjcm9sbEJ1dHRvbkNsaWNrZWRcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAuc2Nyb2xsLWRvd25cIiA6IFwib25TY3JvbGxCdXR0b25DbGlja2VkXCIsXG4gICAgICAgIFwiY2xpY2sgYnV0dG9uLnRyYWlsZXJcIiA6IFwib25QbGF5VHJhaWxlclwiLFxuICAgICAgICBcInRvdWNoZW5kIGJ1dHRvbi50cmFpbGVyXCIgOiBcIm9uUGxheVRyYWlsZXJcIixcbiAgICAgICAgXCJjbGljayAuaGJvLWZpbG1zXCIgOiBcIm9uSEJPRmlsbXNcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAuaGJvLWZpbG1zXCIgOiBcIm9uSEJPRmlsbXNcIixcbiAgICAgICAgXCJjbGljayAubmV3c1wiIDogXCJvbk5ld3NcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAubmV3c1wiIDogXCJvbk5ld3NcIixcbiAgICAgICAgXCJjbGljayAub3ZlcmxheVwiIDogXCJvbkNsb3NlXCIsXG4gICAgICAgIFwidG91Y2hlbmQgLm92ZXJsYXlcIiA6IFwib25DbG9zZVwiLFxuICAgICAgICBcImNsaWNrIC5tb2RhbCAuY2xvc2VcIiA6IFwib25DbG9zZVwiLFxuICAgICAgICBcInRvdWNoZW5kIC5tb2RhbCAuY2xvc2VcIiA6IFwib25DbG9zZVwiLFxuICAgICAgICBcImNsaWNrIC5vdmVyZmxvdy1jb250YWluZXJcIiA6IFwib25QcmV2ZW50RGVmYXVsdFwiLFxuICAgICAgICBcInRvdWNoZW5kIC5vdmVyZmxvdy1jb250YWluZXJcIiA6IFwib25QcmV2ZW50RGVmYXVsdFwiXG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpXG4gICAge1xuICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYWZ0ZXJBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgc2V0dXA6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuc2Nyb2xsYmFydmlldyA9IG5ldyBTY3JvbGxCYXJWaWV3KFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZpZXdOYW1lICAgICAgICAgICAgOiAnY29udGVudC1jdHInLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciAgICAgICAgICAgOiB0aGlzLiRlbC5maW5kKCcuY29udGVudC1jdHInKSxcbiAgICAgICAgICAgICAgICBhbmltYXRlU2Nyb2xsSGFuZGxlIDogZmFsc2UsXG4gICAgICAgICAgICAgICAgYW5pbWF0ZU9wYWNpdHkgICAgICA6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICk7XG5cbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIC8vIHJlY2FsY3VsYXRlIHRoZSBvZmZzZXQgYWZ0ZXIgdGhlIGFuaW1hdGlvbiBmaW5pc2hlcyBiZWNhdXNlIGl0cyBwb3NpdGlvbiB3aWxsIGhhdmUgY2hhbmdlZC5cbiAgICAgICAgdGhpcy5zY3JvbGxiYXJ2aWV3LmNvbnRhaW5lci5vbignc2Nyb2xsJywgZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoJ2NvbnRlbnQtY3RyLlNlY3Rpb24uRmluYWxQb3NpdGlvbicsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcGVyY2VudCA6ICh0aGlzLnNjcm9sbFRvcCAvIChIZWxwZXJGdW5jcy5FbGVtZW50LmNvbnRlbnRIZWlnaHQodGhpcykgLSB0aGlzLm9mZnNldEhlaWdodCArICggc2VsZi5zY3JvbGxiYXJ2aWV3LmhhbmRsZS5jbGllbnRIZWlnaHQgLyAyICkgKSkgKiAxMDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBUaGlzIHdpbGwgc2Nyb2xsIHRoZSBjb250YWluZXIgYWZ0ZXIgdGhlIHRodW1iIGlzIGRyYWdnZWQgdXAgb3IgZG93blxuICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFxuICAgICAgICAgICAgJ2NvbnRlbnQtY3RyLlNjcm9sbEJhci5VcGRhdGVQb3NpdGlvbicsXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNjcm9sbGluZy5iaW5kKHRoaXMuc2Nyb2xsYmFydmlldywgdGhpcy5zY3JvbGxiYXJ2aWV3LmNvbnRhaW5lciksXG4gICAgICAgICAgICB0aGlzXG4gICAgICAgICk7XG4gICAgfSxcblxuICAgIHVwZGF0ZVNjcm9sbGluZzogZnVuY3Rpb24oY29udGFpbmVyLCBlKVxuICAgIHtcbiAgICAgICAgdmFyIHBlcmNlbnQgPSBlLnBlcmNlbnQvMTAwO1xuICAgICAgICBjb250YWluZXIuc2Nyb2xsVG9wKCAoICggSGVscGVyRnVuY3MuRWxlbWVudC5jb250ZW50SGVpZ2h0KGNvbnRhaW5lclswXSApIC0gY29udGFpbmVyLm91dGVySGVpZ2h0KHRydWUpICsgKHRoaXMuaGFuZGxlLmNsaWVudEhlaWdodCAvIDIpKSAqIHBlcmNlbnQpICk7XG4gICAgfSxcblxuICAgIHJlbmRlcjogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIHRoaXMuX3N1cGVyKCk7XG5cbiAgICAgIHRoaXMuJGVsLmZpbmQoJy5jb250ZW50LWN0cicpLmFwcGVuZCh0aGlzLnNjcm9sbGJhcnZpZXcucmVuZGVyKGZhbHNlKS5lbCk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBpbml0Um91dGVyOiBmdW5jdGlvbihyb290KVxuICAgIHtcbiAgICAgICAgdGhpcy5fc3VwZXIocm9vdCk7XG4gICAgICAgIEFwcC5yb3V0ZXIucm91dGUoXCJcIiwgXCJob21lUm91dGVcIik7XG4gICAgfSxcblxuICAgIGhhbmRsZVJvdXRlOiBmdW5jdGlvbihzdWJzZWN0aW9uLCBkZXRhaWwpXG4gICAge1xuICAgICAgdGhpcy5fc3VwZXIoc3Vic2VjdGlvbiwgZGV0YWlsKTtcblxuICAgICAgdGhpcy5vblNlY3Rpb25BY3RpdmF0ZSh0aGlzLiRlbCk7XG4gICAgfSxcblxuICAgIG9uU2VjdGlvbkFjdGl2YXRlOiBmdW5jdGlvbihlbClcbiAgICB7XG4gICAgICAgIGlmKGVsID09IHRoaXMuJGVsKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgYmIgPSAkKCcuYmlsbGluZy1ibG9jaycpO1xuICAgICAgICAgICAgdmFyIGx1ID0gJCgnLmxvY2stdXAnKTtcbiAgICAgICAgICAgIHZhciBwYyA9ICQoJy5wcmVtaWVyZS1jdHInKVxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdGwudG8oYmIsIDIsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSwgJy09MC41JylcbiAgICAgICAgICAgIC50byhbbHUsIHBjXSwgMiwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSwgJy09MC41Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMub25DbG9zZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIG9uU2Nyb2xsQnV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIvdG8td2luLWEtd2FyXCIsIHRydWUpO1xuICAgIH0sXG5cbiAgICBvblBsYXlUcmFpbGVyOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIi9tZWRpYS90cmFpbGVyL1wiLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgb25IQk9GaWxtczogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cDovL3d3dy5oYm8uY29tL21vdmllcy90aGUtbm9ybWFsLWhlYXJ0P2ljaWQ9QUJDMTUxNlwiKTtcbiAgICB9LFxuXG4gICAgb25OZXdzOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICB2YXIgb2wgPSAkKCcub3ZlcmxheScpO1xuICAgICAgICB2YXIgbWQgPSAkKCcubW9kYWwnKTtcblxuICAgICAgICB0aGlzLnN1YlZpZXcgPSBtZDtcblxuICAgICAgICB2YXIgdGwgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG4gICAgICAgIHRsLnRvKFtvbCwgbWRdLCAwLCB7XG4gICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlbGYuc2Nyb2xsYmFydmlldy5zZXRTY3JvbGxiYXJWaXNpYmlsaXR5LmNhbGwoc2VsZi5zY3JvbGxiYXJ2aWV3KTtcbiAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbGJhcnZpZXcuY2FsY3VsYXRlT2Zmc2V0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS50byhbb2wsIG1kXSwgLjUsIHtcbiAgICAgICAgICAgIGNsYXNzTmFtZTogJys9YWN0aXZlJyxcbiAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHNlbGYuc2Nyb2xsYmFydmlldy5zZXRTY3JvbGxiYXJWaXNpYmlsaXR5LmNhbGwoc2VsZi5zY3JvbGxiYXJ2aWV3KTtcbiAgICAgICAgICAgICAgICBzZWxmLnNjcm9sbGJhcnZpZXcuY2FsY3VsYXRlT2Zmc2V0KHRydWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3Lk9wZW5lZFwiKTtcbiAgICB9LFxuXG4gICAgb25DbG9zZTogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIHZhciBvbCA9ICQoJy5vdmVybGF5Jyk7XG4gICAgICAgIHZhciBtZCA9ICQoJy5tb2RhbCcpO1xuXG4gICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgdGwudG8oW29sLCBtZF0sIC41LCB7XG4gICAgICAgICAgICBjbGFzc05hbWU6ICctPWFjdGl2ZScsXG4gICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICB9KS50byhbb2wsIG1kXSwgMCwge1xuICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU3ViVmlldy5DbG9zZWRcIik7XG4gICAgfSxcblxuICAgIG9uUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIGNvbnNvbGUubG9nKFwicHJldmVudGluZyBwcm9wYWdhdGlvbiBwbGVhc2VcIik7XG4gICAgfVxufSk7XG5cblxubW9kdWxlLmV4cG9ydHMgPSBIb21lVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL2ludHJvLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBJbnRyb1ZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudExvY2F0aW9uID0gMDtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudE1vdXNlUG9zID0gbnVsbDtcblxuICAgICAgICAgICAgdGhpcy5pbWFnZXMgPSBbXTtcblxuICAgICAgICAgICAgdmFyIGltZ0xpc3QgPSB0aGlzLm1vZGVsW0hlbHBlckZ1bmNzLkRldmljZS5jdXJyZW50RGV2aWNlKCldO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGltZ0xpc3QubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmFyIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB3aW5kb3cuY2RuK2ltZ0xpc3RbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5pbWFnZXMucHVzaChpbWcpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL0JhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3dpbmRvdy5tb3VzZW1vdmUnLCB0aGlzLm9uTW91c2VNb3ZlLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cucmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcImRvY3VtZW50LnNjcm9sbFwiLCB0aGlzLm9uRG9jdW1lbnRTY3JvbGxlZCwgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcyA9IHRoaXMuJCgnLmludHJvLWNhbnZhcycpO1xuICAgICAgICAgICAgdGhpcy5jb250ZXh0ID0gdGhpcy5jYW52YXNbMF0uZ2V0Q29udGV4dCgnMmQnKTtcblxuICAgICAgICAgICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uV2luZG93UmVzaXplIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuY2FudmFzLmF0dHIoXCJ3aWR0aFwiLCAkKHdpbmRvdykud2lkdGgoKSk7XG4gICAgICAgICAgICB0aGlzLmNhbnZhcy5hdHRyKFwiaGVpZ2h0XCIsICQod2luZG93KS5oZWlnaHQoKSk7XG5cbiAgICAgICAgICAgIHRoaXMub25Eb2N1bWVudFNjcm9sbGVkKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIGRyYXdJbWFnZVByb3AgQnkgS2VuIEZ5cnN0ZW5iZXJnIChodHRwOi8vZWFzeWNhbnZhc2pzLmNvbS8pXG4gICAgICAgICAqL1xuICAgICAgICBkcmF3SW1hZ2VQcm9wIDogZnVuY3Rpb24gKGN0eCwgaW1nLCB4LCB5LCB3LCBoLCBvZmZzZXRYLCBvZmZzZXRZKVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHggPSB5ID0gMDtcbiAgICAgICAgICAgICAgICB3ID0gY3R4LmNhbnZhcy53aWR0aDtcbiAgICAgICAgICAgICAgICBoID0gY3R4LmNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vLyBkZWZhdWx0IG9mZnNldCBpcyBjZW50ZXJcbiAgICAgICAgICAgIG9mZnNldFggPSBvZmZzZXRYID8gb2Zmc2V0WCA6IDAuNTtcbiAgICAgICAgICAgIG9mZnNldFkgPSBvZmZzZXRZID8gb2Zmc2V0WSA6IDAuNTtcblxuICAgICAgICAgICAgLy8vIGtlZXAgYm91bmRzIFswLjAsIDEuMF1cbiAgICAgICAgICAgIGlmIChvZmZzZXRYIDwgMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRZIDwgMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRYID4gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRYID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChvZmZzZXRZID4gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvZmZzZXRZID0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGl3ID0gaW1nLndpZHRoLFxuICAgICAgICAgICAgICAgIGloID0gaW1nLmhlaWdodCxcbiAgICAgICAgICAgICAgICByID0gTWF0aC5taW4odyAvIGl3LCBoIC8gaWgpLFxuICAgICAgICAgICAgICAgIG53ID0gaXcgKiByLCAgIC8vLyBuZXcgcHJvcC4gd2lkdGhcbiAgICAgICAgICAgICAgICBuaCA9IGloICogciwgICAvLy8gbmV3IHByb3AuIGhlaWdodFxuICAgICAgICAgICAgICAgIGN4LCBjeSwgY3csIGNoLCBhciA9IDE7XG5cbiAgICAgICAgICAgIC8vLyBkZWNpZGUgd2hpY2ggZ2FwIHRvIGZpbGxcbiAgICAgICAgICAgIGlmIChudyA8IHcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgYXIgPSB3IC8gbnc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmggPCBoKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFyID0gaCAvIG5oO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbncgKj0gYXI7XG4gICAgICAgICAgICBuaCAqPSBhcjtcblxuICAgICAgICAgICAgLy8vIGNhbGMgc291cmNlIHJlY3RhbmdsZVxuICAgICAgICAgICAgY3cgPSBpdyAvIChudyAvIHcpO1xuICAgICAgICAgICAgY2ggPSBpaCAvIChuaCAvIGgpO1xuXG4gICAgICAgICAgICBjeCA9IChpdyAtIGN3KSAqIG9mZnNldFg7XG4gICAgICAgICAgICBjeSA9IChpaCAtIGNoKSAqIG9mZnNldFk7XG5cbiAgICAgICAgICAgIC8vLyBtYWtlIHN1cmUgc291cmNlIHJlY3RhbmdsZSBpcyB2YWxpZFxuICAgICAgICAgICAgaWYgKGN4IDwgMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjeCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY3kgPCAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGN5ID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjdyA+IGl3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGN3ID0gaXc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoY2ggPiBpaClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjaCA9IGloO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLy8gZmlsbCBpbWFnZSBpbiBkZXN0LiByZWN0YW5nbGVcbiAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCBjeCwgY3ksIGN3LCBjaCwgeCwgeSwgdywgaCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25Eb2N1bWVudFNjcm9sbGVkOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgLy8gZGV0ZXJtaW5lIHBlcmNlbnRhZ2Ugb2YgdmlldydzIGxvY2F0aW9uXG4gICAgICAgICAgICB2YXIgY3VyU2Nyb2xsUG9zID0gJCh3aW5kb3cpLmhlaWdodCgpIC0gTWF0aC5hYnMoSGVscGVyRnVuY3MucG9zVG9wKCkgLSB0aGlzLiRlbC5vZmZzZXQoKS50b3ApO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IE1hdGguZmxvb3IoKCh0aGlzLmltYWdlcy5sZW5ndGggLSAxKSAvICQod2luZG93KS5oZWlnaHQoKSkgKiBjdXJTY3JvbGxQb3MpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50TG9jYXRpb25dKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuZHJhd0ltYWdlUHJvcCh0aGlzLmNvbnRleHQsIHRoaXMuaW1hZ2VzW3RoaXMuY3VycmVudExvY2F0aW9uXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25Nb3VzZU1vdmUgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50TW91c2VQb3MgPSBlLnlQb3M7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRMb2NhdGlvbiA9IE1hdGguZmxvb3IoKHRoaXMuaW1hZ2VzLmxlbmd0aCAvICQod2luZG93KS5oZWlnaHQoKSkgKiB0aGlzLmN1cnJlbnRNb3VzZVBvcyk7XG4gICAgICAgICAgICB0aGlzLmRyYXdJbWFnZVByb3AodGhpcy5jb250ZXh0LCB0aGlzLmltYWdlc1t0aGlzLmN1cnJlbnRMb2NhdGlvbl0pO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5pbWFnZXNbdGhpcy5jdXJyZW50TG9jYXRpb25dKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludHJvVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL21lZGlhLmhic1wiKTtcbnZhciBPbW5pdHVyZSA9IHJlcXVpcmUoXCIuLi8uLi9zZXJ2aWNlcy9PbW5pdHVyZS5qc1wiKTtcbnZhciBTb2NpYWwgPSByZXF1aXJlKFwiLi4vLi4vc2VydmljZXMvU29jaWFsLmpzXCIpO1xuXG52YXIgUGFydGlhbE1lZGlhWW91dHViZVZpZXcgPSByZXF1aXJlKCcuL3BhcnRpYWxzL21lZGlhL3lvdXR1YmUuanMnKTtcblxudmFyIE1lZGlhVmlldyA9IFZpZXcuZXh0ZW5kKFxue1xuICAgIC8vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIEluaXRpYWxpemF0aW9uIFN0dWZmICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIGV2ZW50czpcbiAgICB7XG4gICAgICAgICdjbGljayAubWVkaWEtaXRlbSc6ICdvbkNob29zZScsXG4gICAgICAgICdjbGljayBidXR0b24uY2xvc2UnOiAnb25DbG9zZScsXG4gICAgICAgICdjbGljayAuYXJyb3ctcmlnaHQnOiAnb25OZXh0JyxcbiAgICAgICAgJ2NsaWNrIC5hcnJvdy1sZWZ0JzogJ29uUHJldicsXG4gICAgICAgICdjbGljayBkaXYuc29jaWFsID4gYSc6ICdvbkNsaWNrU29jaWFsJ1xuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zKVxuICAgIHtcbiAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgICB0aGlzLmRldGFpbFZpZXdzID0ge1xuICAgICAgICBcInZpZGVvXCI6IFBhcnRpYWxNZWRpYVlvdXR1YmVWaWV3LFxuICAgICAgICBcImdhbGxlcnlcIjogcmVxdWlyZShcIi4vcGFydGlhbHMvR2FsbGVyeURldGFpbFZpZXcuanNcIilcbiAgICAgIH07XG5cbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cucmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemUsIHRoaXMpO1xuXG4gICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYmVmb3JlQWN0aXZlJywgXy50aHJvdHRsZSh0aGlzLm9uU2VjdGlvbkJlZm9yZUFjdGl2ZSwgMTAwMCwge3RyYWlsaW5nOiBmYWxzZX0pLCB0aGlzKTtcbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIF8udGhyb3R0bGUodGhpcy5vblNlY3Rpb25BZnRlckFjdGl2ZSwgMTAwMCwge3RyYWlsaW5nOiBmYWxzZX0pLCB0aGlzKTtcbiAgICB9LFxuXG4gICAgc2V0dXA6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmluaXRKcXVlcnlWYXJpYWJsZXMoKTtcbiAgICAgICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuXG4gICAgICAgIHRoaXMuaW5pdFNvY2lhbEZ1bmN0aW9ucygpO1xuXG4gICAgICAgIHRoaXMuaW5pdEl0ZW1TaXplKCk7XG5cbiAgICAgICAgdGhpcy5zZXRJdGVtUGFkZGluZyh0aGlzLiRtZWRpYUl0ZW1zKTtcbiAgICB9LFxuXG5cbiAgICBvblNlY3Rpb25CZWZvcmVBY3RpdmU6IGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgIGlmIChlbFswXSAhPT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvblNlY3Rpb25BZnRlckFjdGl2ZTogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgaWYoZWxbMF0gPT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgfSxcblxuICAgIGluaXRKcXVlcnlWYXJpYWJsZXM6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIHRoaXMuJG1lZGlhQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2Lm1lZGlhLWN0cicpO1xuICAgICAgICB0aGlzLiRhY3RpdmVJdGVtQ29udGFpbmVyID0gdGhpcy4kZWwuZmluZCgnZGl2LmFjdGl2ZS1pdGVtLWNvbnRhaW5lcicpO1xuXG4gICAgICAgIHRoaXMuJG1lZGlhSXRlbXMgPSB0aGlzLiRtZWRpYUNvbnRhaW5lci5maW5kKCcubWVkaWEtaXRlbScpO1xuXG4gICAgICAgIHRoaXMuJGxlZnRBcnJvdyA9IHRoaXMuJGVsLmZpbmQoJ2Rpdi5hcnJvdy5hcnJvdy1sZWZ0Jyk7XG4gICAgICAgIHRoaXMuJHJpZ2h0QXJyb3cgPSB0aGlzLiRlbC5maW5kKCdkaXYuYXJyb3cuYXJyb3ctcmlnaHQnKTtcblxuICAgICAgICB0aGlzLiR3aW5kb3cgPSAkKHdpbmRvdyk7XG4gICAgfSxcbiAgICBpbml0U29jaWFsRnVuY3Rpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICB0aGlzLnNvY2lhbC5mYWNlYm9vayA9IF8uYmluZChTb2NpYWwuU2hhcmVGYWNlYm9vaywgU29jaWFsKTtcbiAgICAgICAgdGhpcy5zb2NpYWwudHdpdHRlciA9IF8uYmluZChTb2NpYWwuU2hhcmVUd2l0dGVyLCBTb2NpYWwpO1xuICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgIH0sXG4gICAgaW5pdEl0ZW1TaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgdmFyIHJvd0xlbmd0aCA9IHRoaXMuJG1lZGlhSXRlbXMubGVuZ3RoLzM7XG5cbiAgICAgICAgdmFyIGNvbnRhaW5lcldpZHRoID0gMTAwICogcm93TGVuZ3RoLzQ7XG4gICAgICAgIHZhciBpdGVtV2lkdGggPSAxMDAvcm93TGVuZ3RoO1xuXG4gICAgICAgIHRoaXMuJG1lZGlhQ29udGFpbmVyLmNzcygnd2lkdGgnLCBjb250YWluZXJXaWR0aCAgKyAnJScpO1xuICAgICAgICB0aGlzLiRtZWRpYUl0ZW1zLmNzcygnd2lkdGgnLCBpdGVtV2lkdGggKyAnJScpO1xuXG4gICAgICAgIHRoaXMubWVkaWFDb250YWluZXJXaWR0aCA9IGNvbnRhaW5lcldpZHRoO1xuICAgIH0sXG5cbiAgICBzZXRJdGVtUGFkZGluZzogZnVuY3Rpb24oJGl0ZW1zKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuICAgICAgICB2YXIgcm93TGVuZ3RoID0gJGl0ZW1zLmxlbmd0aC8zO1xuXG4gICAgICAgIHZhciAkZmlyc3RSb3cgPSAkaXRlbXMuc2xpY2UoMCwgcm93TGVuZ3RoKTtcbiAgICAgICAgdmFyICRsYXN0Um93ID0gJGl0ZW1zLnNsaWNlKC1yb3dMZW5ndGgpO1xuICAgICAgICB2YXIgJGxlZnRDb2x1bW4gPSAkaXRlbXMuZmlsdGVyKGZ1bmN0aW9uKGkpIHtcbiAgICAgICAgICAgIHJldHVybiBpICUgcm93TGVuZ3RoID09PSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyICRyaWdodENvbHVtbiA9ICRpdGVtcy5maWx0ZXIoZnVuY3Rpb24oaSkge1xuICAgICAgICAgICAgcmV0dXJuIGkgJSByb3dMZW5ndGggPT09IChyb3dMZW5ndGggLSAxKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJGZpcnN0Um93LmFkZENsYXNzKCduby1wYWQtdG9wJyk7XG4gICAgICAgICRsYXN0Um93LmFkZENsYXNzKCduby1wYWQtYm90dG9tJyk7XG4gICAgICAgICRsZWZ0Q29sdW1uLmFkZENsYXNzKCduby1wYWQtbGVmdCcpO1xuICAgICAgICAkcmlnaHRDb2x1bW4uYWRkQ2xhc3MoJ25vLXBhZC1yaWdodCcpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVSb3V0ZTogZnVuY3Rpb24oc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgIHtcbiAgICAgICAgLy8gc2luY2Ugd2UgYXJlbid0IGNhbGxpbmcgc3VwZXIgaGVyZSwgd2UgbmVlZCB0aGlzIG9tbml0dXJlIGNhbGxcbiAgICAgICAgdmFyIHN1YiA9IFwiXCI7XG4gICAgICAgIGlmKHN1YnNlY3Rpb24pXG4gICAgICAgIHtcbiAgICAgICAgICAgIHN1YiA9IFwiOiBcIitzdWJzZWN0aW9uO1xuICAgICAgICB9XG5cbiAgICAgICAgT21uaXR1cmUub25QYWdlTG9hZCh7cGFnZU5hbWU6IHRoaXMuYmFzZStzdWJ9KTtcblxuICAgICAgICBpZihzdWJzZWN0aW9uKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KHN1YnNlY3Rpb24sIGRldGFpbCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgICAgICAvLyB0aGlzIHJldHVybiBtYWtlcyBhbGwgdGhlIGRpZmZlcmVuY2UgZm9yIHRoZSBpbWFnZSBnYWxsZXJ5IGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmlzQWN0aXZlID09IGZhbHNlKVxuICAgICAgICB7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTZWN0aW9uLlJlcXVlc3RBY3RpdmVcIiwgdGhpcy5iYXNlKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBXaW5kb3cgUmVzaXplIEZ1bmN0aW9ucyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICByZXNpemVJbnRlcnZpZXc6IGZ1bmN0aW9uKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgaWYodGhpcy5zdWJWaWV3LmRhdGEoJ3R5cGUnKSAhPT0gJ3ZpZGVvJykgcmV0dXJuO1xuXG4gICAgICAgIHZhciByYXRpbyA9IDQ4MC84NTM7XG5cbiAgICAgICAgdmFyIG1heEhlaWdodCA9IE1hdGgubWluKHdpbmRvd0hlaWdodCAqIDAuODUsIHdpbmRvd0hlaWdodCAtIDEwMCk7XG4gICAgICAgIHZhciBtYXhXaWR0aCA9IE1hdGgubWluKHdpbmRvd1dpZHRoICogMC44NSwgMTA4MCk7XG5cbiAgICAgICAgaWYobWF4SGVpZ2h0L3JhdGlvIDwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jb250YWluZXIud2lkdGgobWF4SGVpZ2h0L3JhdGlvKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jb250YWluZXIuY3NzKCd3aWR0aCcsJycpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBvbldpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB3aWR0aCA9IHRoaXMuJHdpbmRvdy53aWR0aCgpO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gdGhpcy4kd2luZG93LmhlaWdodCgpO1xuXG4gICAgICAgIGlmKHRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgdGhpcy5yZXNpemVJbnRlcnZpZXcod2lkdGgsIGhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgLy8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogQ2hhbmdlIFZpZXcgRnVuY3Rpb25zICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgIHNldENvbnRhaW5lclBvc2l0aW9uOiBmdW5jdGlvbigkaXRlbSkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICB2YXIgbGVmdE9mZnNldCA9ICRpdGVtLm9mZnNldCgpLmxlZnQ7XG4gICAgICAgIGlmKGxlZnRPZmZzZXQgPj0gMCAmJiBsZWZ0T2Zmc2V0IDwgdGhpcy4kd2luZG93LndpZHRoKCkpIHJldHVybjtcblxuICAgICAgICB2YXIgbGVmdFBvc2l0aW9uID0gdGhpcy5nZXRMZWZ0UGVyY2VudGFnZSgpO1xuICAgICAgICB2YXIgbWluTGVmdCA9IC0odGhpcy5tZWRpYUNvbnRhaW5lcldpZHRoIC0gMTAwKTtcblxuICAgICAgICB2YXIgbGVmdFJlcXVpcmVkID0gTWF0aC5mbG9vcigkaXRlbS5wb3NpdGlvbigpLmxlZnQvdGhpcy4kZWwud2lkdGgoKSkgKiAtMTAwO1xuXG4gICAgICAgIHZhciBuZXdMZWZ0ID0gTWF0aC5tYXgobWluTGVmdCwgbGVmdFJlcXVpcmVkKTtcblxuICAgICAgICBpZihsZWZ0UG9zaXRpb24gIT09IG5ld0xlZnQpIHtcbiAgICAgICAgICAgIHRoaXMuJG1lZGlhQ29udGFpbmVyLmNzcygnbGVmdCcsIG5ld0xlZnQgKyAnJScpO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHNob3dTdWJWaWV3OiBmdW5jdGlvbih2aWV3TmFtZSwgb3B0aW9ucylcbiAgICB7XG4gICAgICAgIHRoaXMuX3N1cGVyKHZpZXdOYW1lLCBvcHRpb25zKTtcblxuICAgICAgICB2YXIgbWVkaWFFbCA9IHRoaXMuJG1lZGlhSXRlbXMuZmlsdGVyKGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IHZpZXdOYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZihtZWRpYUVsLmxlbmd0aCA9PSAwKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnNldENvbnRhaW5lclBvc2l0aW9uKG1lZGlhRWwpO1xuXG4gICAgICAgIC8vIGlmIHRoZXJlIGlzIGFscmVhZHkgYSBzdWJWaWV3IG9wZW4sIHRyYW5zaXRpb24gYmV0d2VlbiB0aGUgdHdvXG4gICAgICAgIGlmKHRoaXMuc3ViVmlldylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zd2FwU3ViVmlldyhtZWRpYUVsLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdWJWaWV3ID0gdGhpcy5jcmVhdGVTdWJWaWV3KG1lZGlhRWwsIG9wdGlvbnMpO1xuXG4gICAgICAgIHZhciAkYmcgPSB0aGlzLnN1YlZpZXcuZmluZCgnZGl2LmJhY2tncm91bmQnKTtcblxuICAgICAgICBpZiAoTW9kZXJuaXpyLnRvdWNoKVxuICAgICAgICB7XG4gICAgICAgICAgICAkYmcub25lKFwidGFwXCIsIHRoaXMuY2xvc2VTdWJWaWV3LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgJGJnLm9uZShcImNsaWNrXCIsIHRoaXMuY2xvc2VTdWJWaWV3LmJpbmQodGhpcykpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdWJWaWV3LmFkZENsYXNzKCdtZWRpYS1pdGVtLXN1YnZpZXcnKTtcblxuICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5zdWJWaWV3LmZpbmQoJy5jb250ZW50LWN0cicpO1xuXG4gICAgICAgIHRoaXMuc3ViVmlldy5jc3Moe1xuICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICB0b3A6IG1lZGlhRWwucG9zaXRpb24oKS50b3ArJ3B4JyxcbiAgICAgICAgICAgIGxlZnQ6IG1lZGlhRWwub2Zmc2V0KCkubGVmdCsncHgnLFxuICAgICAgICAgICAgaGVpZ2h0OiBtZWRpYUVsLmhlaWdodCgpLFxuICAgICAgICAgICAgd2lkdGg6IG1lZGlhRWwud2lkdGgoKVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLnN1YlZpZXcuYXBwZW5kVG8odGhpcy4kYWN0aXZlSXRlbUNvbnRhaW5lcik7XG5cbiAgICAgICAgaWYodGhpcy5zdWJWaWV3LmRhdGEoJ3R5cGUnKSA9PSBcInZpZGVvXCIpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMub25XaW5kb3dSZXNpemUoKTtcbiAgICAgICAgICAgIE9tbml0dXJlLm9uVmlkZW9QbGF5KHttZWRpYVRpdGxlOiB0aGlzLnN1YlZpZXcuZGF0YSgnaWQnKX0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5zdWJWaWV3LmRldGFpbFZpZXcuc2hvdygwLjI1LCB0aGlzLnN1YlZpZXcsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgY3NzOlxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lIDogJys9YWN0aXZlJyxcbiAgICAgICAgICAgICAgICAgICAgdG9wICAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdCAgICAgIDogMCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24oKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8oY29udGFpbmVyLCAwLjUsIHtjc3M6e2NsYXNzTmFtZTonKz1hY3RpdmUnfX0pO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICk7XG5cbiAgICAgICAgdGhpcy50dXJuT2ZmQXJyb3dzKCk7XG4gICAgfSxcblxuICAgIGNsb3NlU3ViVmlldzogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgaWYoIXRoaXMuc3ViVmlldylcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICB2YXIgbWVkaWFFbCA9IHRoaXMuc3ViVmlldztcbiAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICB2YXIgb2dFbCA9IG1lZGlhRWwub2dFbDtcblxuICAgICAgICBtZWRpYUVsLmZpbmQoJy5jb250ZW50LWN0cicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICB2YXIgcGFkTGVmdCA9IHBhcnNlSW50KG9nRWwuY3NzKCdwYWRkaW5nLWxlZnQnKSk7XG4gICAgICAgIHZhciBwYWRUb3AgPSBwYXJzZUludChvZ0VsLmNzcygncGFkZGluZy10b3AnKSk7XG5cbiAgICAgICAgbWVkaWFFbC5kZXRhaWxWaWV3LmhpZGUoMC4yNSwgbWVkaWFFbCxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3AgICAgOiBvZ0VsLnBvc2l0aW9uKCkudG9wICsgcGFkVG9wLFxuICAgICAgICAgICAgICAgIGxlZnQgICA6IG9nRWwub2Zmc2V0KCkubGVmdCArIHBhZExlZnQsXG4gICAgICAgICAgICAgICAgd2lkdGggIDogb2dFbC53aWR0aCgpLFxuICAgICAgICAgICAgICAgIGhlaWdodCA6IG9nRWwuaGVpZ2h0KClcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmdW5jdGlvbigpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgbWUuc3ViVmlldy5kZXRhaWxWaWV3LnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIG1lLnN1YlZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgbWUuc3ViVmlldy5kZXRhaWxWaWV3ID0gbnVsbDtcbiAgICAgICAgICAgICAgICBtZS5zdWJWaWV3ID0gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgKTtcblxuICAgICAgICB0aGlzLmRldGVjdEFuZFRvZ2dsZUFycm93cyh0aGlzLmdldExlZnRQZXJjZW50YWdlKCksIHRydWUpO1xuICAgIH0sXG5cbiAgICBzd2FwU3ViVmlldzogZnVuY3Rpb24obmV3Vmlldywgb3B0aW9ucylcbiAgICB7XG4gICAgICAgIGlmKHRoaXMuc3ViVmlldy5kYXRhKCdpZCcpID09IG5ld1ZpZXcuZGF0YSgnaWQnKSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGhpcy5zdWJWaWV3LmZpbmQoXCIuY29udGVudC1jdHJcIikuZGF0YShcInR5cGVcIikgPT0gXCJnYWxsZXJ5XCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmRldGFpbFZpZXcuc2hvd0l0ZW0ob3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbmV3U3ViVmlldyA9IHRoaXMuY3JlYXRlU3ViVmlldyhuZXdWaWV3LCBvcHRpb25zKTtcblxuICAgICAgICB2YXIgd2luZG93V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuICAgICAgICAvLyBhbmltYXRlIG5ldyB2aWV3IGluIGZyb20gbGVmdCBvciByaWdodFxuICAgICAgICB2YXIgbmV3TGVmdCA9ICh0aGlzLnN1YlZpZXcub2dFbC5pbmRleCgpID4gbmV3U3ViVmlldy5vZ0VsLmluZGV4KCkpID8gLXdpbmRvd1dpZHRoOiB3aW5kb3dXaWR0aDtcblxuICAgICAgICBuZXdTdWJWaWV3LmFkZENsYXNzKCdhY3RpdmUgbWVkaWEtaXRlbS1zdWJ2aWV3Jyk7XG4gICAgICAgIG5ld1N1YlZpZXcuZmluZCgnLmNvbnRlbnQtY3RyJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIG5ld1N1YlZpZXcuY3NzKHsncG9zaXRpb24nIDogJ2Fic29sdXRlJywgJ3RvcCcgOiAnMHB4JywgJ2xlZnQnOiBuZXdMZWZ0KydweCd9KTtcblxuICAgICAgICBuZXdTdWJWaWV3LmFwcGVuZFRvKFwiLm1lZGlhLWN0clwiKTtcblxuICAgICAgICBUd2VlbkxpdGUudG8obmV3U3ViVmlldywgMC41LCB7XG4gICAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAvLyBraWxsIG9sZCBzdWJ2aWV3IGFuZCBhc3NpZ24gdGhpcy5zdWJ2aWV3IHRvIG5ld1N1YlZpZXdcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmRldGFpbFZpZXcgPSBudWxsO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9IG51bGw7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gbmV3U3ViVmlldztcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9KTtcbiAgICB9LFxuXG4gICAgY3JlYXRlU3ViVmlldzogZnVuY3Rpb24ob3JpZ2luYWxWaWV3LCBvcHRpb25zKVxuICAgIHtcbiAgICAgICAgdmFyIG5ld1ZpZXcgPSBvcmlnaW5hbFZpZXcuY2xvbmUoZmFsc2UpO1xuXG4gICAgICAgIHZhciBtZWRpYURhdGEgPSB0aGlzLm1vZGVsLml0ZW1zW29yaWdpbmFsVmlldy5pbmRleCgpXTtcblxuICAgICAgICB2YXIgY29udGFpbmVyID0gbmV3Vmlldy5maW5kKCcuY29udGVudC1jdHInKTtcblxuICAgICAgICB2YXIgbWVkaWFUeXBlID0gbWVkaWFEYXRhLnR5cGU7XG5cbiAgICAgICAgLy8gY3JlYXRlIHRoZSBuZXcgZGV0YWlsIHZpZXcgYW5kIGFkZCBpdCB0byBvdXIgc3ViVmlldydzIGNvbnRhaW5lclxuICAgICAgICBuZXdWaWV3LmRldGFpbFZpZXcgPSBuZXcgdGhpcy5kZXRhaWxWaWV3c1ttZWRpYVR5cGVdKFxuICAgICAgICB7XG4gICAgICAgICAgICBtb2RlbCA6IG1lZGlhRGF0YVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgICB2aWRlb1JlYWR5Q2FsbGJhY2s6IGZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGV2ZW50LnRhcmdldC5wbGF5VmlkZW8oKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB2aWRlb0ZpbmlzaGVkQ2FsbGJhY2sgOiB0aGlzLmNsb3NlU3ViVmlldy5iaW5kKHRoaXMpXG4gICAgICAgIH0pO1xuICAgICAgICBuZXdWaWV3LmRldGFpbFZpZXcucmVuZGVyKCkuJGVsLmFwcGVuZFRvKGNvbnRhaW5lcik7XG4gICAgICAgIG5ld1ZpZXcuZGF0YSgndHlwZScsIG1lZGlhVHlwZSk7XG5cbiAgICAgICAgbmV3Vmlldy5vZ0VsID0gb3JpZ2luYWxWaWV3O1xuICAgICAgICBuZXdWaWV3LmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcblxuICAgICAgICBpZihtZWRpYURhdGEuaW1hZ2VzKVxuICAgICAgICB7XG4gICAgICAgICAgICBuZXdWaWV3LmRldGFpbFZpZXcuc2hvd0l0ZW0ob3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ld1ZpZXc7XG4gICAgfSxcbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBBcnJvdy9wYWdpbmF0aW9uIFN0dWZmIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICBnZXRMZWZ0UGVyY2VudGFnZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgIHZhciBsZWZ0UGl4ZWxzID0gcGFyc2VJbnQodGhpcy4kbWVkaWFDb250YWluZXIuY3NzKCdsZWZ0JykpO1xuICAgICAgICB2YXIgc2VjdGlvbldpZHRoID0gdGhpcy4kZWwud2lkdGgoKTtcblxuICAgICAgICByZXR1cm4gTWF0aC5yb3VuZCgxMDAgKiBsZWZ0UGl4ZWxzL3NlY3Rpb25XaWR0aCk7XG4gICAgfSxcbiAgICBuZXh0UGFnZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgIHZhciBsZWZ0UGVyY2VudGFnZSA9IHRoaXMuZ2V0TGVmdFBlcmNlbnRhZ2UoKTtcbiAgICAgICAgdmFyIG1pbkxlZnQgPSAtKHRoaXMubWVkaWFDb250YWluZXJXaWR0aCAtIDEwMCk7XG5cbiAgICAgICAgLy8gaWYgd2UgYXJlIGFsbCB0aGUgd2F5IHRvIHRoZSByaWdodFxuICAgICAgICBpZihsZWZ0UGVyY2VudGFnZSA9PT0gbWluTGVmdCkge1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGF0TGVhc3RPbmVNb3JlUGFnZSA9IE1hdGguYWJzKG1pbkxlZnQgLSBsZWZ0UGVyY2VudGFnZSkvMTAwID49IDE7XG4gICAgICAgIHZhciBuZXdMZWZ0ID0gYXRMZWFzdE9uZU1vcmVQYWdlID8gbGVmdFBlcmNlbnRhZ2UgLSAxMDAgOiBtaW5MZWZ0O1xuXG4gICAgICAgIHRoaXMuYW5pbWF0ZVBhZ2VzKG5ld0xlZnQsIGxlZnRQZXJjZW50YWdlKTtcblxuICAgICAgICB0aGlzLmRldGVjdEFuZFRvZ2dsZUFycm93cyhuZXdMZWZ0KTtcbiAgICB9LFxuICAgIHByZXZQYWdlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgdmFyIGxlZnRQZXJjZW50YWdlID0gdGhpcy5nZXRMZWZ0UGVyY2VudGFnZSgpO1xuXG4gICAgICAgIGlmKGxlZnRQZXJjZW50YWdlID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaXNMYXN0UGFnZSA9IGxlZnRQZXJjZW50YWdlICUgLTEwMCAhPT0gMDtcbiAgICAgICAgdmFyIG5ld0xlZnQgPSBpc0xhc3RQYWdlID8gTWF0aC5mbG9vcihsZWZ0UGVyY2VudGFnZS8tMTAwKSAqIC0xMDAgOiBsZWZ0UGVyY2VudGFnZSArIDEwMDtcblxuICAgICAgICB0aGlzLmFuaW1hdGVQYWdlcyhuZXdMZWZ0LCBsZWZ0UGVyY2VudGFnZSk7XG5cbiAgICAgICAgdGhpcy5kZXRlY3RBbmRUb2dnbGVBcnJvd3MobmV3TGVmdCk7XG4gICAgfSxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT0gQW5pbWF0ZSBQYWdlcyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIGFuaW1hdGVQYWdlczogZnVuY3Rpb24obmV3TGVmdCwgbGVmdFBlcmNlbnRhZ2UpIHtcbiAgICAgICAgdmFyIGFuaW1hdGlvblRpbWVSYXRpbyA9IE1hdGguYWJzKChuZXdMZWZ0IC0gbGVmdFBlcmNlbnRhZ2UpLzEwMCk7XG4gICAgICAgIHZhciBhbmltYXRpb25UaW1lID0gMC40ICogYW5pbWF0aW9uVGltZVJhdGlvO1xuXG4gICAgICAgIFR3ZWVuTGl0ZS50byh0aGlzLiRtZWRpYUNvbnRhaW5lciwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgbGVmdDogbmV3TGVmdCArICclJyxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbkNvbXBsZXRlU2NvcGU6IHRoaXNcbiAgICAgICAgfSk7XG4gICAgfSxcblxuXG4gICAgZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzOiBmdW5jdGlvbihsZWZ0LCBzdWJWaWV3T3ZlcnJpZGUpIHtcbiAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgaWYodGhpcy5zdWJWaWV3ICYmICFzdWJWaWV3T3ZlcnJpZGUpIHtcbiAgICAgICAgICAgIHRoaXMudHVybk9mZkFycm93cygpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoXy5pc1VuZGVmaW5lZChsZWZ0KSkgbGVmdCA9IHRoaXMuZ2V0TGVmdFBlcmNlbnRhZ2UoKTtcblxuICAgICAgICB2YXIgbWluTGVmdCA9IC0odGhpcy5tZWRpYUNvbnRhaW5lcldpZHRoIC0gMTAwKTtcblxuICAgICAgICB0aGlzLiRsZWZ0QXJyb3cudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGxlZnQgIT09IDApO1xuICAgICAgICB0aGlzLiRyaWdodEFycm93LnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBsZWZ0ICE9PSBtaW5MZWZ0KTtcbiAgICB9LFxuICAgIHR1cm5PZmZBcnJvd3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICB0aGlzLiRsZWZ0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLiRyaWdodEFycm93LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICB9LFxuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBFdmVudCBMaXN0ZW5lcnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBvbk5leHQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmKHRoaXMuc3ViVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5uZXh0UGFnZSgpO1xuICAgIH0sXG5cbiAgICBvblByZXY6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIGlmKHRoaXMuc3ViVmlldyB8fCB0aGlzLmlzQW5pbWF0aW5nKSByZXR1cm47XG5cbiAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgdGhpcy5wcmV2UGFnZSgpO1xuICAgIH0sXG5cbiAgICBvbkNob29zZTogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIGlmKCQoZS5jdXJyZW50VGFyZ2V0KS5pbmRleCgpID09IDApXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMuc3ViVmlldylcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1lZGlhRWwgPSAkKGUuY3VycmVudFRhcmdldCk7XG4gICAgICAgIHRoaXMuc2hvd1N1YlZpZXcobWVkaWFFbC5hdHRyKFwiZGF0YS1pZFwiKSk7XG4gICAgfSxcblxuICAgIG9uQ2xvc2U6IGZ1bmN0aW9uKGUpXG4gICAge1xuICAgICAgICB0aGlzLmNsb3NlU3ViVmlldygpO1xuICAgIH0sXG4gICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IHRoaXMuc3ViVmlldy5vZ0VsLmluZGV4KCk7XG5cbiAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG5cbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG5cbiAgICAgICAgdmFyIGl0ZW1EYXRhID0gdGhpcy5tb2RlbC5pdGVtc1tpdGVtSW5kZXhdO1xuXG4gICAgICAgIHZhciBzb2NpYWxTaGFyZTtcblxuICAgICAgICBpZihpdGVtRGF0YS50eXBlICE9IFwiZ2FsbGVyeVwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBzb2NpYWxTaGFyZSA9IGl0ZW1EYXRhLnNvY2lhbFNoYXJlW3R5cGVdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgICAgc29jaWFsU2hhcmUgPSBpdGVtRGF0YS5pbWFnZXNbdGhpcy5zdWJWaWV3LmRldGFpbFZpZXcuaXRlbU5hbWVdLnNvY2lhbFNoYXJlW3R5cGVdXG4gICAgICAgIH1cblxuICAgICAgICBpZih0eXBlb2YgdGhpcy5zb2NpYWxbdHlwZV0gPT09ICdmdW5jdGlvbicgJiYgc29jaWFsU2hhcmUpIHtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWxbdHlwZV0oe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzb2NpYWxTaGFyZS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc29jaWFsU2hhcmUuY29weSxcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1lZGlhVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3N0b3J5Lmhic1wiKTtcbnZhciBTY3JvbGxCYXJWaWV3ID0gcmVxdWlyZShcIi4uL1Njcm9sbEJhclZpZXcuanNcIik7XG52YXIgSGVscGVyRnVuY3MgPSByZXF1aXJlKFwiLi4vaGVscGVycy9IZWxwZXJzLmpzXCIpO1xuXG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcblxudmFyIFN0b3J5VmlldyA9IFZpZXcuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgZXZlbnRzIDoge1xuICAgICAgICAgICAgXCJjbGljayAucmVhZC1tb3JlXCIgICAgICAgICAgOiBcIm9uUmVhZE1vcmVDbGlja2VkXCIsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5yZWFkLW1vcmVcIiAgICAgICA6IFwib25SZWFkTW9yZUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwiY2xpY2sgLmJpby1saW5rLW11cnBoeVwiICAgIDogXCJvbk11cnBoeUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLmJpby1saW5rLW11cnBoeVwiIDogXCJvbk11cnBoeUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwiY2xpY2sgLmJpby1saW5rLWtyYW1lclwiICAgIDogXCJvbktyYW1lckNsaWNrZWRcIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLmJpby1saW5rLWtyYW1lclwiIDogXCJvbktyYW1lckNsaWNrZWRcIixcbiAgICAgICAgICAgIFwiY2xpY2sgLmNsb3NlXCIgICAgICAgICAgICAgIDogXCJjbG9zZVN1YlZpZXdcIixcblxuICAgICAgICAgICAgJ2NsaWNrIGRpdi5zb2NpYWwgPiBhJzogJ29uQ2xpY2tTb2NpYWwnLFxuICAgICAgICAgICAgJ3RvdWNoZW5kIGRpdi5zb2NpYWwgPiBhJzogJ29uQ2xpY2tTb2NpYWwnXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIHRoaXMucmVhZE1vcmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgdGhpcy5pc1ZpZGVvQ29tcGxldGUgPSBmYWxzZTtcblxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmJlZm9yZUFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLCBwYWdlcywgaW5kZXg7XG5cbiAgICAgICAgICAgIHBhZ2VzID0gWydtYWluQ29weScsICdyeWFuLW11cnBoeScsICdsYXJyeS1rcmFtZXInXTtcblxuICAgICAgICAgICAgdGhpc1tcInJ5YW4tbXVycGh5XCJdID0gdGhpcy4kKCcuYmlvLW11cnBoeScpO1xuICAgICAgICAgICAgdGhpc1tcImxhcnJ5LWtyYW1lclwiXSA9IHRoaXMuJCgnLmJpby1rcmFtZXInKTtcblxuICAgICAgICAgICAgdGhpcy5zdG9yeSA9IHRoaXMuJCgnLnN0b3J5Jyk7XG5cbiAgICAgICAgICAgIHRoaXMubW9yZUNvcHlQYXJhZ3JhcGhzID0gdGhpcy5zdG9yeS5maW5kKCcubW9yZScpO1xuXG4gICAgICAgICAgICB0aGlzLm11cnBoeVBhZ2VzID0gdGhpcy4kKCcuYmlvLXBhZ2UubXVycGh5JykuY2hpbGRyZW4oKTtcblxuICAgICAgICAgICAgdGhpcy5iZ1ZpZCA9IHRoaXMuJCgndmlkZW8nKTtcbiAgICAgICAgICAgIHRoaXMuYmdJbWcgPSB0aGlzLiQoJy52aWRlb0ltYWdlJyk7XG5cbiAgICAgICAgICAgIGlmICghSGVscGVyRnVuY3MuRGV2aWNlLmlzTW9iaWxlKCkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSB0byBydW4gdGhpcyBjb2RlIGZvciBib3RoIGJpb3MgaW4gdGhlIHN0b3J5IHNlY3Rpb25cbiAgICAgICAgICAgICAgICAvLyBUbyBhdm9pZCBkdXBsaWNhdGluZywganVzdCBsb29wIG9uIGFuIGFycmF5IG9mIHRoZSBiaW8gbmFtZXNcbiAgICAgICAgICAgICAgICBmb3IoaW5kZXggaW4gcGFnZXMpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXBhZ2VzLmhhc093blByb3BlcnR5KGluZGV4KSkgY29udGludWU7XG5cbiAgICAgICAgICAgICAgICAgICAgKGZ1bmN0aW9uKHBhZ2UpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcGFnZSArICctc2Nyb2xsYmFydmlldyddID0gbmV3IFNjcm9sbEJhclZpZXcoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aWV3TmFtZSAgICAgICAgICAgIDogcGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZJWE1FIHF1aWNrIGFuZCBkaXJ0eSwgcmF0aGVyIHRoYW4gY2hhbmdpbmcgdGhlIHBhZ2VzIGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lciAgICAgICAgICAgOiBwYWdlID09PSAnbWFpbkNvcHknID8gc2VsZi5zdG9yeSA6IHRoaXNbcGFnZV0uZmluZCgnLmJpby1wYWdlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuaW1hdGVTY3JvbGxIYW5kbGUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW5pbWF0ZU9wYWNpdHkgICAgICA6IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmVjYWxjdWxhdGUgdGhlIG9mZnNldCBhZnRlciB0aGUgYW5pbWF0aW9uIGZpbmlzaGVzIGJlY2F1c2UgaXRzIHBvc2l0aW9uIHdpbGwgaGF2ZSBjaGFuZ2VkLlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1twYWdlICsgJy1zY3JvbGxiYXJ2aWV3J10uY29udGFpbmVyLm9uKCdzY3JvbGwnLCBmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKHBhZ2UgKyAnLlNlY3Rpb24uRmluYWxQb3NpdGlvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBlcmNlbnQgOiAodGhpcy5zY3JvbGxUb3AgLyAoSGVscGVyRnVuY3MuRWxlbWVudC5jb250ZW50SGVpZ2h0KHRoaXMpIC0gdGhpcy5vZmZzZXRIZWlnaHQgKyAoIHNlbGZbcGFnZSArICctc2Nyb2xsYmFydmlldyddLmhhbmRsZS5jbGllbnRIZWlnaHQgLyAyICkgKSkgKiAxMDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlICsgJy5TY3JvbGxCYXIuVXBkYXRlUG9zaXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2Nyb2xsaW5nLmJpbmQodGhpc1twYWdlICsgJy1zY3JvbGxiYXJ2aWV3J10sIHRoaXNbcGFnZSArICctc2Nyb2xsYmFydmlldyddLmNvbnRhaW5lciksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSkuY2FsbCh0aGlzLCBwYWdlc1tpbmRleF0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXNbJ21haW5Db3B5LXNjcm9sbGJhcnZpZXcnXS5jb250YWluZXIucGFyZW50KCkub24oJ3dlYmtpdFRyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQgb1RyYW5zaXRpb25FbmQgbXNUcmFuc2l0aW9uRW5kIHRyYW5zaXRpb25lbmQnLCBmdW5jdGlvbigpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzZWxmWydtYWluQ29weS1zY3JvbGxiYXJ2aWV3J10uc2V0U2Nyb2xsYmFyVmlzaWJpbGl0eSgpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmWydtYWluQ29weS1zY3JvbGxiYXJ2aWV3J10uY2FsY3VsYXRlT2Zmc2V0KCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYmdWaWQub24oXCJlbmRlZFwiLCB0aGlzLm9uVmlkZW9Db21wbGV0ZS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0U29jaWFsRnVuY3Rpb25zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVNjcm9sbGluZzogZnVuY3Rpb24oY29udGFpbmVyLCBlKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcGVyY2VudCA9IGUucGVyY2VudC8xMDA7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AoICggKCBIZWxwZXJGdW5jcy5FbGVtZW50LmNvbnRlbnRIZWlnaHQoY29udGFpbmVyWzBdICkgLSBjb250YWluZXIub3V0ZXJIZWlnaHQodHJ1ZSkgKyAodGhpcy5oYW5kbGUuY2xpZW50SGVpZ2h0IC8gMikpICogcGVyY2VudCkgKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICAgICAgICB0aGlzW1wicnlhbi1tdXJwaHlcIl0uZmluZCgnLmNvcHknKS5hcHBlbmQodGhpc1sncnlhbi1tdXJwaHktc2Nyb2xsYmFydmlldyddLnJlbmRlcih0cnVlKS5lbCk7XG4gICAgICAgICAgICB0aGlzW1wibGFycnkta3JhbWVyXCJdLmZpbmQoJy5jb3B5JykuYXBwZW5kKHRoaXNbJ2xhcnJ5LWtyYW1lci1zY3JvbGxiYXJ2aWV3J10ucmVuZGVyKHRydWUpLmVsKTtcblxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXNbJ3J5YW4tbXVycGh5LXNjcm9sbGJhcnZpZXcnXS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHRoaXNbJ2xhcnJ5LWtyYW1lci1zY3JvbGxiYXJ2aWV3J10ucmVtb3ZlKCk7XG4gICAgICAgICAgICB0aGlzWydtYWluQ29weS1zY3JvbGxiYXJ2aWV3J10ucmVtb3ZlKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFuZGxlUm91dGUgOiBmdW5jdGlvbiAoc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGVhbnVwXG4gICAgICAgICAgICBpZiAoIXN1YnNlY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy90aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFkTW9yZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5pc1ZpZGVvQ29tcGxldGUgPT0gZmFsc2UpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmJnVmlkWzBdLnBsYXkoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoc3Vic2VjdGlvbiwgZGV0YWlsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlY3Rpb25BY3RpdmF0ZSA6IGZ1bmN0aW9uIChlbClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKGVsWzBdID09IHRoaXMuZWwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dTdWJWaWV3IDogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc2Nyb2xsYmFyVmlzaWJpbGl0eUNhbGxiYWNrO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIodmlld05hbWUsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSB0aGlzW3ZpZXdOYW1lXTtcblxuICAgICAgICAgICAgaWYgKHZpZXdOYW1lID09ICdyeWFuLW11cnBoeScpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc2Nyb2xsYmFyVmlzaWJpbGl0eUNhbGxiYWNrID0gdGhpc1sncnlhbi1tdXJwaHktc2Nyb2xsYmFydmlldyddLnNldFNjcm9sbGJhclZpc2liaWxpdHkuYmluZCh0aGlzWydyeWFuLW11cnBoeS1zY3JvbGxiYXJ2aWV3J10pO1xuICAgICAgICAgICAgICAgIC8vIGFuaW1hdGUgaW4gZnJvbSB0aGUgbGVmdFxuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jc3MoXCJsZWZ0XCIsIC10aGlzLnN1YlZpZXcud2lkdGgoKSArIFwicHhcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAnbGFycnkta3JhbWVyJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBzY3JvbGxiYXJWaXNpYmlsaXR5Q2FsbGJhY2sgPSB0aGlzWydsYXJyeS1rcmFtZXItc2Nyb2xsYmFydmlldyddLnNldFNjcm9sbGJhclZpc2liaWxpdHkuYmluZCh0aGlzWydsYXJyeS1rcmFtZXItc2Nyb2xsYmFydmlldyddKTtcbiAgICAgICAgICAgICAgICAvLyBhbmltYXRlIGluIGZyb20gdGhlIHJpZ2h0XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmNzcyhcImxlZnRcIiwgJCh3aW5kb3cpLndpZHRoKCkgKyBcInB4XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBUaGlzIGNhbGN1bGF0ZXMgdGhlIHRvcCBvZiB0aGUgc2Nyb2xsYWJsZSBjb250ZW50IGNvcnJlY3RseVxuICAgICAgICAgICAgLy8gSUYgaXQgZmluaXNoZXMgYmVmb3JlIFR3ZWVuJ3Mgb25Db21wbGV0ZSBmaXJlcy5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcih2aWV3TmFtZSArIFwiLlNlY3Rpb24uRmluYWxQb3NpdGlvblwiLCB7cGVyY2VudDogdW5kZWZpbmVkfSk7XG5cbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG5cbiAgICAgICAgICAgIC8vIHRyaWdnZXIgc2xpZGUgYW5pbWF0aW9uXG4gICAgICAgICAgICBUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LCAwLjUsIHtcbiAgICAgICAgICAgICAgICBjc3MgIDoge1xuICAgICAgICAgICAgICAgICAgICAnbGVmdCcgOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlIDogUG93ZXIxLmVhc2VPdXQsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbGJhclZpc2liaWxpdHlDYWxsYmFjayAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxiYXJWaXNpYmlsaXR5Q2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsb3NlU3ViVmlldyA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkTW9yZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlUmVhZE1vcmUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LCAwLjUsIHtcbiAgICAgICAgICAgICAgICBjc3MgIDoge1xuICAgICAgICAgICAgICAgICAgICAnbGVmdCcgOiB0aGlzLnN1YlZpZXcgPT09IHRoaXNbJ3J5YW4tbXVycGh5J10gPyAnLTEwMCUnIDogJzEwMCUnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlIDogUG93ZXIxLmVhc2VPdXQsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogdGhpcy5kZXN0cm95U3ViVmlldy5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBkZXN0cm95U3ViVmlldzogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcuY3NzKFwiZGlzcGxheVwiLCBcIlwiKTtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9IG51bGw7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN1YlZpZXcgPT09IHRoaXNbJ3J5YW4tbXVycGh5J10pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5tdXJwaHlTbGlkZXIuZGVzdHJveVNsaWRlcigpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdWJWaWV3ID09PSB0aGlzWydsYXJyeS1rcmFtZXInXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmtyYW1lclNsaWRlci5kZXN0cm95U2xpZGVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqXG4gICAgICAgICAqIEBwYXJhbSB7ZXZlbnR9IFtlXVxuICAgICAgICAgKi9cbiAgICAgICAgb3BlblJlYWRNb3JlIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdyZWFkLW1vcmUnKTtcbiAgICAgICAgICAgIHRoaXMucmVhZE1vcmUgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5zdG9yeS5wYXJlbnQoKS5hZGRDbGFzcygnbW9yZScpO1xuICAgICAgICAgICAgdGhpcy5tb3JlQ29weVBhcmFncmFwaHMuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5zdG9yeS5wYXJlbnQoKS5hcHBlbmQodGhpc1snbWFpbkNvcHktc2Nyb2xsYmFydmlldyddLnJlbmRlcih0cnVlKS5lbCk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3Lk9wZW5lZFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICpcbiAgICAgICAgICogQHBhcmFtIHtldmVudH0gW2VdXG4gICAgICAgICAqL1xuICAgICAgICBjbG9zZVJlYWRNb3JlIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBzY3JvbGxiYXIgPSB0aGlzWydtYWluQ29weS1zY3JvbGxiYXJ2aWV3J107XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygncmVhZC1tb3JlJyk7XG4gICAgICAgICAgICB0aGlzLnJlYWRNb3JlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN0b3J5LnBhcmVudCgpLnJlbW92ZUNsYXNzKCdtb3JlJyk7XG4gICAgICAgICAgICB0aGlzLm1vcmVDb3B5UGFyYWdyYXBocy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBzY3JvbGxiYXIuc2V0U2Nyb2xsYmFyVmlzaWJpbGl0eSgwLCBzY3JvbGxiYXIucmVtb3ZlLmJpbmQoc2Nyb2xsYmFyKSk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3LkNsb3NlZFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblJlYWRNb3JlQ2xpY2tlZCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiRlbC5oYXNDbGFzcygncmVhZC1tb3JlJykpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuUmVhZE1vcmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvbk11cnBoeUNsaWNrZWQgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyhcInJ5YW4tbXVycGh5XCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uS3JhbWVyQ2xpY2tlZCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KFwibGFycnkta3JhbWVyXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uVmlkZW9Db21wbGV0ZSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmlzVmlkZW9Db21wbGV0ZSA9IHRydWU7XG5cbiAgICAgICAgICAgIHRoaXMub25XaW5kb3dSZXNpemUoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbldpbmRvd1Jlc2l6ZSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuYmdWaWQgfHwgIXRoaXMuYmdWaWQubGVuZ3RoKSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciB3aW5XID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgICAgICAgICB2YXIgd2luSCA9ICQod2luZG93KS5oZWlnaHQoKTtcblxuXG4gICAgICAgICAgICB0aGlzLmJnVmlkLmNzcyhcIndpZHRoXCIsIFwiYXV0b1wiKTtcbiAgICAgICAgICAgIHRoaXMuYmdWaWQuY3NzKFwiaGVpZ2h0XCIsIHdpbkgpO1xuXG5cbiAgICAgICAgICAgIC8vIGNlbnRlciB0aGUgdmlkZW9cbiAgICAgICAgICAgIHRoaXMuYmdWaWQuY3NzKFwibGVmdFwiLCAod2luVy8yIC0gKHRoaXMuYmdWaWQud2lkdGgoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgICAgICB0aGlzLmJnVmlkLmNzcyhcInRvcFwiLCAod2luSC8yIC0gKHRoaXMuYmdWaWQuaGVpZ2h0KCkgLyAyKSkgKyBcInB4XCIpO1xuXG5cbiAgICAgICAgIC8vICAgdGhpcy5iZ0ltZy5jc3MoXCJsZWZ0XCIsIChoYWxmV2luVyAtICh0aGlzLmJnSW1nLndpZHRoKCkgLyAyKSkgKyBcInB4XCIpO1xuICAgICAgICAgIC8vICB0aGlzLmJnSW1nLmNzcyhcInRvcFwiLCAoaGFsZldpbkggLSAodGhpcy5iZ0ltZy5oZWlnaHQoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xpY2tTb2NpYWw6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG4gICAgICAgICAgICB2YXIgdHlwZSA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hhcmUnKTtcbiAgICAgICAgICAgIHZhciBzb2NpYWxJZDtcbiAgICAgICAgICAgIGlmKHRoaXMuc3ViVmlldy5oYXNDbGFzcygnYmlvLW11cnBoeScpKSB7XG4gICAgICAgICAgICAgICAgc29jaWFsSWQgPSAncnlhbk11cnBoeSc7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNvY2lhbElkID0gJ2xhcnJ5S3JhbWVyJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzb2NpYWxTaGFyZSA9IHRoaXMubW9kZWwuc29jaWFsQ29weVtzb2NpYWxJZF07XG5cbiAgICAgICAgICAgIHRoaXMuc29jaWFsW3R5cGVdKHtcbiAgICAgICAgICAgICAgICBwaWN0dXJlOiBzb2NpYWxTaGFyZS50aHVtYixcbiAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNvY2lhbFNoYXJlW3R5cGVdLFxuICAgICAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gU3RvcnlWaWV3O1xuIiwidmFyIEhvcml6b250YWxTY3JvbGxWaWV3ID0gcmVxdWlyZShcIi4uL0hvcml6b250YWxTY3JvbGxWaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy90aW1lbGluZS5oYnNcIik7XG5cbnZhciBUaW1lbGluZVZpZXcgPSBIb3Jpem9udGFsU2Nyb2xsVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBJbml0aWFsaXphdGlvbiBTdHVmZiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5leHRlbmQoe30sIEhvcml6b250YWxTY3JvbGxWaWV3LnByb3RvdHlwZS5ldmVudHMsIHtcbiAgICAgICAgICAgICAgICAnY2xpY2sgLmRhdGUnIDogJ29uU2VsZWN0U3ViRXZlbnQnLFxuICAgICAgICAgICAgICAgICd0YXAgLmRhdGUnIDogJ29uU2VsZWN0U3ViRXZlbnQnLFxuICAgICAgICAgICAgICAgICd0YXAgLml0ZW0nIDogJ29uQ2hvb3NlSXRlbSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmluaXREcmFnZ2FibGUodGhpcy4kaXRlbXMubGVuZ3RoLCB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYmVmb3JlQWN0aXZlJywgXy50aHJvdHRsZSh0aGlzLm9uU2VjdGlvbkJlZm9yZUFjdGl2ZSwgMTAwMCwge3RyYWlsaW5nOiBmYWxzZX0pLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYWZ0ZXJBY3RpdmUnLCBfLnRocm90dGxlKHRoaXMub25TZWN0aW9uQWZ0ZXJBY3RpdmUsIDEwMDAsIHt0cmFpbGluZzogZmFsc2V9KSwgdGhpcyk7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ2tleXByZXNzLnJpZ2h0QXJyb3cnLCB0aGlzLm9uUmlnaHRBcnJvd0tleSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdrZXlwcmVzcy5sZWZ0QXJyb3cnLCB0aGlzLm9uTGVmdEFycm93S2V5LCB0aGlzKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRKcXVlcnlWYXJpYWJsZXM6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgb25TZWN0aW9uQmVmb3JlQWN0aXZlOiBmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgaWYgKGVsWzBdID09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgICAgICBpZih0aGlzLnJvb3RlZEl0ZW0gIT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbmltYXRlVG9JdGVtKDAsIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblNlY3Rpb25BZnRlckFjdGl2ZTogZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgICAgICAgICBpZihlbFswXSA9PSB0aGlzLmVsKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FmdGVyIGFjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmRldGVjdEFuZFRvZ2dsZUFycm93cygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gRHJhZ2dhYmxlIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgaW5pdERyYWdnYWJsZSAgICAgICAgICAgOiBmdW5jdGlvbiAobnVtSXRlbXMsICRkcmFnZ2FibGVEaXYpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBzdGFydFNlY29uZHMsIHN0YXJ0WCwgZW5kU2Vjb25kcywgZW5kWDtcblxuICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkZHJhZ2dhYmxlRGl2LnBhcmVudCgpO1xuXG4gICAgICAgICAgICBEcmFnZ2FibGUuY3JlYXRlKCRkcmFnZ2FibGVEaXYsIHtcbiAgICAgICAgICAgICAgICB0eXBlICAgICAgICAgICA6IFwieFwiLFxuICAgICAgICAgICAgICAgIGVkZ2VSZXNpc3RhbmNlIDogMC43LFxuICAgICAgICAgICAgICAgIGJvdW5kczogJHBhcmVudCxcbiAgICAgICAgICAgICAgICB0aHJvd1Byb3BzICAgICA6IHRydWUsXG4gICAgICAgICAgICAgICAgekluZGV4Qm9vc3QgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB0cmlnZ2VyOiAkcGFyZW50LFxuICAgICAgICAgICAgICAgIGN1cnNvciAgICAgICAgIDogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICAgICAgb25EcmFnRW5kICAgICAgOiBmdW5jdGlvbiAoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgZW5kWCA9ICRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLng7XG4gICAgICAgICAgICAgICAgICAgIGVuZFNlY29uZHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG5cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlQW5kU25hcCgoZW5kWCAtIHN0YXJ0WCkgLyAoZW5kU2Vjb25kcyAtIHN0YXJ0U2Vjb25kcyksIG51bUl0ZW1zLCAkZHJhZ2dhYmxlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNuYXBUb05lYXJlc3RJdGVtLmJpbmQodGhpcywgbnVtSXRlbXMpXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0ICAgIDogZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9ICRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLng7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U2Vjb25kcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWNlbGVyYXRlQW5kU25hcDogZnVuY3Rpb24gKHZlbG9jaXR5LCBudW1JdGVtcywgJGRyYWdnYWJsZURpdikge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSAodmVsb2NpdHkgPiAzMDAwKSA/IDMwMDAgOiAodmVsb2NpdHkgPCAtMzAwMCkgPyAtMzAwMCA6IHZlbG9jaXR5O1xuXG4gICAgICAgICAgICB2YXIgcmVzaXN0YW5jZSA9IDY7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNiAqIE1hdGguYWJzKHZlbG9jaXR5KSAvIDMwMDA7XG5cbiAgICAgICAgICAgIHZhciB4VG8gPSAkZHJhZ2dhYmxlRGl2WzBdLl9nc1RyYW5zZm9ybS54ICsgdmVsb2NpdHkgLyByZXNpc3RhbmNlO1xuICAgICAgICAgICAgeFRvID0gTWF0aC5taW4oeFRvLCAwKTtcblxuICAgICAgICAgICAgdmFyIGRpdldpZHRoID0gJGRyYWdnYWJsZURpdi53aWR0aCgpO1xuXG4gICAgICAgICAgICB2YXIgbGFzdExlZnRJdGVtID0gdGhpcy5nZXRMYXN0SXRlbVJvb3RMZWZ0KCk7XG4gICAgICAgICAgICB2YXIgY2xvc2VzdEl0ZW1JbmRleCA9IE1hdGgucm91bmQoKE1hdGguYWJzKHhUbykvZGl2V2lkdGgpICogdGhpcy4kaXRlbXMubGVuZ3RoKTtcblxuICAgICAgICAgICAgaWYoY2xvc2VzdEl0ZW1JbmRleCA+IGxhc3RMZWZ0SXRlbSkge1xuICAgICAgICAgICAgICAgIGNsb3Nlc3RJdGVtSW5kZXggPSB0aGlzLiRpdGVtcy5sZW5ndGgtMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hbmltYXRlVG9JdGVtKGNsb3Nlc3RJdGVtSW5kZXgsIGFuaW1hdGlvblRpbWUsICdDaXJjLmVhc2VPdXQnKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBXaW5kb3cgUmVzaXplIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHJlc2l6ZUFsbEl0ZW1zQ29udGFpbmVyOiBmdW5jdGlvbih3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcmF0aW8gPSA0MjggLyA2MDA7XG4gICAgICAgICAgICB2YXIgY29udGFpbmVyTWluV2lkdGggPSB3aW5kb3dIZWlnaHQgKiByYXRpbyAqIHRoaXMuJGl0ZW1zLmxlbmd0aDtcblxuICAgICAgICAgICAgdGhpcy4kYWxsSXRlbXNDb250YWluZXIuY3NzKHtcbiAgICAgICAgICAgICAgICAnbWluLXdpZHRoJyA6IGNvbnRhaW5lck1pbldpZHRoXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmV0dXJuIGNvbnRhaW5lck1pbldpZHRoO1xuICAgICAgICB9LFxuICAgICAgICBvbldpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgd2lkdGggPSB0aGlzLiR3aW5kb3cud2lkdGgoKTtcbiAgICAgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLiR3aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHZhciBjb250YWluZXJNaW5XaWR0aCA9IHRoaXMuX3N1cGVyKHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IENyZWF0ZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgY3JlYXRlU3ViVmlldzogZnVuY3Rpb24oJHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBuZXdWaWV3ID0gdGhpcy5fc3VwZXIoJHZpZXcpO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5tb2RlbC55ZWFyc1skdmlldy5pbmRleCgpXS5ldmVudHM7XG5cbiAgICAgICAgICAgIHZhciAkdGltZWxpbmVFdmVudHMgPSAkKCc8ZGl2PicsIHtjbGFzczogJ3RpbWVsaW5lLWV2ZW50cyd9KTtcbiAgICAgICAgICAgIHZhciAkZGF0ZXMgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2RhdGVzJ30pO1xuICAgICAgICAgICAgdmFyICRldmVudHMgPSAkKCc8ZGl2PicsIHtjbGFzcyA6ICdldmVudHMnfSk7XG5cbiAgICAgICAgICAgIHZhciAkdW5kZXJsYXkgPSAkKCc8ZGl2PicsIHtjbGFzcyA6ICd1bmRlcmxheSd9KTtcblxuICAgICAgICAgICAgdmFyICR0aW1lbGluZUV2ZW50c0lubmVyID0gJCgnPGRpdj4nLCB7Y2xhc3M6ICdmdWxsLXJlbGF0aXZlJ30pLmFwcGVuZFRvKCR0aW1lbGluZUV2ZW50cyk7XG4gICAgICAgICAgICB2YXIgJGRhdGVzSW5uZXIgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2Z1bGwtcmVsYXRpdmUnfSkuYXBwZW5kVG8oJGRhdGVzKTtcbiAgICAgICAgICAgIHZhciAkZXZlbnRzSW5uZXIgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2Z1bGwtcmVsYXRpdmUnfSkuYXBwZW5kVG8oJGV2ZW50cyk7XG5cbiAgICAgICAgICAgIF8uZWFjaChldmVudHMsIGZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciAkZGF0ZSA9ICQoJzxkaXY+Jywge1xuICAgICAgICAgICAgICAgICAgICBodG1sOiBldmVudC5ldmVudERhdGUsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLWlkJzogZXZlbnQuZXZlbnREYXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyICRjb3B5ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzIDogJ2NvcHknLFxuICAgICAgICAgICAgICAgICAgICBodG1sOiBldmVudC5jb3B5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyICR0aXRsZSA9ICQoJzxkaXY+Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3RpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgaHRtbDogZXZlbnQudGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzIDogJ2V2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtaWQnOiBldmVudC5ldmVudERhdGVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICRldmVudC5hcHBlbmQoJHRpdGxlLCAkY29weSkuYXBwZW5kVG8oJGV2ZW50c0lubmVyKTtcbiAgICAgICAgICAgICAgICAkZGF0ZS5hcHBlbmRUbygkZGF0ZXNJbm5lcikuYmVmb3JlKCcgJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnPGRpdj4nLCB7Y2xhc3MgOiAnZnVsbC13aWR0aCd9KS5hcHBlbmRUbygkZGF0ZXNJbm5lcik7ICAgICAgICAvL292ZXJmbG93IGZvciBqdXN0aWZ5XG4gICAgICAgICAgICAkKCc8ZGl2PicsIHtjbGFzcyA6ICdiYXInfSkuYXBwZW5kVG8oJGRhdGVzSW5uZXIpOyAgICAgICAgICAgICAgIC8vdW5kZXJsaW5lO1xuXG4gICAgICAgICAgICAkdGltZWxpbmVFdmVudHNJbm5lci5hcHBlbmQoJGRhdGVzLCAkZXZlbnRzKTtcbiAgICAgICAgICAgIG5ld1ZpZXcuZmluZCgnPiAuZnVsbC1yZWxhdGl2ZScpLmFwcGVuZCgkdW5kZXJsYXksICR0aW1lbGluZUV2ZW50cyk7XG5cbiAgICAgICAgICAgIG5ld1ZpZXcuJHN1bW1hcnkgPSBuZXdWaWV3LmZpbmQoJ2Rpdi5zdW1tYXJ5Jyk7XG4gICAgICAgICAgICBuZXdWaWV3LiR5ZWFyID0gbmV3Vmlldy5maW5kKCdkaXYueWVhcicpO1xuXG4gICAgICAgICAgICBuZXdWaWV3LiRldmVudHNDb250YWluZXIgPSAkdGltZWxpbmVFdmVudHM7XG4gICAgICAgICAgICBuZXdWaWV3LiRkYXRlSXRlbXMgPSAkZGF0ZXNJbm5lci5maW5kKCdkaXYuZGF0ZScpO1xuICAgICAgICAgICAgbmV3Vmlldy4kZGF0ZUJhciA9ICRkYXRlc0lubmVyLmZpbmQoJ2Rpdi5iYXInKTtcblxuICAgICAgICAgICAgbmV3Vmlldy4kYmFja2dyb3VuZCA9IG5ld1ZpZXcuZmluZCgnZGl2LmJhY2tncm91bmQnKTtcblxuICAgICAgICAgICAgbmV3Vmlldy4kdW5kZXJsYXkgPSAkdW5kZXJsYXk7XG5cbiAgICAgICAgICAgIG5ld1ZpZXcuJGV2ZW50SXRlbXMgPSAkZXZlbnRzSW5uZXIuY2hpbGRyZW4oKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ld1ZpZXc7XG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZUV2ZW50OiBmdW5jdGlvbigkc3ViVmlldywgJGRhdGUpIHtcbiAgICAgICAgICAgIHZhciAkZXZlbnQgPSAkc3ViVmlldy4kZXZlbnRJdGVtcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09ICRkYXRlWzBdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkZXZlbnQub2dFbCA9ICRkYXRlO1xuICAgICAgICAgICAgJGV2ZW50LiRjb3B5ID0gJGV2ZW50LmZpbmQoJz4gZGl2LmNvcHknKTtcbiAgICAgICAgICAgICRldmVudC4kdGl0bGUgPSAkZXZlbnQuZmluZCgnPiBkaXYudGl0bGUnKTtcblxuICAgICAgICAgICAgcmV0dXJuICRldmVudDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTaG93L1N3YXAgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHNob3dFdmVudDogZnVuY3Rpb24oZGF0ZUlkKSB7XG4gICAgICAgICAgICB2YXIgJGRhdGUgPSB0aGlzLnN1YlZpZXcuJGRhdGVJdGVtcy5maWx0ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IGRhdGVJZDtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB2YXIgJGV2ZW50ID0gdGhpcy5jcmVhdGVFdmVudCh0aGlzLnN1YlZpZXcsICRkYXRlKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAncmlnaHQnO1xuXG4gICAgICAgICAgICBpZighdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudCkge1xuICAgICAgICAgICAgICAgIC8vbm8gY3VycmVudGx5IGFjdGl2ZSBldmVudFxuICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb25EYXRlQmFyKCRldmVudCwgdGhpcy5zdWJWaWV3KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZigkZXZlbnQuaW5kZXgoKSA8IHRoaXMuc3ViVmlldy4kYWN0aXZlRXZlbnQuaW5kZXgoKSkge1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdsZWZ0JztcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wb3NpdGlvbk5ld0V2ZW50KCRldmVudCwgZGlyZWN0aW9uKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUV2ZW50U3dhcCgkZXZlbnQsIGRpcmVjdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBQb3NpdGlvbi9QcmUtYW5pbWF0aW9uIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBwb3NpdGlvblN1YlZpZXdUb09wZW46IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigkbmV3U3ViVmlldyk7XG5cbiAgICAgICAgICAgICRuZXdTdWJWaWV3LiRkYXRlQmFyLmNzcygnb3BhY2l0eScsIDApO1xuICAgICAgICAgICAgJG5ld1N1YlZpZXcuJHVuZGVybGF5LmNzcygnb3BhY2l0eScsIDApO1xuXG4gICAgICAgICAgICAvL3NldCBzdW1tYXJ5IHdpZHRoIHRvIHN0YXRpY1xuICAgICAgICAgICAgJG5ld1N1YlZpZXcuJHN1bW1hcnkuY3NzKHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHdpZHRoOiAkbmV3U3ViVmlldy5vZ0VsLmZpbmQoJ2Rpdi5zdW1tYXJ5Jykud2lkdGgoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRoaXMuaGlkZURhdGVJdGVtcygkbmV3U3ViVmlldyk7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5zZXQoJG5ld1N1YlZpZXcuJHllYXIsIHtcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDMsXG4gICAgICAgICAgICAgICAgc2NhbGU6IDFcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkbmV3U3ViVmlldy4kYmFja2dyb3VuZC5hZGRDbGFzcygnbm8tdHJhbnNpdGlvbiBuby1ibHVyJyk7XG4gICAgICAgIH0sXG4gICAgICAgIGhpZGVEYXRlSXRlbXM6IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICB2YXIgeE9mZnNldCA9IDEwO1xuICAgICAgICAgICAgLy9vZmZzZXQgYWxsIGl0ZW1zIHRvIGJlIGFuaW1hdGVkIGluICYgc2V0IG9wYWNpdHkgdG8gMFxuICAgICAgICAgICAgVHdlZW5MaXRlLnNldCgkbmV3U3ViVmlldy4kZGF0ZUl0ZW1zLCB7XG4gICAgICAgICAgICAgICAgeDogeE9mZnNldCxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb25TdWJWaWV3VG9Td2FwOiBmdW5jdGlvbigkbmV3U3ViVmlldywgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigkbmV3U3ViVmlldywgZGlyZWN0aW9uKTtcblxuICAgICAgICAgICAgdmFyIGZpbHRlciA9IChkaXJlY3Rpb24gPT09ICdyaWdodCcpID8gJzpmaXJzdCcgOiAnOmxhc3QnO1xuXG4gICAgICAgICAgICB2YXIgJGFjdGl2ZURhdGUgPSAkbmV3U3ViVmlldy4kZGF0ZUl0ZW1zLmZpbHRlcihmaWx0ZXIpO1xuXG4gICAgICAgICAgICB2YXIgJGV2ZW50ID0gdGhpcy5jcmVhdGVFdmVudCgkbmV3U3ViVmlldywgJGFjdGl2ZURhdGUpO1xuXG4gICAgICAgICAgICB0aGlzLnBvc2l0aW9uRGF0ZUJhcigkZXZlbnQsICRuZXdTdWJWaWV3KTtcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb25TdWJWaWV3RXZlbnQoJGV2ZW50KTtcblxuICAgICAgICAgICAgJG5ld1N1YlZpZXcuJGFjdGl2ZUV2ZW50ID0gJGV2ZW50O1xuICAgICAgICAgICAgdGhpcy5kZXRlY3RBbmRUb2dnbGVBcnJvd3MoKTtcbiAgICAgICAgfSxcbiAgICAgICAgcG9zaXRpb25EYXRlQmFyOiBmdW5jdGlvbigkZXZlbnQsICRzdWJWaWV3KSB7XG4gICAgICAgICAgICAkZXZlbnQub2dFbC53aGVuTGl2ZShmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICRzdWJWaWV3LiRkYXRlQmFyLmNzcygnd2lkdGgnLCAkZXZlbnQub2dFbC53aWR0aCgpKTtcbiAgICAgICAgICAgICAgICAkc3ViVmlldy4kZGF0ZUJhci5jc3MoJ2xlZnQnLCAkZXZlbnQub2dFbC5wb3NpdGlvbigpLmxlZnQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uTmV3RXZlbnQ6IGZ1bmN0aW9uKCRldmVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgeFN0YXJ0ID0gJGV2ZW50LndpZHRoKCkvNTtcbiAgICAgICAgICAgIHhTdGFydCA9IChkaXJlY3Rpb24gPT09ICdsZWZ0JykgPyAteFN0YXJ0IDogeFN0YXJ0O1xuXG4gICAgICAgICAgICBUd2VlbkxpdGUuc2V0KFskZXZlbnQuJHRpdGxlLCAkZXZlbnQuJGNvcHldLCB7XG4gICAgICAgICAgICAgICAgeDogeFN0YXJ0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRldmVudC5hZGRDbGFzcygndmlzaWJsZScpO1xuXG4gICAgICAgICAgICByZXR1cm4geFN0YXJ0O1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vIEZvciBzd2FwcGluZyBzdWIgdmlld3NcbiAgICAgICAgcG9zaXRpb25TdWJWaWV3RXZlbnQ6IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgVHdlZW5MaXRlLnNldChbJGV2ZW50LiR0aXRsZSwgJGV2ZW50LiRjb3B5XSwge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkZXZlbnQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFuaW1hdGlvbiBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgU3ViVmlldyBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFuaW1hdGVTdWJWaWV3T3BlbjogZnVuY3Rpb24odGltZWxpbmUpIHtcbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aW1lbGluZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICAvLyBTdGF0aWMgVmFyaWFibGVzXG4gICAgICAgICAgICAgICAgdmFyIGFuaW1hdGlvblRpbWUxID0gMC41O1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25UaW1lMiA9IDAuNjtcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVN0YWdnZXJPZmZzZXRUaW1lID0gMC4xMDtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRlc0xhYmVsID0gJ2FuaW1hdGUgZGF0ZXMnO1xuICAgICAgICAgICAgICAgIHZhciBldmVudExhYmVsID0gJ2FuaW1hdGUgZXZlbnQnO1xuXG4gICAgICAgICAgICAgICAgLy8gRGVwZW5kZW50IG9uIHN0YXRpY3NcbiAgICAgICAgICAgICAgICB2YXIgZGF0ZVN0YWdnZXJBbmltYXRpb25UaW1lID0gYW5pbWF0aW9uVGltZTIgLSAoKHRoaXMuc3ViVmlldy4kZGF0ZUl0ZW1zLmxlbmd0aCAtIDEpICogZGF0ZVN0YWdnZXJPZmZzZXRUaW1lKTtcbiAgICAgICAgICAgICAgICB2YXIgYmFyQW5pbWF0aW9uVGltZSA9IGFuaW1hdGlvblRpbWUyIC0gZGF0ZVN0YWdnZXJBbmltYXRpb25UaW1lO1xuXG4gICAgICAgICAgICAgICAgdmFyICRhY3RpdmVEYXRlID0gdGhpcy5zdWJWaWV3LiRkYXRlSXRlbXMuZmlsdGVyKCc6Zmlyc3QnKTtcblxuICAgICAgICAgICAgICAgIHRpbWVsaW5lID0gbmV3IFRpbWVsaW5lTGl0ZSh7XG4gICAgICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIC8vYW5pbWF0ZSBpbiBkYXRlcyBhZnRlciBzdGFnZSAxIGhhcyBmaW5pc2hlZFxuICAgICAgICAgICAgICAgIHRpbWVsaW5lLmFkZExhYmVsKGRhdGVzTGFiZWwsIGFuaW1hdGlvblRpbWUxKTtcblxuICAgICAgICAgICAgICAgIC8vYW5pbWF0ZSBpbiBldmVudHMgYWZ0ZXIgMS8zIG9mIHRpbWUgaGFzIHBhc3NlZCBpbiBzdGFnZSAyXG4gICAgICAgICAgICAgICAgdGltZWxpbmUuYWRkTGFiZWwoZXZlbnRMYWJlbCwgYW5pbWF0aW9uVGltZTEgKyAoYW5pbWF0aW9uVGltZTIvMykpO1xuXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKiogQW5pbWF0aW9ucyBQYXJ0IDEgKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbkZ1bGxzY3JlZW4odGltZWxpbmUsIGFuaW1hdGlvblRpbWUxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblN1bW1hcnlPdXQodGltZWxpbmUsIGFuaW1hdGlvblRpbWUxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblllYXJTY2FsZURvd24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUxKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uQmFja2dyb3VuZEJsdXIodGltZWxpbmUsIGFuaW1hdGlvblRpbWUxKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblVuZGVybGF5SW4odGltZWxpbmUsIGFuaW1hdGlvblRpbWUxKTtcblxuICAgICAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqIEFuaW1hdGlvbnMgUGFydCAyICoqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25EYXRlc0luKHRpbWVsaW5lLCBkYXRlU3RhZ2dlckFuaW1hdGlvblRpbWUsIGRhdGVTdGFnZ2VyT2Zmc2V0VGltZSwgYmFyQW5pbWF0aW9uVGltZSwgZGF0ZXNMYWJlbCk7XG5cbiAgICAgICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKiBBbmltYXRpb25zIFBhcnQgMyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVHJpZ2dlclNob3dFdmVudCh0aW1lbGluZSwgJGFjdGl2ZURhdGUsIGV2ZW50TGFiZWwpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zdXBlcih0aW1lbGluZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvbkZ1bGxzY3JlZW46IGZ1bmN0aW9uKHRpbWVsaW5lLCBhbmltYXRpb25UaW1lKSB7XG4gICAgICAgICAgICAvL1NldCBzdWJ2aWV3IHRvIGZ1bGwgc2NyZWVuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgZWFzZTogJ1Bvd2VyMi5lYXNlSW5PdXQnXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvblN1bW1hcnlPdXQ6IGZ1bmN0aW9uKHRpbWVsaW5lLCBhbmltYXRpb25UaW1lKSB7XG4gICAgICAgICAgICAvL0ZhZGUgb3V0IHN1bW1hcnlcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LiRzdW1tYXJ5LCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eSA6IDBcbiAgICAgICAgICAgIH0pLCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uWWVhclNjYWxlRG93bjogZnVuY3Rpb24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgICAgIC8vU2NhbGUgZG93biB0aGUgeWVhclxuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50byh0aGlzLnN1YlZpZXcuJHllYXIsIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICB6SW5kZXg6IDMsXG4gICAgICAgICAgICAgICAgc2NhbGU6IDAuN1xuICAgICAgICAgICAgfSksIDApO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25EYXRlc0luOiBmdW5jdGlvbih0aW1lbGluZSwgZGF0ZVN0YWdnZXJBbmltYXRpb25UaW1lLCBkYXRlU3RhZ2dlck9mZnNldFRpbWUsIGJhckFuaW1hdGlvblRpbWUsIGRhdGVzTGFiZWwpIHtcbiAgICAgICAgICAgIC8vU3RhZ2dlciBpbiBkYXRlc1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKChuZXcgVGltZWxpbmVMaXRlKS5zdGFnZ2VyVG8odGhpcy5zdWJWaWV3LiRkYXRlSXRlbXMsIGRhdGVTdGFnZ2VyQW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSwgZGF0ZVN0YWdnZXJPZmZzZXRUaW1lKSwgZGF0ZXNMYWJlbCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvbkJhY2tncm91bmRCbHVyOiBmdW5jdGlvbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZSkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy4kYmFja2dyb3VuZC5yZW1vdmVDbGFzcygnbm8tdHJhbnNpdGlvbiBuby1ibHVyJyk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIDApO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25VbmRlcmxheUluOiBmdW5jdGlvbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZSkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50byh0aGlzLnN1YlZpZXcuJHVuZGVybGF5LCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSksIDApO1xuICAgICAgICB9LFxuICAgICAgICBhZGRUcmlnZ2VyU2hvd0V2ZW50OiBmdW5jdGlvbih0aW1lbGluZSwgJGFjdGl2ZURhdGUsIGV2ZW50TGFiZWwpIHtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNob3dFdmVudCgkYWN0aXZlRGF0ZVswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyksIGV2ZW50TGFiZWwpO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgU3ViVmlldyBDbG9zZWQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgYW5pbWF0ZVN1YlZpZXdDbG9zZWQ6IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aW1lbGluZSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRpbWVsaW5lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZhciBhbmltYXRpb25UaW1lID0gMC42O1xuXG4gICAgICAgICAgICAgICAgdmFyIGFuaW1UaW1lMiA9IGFuaW1hdGlvblRpbWUgKiAzLzQ7XG4gICAgICAgICAgICAgICAgdmFyIGFuaW1TdW1tYXJ5U3RhcnQgPSBhbmltYXRpb25UaW1lIC0gYW5pbVRpbWUyO1xuXG4gICAgICAgICAgICAgICAgdGltZWxpbmUgPSBuZXcgVGltZWxpbmVMaXRlKHtcbiAgICAgICAgICAgICAgICAgICAgcGF1c2VkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYmluZCh0aGlzKSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbk1pbmltaXplKHRpbWVsaW5lLCBhbmltYXRpb25UaW1lLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblllYXJTY2FsZVVwKHRpbWVsaW5lLCBhbmltYXRpb25UaW1lLCAwKTtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbkJhY2tncm91bmRVbmJsdXIodGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIDApO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uVW5kZXJsYXlPdXQodGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25FdmVudHNDb250YWluZXJGYWRlT3V0KHRpbWVsaW5lLCBhbmltVGltZTIsIDApO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25TdW1tYXJ5SW4odGltZWxpbmUsIGFuaW1UaW1lMiwgYW5pbVN1bW1hcnlTdGFydCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKGNhbGxiYWNrLCB0aW1lbGluZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvbk1pbmltaXplOiBmdW5jdGlvbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZSwgcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuc3ViVmlldy5vZ0VsLndpZHRoKCksXG4gICAgICAgICAgICAgICAgdG9wOiAnMHB4JyxcbiAgICAgICAgICAgICAgICBsZWZ0OiB0aGlzLnN1YlZpZXcub2dFbC5vZmZzZXQoKS5sZWZ0ICsgJ3B4JyxcbiAgICAgICAgICAgICAgICBlYXNlOiAnUG93ZXIyLmVhc2VJbk91dCdcbiAgICAgICAgICAgIH0pLCBwb3NpdGlvbik7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvblN1bW1hcnlJbjogZnVuY3Rpb24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZXQgdG8gc3RhdGljIHdpZHRoIG9mIG9yaWdpbmFsIGl0ZW1cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5zZXQodGhpcy5zdWJWaWV3LiRzdW1tYXJ5LCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuc3ViVmlldy5vZ0VsLndpZHRoKClcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4kc3VtbWFyeSwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgOiAxXG4gICAgICAgICAgICB9KSwgcG9zaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25ZZWFyU2NhbGVVcDogZnVuY3Rpb24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4keWVhciwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIHpJbmRleDogMyxcbiAgICAgICAgICAgICAgICBzY2FsZTogMVxuICAgICAgICAgICAgfSksIHBvc2l0aW9uKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uRXZlbnRzQ29udGFpbmVyRmFkZU91dDogZnVuY3Rpb24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICAvLyBTZXQgdG8gc3RhdGljIHdpZHRoXG4gICAgICAgICAgICBUd2VlbkxpdGUuc2V0KHRoaXMuc3ViVmlldy4kZXZlbnRzQ29udGFpbmVyLCB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IHRoaXMuc3ViVmlldy4kZXZlbnRzQ29udGFpbmVyLm91dGVyV2lkdGgoKVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8odGhpcy5zdWJWaWV3LiRldmVudHNDb250YWluZXIsIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KSwgcG9zaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25CYWNrZ3JvdW5kVW5ibHVyOiBmdW5jdGlvbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZSwgcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcuJGJhY2tncm91bmQuYWRkQ2xhc3MoJ25vLWJsdXInKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgcG9zaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25VbmRlcmxheU91dDogZnVuY3Rpb24odGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4kdW5kZXJsYXksIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgICB9KSwgcG9zaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgRXZlbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFuaW1hdGVFdmVudFN3YXA6IGZ1bmN0aW9uKCRuZXdFdmVudCwgZGlyZWN0aW9uLCB0aW1lbGluZSkge1xuICAgICAgICAgICAgaWYodHlwZW9mIHRpbWVsaW5lID09PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIC8vIFN0YXRpYyBWYXJpYWJsZXNcbiAgICAgICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNDtcbiAgICAgICAgICAgICAgICB2YXIgZXZlbnRTdGFnZ2VyT2Zmc2V0VGltZSA9IDAuMTU7XG5cbiAgICAgICAgICAgICAgICAvLyBEZXBlbmRlbnQgb24gc3RhdGljc1xuICAgICAgICAgICAgICAgIHZhciBldmVudFN0YWdnZXJBbmltYXRpb25UaW1lID0gYW5pbWF0aW9uVGltZSAtIGV2ZW50U3RhZ2dlck9mZnNldFRpbWU7XG4gICAgICAgICAgICAgICAgdmFyIGJhckFuaW1hdGlvblRpbWUgPSBhbmltYXRpb25UaW1lICogNTAvMTAwO1xuICAgICAgICAgICAgICAgIHZhciBmYWRlT3V0QW5pbWF0aW9uVGltZSA9IGFuaW1hdGlvblRpbWUgKiA3MC8xMDA7XG5cbiAgICAgICAgICAgICAgICB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgICAgICBwYXVzZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudCA9ICRuZXdFdmVudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0ZWN0QW5kVG9nZ2xlQXJyb3dzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuXG5cbiAgICAgICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvbkRhdGVCYXIodGltZWxpbmUsICRuZXdFdmVudCwgdGhpcy5zdWJWaWV3LiRkYXRlQmFyLCBiYXJBbmltYXRpb25UaW1lKTtcblxuICAgICAgICAgICAgICAgIGlmKCEhdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudCkgeyAgIC8vZXZlbnQgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgICAgICAgICAgICAgLy9hbmltYXRlIGN1cnJlbnQgZXZlbnQgb3V0XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uRXZlbnRJbih0aW1lbGluZSwgJG5ld0V2ZW50LCBhbmltYXRpb25UaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25FdmVudE91dCh0aW1lbGluZSwgdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudCwgZmFkZU91dEFuaW1hdGlvblRpbWUsIGRpcmVjdGlvbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25FdmVudEluU3RhZ2dlcih0aW1lbGluZSwgJG5ld0V2ZW50LCBldmVudFN0YWdnZXJBbmltYXRpb25UaW1lLCBldmVudFN0YWdnZXJPZmZzZXRUaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLnBsYXkoKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uRXZlbnRJbjogZnVuY3Rpb24odGltZWxpbmUsICRldmVudCwgYW5pbWF0aW9uVGltZSkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50byhbJGV2ZW50LiR0aXRsZSwgJGV2ZW50LiRjb3B5XSwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgeDogMFxuICAgICAgICAgICAgfSksIDApO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25FdmVudEluU3RhZ2dlcjogZnVuY3Rpb24odGltZWxpbmUsICRldmVudCwgZXZlbnRTdGFnZ2VyQW5pbWF0aW9uVGltZSwgZXZlbnRTdGFnZ2VyT2Zmc2V0VGltZSkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKChuZXcgVGltZWxpbmVMaXRlKS5zdGFnZ2VyVG8oWyRldmVudC4kdGl0bGUsICRldmVudC4kY29weV0sIGV2ZW50U3RhZ2dlckFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgICAgIHg6IDBcbiAgICAgICAgICAgIH0sIGV2ZW50U3RhZ2dlck9mZnNldFRpbWUpLCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uRXZlbnRPdXQ6IGZ1bmN0aW9uKHRpbWVsaW5lLCAkZXZlbnQsIGFuaW1hdGlvblRpbWUsIGRpcmVjdGlvbikge1xuICAgICAgICAgICAgdmFyIHhUbyA9IC10aGlzLnN1YlZpZXcuJGFjdGl2ZUV2ZW50LndpZHRoKCkvNDtcblxuICAgICAgICAgICAgeFRvID0gKGRpcmVjdGlvbiA9PT0gJ2xlZnQnKSA/IC14VG8gOiB4VG87XG5cbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8oWyRldmVudC4kdGl0bGUsICRldmVudC4kY29weV0sIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgICAgIHg6IHhUbyxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgJGV2ZW50LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSksIDApO1xuICAgICAgICB9LFxuICAgICAgICBhZGRBbmltYXRpb25EYXRlQmFyOiBmdW5jdGlvbih0aW1lbGluZSwgJGV2ZW50LCAkZGF0ZUJhciwgYW5pbWF0aW9uVGltZSkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50bygkZGF0ZUJhciwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIGxlZnQ6ICRldmVudC5vZ0VsLnBvc2l0aW9uKCkubGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aDogJGV2ZW50Lm9nRWwud2lkdGgoKSxcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH0sXG5cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gQXJyb3cgU3R1ZmYgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIHRvZ2dsZVN1YlZpZXdBcnJvd3M6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYoIXRoaXMuc3ViVmlldy4kYWN0aXZlRXZlbnQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBldmVudEluZGV4ID0gdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudC5pbmRleCgpO1xuICAgICAgICAgICAgdmFyIHN1YlZpZXdJbmRleCA9IHRoaXMuc3ViVmlldy5vZ0VsLmluZGV4KCk7XG5cbiAgICAgICAgICAgIGlmIChldmVudEluZGV4ID4gMCB8fCBzdWJWaWV3SW5kZXggPiAxKVxuICAgICAgICAgICAgICAgIHRoaXMuJGxlZnRBcnJvdy5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgdGhpcy4kbGVmdEFycm93LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgaWYgKGV2ZW50SW5kZXggPCB0aGlzLnN1YlZpZXcuJGV2ZW50SXRlbXMubGVuZ3RoIC0gMSB8fCBzdWJWaWV3SW5kZXggPCB0aGlzLiRpdGVtcy5sZW5ndGggLSAxKVxuICAgICAgICAgICAgICAgIHRoaXMuJHJpZ2h0QXJyb3cuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHRoaXMuJHJpZ2h0QXJyb3cucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gRXZlbnQgTGlzdGVuZXJzIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBvblNlbGVjdFN1YkV2ZW50OiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIHZhciBkYXRhSWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJyk7XG5cbiAgICAgICAgICAgICAgICBpZighIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudElkID0gdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudFswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YUlkID09PSBjdXJyZW50SWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0V2ZW50KGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uTmV4dDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmICghIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICAvL2dvIHRvIG5leHQgZXZlbnRcbiAgICAgICAgICAgICAgICAgICAgdmFyICRuZXh0RXZlbnQgPSB0aGlzLnN1YlZpZXcuJGFjdGl2ZUV2ZW50Lm9nRWwubmV4dCgnZGl2LmRhdGUnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZigkbmV4dEV2ZW50Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93RXZlbnQoJG5leHRFdmVudFswXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgJG5leHRWaWV3ID0gdGhpcy5zdWJWaWV3Lm9nRWwubmV4dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGFJZCA9ICcnO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJG5leHRWaWV3Lmxlbmd0aCAhPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJZCA9ICRuZXh0Vmlld1swXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YUlkID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoZGF0YUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hpZnRBbGxJdGVtc0NvbnRhaW5lcigncmlnaHQnLCAwLjM1KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uUHJldjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgICAgIGlmICghIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHByZXZFdmVudCA9IHRoaXMuc3ViVmlldy4kYWN0aXZlRXZlbnQub2dFbC5wcmV2KCdkaXYuZGF0ZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCRwcmV2RXZlbnQubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dFdmVudCgkcHJldkV2ZW50WzBdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkcHJldlZpZXcgPSB0aGlzLnN1YlZpZXcub2dFbC5wcmV2KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0YUlkID0gJyc7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgkcHJldlZpZXcubGVuZ3RoICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YUlkID0gJHByZXZWaWV3WzBdLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkYXRhSWQgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyhkYXRhSWQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaGlmdEFsbEl0ZW1zQ29udGFpbmVyKCdsZWZ0JywgMC4zNSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblJpZ2h0QXJyb3dLZXk6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICAgICAgICAgIGlmKHRoaXMuaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uTmV4dCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkxlZnRBcnJvd0tleTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBcInVzZSBzdHJpY3RcIjtcblxuICAgICAgICAgICAgaWYodGhpcy5pc0FjdGl2ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMub25QcmV2KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUaW1lbGluZVZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvY2hhcmFjdGVycy5oYnNcIik7XG52YXIgZGV0YWlsVGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL21vYmlsZS9jaGFyYWN0ZXJzRGV0YWlsLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG52YXIgT21uaXR1cmUgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvT21uaXR1cmUuanNcIik7XG5cbnZhciBTb2NpYWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvU29jaWFsLmpzXCIpO1xuXG52YXIgQ2hhcmFjdGVyc1ZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50czpcbiAgICAgICAge1xuICAgICAgICAgICAgXCJ0b3VjaGVuZCAuaXRlbVwiIDogXCJvblByZXZlbnREZWZhdWx0XCIsXG4gICAgICAgICAgICAndG91Y2hlbmQgZGl2LnNvY2lhbCA+IGEnOiAnb25QcmV2ZW50RGVmYXVsdCcsXG4gICAgICAgICAgICBcImNsaWNrIC5pdGVtXCIgOiBcIm9uUHJldmVudERlZmF1bHRcIixcbiAgICAgICAgICAgICdjbGljayBkaXYuc29jaWFsID4gYSc6ICdvblByZXZlbnREZWZhdWx0J1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhbW1lckV2ZW50cyA6XG4gICAgICAgIHtcbiAgICAgICAgICAgIFwidGFwIC5pdGVtXCIgOiBcIm9uQ2hhcmFjdGVyQ2xpY2tcIixcbiAgICAgICAgICAgIFwidGFwIC55b3V0dWJlLWVtYmVkXCI6IFwib25Zb3V0dWJlQ2xpY2tcIixcbiAgICAgICAgICAgICd0YXAgZGl2LnNvY2lhbCA+IGEnOiAnb25DbGlja1NvY2lhbCdcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwid2luZG93LnJlc2l6ZVwiLCB0aGlzLm9uV2luZG93UmVzaXplLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYmVmb3JlQWN0aXZlJywgdGhpcy5vblNlY3Rpb25BY3RpdmF0ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdtZW51LmNsb3NlTW9kZUJ1dHRvbkNsaWNrJywgdGhpcy5vbk1lbnVDbG9zZUNsaWNrLCB0aGlzKTtcblxuICAgICAgICAgICAgdGhpcy5jaGFycyA9IHRoaXMubW9kZWwuY2hhcmFjdGVyc1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJzID0gdGhpcy4kKCcuYWxsLWl0ZW1zLWN0cicpO1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJdGVtQ3RyID0gdGhpcy4kKCcuYWN0aXZlLWl0ZW0tY3RyJyk7XG5cbiAgICAgICAgICAgIHZhciBsZW4gPSB0aGlzLmNoYXJhY3RlcnMuY2hpbGRyZW4oKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdyA9IDEwMC9sZW47XG4gICAgICAgICAgICB2YXIgcCA9IGxlbioxMDA7XG5cbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVycy5jc3MoXCJ3aWR0aFwiLCBwK1wiJVwiKTtcbiAgICAgICAgICAgIHRoaXMuY2hhcmFjdGVycy5jaGlsZHJlbigpLmVhY2goZnVuY3Rpb24gKGluZGV4LCBlbGVtZW50KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICQodGhpcykuY3NzKFwid2lkdGhcIiwgdytcIiVcIik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5pbml0RHJhZ2dhYmxlKHRoaXMuY2hhcmFjdGVycyk7XG4gICAgICAgICAgICB0aGlzLmluaXRTb2NpYWxGdW5jdGlvbnMoKTtcblxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJdGVtQ3RyLmNzcyhcInotaW5kZXhcIiwgLTEpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0U29jaWFsRnVuY3Rpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsID0ge307XG5cbiAgICAgICAgICAgIHRoaXMuc29jaWFsLmZhY2Vib29rID0gXy5iaW5kKFNvY2lhbC5TaGFyZUZhY2Vib29rLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHdpdHRlciA9IF8uYmluZChTb2NpYWwuU2hhcmVUd2l0dGVyLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHVtYmxyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR1bWJsciwgU29jaWFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25TZWN0aW9uQWN0aXZhdGUgOiBmdW5jdGlvbiAoZWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmIChlbFswXSA9PSB0aGlzLmVsKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dTdWJWaWV3IDogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKHZpZXdOYW1lLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdmFyIGNoYXJPYmogPSB0aGlzLmNoYXJhY3RlcnMuY2hpbGRyZW4oJ1tkYXRhLWlkPVwiJyArIHZpZXdOYW1lICsgJ1wiXScpO1xuICAgICAgICAgICAgdmFyIHN1YkhUTUwgPSBkZXRhaWxUZW1wbGF0ZSh0aGlzLm1vZGVsLmNoYXJhY3RlcnNbY2hhck9iai5pbmRleCgpXSk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudENoYXJJRCA9IHZpZXdOYW1lO1xuICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gJChzdWJIVE1MKTtcblxuICAgICAgICAgICAgdGhpcy5zdWJWaWV3Lm9nRWwgPSBjaGFyT2JqO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcuYXBwZW5kVG8odGhpcy5hY3RpdmVJdGVtQ3RyKTtcblxuICAgICAgICAgICAgdGhpcy5hY3RpdmVJdGVtQ3RyLmNzcyhcInotaW5kZXhcIiwgMCk7XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5hZGRDbGFzcyhcImFjdGl2ZVwiKTtcblxuICAgICAgICAgICAgdmFyIHlvdXR1YmVJZCA9IHRoaXMubW9kZWwuY2hhcmFjdGVyc1tjaGFyT2JqLmluZGV4KCldLmludGVydmlldztcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5maW5kKCcueW91dHViZS1jb250YWluZXIgaW1nJykubG9hZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBIZWxwZXJGdW5jcy5TY3JvbGxlci5pbml0RHJhZ2dhYmxlKG1lLmFjdGl2ZUl0ZW1DdHIpO1xuICAgICAgICAgICAgfSkuYXR0cignc3JjJywgJ2h0dHA6Ly9pbWcueW91dHViZS5jb20vdmkvJyt5b3V0dWJlSWQrJy8wLmpwZycpO1xuXG4gICAgICAgICAgICB0aGlzLmhpZGVBbGwoKTtcblxuICAgICAgICAgICAgLy8gZm9yIHRoZSBjbG9zZSBidXR0b24gZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwic3Vidmlldy5zaG93Q2xvc2VCdXR0b25cIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xvc2VTdWJWaWV3IDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgaWYgKCF0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5zaG93QWxsKCk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1DdHIuY3NzKFwiei1pbmRleFwiLCAtMSk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1DdHIuZW1wdHkoKTtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9IG51bGw7XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRDaGFySUQgPSBudWxsO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGVBbGw6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kKCcuYmctZmlsdGVyJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJzLmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dBbGw6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kKCcuYmctZmlsdGVyJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy5jaGFyYWN0ZXJzLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbkNoYXJhY3RlckNsaWNrOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgY2hhcklEID0gJChlLmN1cnJlbnRUYXJnZXQpLmRhdGEoJ2lkJyk7XG5cbiAgICAgICAgICAgIGlmKGNoYXJJRCA9PSBcIjBcIilcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoY2hhcklEKTtcbiAgICAgICAgfSxcblxuICAgICAgICBpbml0RHJhZ2dhYmxlIDogZnVuY3Rpb24gKHNjcm9sbERpdilcbiAgICAgICAge1xuICAgICAgICAgICAgRHJhZ2dhYmxlLmNyZWF0ZShzY3JvbGxEaXYsIHtcbiAgICAgICAgICAgICAgICB0eXBlICAgICAgICAgICA6IFwieFwiLFxuICAgICAgICAgICAgICAgIGVkZ2VSZXNpc3RhbmNlIDogMSxcbiAgICAgICAgICAgICAgICB6SW5kZXhCb29zdCAgICA6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGN1cnNvciAgICAgICAgIDogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICAgICAgb25EcmFnRW5kICAgICAgOiBmdW5jdGlvbiAoKVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRyYW5YID0gc2Nyb2xsRGl2WzBdLl9nc1RyYW5zZm9ybS54O1xuICAgICAgICAgICAgICAgICAgICBpZih0cmFuWCA+IDApXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS50byhzY3JvbGxEaXYsIC41LCB7eDogMH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIHBXaWR0aCA9IHNjcm9sbERpdi53aWR0aCgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY1dpZHRoID0gc2Nyb2xsRGl2LmNoaWxkcmVuKCkuZ2V0KDApLm9mZnNldFdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2FsY2QgPSBNYXRoLmFicyh0cmFuWCkrY1dpZHRoO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKGNhbGNkID4gcFdpZHRoKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcG9zID0gcFdpZHRoLWNXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIFR3ZWVuTGl0ZS50byhzY3JvbGxEaXYsIC41LCB7eDogLXBvc30pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZCA9IHRoaXMuY2FsY3VsYXRlVmlzaWJsZUVsZW1lbnQodHJhblgpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgdG9YID0gLShjV2lkdGgqaW5kKTtcbiAgICAgICAgICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHNjcm9sbERpdiwgLjUsIHt4OiB0b1h9KTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNhbGN1bGF0ZVZpc2libGVFbGVtZW50OiBmdW5jdGlvbih0WClcbiAgICAgICAge1xuXG4gICAgICAgICAgdmFyIHNMZWZ0ID0gLXRYO1xuICAgICAgICAgIHZhciB3V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuICAgICAgICAgIHZhciB2aXNpYmxlRWxlbWVudEluZGV4ID0gTWF0aC5yb3VuZChzTGVmdC93V2lkdGgpO1xuXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRJbmRleCA9IHZpc2libGVFbGVtZW50SW5kZXggPCAwID8gMDogdmlzaWJsZUVsZW1lbnRJbmRleDtcblxuICAgICAgICAgIHJldHVybiB2aXNpYmxlRWxlbWVudEluZGV4O1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uWW91dHViZUNsaWNrOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBPbW5pdHVyZS5vblZpZGVvUGxheSh7bWVkaWFUaXRsZTogdGhpcy5jdXJyZW50Q2hhcklEfSk7XG5cblx0XHRcdC8vIGNyZWF0ZSBsaW5rIGFuZCBkaXNwYXRjaCBjbGljayBldmVudFxuXHRcdFx0dmFyIGhyZWYgPSBlLmN1cnJlbnRUYXJnZXQuaHJlZjtcblx0XHRcdHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuXHRcdCAgICBhLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgaHJlZik7XG5cdFx0ICAgIGEuc2V0QXR0cmlidXRlKFwidGFyZ2V0XCIsIFwiX2JsYW5rXCIpO1xuXG5cdFx0ICAgIHZhciBkaXNwYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiSFRNTEV2ZW50c1wiKTtcblx0XHQgICAgZGlzcGF0Y2guaW5pdEV2ZW50KFwiY2xpY2tcIiwgdHJ1ZSwgdHJ1ZSk7XG5cdFx0ICAgIGEuZGlzcGF0Y2hFdmVudChkaXNwYXRjaCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25NZW51Q2xvc2VDbGljazogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5zdWJWaWV3Lm9nRWwuaW5kZXgoKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zaGFyZScpO1xuXG4gICAgICAgICAgICB2YXIgbGluayA9IGRvY3VtZW50LlVSTDtcbiAgICAgICAgICAgIHZhciBzb2NpYWxTaGFyZSA9IHRoaXMubW9kZWwuY2hhcmFjdGVyc1tpdGVtSW5kZXhdLnNvY2lhbFNoYXJlW3R5cGVdO1xuXG4gICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5zb2NpYWxbdHlwZV0gPT09ICdmdW5jdGlvbicgJiYgc29jaWFsU2hhcmUpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuc29jaWFsW3R5cGVdKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHNvY2lhbFNoYXJlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc29jaWFsU2hhcmUuY29weSxcbiAgICAgICAgICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9uUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXJhY3RlcnNWaWV3O1xuIiwidmFyIFZpZXcgPSByZXF1aXJlKFwiLi4vLi4vVmlldy5qc1wiKTtcbnZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi4uLy8uLi8uLi90ZW1wbGF0ZXMvc2VjdGlvbnMvbW9iaWxlL2ZpZ2h0Lmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBPbW5pdHVyZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9zZXJ2aWNlcy9PbW5pdHVyZS5qc1wiKTtcbnZhciBTb2NpYWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvU29jaWFsLmpzXCIpO1xuXG52YXIgRmlnaHRWaWV3ID0gVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBldmVudHMgOlxuICAgICAgICB7XG4gICAgICAgICAgICAndGFwIC5wYXJ0bmVycy1idG4nOiAnc2hvd1BhcnRuZXJzUmVzb3VyY2VzJyxcbiAgICAgICAgICAgICd0YXAgLmRhdGEtYnRuJzogJ3Nob3dEYXRhVmlzdWFsaXphdGlvbicsXG4gICAgICAgICAgICAndGFwIC5sZWFybi1idG4nOiAnc2hvd1JlYWRNb3JlJyxcbiAgICAgICAgICAgICd0YXAgLnN3aXRjaCc6ICd0b2dnbGVQYXJ0bmVyc1Jlc291cmNlc0NvbnRlbnQnLFxuICAgICAgICAgICAgJ3RhcCAuZGF0YS12aXN1YWxpemF0aW9uLWN0ciAuYXJyb3cnOiAnb25QcmV2TmV4dERhdGFQb2ludCcsXG5cbiAgICAgICAgICAgICd0YXAgLnBhcnRuZXJzLXJlc291cmNlcy1jdHIgLmFycm93JzogJ29uUHJldk5leHRSZXNvdXJjZScsXG4gICAgICAgICAgICAndGFwIC5jbG9zZSc6ICdjbG9zZVN1YlZpZXcnLFxuXG4gICAgICAgICAgICAnY2xpY2sgLmluZm8tY3RyID4gYSc6ICdvblByZXZlbnREZWZhdWx0JyxcbiAgICAgICAgICAgICd0YXAgLmluZm8tY3RyID4gYSc6ICdvblBhcnRuZXJDbGljaycsXG4gICAgICAgICAgICAndGFwIGRpdi5zb2NpYWwtY3RyID4gaW1nJzogJ29uQ2xpY2tTb2NpYWwnLFxuICAgICAgICAgICAgJ3RhcCAua25vd19zdGF0dXMnOiAnb25QYXJ0bmVyQ2xpY2snLFxuICAgICAgICAgICAgJ3RhcCAudGFwLWhhY2snOiAnb25UYXBIYWNrJ1xuXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cucmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5iZWZvcmVBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYWZ0ZXJBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ21lbnUuY2xvc2VNb2RlQnV0dG9uQ2xpY2snLCB0aGlzLm9uTWVudUNsb3NlQ2xpY2ssIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgdmFyIHBhcnRuZXJzID0gdGhpcy4kKCcucGFydG5lcnMtcmVzb3VyY2VzLWN0cicpO1xuICAgICAgICAgICAgdmFyIGRhdGF2aXogPSB0aGlzLiQoJy5kYXRhLXZpc3VhbGl6YXRpb24tY3RyJyk7XG4gICAgICAgICAgICBIZWxwZXJGdW5jcy5TY3JvbGxlci5pbml0RHJhZ2dhYmxlKHBhcnRuZXJzLmZpbmQoJz4gZGl2LmlubmVyJykpO1xuICAgICAgICAgICAgSGVscGVyRnVuY3MuU2Nyb2xsZXIuaW5pdERyYWdnYWJsZShkYXRhdml6LmZpbmQoJy5kYXRhLXBvaW50JykpO1xuXG5cbiAgICAgICAgICAgIHBhcnRuZXJzLmZpbmQoJy5yZXNvdXJjZXMtY3RyIGRpdi5pbmZvLWN0cjpmaXJzdC1jaGlsZCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgICAgdGhpcy4kZGF0YVBvaW50cyA9IHRoaXMuJGVsLmZpbmQoJ2Rpdi5kYXRhLXBvaW50Jyk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdFNvY2lhbEZ1bmN0aW9ucygpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0U29jaWFsRnVuY3Rpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsID0ge307XG5cbiAgICAgICAgICAgIHRoaXMuc29jaWFsLmZhY2Vib29rID0gXy5iaW5kKFNvY2lhbC5TaGFyZUZhY2Vib29rLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHdpdHRlciA9IF8uYmluZChTb2NpYWwuU2hhcmVUd2l0dGVyLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHVtYmxyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR1bWJsciwgU29jaWFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBoYW5kbGVSb3V0ZTogZnVuY3Rpb24oc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihzdWJzZWN0aW9uLCBkZXRhaWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dTdWJWaWV3IDogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcih2aWV3TmFtZSwgb3B0aW9ucyk7XG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuXG4gICAgICAgICAgICBpZiAodmlld05hbWUgPT0gJ2RhdGEnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBkdiA9ICQoJy5kYXRhLXZpc3VhbGl6YXRpb24tY3RyJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gZHY7XG4gICAgICAgICAgICAgICAgdmFyIGFycm93ID0gJCgnLmFycm93Jyk7XG4gICAgICAgICAgICAgICAgdmFyIG1hc2sgPSAkKCcubWFzaycpO1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRsLnRvKGR2LCAwLCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKGR2LCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKGFycm93LCAwLjUsIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAudG8obWFzaywgMCwge1xuICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICcrPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAncGFydG5lcnMtcmVzb3VyY2VzJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcHIgPSAkKCcucGFydG5lcnMtcmVzb3VyY2VzLWN0cicpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9IHByO1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgICAgICB0bC50byhwciwgMCwge1xuICAgICAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgICAgICB9KS50byhwciwgMC4yNSwge1xuICAgICAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IDBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAnbGVhcm4nKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBsZWFybiA9ICQoJy5maWdodC1jdHIgPiAubGVhcm4nKTtcbiAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBsZWFybjtcbiAgICAgICAgICAgICAgICB2YXIgdGwgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG4gICAgICAgICAgICAgICAgdGwudG8obGVhcm4sIDAsIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICAgICAgfSkudG8obGVhcm4sIDAuMjUsIHtcbiAgICAgICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZvciB0aGUgY2xvc2UgYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcInN1YnZpZXcuc2hvd0Nsb3NlQnV0dG9uXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNsb3NlU3ViVmlldzogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighdGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdmFyIHN1YiA9IHRoaXMuc3ViVmlldztcbiAgICAgICAgICAgIHZhciBtYXNrID0gJCgnLm1hc2snKTtcbiAgICAgICAgICAgIHRsLnRvKG1hc2ssIDAsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICctPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8oc3ViLCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc3ViLmhhc0NsYXNzKCdkYXRhLXZpc3VhbGl6YXRpb24tY3RyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzdWIuaGFzQ2xhc3MoJ3BhcnRuZXJzLXJlc291cmNlcy1jdHInKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc3ViLmhhc0NsYXNzKCdsZWFybicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlY3Rpb25BY3RpdmF0ZTogZnVuY3Rpb24oZWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGVsWzBdID09IHRoaXMuZWwpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dQYXJ0bmVyc1Jlc291cmNlcyA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoJ3BhcnRuZXJzLXJlc291cmNlcycpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dEYXRhVmlzdWFsaXphdGlvbiA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoJ2RhdGEnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93UmVhZE1vcmUgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KCdsZWFybicpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZVBhcnRuZXJzUmVzb3VyY2VzQ29udGVudCA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgcGMgPSAkKCcucHItY3RyLnBhcnRuZXJzLWN0cicpO1xuICAgICAgICAgICAgdmFyIHJjID0gJCgnLnByLWN0ci5yZXNvdXJjZXMtY3RyJyk7XG4gICAgICAgICAgICB2YXIgcHMgPSAkKCcuc3dpdGNoIC5wYXJ0bmVycycpO1xuICAgICAgICAgICAgdmFyIHJzID0gJCgnLnN3aXRjaCAucmVzb3VyY2VzJyk7XG5cbiAgICAgICAgICAgIGlmKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdyZXNvdXJjZXMnKSkge1xuICAgICAgICAgICAgICAgIHZhciBwckFjdGl2ZSA9IHBjO1xuICAgICAgICAgICAgICAgIHZhciBwckluYWN0aXZlID0gcmM7XG4gICAgICAgICAgICAgICAgdmFyIHN3aXRjaEFjdGl2ZSA9IHBzO1xuICAgICAgICAgICAgICAgIHZhciBzd2l0Y2hJbmFjdGl2ZSA9IHJzO1xuICAgICAgICAgICAgfSBlbHNlIGlmKCQoZS50YXJnZXQpLmhhc0NsYXNzKCdwYXJ0bmVycycpKSB7XG4gICAgICAgICAgICAgICAgdmFyIHByQWN0aXZlID0gcmM7XG4gICAgICAgICAgICAgICAgdmFyIHBySW5hY3RpdmUgPSBwYztcbiAgICAgICAgICAgICAgICB2YXIgc3dpdGNoQWN0aXZlID0gcnM7XG4gICAgICAgICAgICAgICAgdmFyIHN3aXRjaEluYWN0aXZlID0gcHM7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdGwudG8ocHJBY3RpdmUsIDAuMjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICdoaWRlLWdycCcpXG4gICAgICAgICAgICB0bC50byhwckFjdGl2ZSwgMCwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnbm9uZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHN3aXRjaEFjdGl2ZSwgMC4yNSwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJy09YWN0aXZlJyxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSwgJ2hpZGUtZ3JwJylcbiAgICAgICAgICAgIC50byhwckluYWN0aXZlLCAwLCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHBySW5hY3RpdmUsIDAuMjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICdzaG93LWdycCcpXG4gICAgICAgICAgICAudG8oc3dpdGNoSW5hY3RpdmUsIDAuMjUsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICcrPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXQsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgJ3Nob3ctZ3JwJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25QcmV2TmV4dERhdGFQb2ludCA6IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNBbmltYXRpbmcgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdmFyIGN1ciA9ICQoJy5kYXRhLXBvaW50LmFjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIG1lID0gdGhpcztcblxuICAgICAgICAgICAgLy9OZXh0XG4gICAgICAgICAgICB2YXIgbmV4dCA9IGN1ci5uZXh0KCk7XG4gICAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gJ3JpZ2h0JztcbiAgICAgICAgICAgIGlmKGN1ci5pbmRleCgnLmRhdGEtcG9pbnQnKSA9PSAkKCcuZGF0YS1wb2ludCcpLmxlbmd0aC0xKSB7XG4gICAgICAgICAgICAgICAgbmV4dCA9ICQoJy5kYXRhLXBvaW50JykuZmlyc3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHRhcmdldC5oYXNDbGFzcygnYXJyb3ctbGVmdCcpKSB7XG4gICAgICAgICAgICAgICAgLy9QcmV2XG4gICAgICAgICAgICAgICAgbmV4dCA9IGN1ci5wcmV2KCk7XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uID0gJ2xlZnQnO1xuICAgICAgICAgICAgICAgIGlmKGN1ci5pbmRleCgnLmRhdGEtcG9pbnQnKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSAkKCcuZGF0YS1wb2ludCcpLmxhc3QoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGwudG8obmV4dCwgMCwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJys9YWN0aXZlJyxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50byhuZXh0LCAwLCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGlyZWN0aW9uID09ICdyaWdodCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJy0xMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSgpXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC50byhjdXIsIDAuNSwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICctMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0oKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICdncnAxJylcbiAgICAgICAgICAgIC50byhuZXh0LCAwLjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogJzAnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSwgJ2dycDEnKVxuICAgICAgICAgICAgLnRvKGN1ciwgMCwge1xuICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJy09YWN0aXZlJyxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG4gICAgICAgICAgICAgICAgICAgIG1lLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd09ySGlkZUFycm93OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSB0aGlzLiRkYXRhUG9pbnRzLmZpbHRlcignLmFjdGl2ZScpLmluZGV4KCcuZGF0YS1wb2ludCcpO1xuXG4gICAgICAgICAgICBpZihpdGVtSW5kZXggPT0gdGhpcy4kZGF0YVBvaW50cy5sZW5ndGgtMSkge1xuICAgICAgICAgICAgICAgIC8vTGFzdCBzbGlkZVxuICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKCcuYXJyb3ctbGVmdCcpLnNob3coKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZihpdGVtSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAvL0ZpcnN0IHNsaWRlXG4gICAgICAgICAgICAgICAgJCgnLmFycm93LXJpZ2h0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoJy5hcnJvdy1sZWZ0JykuaGlkZSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvL01pZGRsZSBzbGlkZVxuICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCcuYXJyb3ctbGVmdCcpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvblByZXZOZXh0UmVzb3VyY2UgOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBjdXIgPSAkKCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHIuYWN0aXZlJyk7XG4gICAgICAgICAgICB2YXIgYm9keSA9ICQoJy5yZXNvdXJjZXMtY3RyIC5ib2R5LWN0cicpO1xuXG4gICAgICAgICAgICAvL05leHRcbiAgICAgICAgICAgIHZhciBuZXh0ID0gY3VyLm5leHQoKTtcbiAgICAgICAgICAgIHZhciBkaXJlY3Rpb24gPSAncmlnaHQnO1xuICAgICAgICAgICAgaWYoY3VyLmluZGV4KCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHInKSA9PSAkKCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHInKS5sZW5ndGgtMSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSAkKCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHInKS5maXJzdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYodGFyZ2V0Lmhhc0NsYXNzKCdhcnJvdy1sZWZ0JykpIHtcbiAgICAgICAgICAgICAgICAvL1ByZXZcbiAgICAgICAgICAgICAgICBuZXh0ID0gY3VyLnByZXYoKTtcbiAgICAgICAgICAgICAgICBkaXJlY3Rpb24gPSAnbGVmdCc7XG4gICAgICAgICAgICAgICAgaWYoY3VyLmluZGV4KCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHInKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG5leHQgPSAkKCcucmVzb3VyY2VzLWN0ciAuaW5mby1jdHInKS5sYXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcG9zID0gbmV4dC5pbmRleCgnLnJlc291cmNlcy1jdHIgLmluZm8tY3RyJykgKiAzNDA7XG5cbiAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgIHRsLnRvKG5leHQsIDAsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICcrPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8oYm9keSwgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICctJytwb3MrJ3B4J1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICdncnAxJylcbiAgICAgICAgICAgIC50byhjdXIsIDAsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICctPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uUGFydG5lckNsaWNrOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBPbW5pdHVyZS5vblBhcnRuZXJMaW5rKHtVUkw6IGUuY3VycmVudFRhcmdldC5ocmVmfSk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5vcGVuKGUuY3VycmVudFRhcmdldC5ocmVmKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbldpbmRvd1Jlc2l6ZTogZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGhhbGZXaW5XID0gJCh3aW5kb3cpLndpZHRoKCkvMjtcbiAgICAgICAgICAgIHZhciBoYWxmV2luSCA9ICQod2luZG93KS5oZWlnaHQoKS8yO1xuXG4vLyAgICAgICAgICAgIHRoaXMuYmdJbWcuY3NzKFwibGVmdFwiLCAoaGFsZldpblctKHRoaXMuYmdJbWcud2lkdGgoKS8yKSkrXCJweFwiKTtcbi8vICAgICAgICAgICAgdGhpcy5iZ0ltZy5jc3MoXCJ0b3BcIiwgKGhhbGZXaW5ILSh0aGlzLmJnSW1nLmhlaWdodCgpLzIpKStcInB4XCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgICBvbk1lbnVDbG9zZUNsaWNrOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3ViVmlldylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNsaWNrU29jaWFsOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSB0aGlzLiRkYXRhUG9pbnRzLmZpbHRlcignLmFjdGl2ZScpLmluZGV4KCcuZGF0YS1wb2ludCcpO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG5cbiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuVVJMO1xuXG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLmRhdGFQb2ludHNbaXRlbUluZGV4XS5zb2NpYWxTaGFyZVt0eXBlXTtcblxuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuc29jaWFsW3R5cGVdID09PSAnZnVuY3Rpb24nICYmIHNvY2lhbFNoYXJlKSB7XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNvY2lhbFt0eXBlXSh7XG4gICAgICAgICAgICAgICAgICAgIHBpY3R1cmU6IHNvY2lhbFNoYXJlLmltYWdlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZS5jb3B5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblRhcEhhY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBsaW5rIGFuZCBkaXNwYXRjaCBjbGljayBldmVudFxuICAgICAgICAgICAgdmFyIGhyZWYgPSBlLmN1cnJlbnRUYXJnZXQuaHJlZjtcbiAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGhyZWYpO1xuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cbiAgICAgICAgICAgIHZhciBkaXNwYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiSFRNTEV2ZW50c1wiKTtcbiAgICAgICAgICAgIGRpc3BhdGNoLmluaXRFdmVudChcImNsaWNrXCIsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgYS5kaXNwYXRjaEV2ZW50KGRpc3BhdGNoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZpZ2h0VmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgU2Nyb2xsQmFyVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9TY3JvbGxCYXJWaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvaG9tZS5oYnNcIik7XG52YXIgSGVscGVyRnVuY3MgPSByZXF1aXJlKFwiLi4vLi4vaGVscGVycy9IZWxwZXJzLmpzXCIpO1xuXG5cbnZhciBIb21lVmlldyA9IFZpZXcuZXh0ZW5kKFxue1xuICAgIGV2ZW50czpcbiAgICB7XG4gICAgICAgIFwiY2xpY2sgLnNjcm9sbC1kb3duXCIgOiBcIm9uU2Nyb2xsQnV0dG9uQ2xpY2tlZFwiLFxuICAgICAgICBcInRvdWNoZW5kIC5zY3JvbGwtZG93blwiIDogXCJvblNjcm9sbEJ1dHRvbkNsaWNrZWRcIixcbiAgICAgICAgXCJjbGljayAudHJhaWxlckNvcHlcIiA6IFwib25QbGF5VHJhaWxlclwiLFxuICAgICAgICBcInRvdWNoZW5kIC50cmFpbGVyQ29weVwiIDogXCJvblBsYXlUcmFpbGVyXCIsXG4gICAgICAgIFwiY2xpY2sgLm5ld3NcIiA6IFwib3Blbk5ld3NcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAubmV3c1wiIDogXCJvcGVuTmV3c1wiLFxuICAgICAgICBcInRvdWNoZW5kIC5oYm8tZmlsbXNcIiA6IFwib25IQk9GaWxtc1wiXG4gICAgfSxcblxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uKG9wdGlvbnMpXG4gICAge1xuICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYWZ0ZXJBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ21lbnUuY2xvc2VNb2RlQnV0dG9uQ2xpY2snLCB0aGlzLm9uTWVudUNsb3NlQ2xpY2ssIHRoaXMpO1xuICAgIH0sXG5cbiAgICBzZXR1cDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgICAgdGhpc1tcIm5ld3NcIl0gPSB0aGlzLiQoJy5tb2RhbCcpO1xuICAgICAgICBIZWxwZXJGdW5jcy5TY3JvbGxlci5pbml0RHJhZ2dhYmxlKHRoaXNbXCJuZXdzXCJdLmZpbmQoJy5jb250ZW50LWN0cicpKTtcbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgfSxcblxuICAgIGluaXRSb3V0ZXI6IGZ1bmN0aW9uKHJvb3QpXG4gICAge1xuICAgICAgICB0aGlzLl9zdXBlcihyb290KTtcbiAgICAgICAgQXBwLnJvdXRlci5yb3V0ZShcIlwiLCBcImhvbWVSb3V0ZVwiKTtcbiAgICB9LFxuXG4gICAgaGFuZGxlUm91dGU6IGZ1bmN0aW9uKHN1YnNlY3Rpb24sIGRldGFpbClcbiAgICB7XG4gICAgICB0aGlzLl9zdXBlcihzdWJzZWN0aW9uLCBkZXRhaWwpO1xuXG4gICAgICB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlKHRoaXMuJGVsKTtcbiAgICB9LFxuXG4gICAgb25TZWN0aW9uQWN0aXZhdGU6IGZ1bmN0aW9uKGVsKVxuICAgIHtcbiAgICAgICAgaWYoZWwgPT0gdGhpcy4kZWwpXG4gICAgICAgIHtcblxuICAgICAgICB9XG4gICAgfSxcblxuICAgIG9uTWVudUNsb3NlQ2xpY2s6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICAgIGlmKHRoaXMuc3ViVmlldylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5jbG9zZU5ld3MoKTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBvcGVuTmV3cyA6IGZ1bmN0aW9uIChlKVxuICAgIHtcbiAgICAgICAgdGhpcy5zdWJWaWV3ID0gdGhpc1tcIm5ld3NcIl07XG5cbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ3JlYWQtbW9yZScpO1xuICAgICAgICB0aGlzLnJlYWRNb3JlID0gdHJ1ZTtcbiAgICAgICAgdGhpc1tcIm5ld3NcIl0uY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuXG4gICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIlN1YlZpZXcuT3BlbmVkXCIpO1xuXG4gICAgICAgIC8vIGZvciB0aGUgY2xvc2UgYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwic3Vidmlldy5zaG93Q2xvc2VCdXR0b25cIik7XG4gICAgfSxcblxuICAgIGNsb3NlTmV3cyA6IGZ1bmN0aW9uIChlKVxuICAgIHtcbiAgICAgICAgdGhpc1tcIm5ld3NcIl0uY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIHRoaXMuc3ViVmlldyA9IG51bGw7XG5cbiAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU3ViVmlldy5DbG9zZWRcIik7XG4gICAgfSxcblxuICAgIG9uU2Nyb2xsQnV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIvdG8td2luLWEtd2FyXCIsIHRydWUpO1xuICAgIH0sXG5cbiAgICBvblBsYXlUcmFpbGVyOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgd2luZG93Lm9wZW4oJ2h0dHA6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj15YWFUUUxNRUVUdycsICdfYmxhbmsnKTtcbiAgICB9LFxuXG4gICAgb25IQk9GaWxtczogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cDovL3d3dy5oYm8uY29tL21vdmllcy90aGUtbm9ybWFsLWhlYXJ0P2ljaWQ9QUJDMTUxNlwiKTtcbiAgICB9XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEhvbWVWaWV3O1xuIiwidmFyIFZpZXcgPSByZXF1aXJlKFwiLi4vLi4vVmlldy5qc1wiKTtcbnZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi4uLy8uLi8uLi90ZW1wbGF0ZXMvc2VjdGlvbnMvbW9iaWxlL2ludHJvLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBJbnRyb1ZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6XG4gICAgICAgIHtcblxuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24gKG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuICAgICAgICAgICAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlY3Rpb25BY3RpdmF0ZTogZnVuY3Rpb24oZWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGVsWzBdID09IHRoaXMuZWwpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEludHJvVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL21vYmlsZS9tZWRpYS5oYnNcIik7XG52YXIgZGV0YWlsVGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL21vYmlsZS9jaGFyYWN0ZXJzRGV0YWlsLmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG5cbnZhciBTb2NpYWwgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvU29jaWFsLmpzXCIpO1xuXG52YXIgTWVkaWFWaWV3ID0gVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBoYW1tZXJFdmVudHMgOlxuICAgICAgICB7XG4gICAgICAgICAgICBcInRhcCAuaXRlbVwiIDogXCJvbkl0ZW1DbGlja1wiLFxuICAgICAgICAgICAgJ3RhcCBkaXYuc29jaWFsID4gYSc6ICdvbkNsaWNrU29jaWFsJ1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oXCJ3aW5kb3cucmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5iZWZvcmVBY3RpdmUnLCB0aGlzLm9uU2VjdGlvbkFjdGl2YXRlLCB0aGlzKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ21lbnUuY2xvc2VNb2RlQnV0dG9uQ2xpY2snLCB0aGlzLm9uTWVudUNsb3NlQ2xpY2ssIHRoaXMpO1xuXG4gICAgICAgICAgICB0aGlzLml0ZW1zID0gdGhpcy5tb2RlbC5pdGVtcztcblxuICAgICAgICAgICAgdGhpcy5kZXRhaWxWaWV3cyA9XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgXCJ2aWRlb1wiOiByZXF1aXJlKFwiLi4vcGFydGlhbHMvbW9iaWxlL1ZpZGVvRGV0YWlsVmlldy5qc1wiKSxcbiAgICAgICAgICAgICAgICBcImdhbGxlcnlcIjogcmVxdWlyZShcIi4uL3BhcnRpYWxzL21vYmlsZS9HYWxsZXJ5RGV0YWlsVmlldy5qc1wiKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cCA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMgPSB0aGlzLiQoJy5hbGwtaXRlbXMtY3RyJyk7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1DdHIgPSB0aGlzLiQoJy5hY3RpdmUtaXRlbS1jdHInKTtcblxuICAgICAgICAgICAgdmFyIGxlbiA9IHRoaXMuaXRlbXMuY2hpbGRyZW4oKS5sZW5ndGg7XG4gICAgICAgICAgICB2YXIgdyA9IDEwMC9sZW47XG4gICAgICAgICAgICB2YXIgcCA9IGxlbioxMDA7XG5cbiAgICAgICAgICAgIHRoaXMuaXRlbXMuY3NzKFwid2lkdGhcIiwgcCtcIiVcIik7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbiAoaW5kZXgsIGVsZW1lbnQpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5jc3MoXCJ3aWR0aFwiLCB3K1wiJVwiKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmluaXRTb2NpYWxGdW5jdGlvbnMoKTtcbiAgICAgICAgICAgIHRoaXMuaW5pdERyYWdnYWJsZSh0aGlzLml0ZW1zKTtcbiAgICAgICAgICAgIEhlbHBlckZ1bmNzLlNjcm9sbGVyLmluaXREcmFnZ2FibGUodGhpcy5hY3RpdmVJdGVtQ3RyKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5jc3MoXCJ6LWluZGV4XCIsIC0xKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdFNvY2lhbEZ1bmN0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbCA9IHt9O1xuXG4gICAgICAgICAgICB0aGlzLnNvY2lhbC5mYWNlYm9vayA9IF8uYmluZChTb2NpYWwuU2hhcmVGYWNlYm9vaywgU29jaWFsKTtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsLnR3aXR0ZXIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHdpdHRlciwgU29jaWFsKTtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsLnR1bWJsciA9IF8uYmluZChTb2NpYWwuU2hhcmVUdW1ibHIsIFNvY2lhbCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VjdGlvbkFjdGl2YXRlIDogZnVuY3Rpb24gKGVsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZWxbMF0gPT0gdGhpcy5lbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMub25XaW5kb3dSZXNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzaG93U3ViVmlldyA6IGZ1bmN0aW9uICh2aWV3TmFtZSwgb3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMuc3ViVmlldylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zdXBlcih2aWV3TmFtZSwgb3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHZhciBpdGVtT2JqID0gdGhpcy5pdGVtcy5jaGlsZHJlbignW2RhdGEtaWQ9XCInICsgdmlld05hbWUgKyAnXCJdJyk7XG4gICAgICAgICAgICB2YXIgaXRlbURhdGEgPSB0aGlzLm1vZGVsLml0ZW1zW2l0ZW1PYmouaW5kZXgoKV07XG5cbiAgICAgICAgICAgIHRoaXMuZGV0YWlsVmlldyA9IG5ldyB0aGlzLmRldGFpbFZpZXdzW2l0ZW1EYXRhLnR5cGVdKHttb2RlbDogaXRlbURhdGF9KTtcblxuICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gdGhpcy5kZXRhaWxWaWV3LnJlbmRlcigpLiRlbDtcbiAgICAgICAgICAgIHRoaXMuc3ViVmlldy5vZ0VsID0gaXRlbU9iajtcblxuICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmFwcGVuZFRvKHRoaXMuYWN0aXZlSXRlbUN0cik7XG5cbiAgICAgICAgICAgIGlmKGl0ZW1EYXRhLmltYWdlcylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRldGFpbFZpZXcuc2hvd0l0ZW0ob3B0aW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5jc3MoXCJ6LWluZGV4XCIsIDApO1xuXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUl0ZW1DdHIuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XG5cbiAgICAgICAgICAgIHRoaXMuaGlkZUFsbCgpO1xuXG4gICAgICAgICAgICAvLyBmb3IgdGhlIGNsb3NlIGJ1dHRvbiBmdW5jdGlvbmFsaXR5XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJzdWJ2aWV3LnNob3dDbG9zZUJ1dHRvblwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9zZVN1YlZpZXcgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICAgICAgICBpZiAoIXRoaXMuc3ViVmlldylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3dBbGwoKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5jc3MoXCJ6LWluZGV4XCIsIC0xKTtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSXRlbUN0ci5lbXB0eSgpO1xuICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gbnVsbDtcbiAgICAgICAgfSxcblxuICAgICAgICBoaWRlQWxsOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuJCgnLmJnLWZpbHRlcicpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd0FsbDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiQoJy5iZy1maWx0ZXInKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLml0ZW1zLmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbkl0ZW1DbGljazogZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGNoYXJJRCA9ICQoZS5jdXJyZW50VGFyZ2V0KS5kYXRhKCdpZCcpO1xuXG4gICAgICAgICAgICBpZihjaGFySUQgPT0gXCJtZWRpYS1sYW5kaW5nXCIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KGNoYXJJRCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdERyYWdnYWJsZSA6IGZ1bmN0aW9uIChzY3JvbGxEaXYpXG4gICAgICAgIHtcbiAgICAgICAgICAgIERyYWdnYWJsZS5jcmVhdGUoc2Nyb2xsRGl2LCB7XG4gICAgICAgICAgICAgICAgdHlwZSAgICAgICAgICAgOiBcInhcIixcbiAgICAgICAgICAgICAgICBlZGdlUmVzaXN0YW5jZSA6IDEsXG4gICAgICAgICAgICAgICAgekluZGV4Qm9vc3QgICAgOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjdXJzb3IgICAgICAgICA6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIG9uRHJhZ0VuZCAgICAgIDogZnVuY3Rpb24gKClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmFuWCA9IHNjcm9sbERpdlswXS5fZ3NUcmFuc2Zvcm0ueDtcbiAgICAgICAgICAgICAgICAgICAgaWYodHJhblggPiAwKVxuICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8oc2Nyb2xsRGl2LCAuNSwge3g6IDB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBwV2lkdGggPSBzY3JvbGxEaXYud2lkdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNXaWR0aCA9IHNjcm9sbERpdi5jaGlsZHJlbigpLmdldCgwKS5vZmZzZXRXaWR0aDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNhbGNkID0gTWF0aC5hYnModHJhblgpK2NXaWR0aDtcblxuICAgICAgICAgICAgICAgICAgICBpZihjYWxjZCA+IHBXaWR0aClcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBvcyA9IHBXaWR0aC1jV2lkdGg7XG4gICAgICAgICAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8oc2Nyb2xsRGl2LCAuNSwge3g6IC1wb3N9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmQgPSB0aGlzLmNhbGN1bGF0ZVZpc2libGVFbGVtZW50KHRyYW5YKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgdG9YID0gLShjV2lkdGgqaW5kKTtcbiAgICAgICAgICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHNjcm9sbERpdiwgLjUsIHt4OiB0b1h9KTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGNhbGN1bGF0ZVZpc2libGVFbGVtZW50OiBmdW5jdGlvbih0WClcbiAgICAgICAge1xuXG4gICAgICAgICAgdmFyIHNMZWZ0ID0gLXRYO1xuICAgICAgICAgIHZhciB3V2lkdGggPSAkKHdpbmRvdykud2lkdGgoKTtcblxuICAgICAgICAgIHZhciB2aXNpYmxlRWxlbWVudEluZGV4ID0gTWF0aC5yb3VuZChzTGVmdC93V2lkdGgpO1xuXG4gICAgICAgICAgdmlzaWJsZUVsZW1lbnRJbmRleCA9IHZpc2libGVFbGVtZW50SW5kZXggPCAwID8gMDogdmlzaWJsZUVsZW1lbnRJbmRleDtcblxuICAgICAgICAgIHJldHVybiB2aXNpYmxlRWxlbWVudEluZGV4O1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uTWVudUNsb3NlQ2xpY2s6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2xpY2tTb2NpYWw6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciB0eXBlID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zaGFyZScpO1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5zdWJWaWV3Lm9nRWwuaW5kZXgoKTtcblxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5kZXRhaWxWaWV3KTtcblxuICAgICAgICAgICAgaWYodGhpcy5kZXRhaWxWaWV3Lml0ZW1OYW1lKSB7XG4gICAgICAgICAgICAgICAgdmFyIGl0ZW1OYW1lID0gdGhpcy5kZXRhaWxWaWV3Lml0ZW1OYW1lO1xuICAgICAgICAgICAgICAgIHZhciBzb2NpYWxTaGFyZSA9IHRoaXMubW9kZWwuaXRlbXNbaXRlbUluZGV4XS5pbWFnZXNbaXRlbU5hbWVdLnNvY2lhbFNoYXJlW3R5cGVdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLml0ZW1zW2l0ZW1JbmRleF0uc29jaWFsU2hhcmVbdHlwZV07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLnNvY2lhbFt0eXBlXSA9PT0gJ2Z1bmN0aW9uJyAmJiBzb2NpYWxTaGFyZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuc29jaWFsW3R5cGVdKHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHNvY2lhbFNoYXJlLnRpdGxlLFxuICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc29jaWFsU2hhcmUuY29weSxcbiAgICAgICAgICAgICAgICAgICAgbGluazogbGlua1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZWRpYVZpZXc7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9tZW51Lmhic1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKiogU3RhdGljIFZhcmlhYmxlcyAqKioqKioqKioqKioqKioqKioqKioqKioqKipcblxuLy8gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqIE1lbnUgVmlldyAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbnZhciBNZW51VmlldyA9IFZpZXcuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgaGFtbWVyRXZlbnRzIDoge1xuICAgICAgICAgICAgXCJ0YXAgLmhhbWJ1cmdlclwiICAgIDogXCJ0b2dnbGVNZW51XCIsXG4gICAgICAgICAgICBcInRhcCAubWVudS1pdGVtXCIgICAgOiBcIm9uTWVudUl0ZW1DbGlja2VkXCIsXG4gICAgICAgICAgICBcInRhcCAuZmFjZWJvb2stc2hhcmVcIiA6IFwiZmFjZWJvb2tTaGFyZVwiLFxuICAgICAgICAgICAgXCJ0b3VjaGVuZCAuaGFtYnVyZ2VyXCIgICAgOiBcImRlZmF1bHRQcmV2ZW50ZXJcIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLm1lbnUtaXRlbVwiICAgIDogXCJkZWZhdWx0UHJldmVudGVyXCIsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5mYWNlYm9vay1zaGFyZVwiIDogXCJkZWZhdWx0UHJldmVudGVyXCIsXG4gICAgICAgICAgICBcImNsaWNrIC5oYW1idXJnZXJcIiAgICA6IFwiZGVmYXVsdFByZXZlbnRlclwiLFxuICAgICAgICAgICAgXCJjbGljayAubWVudS1pdGVtXCIgICAgOiBcImRlZmF1bHRQcmV2ZW50ZXJcIixcblx0XHRcdFwiY2xpY2sgLmZhY2Vib29rLXNoYXJlXCIgOiBcImRlZmF1bHRQcmV2ZW50ZXJcIixcbiAgICAgICAgICAgIFwidGFwIC50YXAtaGFja1wiOiBcIm9uVGFwSGFja1wiXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgICAgICB0aGlzLmFuaW1hdGlvblNwZWVkID0gMC4yNTtcbiAgICAgICAgICAgIHRoaXMub3BlbldpZHRoID0gSGVscGVyRnVuY3MuRGV2aWNlLmN1cnJlbnREZXZpY2UoKSA9PSBcIm1vYmlsZVwiID8gXCIxMDAlXCIgOiBcIjMwMHB4XCI7XG4gICAgICAgICAgICB0aGlzLm9wZW4gPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VCdXR0b25Nb2RlID0gZmFsc2U7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmhhbWJ1cmdlciA9IHRoaXMuJCgnLmhhbWJ1cmdlcicpO1xuXHRcdFx0dGhpcy5tZW51Q29udGFpbmVyID0gdGhpcy4kKCcubWVudS1jb250YWluZXInKTtcbiAgICAgICAgICAgIHRoaXMudG9wQmFyTG9nbyA9IHRoaXMuJCgnLnRvcC1iYXIgPmltZycpO1xuICAgICAgICAgICAgdGhpcy50b3BCYXJMb2dvLmhpZGUoKTtcblxuXHRcdFx0SGVscGVyRnVuY3MuU2Nyb2xsZXIuaW5pdERyYWdnYWJsZSh0aGlzLm1lbnVDb250YWluZXIpO1xuXG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwic2VjdGlvbi5hZnRlckFjdGl2ZVwiLCB0aGlzLm9uU2VjdGlvbkNoYW5nZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKFwic3Vidmlldy5zaG93Q2xvc2VCdXR0b25cIiwgdGhpcy5vblNob3dDbG9zZUJ1dHRvbiwgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVmYXVsdFByZXZlbnRlcjogZnVuY3Rpb24oZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHRvZ2dsZU1lbnUgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGhpcy5jbG9zZUJ1dHRvbk1vZGUgPT0gdHJ1ZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJtZW51LmNsb3NlTW9kZUJ1dHRvbkNsaWNrXCIpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VCdXR0b25Nb2RlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW1idXJnZXIuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybChcIit3aW5kb3cuY2RuK1wiL2ltYWdlcy9tZW51L21lbnUtaWNvbkAyeC5wbmcpXCIpO1xuXHRcdFx0XHR0aGlzLmhhbWJ1cmdlci5hdHRyKCdkYXRhLXN0YXRlJywgJ21lbnUnKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0d2VlblRvID0gdGhpcy5vcGVuID8gMCA6IHRoaXMub3BlbldpZHRoO1xuXG4gICAgICAgICAgICB2YXIgZWFzaW5nID0gJ1Bvd2VyMi5lYXNlSW5PdXQnO1xuXG4gICAgICAgICAgICBUd2VlbkxpdGUudG8odGhpcy5lbCwgdGhpcy5hbmltYXRpb25TcGVlZCwge1xuICAgICAgICAgICAgICAgIHdpZHRoIDogdHdlZW5UbyxcbiAgICAgICAgICAgICAgICBlYXNlICA6IGVhc2luZ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLm9wZW4gPSAhdGhpcy5vcGVuO1xuXG4gICAgICAgICAgICB2YXIgaGFtQkcgPSB0aGlzLm9wZW4gPyBcIi9pbWFnZXMvbWVudS94QDJ4LnBuZ1wiIDogXCIvaW1hZ2VzL21lbnUvbWVudS1pY29uQDJ4LnBuZ1wiO1xuXHRcdFx0dmFyIGhhbVN0YXRlID0gdGhpcy5vcGVuID8gXCJjbG9zZVwiIDogXCJtZW51XCI7XG4gICAgICAgICAgICB0aGlzLmhhbWJ1cmdlci5jc3MoXCJiYWNrZ3JvdW5kLWltYWdlXCIsIFwidXJsKFwiK3dpbmRvdy5jZG4rIGhhbUJHICtcIilcIik7XG5cdFx0XHR0aGlzLmhhbWJ1cmdlci5hdHRyKCdkYXRhLXN0YXRlJywgaGFtU3RhdGUpO1xuXG5cbiAgICAgICAgICAgIHRoaXMuJGVsLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25NZW51SXRlbUNsaWNrZWQgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZSgkKGUuY3VycmVudFRhcmdldCkuYXR0cihcImhyZWZcIiksIHRydWUpO1xuICAgICAgICAgICAgdGhpcy50b2dnbGVNZW51KGUpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VjdGlvbkNoYW5nZTogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGUuaW5kZXgoKSA9PSAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMudG9wQmFyTG9nby5mYWRlT3V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy50b3BCYXJMb2dvLmZhZGVJbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2hvd0Nsb3NlQnV0dG9uOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlQnV0dG9uTW9kZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIGNsb3NlIHRoZSBtZW51IGlmIGl0J3Mgb3BlblxuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcblxuICAgICAgICAgICAgdGhpcy5oYW1idXJnZXIuY3NzKFwiYmFja2dyb3VuZC1pbWFnZVwiLCBcInVybChcIit3aW5kb3cuY2RuK1wiL2ltYWdlcy9tZW51L3hAMngucG5nKVwiKTtcblx0XHRcdHRoaXMuaGFtYnVyZ2VyLmF0dHIoJ2RhdGEtc3RhdGUnLCAnY2xvc2UnKTtcbiAgICAgICAgfSxcblxuXHRcdGZhY2Vib29rU2hhcmUgOiBmdW5jdGlvbiAoZSlcblx0XHR7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIFNvY2lhbC5TaGFyZUZhY2Vib29rKCk7XG5cdFx0fSxcblxuICAgICAgICBvblRhcEhhY2s6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBsaW5rIGFuZCBkaXNwYXRjaCBjbGljayBldmVudFxuICAgICAgICAgICAgdmFyIGhyZWYgPSBlLmN1cnJlbnRUYXJnZXQuaHJlZjtcbiAgICAgICAgICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIGhyZWYpO1xuICAgICAgICAgICAgYS5zZXRBdHRyaWJ1dGUoXCJ0YXJnZXRcIiwgXCJfYmxhbmtcIik7XG5cbiAgICAgICAgICAgIHZhciBkaXNwYXRjaCA9IGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiSFRNTEV2ZW50c1wiKTtcbiAgICAgICAgICAgIGRpc3BhdGNoLmluaXRFdmVudChcImNsaWNrXCIsIHRydWUsIHRydWUpO1xuICAgICAgICAgICAgYS5kaXNwYXRjaEV2ZW50KGRpc3BhdGNoKTtcbiAgICAgICAgfSxcbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBNZW51VmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL21vYmlsZS9zdG9yeS5oYnNcIik7XG52YXIgU2Nyb2xsQmFyVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9TY3JvbGxCYXJWaWV3LmpzXCIpO1xudmFyIEhlbHBlckZ1bmNzID0gcmVxdWlyZShcIi4uLy4uL2hlbHBlcnMvSGVscGVycy5qc1wiKTtcblxudmFyIFNvY2lhbCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9zZXJ2aWNlcy9Tb2NpYWwuanNcIik7XG5cbnZhciBTdG9yeVZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGhhbW1lckV2ZW50cyA6IHtcbiAgICAgICAgICAgIFwidGFwIC5yZWFkLW1vcmVcIiAgICAgICA6IFwib25SZWFkTW9yZUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwidGFwIC5jbG9zZUJ1dHRvblwiICAgICA6IFwiY2xvc2VSZWFkTW9yZVwiLFxuICAgICAgICAgICAgXCJ0YXAgLmJpby1saW5rLW11cnBoeVwiIDogXCJvbk11cnBoeUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwidGFwIC5iaW8tbGluay1rcmFtZXJcIiA6IFwib25LcmFtZXJDbGlja2VkXCIsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5yZWFkLW1vcmVcIiAgICAgICA6IFwib25QcmV2ZW50RGVmYXVsdFwiLFxuICAgICAgICAgICAgXCJ0b3VjaGVuZCAuY2xvc2VCdXR0b25cIiAgICAgOiBcIm9uUHJldmVudERlZmF1bHRcIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLmJpby1saW5rLW11cnBoeVwiIDogXCJvblByZXZlbnREZWZhdWx0XCIsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5iaW8tbGluay1rcmFtZXJcIiA6IFwib25QcmV2ZW50RGVmYXVsdFwiLFxuXG4gICAgICAgICAgICAndGFwIGRpdi5zb2NpYWwgPiBhJzogJ29uQ2xpY2tTb2NpYWwnXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIHRoaXMucmVhZE1vcmUgPSBmYWxzZTtcbiAgICAgICAgICAgIHRoaXMucmVhZE1vcmVTbGlkZXIgPSBudWxsO1xuICAgICAgICAgICAgdGhpcy5yZWFkTW9yZVBhZ2UgPSAxO1xuXG4gICAgICAgICAgICB0aGlzLmlzVmlkZW9Db21wbGV0ZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICB0aGlzLmN1ck11cnBoeUluZGV4ID0gMDtcblxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmJlZm9yZUFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignbWVudS5jbG9zZU1vZGVCdXR0b25DbGljaycsIHRoaXMub25NZW51Q2xvc2VDbGljaywgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcGFnZXMsIGluZGV4O1xuXG4gICAgICAgICAgICBwYWdlcyA9IFsncnlhbi1tdXJwaHknLCAnbGFycnkta3JhbWVyJ107XG5cbiAgICAgICAgICAgIHRoaXNbXCJyeWFuLW11cnBoeVwiXSA9IHRoaXMuJCgnLmJpby1tdXJwaHknKTtcbiAgICAgICAgICAgIHRoaXNbXCJsYXJyeS1rcmFtZXJcIl0gPSB0aGlzLiQoJy5iaW8ta3JhbWVyJyk7XG4gICAgICAgICAgICB0aGlzLmJsTXVycGh5ID0gdGhpcy4kKCcuYmlvLWxpbmstbXVycGh5Jyk7XG4gICAgICAgICAgICB0aGlzLmJsS3JhbWVyID0gdGhpcy4kKCcuYmlvLWxpbmsta3JhbWVyJyk7XG4gICAgICAgICAgICB0aGlzLmJsUmVhZE1vcmUgPSB0aGlzLiQoJy5yZWFkLW1vcmUnKTtcblxuICAgICAgICAgICAgdGhpcy5tYWluQ29weSA9IHRoaXMuJCgnLm1haW5Db3B5Jyk7XG4gICAgICAgICAgICB0aGlzLnN0b3J5ID0gdGhpcy4kKCcuc3RvcnknKTtcblxuICAgICAgICAgICAgdGhpcy5tb3JlQ29weVBhcmFncmFwaHMgPSB0aGlzLnN0b3J5LmZpbmQoJy5tb3JlJyk7XG5cbiAgICAgICAgICAgIHRoaXMubXVycGh5UGFnZXMgPSB0aGlzLiQoJy5iaW8tcGFnZS5tdXJwaHknKS5jaGlsZHJlbigpO1xuXG4gICAgICAgICAgICB0aGlzLmJnSW1nID0gdGhpcy4kKCcudmlkZW9JbWFnZScpO1xuICAgICAgICAgICAgSGVscGVyRnVuY3MuU2Nyb2xsZXIuaW5pdERyYWdnYWJsZSh0aGlzLm1haW5Db3B5KTtcbiAgICAgICAgICAgIEhlbHBlckZ1bmNzLlNjcm9sbGVyLmluaXREcmFnZ2FibGUodGhpc1tcInJ5YW4tbXVycGh5XCJdKTtcbiAgICAgICAgICAgIEhlbHBlckZ1bmNzLlNjcm9sbGVyLmluaXREcmFnZ2FibGUodGhpc1tcImxhcnJ5LWtyYW1lclwiXSk7XG5cbiAgICAgICAgICAgIHRoaXMuaW5pdFNvY2lhbEZ1bmN0aW9ucygpO1xuICAgICAgICB9LFxuICAgICAgICBpbml0U29jaWFsRnVuY3Rpb25zOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsID0ge307XG5cbiAgICAgICAgICAgIHRoaXMuc29jaWFsLmZhY2Vib29rID0gXy5iaW5kKFNvY2lhbC5TaGFyZUZhY2Vib29rLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHdpdHRlciA9IF8uYmluZChTb2NpYWwuU2hhcmVUd2l0dGVyLCBTb2NpYWwpO1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwudHVtYmxyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR1bWJsciwgU29jaWFsKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXIgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFuZGxlUm91dGUgOiBmdW5jdGlvbiAoc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGVhbnVwXG4gICAgICAgICAgICBpZiAoIXN1YnNlY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy90aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFkTW9yZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zdXBlcihzdWJzZWN0aW9uLCBkZXRhaWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VjdGlvbkFjdGl2YXRlIDogZnVuY3Rpb24gKGVsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZWxbMF0gPT0gdGhpcy5lbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMub25XaW5kb3dSZXNpemUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzaG93U3ViVmlldyA6IGZ1bmN0aW9uICh2aWV3TmFtZSwgb3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIodmlld05hbWUsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSB0aGlzW3ZpZXdOYW1lXTtcblxuICAgICAgICAgICAgdGhpcy5oaWRlQWxsKCk7XG5cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAncnlhbi1tdXJwaHknKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGFuaW1hdGUgaW4gZnJvbSB0aGUgbGVmdFxuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jc3MoXCJsZWZ0XCIsIC10aGlzLnN1YlZpZXcud2lkdGgoKSArIFwicHhcIik7XG5cbiAgICAgICAgICAgICAgICBUd2VlbkxpdGUudG8odGhpc1tcInJ5YW4tbXVycGh5XCJdLCAwLCB7eTogMH0pO1xuICAgICAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcInJ5YW4tbXVycGh5LlNlY3Rpb24uRmluYWxQb3NpdGlvblwiLCB7cGVyY2VudDogdW5kZWZpbmVkfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmlld05hbWUgPT0gJ2xhcnJ5LWtyYW1lcicpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgICAgICAvLyBhbmltYXRlIGluIGZyb20gdGhlIHJpZ2h0XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmNzcyhcImxlZnRcIiwgJCh3aW5kb3cpLndpZHRoKCkgKyBcInB4XCIpO1xuXG4gICAgICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXNbXCJsYXJyeS1rcmFtZXJcIl0sIDAsIHt5OiAwfSk7XG4gICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwibGFycnkta3JhbWVyLlNlY3Rpb24uRmluYWxQb3NpdGlvblwiLCB7cGVyY2VudDogdW5kZWZpbmVkfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGZvciB0aGUgY2xvc2UgYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcInN1YnZpZXcuc2hvd0Nsb3NlQnV0dG9uXCIpO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNsaWRlIGFuaW1hdGlvblxuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzICA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnIDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZSA6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9zZVN1YlZpZXcgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zaG93QWxsKCk7XG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcuY3NzKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5tdXJwaHlTbGlkZXIpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5tdXJwaHlTbGlkZXIuZGVzdHJveVNsaWRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMua3JhbWVyU2xpZGVyKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMua3JhbWVyU2xpZGVyLmRlc3Ryb3lTbGlkZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvcGVuUmVhZE1vcmUgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ3JlYWQtbW9yZScpO1xuICAgICAgICAgICAgdGhpcy5yZWFkTW9yZSA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnN0b3J5LmNzcyhcImRpc3BsYXlcIiwgXCJibG9ja1wiKTtcbiAgICAgICAgICAgIHRoaXMuYmxNdXJwaHkuZmFkZU91dCgpO1xuICAgICAgICAgICAgdGhpcy5ibEtyYW1lci5mYWRlT3V0KCk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3Lk9wZW5lZFwiKTtcblxuICAgICAgICAgICAgLy8gZm9yIHRoZSBjbG9zZSBidXR0b24gZnVuY3Rpb25hbGl0eVxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwic3Vidmlldy5zaG93Q2xvc2VCdXR0b25cIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xvc2VSZWFkTW9yZSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygncmVhZC1tb3JlJyk7XG4gICAgICAgICAgICB0aGlzLnJlYWRNb3JlID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLnN0b3J5LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgdGhpcy5ibE11cnBoeS5mYWRlSW4oKTtcbiAgICAgICAgICAgIHRoaXMuYmxLcmFtZXIuZmFkZUluKCk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLnRyaWdnZXIoXCJTdWJWaWV3LkNsb3NlZFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblJlYWRNb3JlQ2xpY2tlZCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLm9wZW5SZWFkTW9yZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uTXVycGh5Q2xpY2tlZCA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KFwicnlhbi1tdXJwaHlcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25LcmFtZXJDbGlja2VkIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoXCJsYXJyeS1rcmFtZXJcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25XaW5kb3dSZXNpemUgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmJnVmlkIHx8ICF0aGlzLmJnVmlkLmxlbmd0aCkgcmV0dXJuO1xuXG4gICAgICAgICAgICB2YXIgaGFsZldpblcgPSAkKHdpbmRvdykud2lkdGgoKSAvIDI7XG4gICAgICAgICAgICB2YXIgaGFsZldpbkggPSAkKHdpbmRvdykuaGVpZ2h0KCkgLyAyO1xuXG4gICAgICAgICAgICB0aGlzLmJnVmlkLmNzcyhcImxlZnRcIiwgKGhhbGZXaW5XIC0gKHRoaXMuYmdWaWQud2lkdGgoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgICAgICB0aGlzLmJnVmlkLmNzcyhcInRvcFwiLCAoaGFsZldpbkggLSAodGhpcy5iZ1ZpZC5oZWlnaHQoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgICAgICB0aGlzLmJnSW1nLmNzcyhcImxlZnRcIiwgKGhhbGZXaW5XIC0gKHRoaXMuYmdJbWcud2lkdGgoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgICAgICB0aGlzLmJnSW1nLmNzcyhcInRvcFwiLCAoaGFsZldpbkggLSAodGhpcy5iZ0ltZy5oZWlnaHQoKSAvIDIpKSArIFwicHhcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZUFsbDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiQoJy5iZy1maWx0ZXInKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLmJsTXVycGh5LmNzcyhcImRpc3BsYXlcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgdGhpcy5ibEtyYW1lci5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgICAgIHRoaXMuYmxSZWFkTW9yZS5jc3MoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93QWxsOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuJCgnLmJnLWZpbHRlcicpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuYmxNdXJwaHkuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICAgICAgdGhpcy5ibEtyYW1lci5jc3MoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG4gICAgICAgICAgICB0aGlzLmJsUmVhZE1vcmUuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uTWVudUNsb3NlQ2xpY2s6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgaWYodGhpcy5zdWJWaWV3IHx8IHRoaXMucmVhZE1vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBvblByZXZlbnREZWZhdWx0OiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBjb25zb2xlLmxvZygneWVzJyk7XG5cbiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuVVJMO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG4gICAgICAgICAgICB2YXIgc29jaWFsSWQ7XG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcuaGFzQ2xhc3MoJ2Jpby1tdXJwaHknKSkge1xuICAgICAgICAgICAgICAgIHNvY2lhbElkID0gJ3J5YW5NdXJwaHknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb2NpYWxJZCA9ICdsYXJyeUtyYW1lcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLnNvY2lhbENvcHlbc29jaWFsSWRdO1xuXG4gICAgICAgICAgICB0aGlzLnNvY2lhbFt0eXBlXSh7XG4gICAgICAgICAgICAgICAgcGljdHVyZTogc29jaWFsU2hhcmUudGh1bWIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNvY2lhbFNoYXJlLnRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZVt0eXBlXSxcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0b3J5VmlldztcbiIsInZhciBUaW1lbGluZVZpZXcgPSByZXF1aXJlKFwiLi4vVGltZWxpbmVWaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9tb2JpbGUvdGltZWxpbmUuaGJzXCIpO1xudmFyIEhlbHBlckZ1bmNzID0gcmVxdWlyZShcIi4uLy4uL2hlbHBlcnMvSGVscGVycy5qc1wiKTtcblxudmFyIFRpbWVsaW5lVmlld01vYmlsZSA9IFRpbWVsaW5lVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICAvLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiBJbml0aWFsaXphdGlvbiBTdHVmZiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5leHRlbmQoe30sIFRpbWVsaW5lVmlldy5wcm90b3R5cGUuZXZlbnRzKCksIHtcbiAgICAgICAgICAgICAgICAnY2xpY2sgLml0ZW0nIDogJydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24ob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG5cdFx0XHRcblx0XHRcdHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cCA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgICAgICB0aGlzLmluaXREcmFnZ2FibGUodGhpcy4kaXRlbXMubGVuZ3RoLCB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lcik7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ21lbnUuY2xvc2VNb2RlQnV0dG9uQ2xpY2snLCB0aGlzLm9uTWVudUNsb3NlQ2xpY2ssIHRoaXMpO1xuXG4gICAgICAgICAgICB2YXIgJHN1bW1hcnlzID0gdGhpcy4kaXRlbXMuZmluZCgnZGl2LnN1bW1hcnkgZGl2LmNvbnRlbnQnKTtcblxuICAgICAgICAgICAgJHN1bW1hcnlzLmVhY2goZnVuY3Rpb24oaSwgc3VtbWFyeSkge1xuICAgICAgICAgICAgICAgIEhlbHBlckZ1bmNzLlNjcm9sbGVyLmluaXREcmFnZ2FibGUoJChzdW1tYXJ5KSwge1xuICAgICAgICAgICAgICAgICAgICBib3VuZHM6ICQoc3VtbWFyeSkucGFyZW50KCksXG4gICAgICAgICAgICAgICAgICAgIGVkZ2VSZXNpc3RhbmNlOiAxXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRKcXVlcnlWYXJpYWJsZXM6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IERyYWdnYWJsZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IFdpbmRvdyBSZXNpemUgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgcmVzaXplQWxsSXRlbXNDb250YWluZXI6IGZ1bmN0aW9uKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBjb250YWluZXJNaW5XaWR0aCA9IHdpbmRvd1dpZHRoICogdGhpcy4kaXRlbXMubGVuZ3RoO1xuXG4gICAgICAgICAgICB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lci53aWR0aChjb250YWluZXJNaW5XaWR0aCk7XG5cbiAgICAgICAgICAgIHJldHVybiBjb250YWluZXJNaW5XaWR0aDtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93U3ViVmlldzogZnVuY3Rpb24odmlld25hbWUsIG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKHZpZXduYW1lLCBvcHRpb25zKTtcblxuXG5cbiAgICAgICAgICAgIC8vIGZvciB0aGUgY2xvc2UgYnV0dG9uIGZ1bmN0aW9uYWxpdHlcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcInN1YnZpZXcuc2hvd0Nsb3NlQnV0dG9uXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IENyZWF0ZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgY3JlYXRlU3ViVmlldzogZnVuY3Rpb24oJHZpZXcpIHtcbiAgICAgICAgICAgIHZhciBuZXdWaWV3ID0gdGhpcy5fc3VwZXIoJHZpZXcpO1xuXG4gICAgICAgICAgICB2YXIgZXZlbnRzID0gdGhpcy5tb2RlbC55ZWFyc1skdmlldy5pbmRleCgpXS5ldmVudHM7XG5cbiAgICAgICAgICAgIHZhciAkdGltZWxpbmVFdmVudHMgPSAkKCc8ZGl2PicsIHtjbGFzczogJ3RpbWVsaW5lLWV2ZW50cyd9KTtcbiAgICAgICAgICAgIHZhciAkZGF0ZXMgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2RhdGVzJ30pO1xuICAgICAgICAgICAgdmFyICRldmVudHMgPSAkKCc8ZGl2PicsIHtjbGFzcyA6ICdldmVudHMnfSk7XG5cbiAgICAgICAgICAgIHZhciAkdW5kZXJsYXkgPSAkKCc8ZGl2PicsIHtjbGFzcyA6ICd1bmRlcmxheSd9KTtcblxuICAgICAgICAgICAgdmFyICR0aW1lbGluZUV2ZW50c0lubmVyID0gJCgnPGRpdj4nLCB7Y2xhc3M6ICdmdWxsLXJlbGF0aXZlJ30pLmFwcGVuZFRvKCR0aW1lbGluZUV2ZW50cyk7XG4gICAgICAgICAgICB2YXIgJGRhdGVzSW5uZXIgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2Z1bGwtcmVsYXRpdmUnfSkuYXBwZW5kVG8oJGRhdGVzKTtcbiAgICAgICAgICAgIHZhciAkZXZlbnRzSW5uZXIgPSAkKCc8ZGl2PicsIHtjbGFzczogJ2Z1bGwtcmVsYXRpdmUnfSkuYXBwZW5kVG8oJGV2ZW50cyk7XG5cbiAgICAgICAgICAgIF8uZWFjaChldmVudHMsIGZ1bmN0aW9uKGV2ZW50KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciAkZGF0ZSA9ICQoJzxkaXY+Jywge1xuICAgICAgICAgICAgICAgICAgICBodG1sOiBldmVudC5ldmVudERhdGUsXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzOiAnZGF0ZScsXG4gICAgICAgICAgICAgICAgICAgICdkYXRhLWlkJzogZXZlbnQuZXZlbnREYXRlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyICRjb3B5ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzIDogJ2NvcHknLFxuICAgICAgICAgICAgICAgICAgICBodG1sOiBldmVudC5jb3B5XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdmFyICR0aXRsZSA9ICQoJzxkaXY+Jywge1xuICAgICAgICAgICAgICAgICAgICBjbGFzczogJ3RpdGxlJyxcbiAgICAgICAgICAgICAgICAgICAgaHRtbDogZXZlbnQudGl0bGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgJGV2ZW50ID0gJCgnPGRpdj4nLCB7XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzIDogJ2V2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgJ2RhdGEtaWQnOiBldmVudC5ldmVudERhdGVcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB2YXIgJGNsb3NlID0gJCgnPGJ1dHRvbj48L2J1dHRvbj4nLCB7Y2xhc3M6ICdjbG9zZScsIGh0bWw6ICdjbG9zZSd9KTtcbiAgICAgICAgICAgICAgICAkY29weS5hcHBlbmQoJGNsb3NlKTtcblxuICAgICAgICAgICAgICAgICRldmVudC5hcHBlbmQoJHRpdGxlLCAkY29weSkuYXBwZW5kVG8oJGV2ZW50c0lubmVyKTtcbiAgICAgICAgICAgICAgICAkZGF0ZS5hcHBlbmRUbygkZGF0ZXNJbm5lcikuYmVmb3JlKCcgJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJCgnPGRpdj4nLCB7Y2xhc3MgOiAnZnVsbC13aWR0aCd9KS5hcHBlbmRUbygkZGF0ZXNJbm5lcik7ICAgICAgICAvL292ZXJmbG93IGZvciBqdXN0aWZ5XG4gICAgICAgICAgICAkKCc8ZGl2PicsIHtjbGFzcyA6ICdiYXInfSkuYXBwZW5kVG8oJGRhdGVzSW5uZXIpOyAgICAgICAgICAgICAgIC8vdW5kZXJsaW5lO1xuXG4gICAgICAgICAgICAkdGltZWxpbmVFdmVudHNJbm5lci5hcHBlbmQoJGRhdGVzLCAkZXZlbnRzKTtcbiAgICAgICAgICAgIG5ld1ZpZXcuZmluZCgnPiAuZnVsbC1yZWxhdGl2ZScpLmFwcGVuZCgkdW5kZXJsYXksICR0aW1lbGluZUV2ZW50cyk7XG5cbiAgICAgICAgICAgIG5ld1ZpZXcuJHN1bW1hcnkgPSBuZXdWaWV3LmZpbmQoJ2Rpdi5zdW1tYXJ5Jyk7XG4gICAgICAgICAgICBuZXdWaWV3LiR5ZWFyID0gbmV3Vmlldy5maW5kKCdkaXYueWVhcicpO1xuXG4gICAgICAgICAgICBuZXdWaWV3LiRldmVudHNDb250YWluZXIgPSAkdGltZWxpbmVFdmVudHM7XG4gICAgICAgICAgICBuZXdWaWV3LiRkYXRlSXRlbXMgPSAkZGF0ZXNJbm5lci5maW5kKCdkaXYuZGF0ZScpO1xuICAgICAgICAgICAgbmV3Vmlldy4kZGF0ZUJhciA9ICRkYXRlc0lubmVyLmZpbmQoJ2Rpdi5iYXInKTtcblxuICAgICAgICAgICAgbmV3Vmlldy4kYmFja2dyb3VuZCA9IG5ld1ZpZXcuZmluZCgnZGl2LmJhY2tncm91bmQnKTtcblxuICAgICAgICAgICAgbmV3Vmlldy4kdW5kZXJsYXkgPSAkdW5kZXJsYXk7XG5cbiAgICAgICAgICAgIG5ld1ZpZXcuJGV2ZW50SXRlbXMgPSAkZXZlbnRzSW5uZXIuY2hpbGRyZW4oKTtcblxuICAgICAgICAgICAgcmV0dXJuIG5ld1ZpZXc7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gU2hvdy9Td2FwIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBQb3NpdGlvbi9QcmUtYW5pbWF0aW9uIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBwb3NpdGlvblN1YlZpZXdUb09wZW46IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigkbmV3U3ViVmlldyk7XG5cbiAgICAgICAgICAgICRuZXdTdWJWaWV3LmNzcyh7XG4gICAgICAgICAgICAgICAgbGVmdDogJzBweCcsXG4gICAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIGhpZGVEYXRlSXRlbXM6IGZ1bmN0aW9uKCRuZXdTdWJWaWV3KSB7XG4gICAgICAgICAgICAvL292ZXJ3cml0ZSBvbGQgaGlkZSBkYXRlIGl0ZW1zIGZ1bmN0aW9uXG4gICAgICAgIH0sXG4gICAgICAgIHBvc2l0aW9uTmV3RXZlbnQ6IGZ1bmN0aW9uKCRldmVudCwgZGlyZWN0aW9uKSB7XG4gICAgICAgICAgICB2YXIgeFN0YXJ0ID0gdGhpcy5fc3VwZXIoJGV2ZW50LCBkaXJlY3Rpb24pO1xuXG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcuJGFjdGl2ZUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgVHdlZW5MaXRlLnNldCgkZXZlbnQub2dFbCwge1xuICAgICAgICAgICAgICAgICAgICB4OiB4U3RhcnRcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS5zZXQoJGV2ZW50LCB7XG4gICAgICAgICAgICAgICAgeTogMFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIEhlbHBlckZ1bmNzLlNjcm9sbGVyLmluaXREcmFnZ2FibGUoJGV2ZW50KTtcbiAgICAgICAgfSxcbiAgICAgICAgLy8gRm9yIHN3YXBwaW5nIHN1YiB2aWV3c1xuICAgICAgICBwb3NpdGlvblN1YlZpZXdFdmVudDogZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigkZXZlbnQpO1xuXG4gICAgICAgICAgICAkZXZlbnQub2dFbC5jc3MoJ29wYWNpdHknLCAxKTtcblxuICAgICAgICAgICAgSGVscGVyRnVuY3MuU2Nyb2xsZXIuaW5pdERyYWdnYWJsZSgkZXZlbnQpO1xuICAgICAgICB9LFxuXG5cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFuaW1hdGlvbiBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgU3ViVmlldyBPcGVuID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFuaW1hdGVTdWJWaWV3T3BlbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBTdGF0aWMgVmFyaWFibGVzXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZTEgPSAwLjU7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZTIgPSAwLjY7XG4gICAgICAgICAgICB2YXIgZGF0ZVN0YWdnZXJPZmZzZXRUaW1lID0gMC4xMDtcblxuICAgICAgICAgICAgdmFyIGRhdGVzTGFiZWwgPSAnYW5pbWF0ZSBkYXRlcyc7XG4gICAgICAgICAgICB2YXIgZXZlbnRMYWJlbCA9ICdhbmltYXRlIGV2ZW50JztcblxuICAgICAgICAgICAgLy8gRGVwZW5kZW50IG9uIHN0YXRpY3NcbiAgICAgICAgICAgIHZhciBkYXRlU3RhZ2dlckFuaW1hdGlvblRpbWUgPSBhbmltYXRpb25UaW1lMiAtICgodGhpcy5zdWJWaWV3LiRkYXRlSXRlbXMubGVuZ3RoIC0gMSkgKiBkYXRlU3RhZ2dlck9mZnNldFRpbWUpO1xuICAgICAgICAgICAgdmFyIGJhckFuaW1hdGlvblRpbWUgPSBhbmltYXRpb25UaW1lMiAtIGRhdGVTdGFnZ2VyQW5pbWF0aW9uVGltZTtcblxuICAgICAgICAgICAgdmFyICRhY3RpdmVEYXRlID0gdGhpcy5zdWJWaWV3LiRkYXRlSXRlbXMuZmlsdGVyKCc6Zmlyc3QnKTtcblxuICAgICAgICAgICAgdmFyIHRpbWVsaW5lID0gbmV3IFRpbWVsaW5lTGl0ZSh7XG4gICAgICAgICAgICAgICAgcGF1c2VkOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMucm9vdGVkSXRlbSk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuc3ViVmlldy5vZ0VsLmluZGV4KCkpO1xuXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvSXRlbSh0aGlzLnN1YlZpZXcub2dFbC5pbmRleCgpLCAwLjEpO1xuXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9hbmltYXRlIGluIGRhdGVzIGFmdGVyIHN0YWdlIDEgaGFzIGZpbmlzaGVkXG4gICAgICAgICAgICB0aW1lbGluZS5hZGRMYWJlbChkYXRlc0xhYmVsLCBhbmltYXRpb25UaW1lMSk7XG5cbiAgICAgICAgICAgIC8vYW5pbWF0ZSBpbiBldmVudHMgYWZ0ZXIgMS8zIG9mIHRpbWUgaGFzIHBhc3NlZCBpbiBzdGFnZSAyXG4gICAgICAgICAgICB0aW1lbGluZS5hZGRMYWJlbChldmVudExhYmVsLCBhbmltYXRpb25UaW1lMSArIChhbmltYXRpb25UaW1lMi8zKSk7XG5cbiAgICAgICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKioqIEFuaW1hdGlvbnMgUGFydCAxICoqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgICAgICAvL3RoaXMuYWRkQW5pbWF0aW9uRnVsbHNjcmVlbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZTEpO1xuICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25TdW1tYXJ5T3V0KHRpbWVsaW5lLCBhbmltYXRpb25UaW1lMSk7XG5cbiAgICAgICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uVW5kZXJsYXlJbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZTEpO1xuXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKiBBbmltYXRpb25zIFBhcnQgMiAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25TaG93QWN0aXZlRGF0ZSh0aW1lbGluZSwgJGFjdGl2ZURhdGUsIGJhckFuaW1hdGlvblRpbWUsIGRhdGVzTGFiZWwpO1xuXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKioqKiBBbmltYXRpb25zIFBhcnQgMyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICAgICAgICAgICAgdGhpcy5hZGRUcmlnZ2VyU2hvd0V2ZW50KHRpbWVsaW5lLCAkYWN0aXZlRGF0ZSwgZXZlbnRMYWJlbCk7XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKHRpbWVsaW5lKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uU2hvd0FjdGl2ZURhdGU6IGZ1bmN0aW9uKHRpbWVsaW5lLCAkYWN0aXZlRGF0ZSwgYmFyQW5pbWF0aW9uVGltZSwgZGF0ZXNMYWJlbCkge1xuICAgICAgICAgICAgdGltZWxpbmUuYWRkKFR3ZWVuTGl0ZS50bygkYWN0aXZlRGF0ZSwgYmFyQW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0pLCBkYXRlc0xhYmVsKTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgU3ViVmlldyBDbG9zZWQgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgYW5pbWF0ZVN1YlZpZXdDbG9zZWQ6IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNjtcblxuICAgICAgICAgICAgdmFyIGFuaW1UaW1lMiA9IGFuaW1hdGlvblRpbWUgKiAzLzQ7XG4gICAgICAgICAgICB2YXIgYW5pbVN1bW1hcnlTdGFydCA9IGFuaW1hdGlvblRpbWUgLSBhbmltVGltZTI7XG5cbiAgICAgICAgICAgIHZhciB0aW1lbGluZSA9IG5ldyBUaW1lbGluZUxpdGUoe1xuICAgICAgICAgICAgICAgIHBhdXNlZDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2suYmluZCh0aGlzKSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuYWRkQW5pbWF0aW9uTWluaW1pemUodGltZWxpbmUsIGFuaW1hdGlvblRpbWUsIDApO1xuXG4gICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblVuZGVybGF5T3V0KHRpbWVsaW5lLCBhbmltYXRpb25UaW1lLCAwKTtcblxuICAgICAgICAgICAgdGhpcy5hZGRBbmltYXRpb25FdmVudHNDb250YWluZXJGYWRlT3V0KHRpbWVsaW5lLCBhbmltVGltZTIsIDApO1xuXG4gICAgICAgICAgICB0aGlzLmFkZEFuaW1hdGlvblN1bW1hcnlJbih0aW1lbGluZSwgYW5pbVRpbWUyLCBhbmltU3VtbWFyeVN0YXJ0KTtcblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoY2FsbGJhY2ssIHRpbWVsaW5lKTtcbiAgICAgICAgfSxcbiAgICAgICAgYWRkQW5pbWF0aW9uWWVhck1vdmVEb3duOiBmdW5jdGlvbih0aW1lbGluZSwgYW5pbWF0aW9uVGltZTEsIHBvc2l0aW9uKSB7XG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldy4keWVhciwgYW5pbWF0aW9uVGltZTEsIHtcbiAgICAgICAgICAgICAgICB0b3A6IDYwXG4gICAgICAgICAgICB9KSwgcG9zaXRpb24pO1xuICAgICAgICB9LFxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IEFuaW1hdGUgRXZlbnRzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFkZEFuaW1hdGlvbkV2ZW50SW46IGZ1bmN0aW9uKHRpbWVsaW5lLCAkZXZlbnQsIGFuaW1hdGlvblRpbWUpIHtcbiAgICAgICAgICAgIHRpbWVsaW5lLmFkZChUd2VlbkxpdGUudG8oWyRldmVudC4kdGl0bGUsICRldmVudC4kY29weSwgJGV2ZW50Lm9nRWxdLCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgICAgICB4OiAwXG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH0sXG4gICAgICAgIGFkZEFuaW1hdGlvbkV2ZW50T3V0OiBmdW5jdGlvbih0aW1lbGluZSwgJGV2ZW50LCBhbmltYXRpb25UaW1lLCBkaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHZhciB4VG8gPSAtdGhpcy5zdWJWaWV3LiRhY3RpdmVFdmVudC53aWR0aCgpLzQ7XG5cbiAgICAgICAgICAgIHhUbyA9IChkaXJlY3Rpb24gPT09ICdsZWZ0JykgPyAteFRvIDogeFRvO1xuXG4gICAgICAgICAgICB0aW1lbGluZS5hZGQoVHdlZW5MaXRlLnRvKFskZXZlbnQuJHRpdGxlLCAkZXZlbnQuJGNvcHksICRldmVudC5vZ0VsXSwgYW5pbWF0aW9uVGltZSwge1xuICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgeDogeFRvLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAkZXZlbnQucmVtb3ZlQ2xhc3MoJ3Zpc2libGUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSwgMCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25NZW51Q2xvc2VDbGljazogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFycm93IFN0dWZmIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBFdmVudCBMaXN0ZW5lcnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBUaW1lbGluZVZpZXdNb2JpbGU7XG4iLCJ2YXIgVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9WaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy9wYXJ0aWFscy9nYWxsZXJ5RGV0YWlsLmhic1wiKTtcbnZhciBPbW5pdHVyZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi9zZXJ2aWNlcy9PbW5pdHVyZS5qc1wiKTtcbnZhciBIZWxwZXJGdW5jcyA9IHJlcXVpcmUoXCIuLi8uLi9oZWxwZXJzL0hlbHBlcnMuanNcIik7XG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcblxuXG52YXIgR2FsbGVyeURldGFpbFZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6XG4gICAgICAgIHtcbiAgICAgICAgICAgIFwiY2xpY2sgLm5leHRJbWFnZVwiIDogXCJuZXh0SXRlbVwiLFxuICAgICAgICAgICAgXCJ0b3VjaGVuZCAubmV4dEltYWdlXCIgOiBcIm5leHRJdGVtXCIsXG4gICAgICAgICAgICBcImNsaWNrIC5wcmV2SW1hZ2VcIiA6IFwicHJldkl0ZW1cIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLnByZXZJbWFnZVwiIDogXCJwcmV2SXRlbVwiLFxuICAgICAgICAgICAgJ2NsaWNrIGRpdi5zb2NpYWwgPiBhJzogJ29uQ2xpY2tTb2NpYWwnXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIHRoaXMuaW1hZ2VzID0gdGhpcy5tb2RlbC5pbWFnZXM7XG4gICAgICAgICAgICB0aGlzLmltYWdlS2V5cyA9IE9iamVjdC5rZXlzKHRoaXMuaW1hZ2VzKS5zb3J0KHRoaXMuaW1hZ2VTb3J0LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IDA7XG4gICAgICAgICAgICB0aGlzLml0ZW1OYW1lID0gXCJcIjtcbiAgICAgICAgfSxcblxuICAgICAgICBzZXR1cCA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWEgPSB0aGlzLiRlbC5maW5kKFwiLmdhbGxlcnlJbWFnZVwiKTtcbiAgICAgICAgICAgIHRoaXMuY29weSA9IHRoaXMuJGVsLmZpbmQoXCIuY29weVwiKTtcbiAgICAgICAgICAgIHRoaXMubnVtYmVycyA9IHRoaXMuJGVsLmZpbmQoXCIubnVtYmVyc1wiKTtcblxuICAgICAgICAgICAgaWYoIUhlbHBlckZ1bmNzLkRldmljZS5pc1RhYmxldCgpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIE9tbml0dXJlLm9uU2xpZGVzaG93SXRlbU9wZW4oe21lZGlhVGl0bGU6IHRoaXMubW9kZWwuaWR9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuaW5pdFNvY2lhbEZ1bmN0aW9ucygpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dJdGVtIDogZnVuY3Rpb24gKGl0ZW0pXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pbWFnZXNbaXRlbV0pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IHRoaXMuaW1hZ2VLZXlzLmluZGV4T2YoaXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBuZXh0SXRlbSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4Kys7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID4gdGhpcy5pbWFnZUtleXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXZJdGVtIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXgtLTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEltYWdlSW5kZXggPCAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXggPSB0aGlzLmltYWdlS2V5cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKCk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVJbWFnZSA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pbWFnZUtleXNbdGhpcy5jdXJyZW50SW1hZ2VJbmRleF07XG5cbiAgICAgICAgICAgIGlmKGl0ZW0gIT0gdGhpcy5pdGVtTmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1OYW1lID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbWcgPSB0aGlzLmltYWdlc1t0aGlzLml0ZW1OYW1lXTtcblxuICAgICAgICAgICAgdGhpcy5tZWRpYS5hdHRyKFwic3JjXCIsIHdpbmRvdy5jZG4raW1nLnNyYyk7XG4gICAgICAgICAgICB0aGlzLmNvcHkuaHRtbChpbWcuY29weSk7XG5cbiAgICAgICAgICAgIHZhciBudW1iZXJTdHJpbmcgPSAodGhpcy5jdXJyZW50SW1hZ2VJbmRleCArIDEpLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB0aGlzLm51bWJlcnMuaHRtbChudW1iZXJTdHJpbmcgKyBcIi9cIiArICh0aGlzLmltYWdlS2V5cy5sZW5ndGgpLnRvU3RyaW5nKCkpO1xuXG4gICAgICAgICAgICAvLyBkb24ndCBzaG93IHRoZSBmaXJzdCBpdGVtJ3MgZGVlcGxpbmtcbiAgICAgICAgICAgIC8vIHRoaXMgcHJldmVudHMgcm91dGluZyBpc3N1ZXNcbiAgICAgICAgICAgIGlmKHRoaXMuY3VycmVudEltYWdlSW5kZXggPiAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIvbWVkaWEvXCIgKyB0aGlzLm1vZGVsLmlkICsgXCIvXCIgKyB0aGlzLml0ZW1OYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiL21lZGlhL1wiICsgdGhpcy5tb2RlbC5pZCArIFwiL1wiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuXG4gICAgICAgIGltYWdlU29ydCA6IGZ1bmN0aW9uIChhLCBiKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbWFnZXNbYV0uaW5kZXggLSB0aGlzLmltYWdlc1tiXS5pbmRleDtcbiAgICAgICAgfSxcblxuICAgICAgICBvbkNsaWNrU29jaWFsOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciB0eXBlID0gZS5jdXJyZW50VGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zaGFyZScpO1xuICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG4gICAgICAgICAgICB2YXIgaW1hZ2VJbmRleCA9IHRoaXMuaW1hZ2VLZXlzW3RoaXMuY3VycmVudEltYWdlSW5kZXhdXG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLmltYWdlc1tpbWFnZUluZGV4XS5zb2NpYWxTaGFyZVt0eXBlXTtcblxuICAgICAgICAgICAgaWYodHlwZW9mIHRoaXMuc29jaWFsW3R5cGVdID09PSAnZnVuY3Rpb24nICYmIHNvY2lhbFNoYXJlKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zb2NpYWxbdHlwZV0oe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZS5jb3B5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvdyA6IGZ1bmN0aW9uKGFuaW1hdGlvbkR1cmF0aW9uLCBjb250YWluZXIsIG9wdGlvbnMsIGNhbGxiYWNrKVxuICAgICAgICB7XG4gICAgICAgICAgICBUd2VlbkxpdGUudG8oY29udGFpbmVyLCBhbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBjc3MgICAgICAgIDogb3B0aW9ucy5jc3MsXG5cbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlIDogY2FsbGJhY2tcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhpZGUgOiBmdW5jdGlvbihhbmltYXRpb25EdXJhY3Rpb24sIGNvbnRhaW5lciwgb3B0aW9ucywgY2FsbGJhY2spXG4gICAgICAgIHtcbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50byhjb250YWluZXIsIGFuaW1hdGlvbkR1cmFjdGlvbixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3AgICAgOiBvcHRpb25zLnRvcCxcbiAgICAgICAgICAgICAgICBsZWZ0ICAgOiBvcHRpb25zLmxlZnQsXG4gICAgICAgICAgICAgICAgd2lkdGggIDogb3B0aW9ucy53aWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQgOiBvcHRpb25zLmhlaWdodCxcblxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgOiBjYWxsYmFja1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYWxsZXJ5RGV0YWlsVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL3RhYmxldC92aWRlb0RldGFpbC5oYnNcIik7XG5cbnZhciBWaWRlb0RldGFpbFZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6IHtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBWaWRlb0RldGFpbFZpZXc7XG4iLCJ2YXIgSWZyYW1lVHBsID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL2NoYXJhY3RlcnMveW91dHViZS5oYnMnKTtcblxudmFyIFBhcnRpYWxDaGFyYWN0ZXJzWW91dHViZVZpZXcgPSBCYWNrYm9uZS5WaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIHRlbXBsYXRlIDogSWZyYW1lVHBsLFxuXG4gICAgICAgIG1vZGVsIDpcbiAgICAgICAge1xuICAgICAgICAgICAgeW91dHViZUlkIDogJydcbiAgICAgICAgfSxcblxuICAgICAgICBvcHRpb25zIDpcbiAgICAgICAge1xuICAgICAgICAgICAgdmlkZW9GaW5pc2hlZENhbGxiYWNrIDogdW5kZWZpbmVkLFxuICAgICAgICAgICAgdmlkZW9SZWFkeUNhbGxiYWNrICAgIDogdW5kZWZpbmVkXG4gICAgICAgIH0sXG5cbiAgICAgICAgJG92ZXJsYXkgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgJHJlc2l6ZXIgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgJHlvdXR1YmVFbWJlZCA6IHVuZGVmaW5lZCxcbiAgICAgICAgaWZyYW1lICAgICAgICA6IHVuZGVmaW5lZCxcblxuICAgICAgICBwbGF5ZXIgIDogdW5kZWZpbmVkLFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gYXR0cnNcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJzLnlvdXR1YmVJZFxuICAgICAgICAgKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gICAgICAgICAqIEBwYXJhbSB7ZnVuY3Rpb259IG9wdGlvbnMudmlkZW9GaW5pc2hlZENhbGxiYWNrXG4gICAgICAgICAqL1xuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMubW9kZWwueW91dHViZUlkID0gYXR0cnMueW91dHViZUlkIHx8ICcnO1xuXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudmlkZW9GaW5pc2hlZENhbGxiYWNrID0gb3B0aW9ucyAmJiBvcHRpb25zLnZpZGVvRmluaXNoZWRDYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy52aWRlb1JlYWR5Q2FsbGJhY2sgICAgPSBvcHRpb25zICYmIG9wdGlvbnMudmlkZW9SZWFkeUNhbGxiYWNrO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kZWwgICAgICAgICAgID0gJCh0aGlzLnRlbXBsYXRlKHRoaXMubW9kZWwpKTtcbiAgICAgICAgICAgIHRoaXMuZWwgICAgICAgICAgICA9IHRoaXMuJGVsWzBdO1xuICAgICAgICAgICAgdGhpcy4kb3ZlcmxheSAgICAgID0gdGhpcy4kZWwuY2hpbGRyZW4oJy5vdmVybGF5Jyk7XG4gICAgICAgICAgICB0aGlzLiRyZXNpemVyICAgICAgPSB0aGlzLiRlbC5jaGlsZHJlbignLnlvdXR1YmUtcmVzaXplcicpO1xuICAgICAgICAgICAgdGhpcy4keW91dHViZUVtYmVkID0gdGhpcy4kZWwuZmluZCgnLnlvdXR1YmUtZW1iZWQnKTtcblxuICAgICAgICAgICAgdGhpcy5fcmVuZGVyTmV3WW91dHViZUlmcmFtZSgpO1xuXG4gICAgICAgICAgICB0aGlzLmlmcmFtZSAgICAgICA9IHRoaXMuJGVsLmZpbmQoJ2lmcmFtZScpWzBdO1xuXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBfcmVuZGVyTmV3WW91dHViZUlmcmFtZSA6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICB0aGlzLnBsYXllciA9IG5ldyBZVC5QbGF5ZXIodGhpcy4keW91dHViZUVtYmVkWzBdLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHdpZHRoICAgOiAnMTAwJScsXG4gICAgICAgICAgICAgICAgaGVpZ2h0ICA6ICcxMDAlJyxcbiAgICAgICAgICAgICAgICB2aWRlb0lkIDogdGhpcy5tb2RlbC55b3V0dWJlSWQsXG4gICAgICAgICAgICAgICAgZXZlbnRzICA6XG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAnb25SZWFkeScgICAgICAgOiBzZWxmLm9wdGlvbnMudmlkZW9SZWFkeUNhbGxiYWNrIHx8IGZ1bmN0aW9uKCl7fSxcbiAgICAgICAgICAgICAgICAgICAgJ29uU3RhdGVDaGFuZ2UnIDogZnVuY3Rpb24oZSlcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdmlkZW8gZW5kZWQsIGNhbGwgdGhlIGVuZGluZyBjYWxsYmFja1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YSA9PT0gMCAmJiB0eXBlb2Ygc2VsZi5vcHRpb25zLnZpZGVvRmluaXNoZWRDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm9wdGlvbnMudmlkZW9GaW5pc2hlZENhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmUgOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmNsZWFyVmlkZW8oKTtcbiAgICAgICAgICAgIHRoaXMuaWZyYW1lLnNyYyAgICAgICA9ICdhYm91dDpibGFuayc7XG4gICAgICAgICAgICB0aGlzLmlmcmFtZS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmRlc3Ryb3koKTtcblxuICAgICAgICAgICAgZGVsZXRlIHRoaXMucGxheWVyO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuaWZyYW1lO1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuJG92ZXJsYXk7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy4kcmVzaXplcjtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLiR5b3V0dWJlRW1iZWQ7XG5cbiAgICAgICAgICAgIHRoaXMudW5iaW5kKCk7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0gYW5pbWF0aW9uRHVyYXRpb25cbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrXG4gICAgICAgICAqL1xuICAgICAgICBzaG93IDogZnVuY3Rpb24oYW5pbWF0aW9uRHVyYXRpb24sIGNhbGxiYWNrKVxuICAgICAgICB7XG4gICAgICAgICAgICBuZXcgVGltZWxpbmVMaXRlKFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHBhdXNlZCAgICAgOiB0cnVlLFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGUgOiBjYWxsYmFja1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5hZGQoVHdlZW5MaXRlLnRvKHRoaXMuJG92ZXJsYXksIGFuaW1hdGlvbkR1cmF0aW9uLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIG9wYWNpdHkgOiAxXG4gICAgICAgICAgICB9KSwgMClcbiAgICAgICAgICAgIC5wbGF5KCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZSA6IGZ1bmN0aW9uKGFuaW1hdGlvbkR1cmF0aW9uLCBjYWxsYmFjaylcbiAgICAgICAge1xuICAgICAgICAgICAgbmV3IFRpbWVsaW5lTGl0ZShcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBwYXVzZWQgICAgIDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlIDogY2FsbGJhY2tcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuYWRkKFR3ZWVuTGl0ZS50byh0aGlzLiRvdmVybGF5LCBhbmltYXRpb25EdXJhdGlvbixcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5IDogMFxuICAgICAgICAgICAgfSksIDApXG4gICAgICAgICAgICAucGxheSgpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gUGFydGlhbENoYXJhY3RlcnNZb3V0dWJlVmlldztcbiIsInZhciBQYXJ0aWFsQ2hhcmFjdGVyc1lvdXR1YmVWaWV3ID0gcmVxdWlyZSgnLi4vY2hhcmFjdGVycy95b3V0dWJlLmpzJyk7XG52YXIgSWZyYW1lVHBsID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL21lZGlhL3lvdXR1YmUuaGJzJyk7XG5cbnZhciBQYXJ0aWFsTWVkaWFZb3V0dWJlVmlldyA9IFBhcnRpYWxDaGFyYWN0ZXJzWW91dHViZVZpZXcuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgdGVtcGxhdGU6IElmcmFtZVRwbCxcblxuICAgICAgICBpbml0aWFsaXplIDogZnVuY3Rpb24oYXR0cnMsIG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKGF0dHJzLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5tb2RlbC55b3V0dWJlSWQgPSB0aGlzLm1vZGVsLnZpZGVvSWQ7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICAgICAgfSxcblxuICAgICAgICByZW1vdmUgOiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3cgOiBmdW5jdGlvbihhbmltYXRpb25EdXJhdGlvbiwgY29udGFpbmVyLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICAgICAge1xuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKGNvbnRhaW5lciwgYW5pbWF0aW9uRHVyYXRpb24sXG4gICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICBjc3MgICAgICAgIDogb3B0aW9ucy5jc3MsXG5cbiAgICAgICAgICAgICAgICAgb25Db21wbGV0ZSA6IGNhbGxiYWNrXG4gICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGlkZSA6IGZ1bmN0aW9uKGFuaW1hdGlvbkR1cmFjdGlvbiwgY29udGFpbmVyLCBvcHRpb25zLCBjYWxsYmFjaylcbiAgICAgICAge1xuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKGNvbnRhaW5lciwgYW5pbWF0aW9uRHVyYWN0aW9uLFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRvcCAgICA6IG9wdGlvbnMudG9wLFxuICAgICAgICAgICAgICAgIGxlZnQgICA6IG9wdGlvbnMubGVmdCxcbiAgICAgICAgICAgICAgICB3aWR0aCAgOiBvcHRpb25zLndpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodCA6IG9wdGlvbnMuaGVpZ2h0LFxuXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZSA6IGNhbGxiYWNrXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFBhcnRpYWxNZWRpYVlvdXR1YmVWaWV3OyIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL21vYmlsZS9nYWxsZXJ5RGV0YWlsLmhic1wiKTtcbnZhciBPbW5pdHVyZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi9zZXJ2aWNlcy9PbW5pdHVyZS5qc1wiKTtcblxudmFyIEdhbGxlcnlEZXRhaWxWaWV3ID0gVmlldy5leHRlbmQoXG4gICAge1xuICAgICAgICBldmVudHMgOlxuICAgICAgICB7XG4gICAgICAgICAgICBcImNsaWNrIC5uZXh0SW1hZ2VcIiA6IFwibmV4dEl0ZW1cIixcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLm5leHRJbWFnZVwiIDogXCJuZXh0SXRlbVwiLFxuICAgICAgICAgICAgXCJjbGljayAucHJldkltYWdlXCIgOiBcInByZXZJdGVtXCIsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5wcmV2SW1hZ2VcIiA6IFwicHJldkl0ZW1cIlxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgICAgICB0aGlzLmltYWdlcyA9IHRoaXMubW9kZWwuaW1hZ2VzO1xuICAgICAgICAgICAgdGhpcy5pbWFnZUtleXMgPSBPYmplY3Qua2V5cyh0aGlzLmltYWdlcykuc29ydCh0aGlzLmltYWdlU29ydC5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXggPSAwO1xuICAgICAgICAgICAgdGhpcy5pdGVtTmFtZSA9IFwiXCI7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhID0gdGhpcy4kZWwuZmluZChcIi5nYWxsZXJ5SW1hZ2VcIik7XG4gICAgICAgICAgICB0aGlzLmNvcHkgPSB0aGlzLiRlbC5maW5kKFwiLmNvcHlcIik7XG4gICAgICAgICAgICB0aGlzLm51bWJlcnMgPSB0aGlzLiRlbC5maW5kKFwiLm51bWJlcnNcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd0l0ZW0gOiBmdW5jdGlvbiAoaXRlbSlcbiAgICAgICAge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmltYWdlc1tpdGVtXSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpdGVtID0gdGhpcy5pbWFnZUtleXNbMF07XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50SW1hZ2VJbmRleCA9IHRoaXMuaW1hZ2VLZXlzLmluZGV4T2YoaXRlbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW1hZ2UoKTtcbiAgICAgICAgfSxcblxuICAgICAgICBuZXh0SXRlbSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4Kys7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID4gdGhpcy5pbWFnZUtleXMubGVuZ3RoIC0gMSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID0gMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy51cGRhdGVJbWFnZSgpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHByZXZJdGVtIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXgtLTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuY3VycmVudEltYWdlSW5kZXggPCAwKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudEltYWdlSW5kZXggPSB0aGlzLmltYWdlS2V5cy5sZW5ndGggLSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUltYWdlKCk7XG5cbiAgICAgICAgfSxcblxuICAgICAgICB1cGRhdGVJbWFnZSA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBpdGVtID0gdGhpcy5pbWFnZUtleXNbdGhpcy5jdXJyZW50SW1hZ2VJbmRleF07XG5cbiAgICAgICAgICAgIGlmKGl0ZW0gIT0gdGhpcy5pdGVtTmFtZSlcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLml0ZW1OYW1lID0gaXRlbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIE9tbml0dXJlLm9uU2xpZGVzaG93SXRlbU9wZW4oe21lZGlhVGl0bGU6IHRoaXMubW9kZWwuaWQrXCIvXCIrdGhpcy5pdGVtTmFtZX0pO1xuXG4gICAgICAgICAgICB2YXIgaW1nID0gdGhpcy5pbWFnZXNbdGhpcy5pdGVtTmFtZV07XG5cbiAgICAgICAgICAgIHRoaXMubWVkaWEuYXR0cihcInNyY1wiLCB3aW5kb3cuY2RuK2ltZy5zcmMpO1xuICAgICAgICAgICAgdGhpcy5jb3B5Lmh0bWwoaW1nLmNvcHkpO1xuXG4gICAgICAgICAgICB2YXIgbnVtYmVyU3RyaW5nID0gKHRoaXMuY3VycmVudEltYWdlSW5kZXggKyAxKS50b1N0cmluZygpO1xuICAgICAgICAgICAgdGhpcy5udW1iZXJzLmh0bWwobnVtYmVyU3RyaW5nICsgXCIvXCIgKyAodGhpcy5pbWFnZUtleXMubGVuZ3RoKS50b1N0cmluZygpKTtcblxuICAgICAgICAgICAgLy8gZG9uJ3Qgc2hvdyB0aGUgZmlyc3QgaXRlbSdzIGRlZXBsaW5rXG4gICAgICAgICAgICAvLyB0aGlzIHByZXZlbnRzIHJvdXRpbmcgaXNzdWVzXG4gICAgICAgICAgICBpZih0aGlzLmN1cnJlbnRJbWFnZUluZGV4ID4gMClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBCYWNrYm9uZS5oaXN0b3J5Lm5hdmlnYXRlKFwiL21lZGlhL1wiICsgdGhpcy5tb2RlbC5pZCArIFwiL1wiICsgdGhpcy5pdGVtTmFtZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIi9tZWRpYS9cIiArIHRoaXMubW9kZWwuaWQgKyBcIi9cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cblxuICAgICAgICBpbWFnZVNvcnQgOiBmdW5jdGlvbiAoYSwgYilcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW1hZ2VzW2FdLmluZGV4IC0gdGhpcy5pbWFnZXNbYl0uaW5kZXg7XG4gICAgICAgIH1cbiAgICB9KTtcblxubW9kdWxlLmV4cG9ydHMgPSBHYWxsZXJ5RGV0YWlsVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3BhcnRpYWxzL21vYmlsZS92aWRlb0RldGFpbC5oYnNcIik7XG5cbnZhciBWaWRlb0RldGFpbFZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6IHtcblxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgIH0sXG5cbiAgICAgICAgcmVuZGVyIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N1cGVyKCk7XG4gICAgICAgIH0sXG4gICAgfSk7XG5cbm1vZHVsZS5leHBvcnRzID0gVmlkZW9EZXRhaWxWaWV3O1xuIiwidmFyIEhvcml6b250YWxTY3JvbGxWaWV3ID0gcmVxdWlyZShcIi4uLy4uL0hvcml6b250YWxTY3JvbGxWaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy90YWJsZXQvY2hhcmFjdGVycy5oYnNcIik7XG52YXIgT21uaXR1cmUgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvT21uaXR1cmUuanNcIik7XG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcbnZhciBQYXJ0aWFsQ2hhcmFjdGVyc1lvdXR1YmVWaWV3ID0gcmVxdWlyZSgnLi4vLi4vc2VjdGlvbnMvcGFydGlhbHMvY2hhcmFjdGVycy95b3V0dWJlLmpzJyk7XG5cbnZhciBDaGFyYWN0ZXJzVmlldyA9IEhvcml6b250YWxTY3JvbGxWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBJbml0aWFsaXphdGlvbiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG5cbiAgICAgICAgbWVkaWFMaWdodGJveFZpZXcgOiB1bmRlZmluZWQsXG5cbiAgICAgICAgZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gXy5leHRlbmQoe30sIEhvcml6b250YWxTY3JvbGxWaWV3LnByb3RvdHlwZS5ldmVudHMsIHtcbiAgICAgICAgICAgICAgICAndGFwIC5pbnRlcnZpZXcnOiAnb25DbGlja0ludGVydmlldycsXG4gICAgICAgICAgICAgICAgXCJjbGljayAuYXJyb3ctcmlnaHRcIjogXCJvblByZXZlbnREZWZhdWx0XCIsXG4gICAgICAgICAgICAgICAgXCJjbGljayAuYXJyb3ctbGVmdFwiOiBcIm9uUHJldmVudERlZmF1bHRcIixcbiAgICAgICAgICAgICAgICAndGFwIC5jbG9zZS1pbnRlcnZpZXcnOiAnb25DbG9zZUludGVydmlldycsXG4gICAgICAgICAgICAgICAgJ3RhcCBkaXYueW91dHViZS1lbWJlZC1jdHIgZGl2Lm92ZXJsYXknOiAnb25DbG9zZUludGVydmlldycsXG4gICAgICAgICAgICAgICAgJ3RhcCBkaXYuc29jaWFsID4gYSc6ICdvbkNsaWNrU29jaWFsJyxcbiAgICAgICAgICAgICAgICAnY2xpY2sgZGl2LnNvY2lhbCA+IGEnOiAnb25QcmV2ZW50RGVmYXVsdCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBpbml0aWFsaXplOiBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG5cbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgICAgICAgICAgdGhpcy5jb250ZW50UG9zaXRpb25zID0ge1xuICAgICAgICAgICAgICAgIGxlZnQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnOCUnLFxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiAnMTAlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAnOCUnLFxuICAgICAgICAgICAgICAgICAgICByaWdodDogJzEwJSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICAgICAgICB0aGlzLmNoYXJhY3RlcnMgPSB0aGlzLm1vZGVsLmNoYXJhY3RlcnM7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLiRpdGVtcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMuZmlsdGVyKCc6bm90KDpmaXJzdC1jaGlsZClbZGF0YS1pZD1cIjBcIl0nKS5yZW1vdmUoKTsgICAgIC8vcmVtb3ZlIGV4dHJhIG5vZGVzO1xuICAgICAgICAgICAgICAgIHRoaXMuJGl0ZW1zID0gdGhpcy4kYWxsSXRlbXNDb250YWluZXIuZmluZCgnZGl2Lml0ZW0nKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGFsbEl0ZW1zQ29udGFpbmVyLmNzcygnd2lkdGgnLCB0aGlzLiRpdGVtcy5sZW5ndGggKyAnMDAlJyk7XG5cbiAgICAgICAgICAgICAgICB2YXIgaXRlbVdpZHRoID0gMTAwIC8gdGhpcy4kaXRlbXMubGVuZ3RoICsgJyUnO1xuXG4gICAgICAgICAgICAgICAgdGhpcy4kaXRlbXMud2lkdGgoaXRlbVdpZHRoKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuJGl0ZW1zLmVhY2goZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3MgPSB0aGlzLmdldEF0dHJpYnV0ZSgnZGF0YS1wb3MnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZihwb3MgIT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3NzID0gc2VsZi5jb250ZW50UG9zaXRpb25zW3Bvc107XG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ2Rpdi5jb250ZW50LWN0cicpLmNzcyhjc3MpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmluaXREcmFnZ2FibGUodGhpcy4kaXRlbXMubGVuZ3RoLCB0aGlzLiRhbGxJdGVtc0NvbnRhaW5lcik7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmluaXRTb2NpYWxGdW5jdGlvbnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICByZW5kZXI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgICBzaG93U3ViVmlldzogZnVuY3Rpb24gKHZpZXdOYW1lLCBvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighb3B0aW9ucylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBvcHRpb25zID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSh0aGlzLmJhc2UgKyBcIi9cIit2aWV3TmFtZSArXCIvXCIgKyBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5ydW5TaG93U3ViVmlldyh2aWV3TmFtZSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY2xvc2VTdWJWaWV3OiBmdW5jdGlvbigpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIEFwcC5yb3V0ZXIubmF2aWdhdGUodGhpcy5iYXNlKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bkNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGluaXRKcXVlcnlWYXJpYWJsZXM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuJGludGVydmlld0J0bnMgPSB0aGlzLiRlbC5maW5kKCdkaXYuaW50ZXJ2aWV3Jyk7XG5cbiAgICAgICAgICAgIHRoaXMuJHlvdXR1YmVDb250YWluZXIgPSB0aGlzLiRlbC5maW5kKCdkaXYueW91dHViZS1lbWJlZC1jdHInKTtcbiAgICAgICAgfSxcbiAgICAgICAgaW5pdFNvY2lhbEZ1bmN0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbCA9IHt9O1xuXG4gICAgICAgICAgICB0aGlzLnNvY2lhbC5mYWNlYm9vayA9IF8uYmluZChTb2NpYWwuU2hhcmVGYWNlYm9vaywgU29jaWFsKTtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsLnR3aXR0ZXIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHdpdHRlciwgU29jaWFsKTtcbiAgICAgICAgICAgIHRoaXMuc29jaWFsLnR1bWJsciA9IF8uYmluZChTb2NpYWwuU2hhcmVUdW1ibHIsIFNvY2lhbCk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IFdpbmRvdyBSZXNpemUgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIHJlc2l6ZUludGVydmlldzogZnVuY3Rpb24od2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLm1lZGlhTGlnaHRib3hWaWV3KSByZXR1cm47XG5cbiAgICAgICAgICAgIHZhciByYXRpbyA9IDQ4MC84NTM7XG5cbiAgICAgICAgICAgIHZhciBtYXhIZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSAyODA7XG4gICAgICAgICAgICB2YXIgbWF4V2lkdGggPSBNYXRoLm1pbih3aW5kb3dXaWR0aCAqIDAuODUsIDEwODApO1xuXG4gICAgICAgICAgICBpZihtYXhIZWlnaHQvcmF0aW8gPCBtYXhXaWR0aCkge1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcuJHJlc2l6ZXIud2lkdGgobWF4SGVpZ2h0L3JhdGlvKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5tZWRpYUxpZ2h0Ym94Vmlldy4kcmVzaXplci5jc3MoJ3dpZHRoJywnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uV2luZG93UmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuJHdpbmRvdy53aWR0aCgpO1xuICAgICAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuJHdpbmRvdy5oZWlnaHQoKTtcblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgICAgIHRoaXMucmVzaXplSW50ZXJ2aWV3KHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBEcmFnZ2FibGUgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuICAgICAgICBpbml0RHJhZ2dhYmxlOiBmdW5jdGlvbiAobnVtSXRlbXMsICRkcmFnZ2FibGVEaXYpIHtcbiAgICAgICAgICAgIHZhciBzdGFydFNlY29uZHMsIHN0YXJ0WCwgZW5kU2Vjb25kcywgZW5kWDtcblxuICAgICAgICAgICAgRHJhZ2dhYmxlLmNyZWF0ZSgkZHJhZ2dhYmxlRGl2LCB7XG4gICAgICAgICAgICAgICAgdHlwZTogXCJ4XCIsXG4gICAgICAgICAgICAgICAgZWRnZVJlc2lzdGFuY2U6IDAuNSxcbiAgICAgICAgICAgICAgICB0aHJvd1Byb3BzOiB0cnVlLFxuICAgICAgICAgICAgICAgIHpJbmRleEJvb3N0OiBmYWxzZSxcbiAgICAgICAgICAgICAgICBjdXJzb3I6IFwicG9pbnRlclwiLFxuICAgICAgICAgICAgICAgIG9uRHJhZ0VuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBlbmRYID0gJGRyYWdnYWJsZURpdlswXS5fZ3NUcmFuc2Zvcm0ueDtcbiAgICAgICAgICAgICAgICAgICAgZW5kU2Vjb25kcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlQW5kU25hcCgoZW5kWCAtIHN0YXJ0WCkgLyAoZW5kU2Vjb25kcyAtIHN0YXJ0U2Vjb25kcyksIG51bUl0ZW1zLCAkZHJhZ2dhYmxlRGl2KTtcbiAgICAgICAgICAgICAgICAgICAgLy90aGlzLnNuYXBUb05lYXJlc3RJdGVtLmJpbmQodGhpcywgbnVtSXRlbXMpXG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpLFxuICAgICAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0WCA9ICRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLng7XG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0U2Vjb25kcyA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC8gMTAwMDtcblxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWNlbGVyYXRlQW5kU25hcDogZnVuY3Rpb24gKHZlbG9jaXR5LCBudW1JdGVtcywgJGRyYWdnYWJsZURpdikge1xuICAgICAgICAgICAgdmVsb2NpdHkgPSAodmVsb2NpdHkgPiAzMDAwKSA/IDMwMDAgOiAodmVsb2NpdHkgPCAtMzAwMCkgPyAtMzAwMCA6IHZlbG9jaXR5O1xuXG4gICAgICAgICAgICB2YXIgcmVzaXN0YW5jZSA9IDQ7XG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNCAqIE1hdGguYWJzKHZlbG9jaXR5KSAvIDMwMDA7XG5cbiAgICAgICAgICAgIHZhciB4VG8gPSAkZHJhZ2dhYmxlRGl2WzBdLl9nc1RyYW5zZm9ybS54ICsgdmVsb2NpdHkgLyByZXNpc3RhbmNlO1xuICAgICAgICAgICAgeFRvID0gTWF0aC5taW4oeFRvLCAwKTtcblxuICAgICAgICAgICAgdmFyIGRpdldpZHRoID0gJGRyYWdnYWJsZURpdi53aWR0aCgpO1xuXG4gICAgICAgICAgICB2YXIgY2xvc2VzdEl0ZW1JbmRleCA9IE1hdGgucm91bmQoKE1hdGguYWJzKHhUbykvZGl2V2lkdGgpICogdGhpcy4kaXRlbXMubGVuZ3RoKTtcbiAgICAgICAgICAgIGNsb3Nlc3RJdGVtSW5kZXggPSBNYXRoLm1pbihjbG9zZXN0SXRlbUluZGV4LCB0aGlzLiRpdGVtcy5sZW5ndGgtMSk7XG5cbiAgICAgICAgICAgIHZhciBuZXdYID0gLWNsb3Nlc3RJdGVtSW5kZXggKiBkaXZXaWR0aC90aGlzLiRpdGVtcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIFR3ZWVuTGl0ZS50bygkZHJhZ2dhYmxlRGl2LCBhbmltYXRpb25UaW1lLCB7XG4gICAgICAgICAgICAgICAgeDogbmV3WCxcbiAgICAgICAgICAgICAgICBlYXNlOiAnQ2lyYy5lYXNlT3V0JyxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcy5zbmFwVG9OZWFyZXN0SXRlbShudW1JdGVtcywgJGRyYWdnYWJsZURpdik7XG4gICAgICAgICAgICAgICAgICAgIGlmKGNsb3Nlc3RJdGVtSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkYXRhSWQgPSB0aGlzLiRpdGVtcy5lcShjbG9zZXN0SXRlbUluZGV4KS5hdHRyKCdkYXRhLWlkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoZGF0YUlkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBXaW5kb3cgUmVzaXplIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICByZXNpemVBbGxJdGVtc0NvbnRhaW5lcjogZnVuY3Rpb24gKHdpbmRvd1dpZHRoLCB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3dXaWR0aCAqIHRoaXMuJGl0ZW1zLmxlbmd0aDtcbiAgICAgICAgfSxcblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTaG93L0Nsb3NlL1N3YXAgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICBydW5TaG93U3ViVmlldzogZnVuY3Rpb24odmlld05hbWUpIHtcbiAgICAgICAgICAgIHZhciAkaXRlbSA9IHRoaXMuJGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IHZpZXdOYW1lO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkaXRlbS5pbmRleCgpO1xuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSAkaXRlbTtcbiAgICAgICAgICAgIGlmKGluZGV4ICE9PSB0aGlzLnJvb3RlZEl0ZW0pIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvSXRlbShpbmRleCwgMC4zNSk7XG4gICAgICAgICAgICAgICAgLy9hbmltYXRlIHRvIGl0ZW1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcnVuQ2xvc2VTdWJWaWV3OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkZWxldGUgdGhpcy5zdWJWaWV3O1xuXG4gICAgICAgICAgICBpZih0aGlzLnJvb3RlZEl0ZW0gIT09IDApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuaW1hdGVUb0l0ZW0oMCwgMC4zNSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHNob3dJbnRlcnZpZXc6IGZ1bmN0aW9uKHlvdXR1YmVJZCkge1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLm1lZGlhTGlnaHRib3hWaWV3ID0gbmV3IFBhcnRpYWxDaGFyYWN0ZXJzWW91dHViZVZpZXcoXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgeW91dHViZUlkOiB5b3V0dWJlSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdmlkZW9GaW5pc2hlZENhbGxiYWNrIDogdGhpcy5jbG9zZUludGVydmlldy5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy4keW91dHViZUNvbnRhaW5lclxuICAgICAgICAgICAgICAgIC5hcHBlbmQodGhpcy5tZWRpYUxpZ2h0Ym94Vmlldy5yZW5kZXIoKS4kZWwpXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdvcGVuJyk7XG5cbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZUluWW91dHViZUVtYmVkKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGNsb3NlSW50ZXJ2aWV3OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB0aGlzLmFuaW1hdGVPdXRZb3V0dWJlRW1iZWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgdGhpcy4keW91dHViZUNvbnRhaW5lci5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubWVkaWFMaWdodGJveFZpZXc7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gQ3JlYXRlL1Bvc2l0aW9uL1ByZS1hbmltYXRpb24gRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG5cblxuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgICAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEFuaW1hdGlvbiBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgICAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PSBBbmltYXRlIEluIFlvdXR1YmUgRW1iZWQgPT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgICAgIGFuaW1hdGVJbllvdXR1YmVFbWJlZDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLm1lZGlhTGlnaHRib3hWaWV3LnNob3coMC4zLCBmdW5jdGlvbigpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgfSxcbiAgICAgICAgYW5pbWF0ZU91dFlvdXR1YmVFbWJlZDogZnVuY3Rpb24oY2FsbGJhY2spIHtcbiAgICAgICAgICAgIHRoaXMubWVkaWFMaWdodGJveFZpZXcuaGlkZSgwLjMsIGZ1bmN0aW9uKClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgICAgICAgICBpZih0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBJdGVtcyBDb250YWluZXIgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cblxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBBcnJvdyBTdHVmZiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIGRldGVjdEFuZFRvZ2dsZUFycm93czogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy50b2dnbGVJdGVtQ29udGFpbmVyQXJyb3dzKCk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAgICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTZWN0aW9uIGFjdGl2YXRlL2RlYWN0aXZhdGUgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAgICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cblxuXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gRXZlbnQgTGlzdGVuZXJzIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgICAgIG9uTmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgICAgICB2YXIgbmV3SXRlbSA9IHRoaXMucm9vdGVkSXRlbSArIDE7XG5cbiAgICAgICAgICAgICAgICBpZiAobmV3SXRlbSA+PSB0aGlzLiRpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyh0aGlzLiRpdGVtcy5lcShuZXdJdGVtKS5hdHRyKCdkYXRhLWlkJykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvblByZXY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0FuaW1hdGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSB0aGlzLnJvb3RlZEl0ZW0gLSAxO1xuXG5cbiAgICAgICAgICAgICAgICBpZiAobmV3SXRlbSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyh0aGlzLiRpdGVtcy5lcShuZXdJdGVtKS5hdHRyKCdkYXRhLWlkJykpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihuZXdJdGVtID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25DbGlja0ludGVydmlldzogZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgICBpZighdGhpcy5pc0FuaW1hdGluZyAmJiAhIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIHZhciB5b3V0dWJlSWQgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXlvdXR1YmUtaWQnKTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd0ludGVydmlldyh5b3V0dWJlSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBvbkNsb3NlSW50ZXJ2aWV3OiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBpZighdGhpcy5pc0FuaW1hdGluZyAmJiAhIXRoaXMuc3ViVmlldykge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VJbnRlcnZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy5yb290ZWRJdGVtIC0gMTtcblxuICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG5cbiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuVVJMO1xuICAgICAgICAgICAgdmFyIHNvY2lhbFNoYXJlID0gdGhpcy5jaGFyYWN0ZXJzW2l0ZW1JbmRleF0uc29jaWFsU2hhcmVbdHlwZV07XG5cbiAgICAgICAgICAgIGlmKHR5cGVvZiB0aGlzLnNvY2lhbFt0eXBlXSA9PT0gJ2Z1bmN0aW9uJyAmJiBzb2NpYWxTaGFyZSkge1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zb2NpYWxbdHlwZV0oe1xuICAgICAgICAgICAgICAgICAgICBwaWN0dXJlOiBzb2NpYWxTaGFyZS5waWN0dXJlLFxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogc29jaWFsU2hhcmUudGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZS5jb3B5LFxuICAgICAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIG9uUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IENoYXJhY3RlcnNWaWV3O1xuIiwidmFyIFZpZXcgPSByZXF1aXJlKFwiLi4vLi4vVmlldy5qc1wiKTtcbnZhciB0ZW1wbGF0ZSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi90ZW1wbGF0ZXMvc2VjdGlvbnMvdGFibGV0L2ZpZ2h0Lmhic1wiKTtcblxudmFyIE9tbml0dXJlID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL09tbml0dXJlLmpzXCIpO1xudmFyIFNvY2lhbCA9IHJlcXVpcmUoXCIuLi8uLi8uLi9zZXJ2aWNlcy9Tb2NpYWwuanNcIik7XG5cbnZhciBGaWdodFZpZXcgPSBWaWV3LmV4dGVuZChcbiAgICB7XG4gICAgICAgIGV2ZW50cyA6XG4gICAgICAgIHtcbiAgICAgICAgICAgICdjbGljayAucGFydG5lcnMtYnRuJzogJ3Nob3dQYXJ0bmVyc1Jlc291cmNlcycsXG4gICAgICAgICAgICAnY2xpY2sgLmRhdGEtYnRuJzogJ3Nob3dEYXRhVmlzdWFsaXphdGlvbicsXG4gICAgICAgICAgICAnY2xpY2sgLnN3aXRjaCc6ICd0b2dnbGVQYXJ0bmVyc1Jlc291cmNlc0NvbnRlbnQnLFxuICAgICAgICAgICAgJ2NsaWNrIC5hcnJvdyc6ICdvblByZXZOZXh0RGF0YVBvaW50JyxcbiAgICAgICAgICAgICdjbGljayAuY2xvc2UnOiAnY2xvc2VTdWJWaWV3JyxcbiAgICAgICAgICAgICdjbGljayAuaW5mby1jdHIgPiBhJzogJ29uUGFydG5lckNsaWNrJyxcbiAgICAgICAgICAgICdjbGljayBkaXYuc29jaWFsLWN0ciA+IGltZyc6ICdvbkNsaWNrU29jaWFsJyxcbiAgICAgICAgICAgICdjbGljayAua25vd19zdGF0dXMnOiAnb25QYXJ0bmVyQ2xpY2snXG4gICAgICAgIH0sXG4gICAgICAgIGluaXRpYWxpemUgOiBmdW5jdGlvbiAob3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIob3B0aW9ucyk7XG4gICAgICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMub24oJ3NlY3Rpb24uYmVmb3JlQWN0aXZlJywgdGhpcy5vblNlY3Rpb25BY3RpdmF0ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmFmdGVyQWN0aXZlJywgdGhpcy5vblNlY3Rpb25BY3RpdmF0ZSwgdGhpcyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2V0dXAgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuXG4gICAgICAgICAgICB0aGlzLmJnSW1nID0gdGhpcy4kKCcudmlkZW9JbWFnZScpO1xuXG4gICAgICAgICAgICB0aGlzLiRkYXRhUG9pbnRzID0gdGhpcy4kZWwuZmluZCgnZGl2LmRhdGEtcG9pbnQnKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0U29jaWFsRnVuY3Rpb25zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHJlbmRlciA6IGZ1bmN0aW9uICgpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgICAgICB9LFxuXG4gICAgICAgIGhhbmRsZVJvdXRlOiBmdW5jdGlvbihzdWJzZWN0aW9uLCBkZXRhaWwpXG4gICAgICAgIHtcblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoc3Vic2VjdGlvbiwgZGV0YWlsKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93U3ViVmlldyA6IGZ1bmN0aW9uICh2aWV3TmFtZSwgb3B0aW9ucylcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5fc3VwZXIodmlld05hbWUsIG9wdGlvbnMpO1xuXG4gICAgICAgICAgICBpZiAodmlld05hbWUgPT0gJ2RhdGEnKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBkdiA9ICQoJy5kYXRhLXZpc3VhbGl6YXRpb24tY3RyJyk7XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gZHY7XG4gICAgICAgICAgICAgICAgdmFyIG1hc2sgPSAkKCcubWFzaycpO1xuICAgICAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHRsLnRvKGR2LCAwLCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKGR2LCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLnRvKG1hc2ssIDAsIHtcbiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnKz1hY3RpdmUnLFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZHYuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAncGFydG5lcnMtcmVzb3VyY2VzJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB2YXIgcHIgPSAkKCcucGFydG5lcnMtcmVzb3VyY2VzLWN0cicpO1xuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldyA9IHByO1xuICAgICAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgICAgIHRsLnRvKHByLCAwLCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgICAgIH0pLnRvKHByLCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dCxcbiAgICAgICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwci5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGNsb3NlU3ViVmlldzogZnVuY3Rpb24oKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZighdGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgICAgdmFyIHN1YiA9IHRoaXMuc3ViVmlldztcbiAgICAgICAgICAgIHZhciBtYXNrID0gJCgnLm1hc2snKTtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG4gICAgICAgICAgICB0bC50byhtYXNrLCAwLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnLT1hY3RpdmUnLFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHN1YiwgMC4yNSwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHN1Yi5oYXNDbGFzcygnZGF0YS12aXN1YWxpemF0aW9uLWN0cicpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICctMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc3ViLmhhc0NsYXNzKCdwYXJ0bmVycy1yZXNvdXJjZXMtY3RyJykpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBudWxsO1xuICAgICAgICAgICAgICAgICAgICBzdWIucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgICAgICAgICBtZS5zaG93T3JIaWRlQXJyb3coKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvblNlY3Rpb25BY3RpdmF0ZTogZnVuY3Rpb24oZWwpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKGVsWzBdID09IHRoaXMuZWwpXG4gICAgICAgICAgICB7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzaG93UGFydG5lcnNSZXNvdXJjZXMgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KCdwYXJ0bmVycy1yZXNvdXJjZXMnKTtcbiAgICAgICAgfSxcblxuICAgICAgICBzaG93RGF0YVZpc3VhbGl6YXRpb24gOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KCdkYXRhJyk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgdG9nZ2xlUGFydG5lcnNSZXNvdXJjZXNDb250ZW50IDogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciBwYyA9ICQoJy5wci1jdHIucGFydG5lcnMtY3RyJyk7XG4gICAgICAgICAgICB2YXIgcmMgPSAkKCcucHItY3RyLnJlc291cmNlcy1jdHInKTtcblxuICAgICAgICAgICAgaWYoJCgnLnBhcnRuZXJzLWN0cicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIHZhciBwckFjdGl2ZSA9IHBjO1xuICAgICAgICAgICAgICAgIHZhciBwckluYWN0aXZlID0gcmM7XG4gICAgICAgICAgICB9IGVsc2UgaWYoJCgnLnJlc291cmNlcy1jdHInKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICB2YXIgcHJBY3RpdmUgPSByYztcbiAgICAgICAgICAgICAgICB2YXIgcHJJbmFjdGl2ZSA9IHBjO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbWUgPSB0aGlzO1xuICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgIHRsLnRvKHByQWN0aXZlLCAwLjI1LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHByQWN0aXZlLCAwLCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdub25lJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0KHByQWN0aXZlLCB7XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnLT1hY3RpdmUnXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRvKHBySW5hY3RpdmUsIDAsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0KHBySW5hY3RpdmUsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICcrPWFjdGl2ZSdcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8ocHJJbmFjdGl2ZSwgMC4yNSwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvbkNvbXBsZXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgbWUuaXNBbmltYXRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgbWUuc2hvd09ySGlkZUFycm93KCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25QcmV2TmV4dERhdGFQb2ludCA6IGZ1bmN0aW9uKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNBbmltYXRpbmcgPT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCQoJy5wYXJ0bmVycy1yZXNvdXJjZXMtY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVQYXJ0bmVyc1Jlc291cmNlc0NvbnRlbnQoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgICAgIHZhciBjdXIgPSAkKCcuZGF0YS1wb2ludC5hY3RpdmUnKTtcbiAgICAgICAgICAgIHZhciBtZSA9IHRoaXM7XG5cbiAgICAgICAgICAgIC8vTmV4dFxuICAgICAgICAgICAgdmFyIG5leHQgPSBjdXIubmV4dCgpO1xuICAgICAgICAgICAgdmFyIGRpcmVjdGlvbiA9ICdyaWdodCc7XG4gICAgICAgICAgICBpZihjdXIuaW5kZXgoJy5kYXRhLXBvaW50JykgPT0gJCgnLmRhdGEtcG9pbnQnKS5sZW5ndGgtMSkge1xuICAgICAgICAgICAgICAgIG5leHQgPSAkKCcuZGF0YS1wb2ludCcpLmZpcnN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZih0YXJnZXQuaGFzQ2xhc3MoJ2Fycm93LWxlZnQnKSkge1xuICAgICAgICAgICAgICAgIC8vUHJldlxuICAgICAgICAgICAgICAgIG5leHQgPSBjdXIucHJldigpO1xuICAgICAgICAgICAgICAgIGRpcmVjdGlvbiA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgICBpZihjdXIuaW5kZXgoJy5kYXRhLXBvaW50JykgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBuZXh0ID0gJCgnLmRhdGEtcG9pbnQnKS5sYXN0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgdGwgPSBuZXcgVGltZWxpbmVMaXRlKCk7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHRsLnRvKG5leHQsIDAsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICcrPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8obmV4dCwgMCwge1xuICAgICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgICBsZWZ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRpcmVjdGlvbiA9PSAncmlnaHQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcxMDAlJztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICctMTAwJSc7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0oKVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudG8oY3VyLCAwLjUsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihkaXJlY3Rpb24gPT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnLTEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJzEwMCUnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KClcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVhc2U6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9LCAnZ3JwMScpXG4gICAgICAgICAgICAudG8obmV4dCwgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6ICcwJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICdncnAxJylcbiAgICAgICAgICAgIC50byhjdXIsIDAsIHtcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICctPWFjdGl2ZScsXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXQsXG4gICAgICAgICAgICAgICAgb25Db21wbGV0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lLnNob3dPckhpZGVBcnJvdygpO1xuICAgICAgICAgICAgICAgICAgICBtZS5pc0FuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNob3dPckhpZGVBcnJvdzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZigkKCcuZGF0YS12aXN1YWxpemF0aW9uLWN0cicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgIGlmKCQoJy5kYXRhLXBvaW50LmFjdGl2ZScpLmluZGV4KCcuZGF0YS1wb2ludCcpID09ICQoJy5kYXRhLXBvaW50JykubGVuZ3RoLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9MYXN0IHNsaWRlXG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKCQoJy5kYXRhLXBvaW50LmFjdGl2ZScpLmluZGV4KCcuZGF0YS1wb2ludCcpID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy9GaXJzdCBzbGlkZVxuICAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3ctcmlnaHQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1sZWZ0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vTWlkZGxlIHNsaWRlXG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1yaWdodCcpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFycm93LWxlZnQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmKCQoJy5wYXJ0bmVycy1yZXNvdXJjZXMtY3RyJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICAgICAgaWYoJCgnLnBhcnRuZXJzLWN0cicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3ctcmlnaHQnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1sZWZ0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZigkKCcucmVzb3VyY2VzLWN0cicpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcuYXJyb3ctcmlnaHQnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoJy5hcnJvdy1sZWZ0Jykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmFycm93LXJpZ2h0JykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJy5hcnJvdy1sZWZ0JykuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9uUGFydG5lckNsaWNrOiBmdW5jdGlvbihlKVxuICAgICAgICB7XG4gICAgICAgICAgICBPbW5pdHVyZS5vblBhcnRuZXJMaW5rKHtVUkw6IGUuY3VycmVudFRhcmdldC5ocmVmfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgaXRlbUluZGV4ID0gdGhpcy4kZGF0YVBvaW50cy5maWx0ZXIoJy5hY3RpdmUnKS5pbmRleCgpOyAgICAgICAvLyBQdXR0aW5nIDIgYXJyb3dzIGluIHRoZSBzYW1lIGNvbnRhaW5lciBhcyB0aGUgZGF0YSBwb2ludHMgd2FzIGEgYmFkIGRlY2lzaW9uXG4gICAgICAgICAgICB2YXIgdHlwZSA9IGUuY3VycmVudFRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2hhcmUnKTtcblxuICAgICAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG5cbiAgICAgICAgICAgIHZhciBzb2NpYWxTaGFyZSA9IHRoaXMubW9kZWwuZGF0YVBvaW50c1tpdGVtSW5kZXhdLnNvY2lhbFNoYXJlW3R5cGVdO1xuXG4gICAgICAgICAgICBpZih0eXBlb2YgdGhpcy5zb2NpYWxbdHlwZV0gPT09ICdmdW5jdGlvbicgJiYgc29jaWFsU2hhcmUpIHtcblxuICAgICAgICAgICAgICAgIHRoaXMuc29jaWFsW3R5cGVdKHtcbiAgICAgICAgICAgICAgICAgICAgcGljdHVyZTogc29jaWFsU2hhcmUuaW1hZ2UsXG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiBzb2NpYWxTaGFyZS50aXRsZSxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHNvY2lhbFNoYXJlLmNvcHksXG4gICAgICAgICAgICAgICAgICAgIGxpbms6IGxpbmtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IEZpZ2h0VmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3RhYmxldC9ob21lLmhic1wiKTtcblxuXG52YXIgSG9tZVZpZXcgPSBWaWV3LmV4dGVuZChcbntcbiAgICBldmVudHM6XG4gICAge1xuICAgICAgICBcImNsaWNrIC5zY3JvbGwtZG93blwiIDogXCJvblNjcm9sbEJ1dHRvbkNsaWNrZWRcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAuc2Nyb2xsLWRvd25cIiA6IFwib25TY3JvbGxCdXR0b25DbGlja2VkXCIsXG4gICAgICAgIFwiY2xpY2sgLnRyYWlsZXJcIiA6IFwib25QbGF5VHJhaWxlclwiLFxuICAgICAgICBcInRvdWNoZW5kIC50cmFpbGVyXCIgOiBcIm9uUGxheVRyYWlsZXJcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAuaGJvLWZpbG1zXCIgOiBcIm9uSEJPRmlsbXNcIixcbiAgICAgICAgXCJjbGljayAubmV3c1wiIDogXCJvbk5ld3NcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAubmV3c1wiIDogXCJvbk5ld3NcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAubW9kYWwgLmNsb3NlXCIgOiBcIm9uQ2xvc2VcIixcbiAgICAgICAgXCJ0b3VjaGVuZCAub3ZlcmxheVwiIDogXCJvbkNsb3NlXCJcbiAgICB9LFxuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucylcbiAgICB7XG4gICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblxuICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgIH0sXG5cbiAgICBzZXR1cDogZnVuY3Rpb24oKVxuICAgIHtcbiAgICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xuICAgIH0sXG5cbiAgICByZW5kZXI6IGZ1bmN0aW9uKClcbiAgICB7XG4gICAgICByZXR1cm4gdGhpcy5fc3VwZXIoKTtcbiAgICB9LFxuXG4gICAgaW5pdFJvdXRlcjogZnVuY3Rpb24ocm9vdClcbiAgICB7XG4gICAgICAgIHRoaXMuX3N1cGVyKHJvb3QpO1xuICAgICAgICBBcHAucm91dGVyLnJvdXRlKFwiXCIsIFwiaG9tZVJvdXRlXCIpO1xuICAgIH0sXG5cbiAgICBoYW5kbGVSb3V0ZTogZnVuY3Rpb24oc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgIHtcbiAgICAgIHRoaXMuX3N1cGVyKHN1YnNlY3Rpb24sIGRldGFpbCk7XG5cbiAgICAgIHRoaXMub25TZWN0aW9uQWN0aXZhdGUodGhpcy4kZWwpO1xuICAgIH0sXG5cbiAgICBvblNlY3Rpb25BY3RpdmF0ZTogZnVuY3Rpb24oZWwpXG4gICAge1xuICAgICAgICBpZihlbCA9PSB0aGlzLiRlbClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIGJiID0gJCgnLmJpbGxpbmctYmxvY2snKTtcbiAgICAgICAgICAgIHZhciBsdSA9ICQoJy5sb2NrLXVwJyk7XG4gICAgICAgICAgICB2YXIgcGMgPSAkKCcucHJlbWllcmUtY3RyJylcbiAgICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICAgIHRsLnRvKGJiLCAyLCB7XG4gICAgICAgICAgICAgICAgY3NzOiB7XG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICctPTAuNScpXG4gICAgICAgICAgICAudG8oW2x1LCBwY10sIDIsIHtcbiAgICAgICAgICAgICAgICBjc3M6IHtcbiAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICAgIH0sICctPTAuNScpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2VcbiAgICAgICAge1xuICAgICAgICAgIGlmKHRoaXMuc3ViVmlldylcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2UobnVsbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcblxuICAgIG9uU2Nyb2xsQnV0dG9uQ2xpY2tlZDogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIEJhY2tib25lLmhpc3RvcnkubmF2aWdhdGUoXCIvdG8td2luLWEtd2FyXCIsIHRydWUpO1xuICAgIH0sXG5cbiAgICBvblBsYXlUcmFpbGVyOiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgQmFja2JvbmUuaGlzdG9yeS5uYXZpZ2F0ZShcIi9tZWRpYS90cmFpbGVyL1wiLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgb25IQk9GaWxtczogZnVuY3Rpb24oZSlcbiAgICB7XG4gICAgICAgIHdpbmRvdy5vcGVuKFwiaHR0cDovL3d3dy5oYm8uY29tL21vdmllcy90aGUtbm9ybWFsLWhlYXJ0P2ljaWQ9QUJDMTUxNlwiKTtcbiAgICB9LFxuXG4gICAgIG9uTmV3czogZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJvcGVuaW5nIG1vZGFsIG5vd1wiKTtcblxuICAgICAgICAgIGlmKHRoaXMuaXNNb2RhbCA9PSB0cnVlKVxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmlzTW9kYWwgPSB0cnVlO1xuXG4gICAgICAgICAgdmFyIG9sID0gJCgnLm92ZXJsYXknKTtcbiAgICAgICAgICB2YXIgbWQgPSAkKCcubW9kYWwnKTtcblxuICAgICAgICAgIHRoaXMuc3ViVmlldyA9IG1kO1xuXG4gICAgICAgICAgdmFyIHRsID0gbmV3IFRpbWVsaW5lTGl0ZSgpO1xuICAgICAgICAgIHRsLnRvKFtvbCwgbWRdLCAwLCB7XG4gICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSkudG8oW29sLCBtZF0sIC41LCB7XG4gICAgICAgICAgICAgIGNsYXNzTmFtZTogJys9YWN0aXZlJyxcbiAgICAgICAgICAgICAgZWFzZTogUG93ZXIxLmVhc2VPdXRcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIlN1YlZpZXcuT3BlbmVkXCIpO1xuICAgICAgfSxcblxuICAgICAgb25DbG9zZTogZnVuY3Rpb24oZSkge1xuXG4gICAgICAgICAgY29uc29sZS5sb2coXCJjbG9zaW5nIG1vZGFsIG5vd1wiKTtcbiAgICAgICAgICBpZih0aGlzLmlzTW9kYWwgPT0gZmFsc2UpXG4gICAgICAgICAge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaXNNb2RhbCA9IGZhbHNlO1xuXG4gICAgICAgICAgdmFyIG9sID0gJCgnLm92ZXJsYXknKTtcbiAgICAgICAgICB2YXIgbWQgPSAkKCcubW9kYWwnKTtcblxuICAgICAgICAgIHZhciB0bCA9IG5ldyBUaW1lbGluZUxpdGUoKTtcbiAgICAgICAgICB0bC50byhbb2wsIG1kXSwgLjUsIHtcbiAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnLT1hY3RpdmUnLFxuICAgICAgICAgICAgICBlYXNlOiBQb3dlcjEuZWFzZU91dFxuICAgICAgICAgIH0pLnRvKFtvbCwgbWRdLCAwLCB7XG4gICAgICAgICAgICAgIGNzczoge1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ25vbmUnXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU3ViVmlldy5DbG9zZWRcIik7XG4gICAgICAgICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBudWxsO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICB9XG59KTtcblxuXG5tb2R1bGUuZXhwb3J0cyA9IEhvbWVWaWV3O1xuIiwidmFyIEhvcml6b250YWxTY3JvbGxWaWV3ID0gcmVxdWlyZShcIi4uLy4uL0hvcml6b250YWxTY3JvbGxWaWV3LmpzXCIpO1xudmFyIHRlbXBsYXRlID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3RlbXBsYXRlcy9zZWN0aW9ucy90YWJsZXQvbWVkaWEuaGJzXCIpO1xuXG52YXIgT21uaXR1cmUgPSByZXF1aXJlKFwiLi4vLi4vLi4vc2VydmljZXMvT21uaXR1cmUuanNcIik7XG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcblxudmFyIHZpZERldGFpbCA9IHJlcXVpcmUoXCIuLi9wYXJ0aWFscy9WaWRlb0RldGFpbFZpZXcuanNcIik7XG52YXIgZ2FsbGVyeURldGFpbCA9IHJlcXVpcmUoXCIuLi9wYXJ0aWFscy9HYWxsZXJ5RGV0YWlsVmlldy5qc1wiKTtcblxudmFyIE1lZGlhVmlldyA9IEhvcml6b250YWxTY3JvbGxWaWV3LmV4dGVuZCh7XG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gSW5pdGlhbGl6YXRpb24gfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgZXZlbnRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfLmV4dGVuZCh7fSwgSG9yaXpvbnRhbFNjcm9sbFZpZXcucHJvdG90eXBlLmV2ZW50cywge1xuICAgICAgICAgICAgJ3RhcCBkaXYuc29jaWFsID4gYSc6ICdvbkNsaWNrU29jaWFsJyxcbiAgICAgICAgICAgICd0b3VjaGVuZCBkaXYuc29jaWFsID4gYSc6ICdvblByZXZlbnREZWZhdWx0J1xuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGluaXRpYWxpemU6IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3N1cGVyKG9wdGlvbnMpO1xuXG4gICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICB9LFxuXG4gICAgbWVkaWFFbGVtZW50czogZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXG4gICAgc2V0dXA6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcblxuICAgICAgICBpZiAodGhpcy4kaXRlbXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdGhpcy4kYWxsSXRlbXNDb250YWluZXIuY3NzKCd3aWR0aCcsIHRoaXMuJGl0ZW1zLmxlbmd0aCArICcwMCUnKTtcblxuICAgICAgICAgICAgdmFyIGl0ZW1XaWR0aCA9IDEwMCAvIHRoaXMuJGl0ZW1zLmxlbmd0aCArICclJztcblxuICAgICAgICAgICAgdGhpcy4kaXRlbXMud2lkdGgoaXRlbVdpZHRoKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0RHJhZ2dhYmxlKHRoaXMuJGl0ZW1zLmxlbmd0aCwgdGhpcy4kYWxsSXRlbXNDb250YWluZXIpO1xuICAgICAgICAgICAgdGhpcy5pbml0U29jaWFsRnVuY3Rpb25zKCk7XG5cbiAgICAgICAgICAgIHRoaXMuZGV0YWlsVmlld3MgPVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIFwidmlkZW9cIjogdmlkRGV0YWlsLFxuICAgICAgICAgICAgICAgIFwiZ2FsbGVyeVwiOiBnYWxsZXJ5RGV0YWlsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBfLmVhY2godGhpcy4kaXRlbXMsIGZ1bmN0aW9uKGVsZW1lbnQsIGluZGV4LCBsaXN0KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHZhciBtZWRpYURhdGEgPSB0aGlzLm1vZGVsLml0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgICAgICB2YXIgbWVkaWFUeXBlID0gbWVkaWFEYXRhLnR5cGU7XG5cbiAgICAgICAgICAgICAgICBpZihtZWRpYVR5cGUgPT0gXCJsYW5kaW5nXCIpXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm1lZGlhRWxlbWVudHMuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGV0YWlsVmlldyA9IG5ldyB0aGlzLmRldGFpbFZpZXdzW21lZGlhVHlwZV0oe21vZGVsOiBtZWRpYURhdGF9KTtcbiAgICAgICAgICAgICAgICB0aGlzLm1lZGlhRWxlbWVudHMuYXBwZW5kQ2hpbGQoZWxlbWVudC5kZXRhaWxWaWV3LnJlbmRlcigpLmVsKTsvLy5hcHBlbmRUbyhjb250YWluZXIpO1xuXG4gICAgICAgICAgICAgICAgaWYobWVkaWFEYXRhLmltYWdlcylcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuZGV0YWlsVmlldy5zaG93SXRlbShcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVuZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9zdXBlcigpO1xuICAgIH0sXG4gICAgaW5pdEpxdWVyeVZhcmlhYmxlczogZnVuY3Rpb24gKCkge1xuICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgIH0sXG4gICAgaW5pdFNvY2lhbEZ1bmN0aW9uczogZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc29jaWFsID0ge307XG5cbiAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgIHRoaXMuc29jaWFsLnR3aXR0ZXIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHdpdHRlciwgU29jaWFsKTtcbiAgICAgICAgdGhpcy5zb2NpYWwudHVtYmxyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR1bWJsciwgU29jaWFsKTtcbiAgICB9LFxuXG4gICAgc2hvd1N1YlZpZXc6IGZ1bmN0aW9uICh2aWV3TmFtZSwgb3B0aW9ucylcbiAgICB7XG5cbiAgICAgICAgaWYoIW9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIG9wdGlvbnMgPSBcIlwiO1xuICAgICAgICB9XG5cbiAgICAgICAgQXBwLnJvdXRlci5uYXZpZ2F0ZSh0aGlzLmJhc2UgKyBcIi9cIit2aWV3TmFtZSArXCIvXCIgKyBvcHRpb25zKTtcblxuICAgICAgICB0aGlzLnJ1blNob3dTdWJWaWV3KHZpZXdOYW1lKTtcbiAgICB9LFxuXG4gICAgY2xvc2VTdWJWaWV3OiBmdW5jdGlvbigpXG4gICAge1xuICAgICAgICBpZih0aGlzLnN1YlZpZXcpIHtcbiAgICAgICAgICAgIEFwcC5yb3V0ZXIubmF2aWdhdGUodGhpcy5iYXNlKTtcbiAgICAgICAgICAgIHRoaXMucnVuQ2xvc2VTdWJWaWV3KCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gV2luZG93IFJlc2l6ZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIG9uV2luZG93UmVzaXplOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy4kd2luZG93LndpZHRoKCk7XG4gICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLiR3aW5kb3cuaGVpZ2h0KCk7XG5cbiAgICAgICAgdGhpcy5fc3VwZXIod2lkdGgsIGhlaWdodCk7XG5cbiAgICAgICAgaWYodGhpcy5zdWJWaWV3KSB7XG4gICAgICAgICAgICB0aGlzLnJlc2l6ZUludGVydmlldyh3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgcmVzaXplSW50ZXJ2aWV3OiBmdW5jdGlvbih3aW5kb3dXaWR0aCwgd2luZG93SGVpZ2h0KSB7XG4gICAgICAgIHZhciAkY29udGVudEN0ciA9IHRoaXMuc3ViVmlldy5maW5kKCdkaXYuY29udGVudC1jdHInKTtcblxuICAgICAgICBpZigkY29udGVudEN0ci5kYXRhKCd0eXBlJykgIT09ICd2aWRlbycpIHJldHVybjtcblxuICAgICAgICB2YXIgcmF0aW8gPSA0ODAvODUzO1xuXG4gICAgICAgIHZhciBtYXhIZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSAyODA7XG4gICAgICAgIHZhciBtYXhXaWR0aCA9IE1hdGgubWluKHdpbmRvd1dpZHRoICogMC44NSwgMTA4MCk7XG5cbiAgICAgICAgaWYobWF4SGVpZ2h0L3JhdGlvIDwgbWF4V2lkdGgpIHtcbiAgICAgICAgICAgICRjb250ZW50Q3RyLndpZHRoKG1heEhlaWdodC9yYXRpbyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkY29udGVudEN0ci5jc3MoJ3dpZHRoJywnJyk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHJlc2l6ZUFsbEl0ZW1zQ29udGFpbmVyOiBmdW5jdGlvbiAod2luZG93V2lkdGgsIHdpbmRvd0hlaWdodCkge1xuICAgICAgICByZXR1cm4gd2luZG93V2lkdGggKiB0aGlzLiRpdGVtcy5sZW5ndGg7XG4gICAgfSxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IERyYWdnYWJsZSBGdW5jdGlvbnMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICBpbml0RHJhZ2dhYmxlOiBmdW5jdGlvbiAobnVtSXRlbXMsICRkcmFnZ2FibGVEaXYpIHtcbiAgICAgICAgdmFyIHN0YXJ0U2Vjb25kcywgc3RhcnRYLCBlbmRTZWNvbmRzLCBlbmRYO1xuXG4gICAgICAgIERyYWdnYWJsZS5jcmVhdGUoJGRyYWdnYWJsZURpdiwge1xuICAgICAgICAgICAgdHlwZTogXCJ4XCIsXG4gICAgICAgICAgICBlZGdlUmVzaXN0YW5jZTogMC41LFxuICAgICAgICAgICAgdGhyb3dQcm9wczogdHJ1ZSxcbiAgICAgICAgICAgIHpJbmRleEJvb3N0OiBmYWxzZSxcbiAgICAgICAgICAgIGN1cnNvcjogXCJwb2ludGVyXCIsXG4gICAgICAgICAgICBvbkRyYWdFbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBlbmRYID0gJGRyYWdnYWJsZURpdlswXS5fZ3NUcmFuc2Zvcm0ueDtcbiAgICAgICAgICAgICAgICBlbmRTZWNvbmRzID0gbmV3IERhdGUoKS5nZXRUaW1lKCkgLyAxMDAwO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5kZWNlbGVyYXRlQW5kU25hcCgoZW5kWCAtIHN0YXJ0WCkgLyAoZW5kU2Vjb25kcyAtIHN0YXJ0U2Vjb25kcyksIG51bUl0ZW1zLCAkZHJhZ2dhYmxlRGl2KTtcbiAgICAgICAgICAgICAgICAvL3RoaXMuc25hcFRvTmVhcmVzdEl0ZW0uYmluZCh0aGlzLCBudW1JdGVtcylcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSxcbiAgICAgICAgICAgIG9uRHJhZ1N0YXJ0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgc3RhcnRYID0gJGRyYWdnYWJsZURpdlswXS5fZ3NUcmFuc2Zvcm0ueDtcbiAgICAgICAgICAgICAgICBzdGFydFNlY29uZHMgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDA7XG5cbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGRlY2VsZXJhdGVBbmRTbmFwOiBmdW5jdGlvbiAodmVsb2NpdHksIG51bUl0ZW1zLCAkZHJhZ2dhYmxlRGl2KSB7XG4gICAgICAgIHZlbG9jaXR5ID0gTWF0aC5taW4odmVsb2NpdHksIDMwMDApO1xuICAgICAgICB2ZWxvY2l0eSA9IE1hdGgubWF4KHZlbG9jaXR5LCAtMzAwMCk7XG5cbiAgICAgICAgdmFyIHJlc2lzdGFuY2UgPSA0O1xuICAgICAgICB2YXIgYW5pbWF0aW9uVGltZSA9IDAuNCAqIE1hdGguYWJzKHZlbG9jaXR5KSAvIDMwMDA7XG5cbiAgICAgICAgdmFyIHhUbyA9ICRkcmFnZ2FibGVEaXZbMF0uX2dzVHJhbnNmb3JtLnggKyB2ZWxvY2l0eSAvIHJlc2lzdGFuY2U7XG4gICAgICAgIHhUbyA9IE1hdGgubWluKHhUbywgMCk7XG5cbiAgICAgICAgdmFyIGRpdldpZHRoID0gJGRyYWdnYWJsZURpdi53aWR0aCgpO1xuXG4gICAgICAgIHZhciBjbG9zZXN0SXRlbUluZGV4ID0gTWF0aC5yb3VuZCgoTWF0aC5hYnMoeFRvKS9kaXZXaWR0aCkgKiB0aGlzLiRpdGVtcy5sZW5ndGgpO1xuICAgICAgICBjbG9zZXN0SXRlbUluZGV4ID0gTWF0aC5taW4oY2xvc2VzdEl0ZW1JbmRleCwgdGhpcy4kaXRlbXMubGVuZ3RoLTEpO1xuXG4gICAgICAgIHZhciBuZXdYID0gLWNsb3Nlc3RJdGVtSW5kZXggKiBkaXZXaWR0aC90aGlzLiRpdGVtcy5sZW5ndGg7XG5cbiAgICAgICAgVHdlZW5MaXRlLnRvKCRkcmFnZ2FibGVEaXYsIGFuaW1hdGlvblRpbWUsIHtcbiAgICAgICAgICAgIHg6IG5ld1gsXG4gICAgICAgICAgICBlYXNlOiAnQ2lyYy5lYXNlT3V0JyxcbiAgICAgICAgICAgIG9uQ29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvL3RoaXMuc25hcFRvTmVhcmVzdEl0ZW0obnVtSXRlbXMsICRkcmFnZ2FibGVEaXYpO1xuICAgICAgICAgICAgICAgIGlmKGNsb3Nlc3RJdGVtSW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhSWQgPSB0aGlzLiRpdGVtcy5lcShjbG9zZXN0SXRlbUluZGV4KS5hdHRyKCdkYXRhLWlkJyk7XG5cblxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KGRhdGFJZCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdGhpcy5pc0FuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfSk7XG4gICAgfSxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IEluc2VydC9yZW1vdmUgTWVkaWEgTm9kZXMgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIGluc2VydE1lZGlhTm9kZTogZnVuY3Rpb24oaW5kZXgpXG4gICAge1xuXG4gICAgICAgIC8vIHJlbW92ZSB0aGUgY3VycmVudCBlbGVtZW50IGZyb20gdGhlIGRvY3VtZW50IGZyYWdtZW50IGFuZCBwdXQgaXQgaW4gdGhlIGRvbVxuICAgICAgICB2YXIgbmV4dE1lZGlhTm9kZSA9IHRoaXMubWVkaWFFbGVtZW50cy5jaGlsZE5vZGVzW2luZGV4XTtcblxuICAgICAgICB2YXIgbWVkaWFOb2RlQ29udGFpbmVyID0gdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmZpbmQoJz4gZGl2ID4gLmNvbnRlbnQtY3RyJylbMF07XG4gICAgICAgIG1lZGlhTm9kZUNvbnRhaW5lci5hcHBlbmRDaGlsZChuZXh0TWVkaWFOb2RlKTtcblxuICAgICAgICBpZigkKG1lZGlhTm9kZUNvbnRhaW5lcikuZGF0YSgndHlwZScpID09IFwiZ2FsbGVyeVwiKVxuICAgICAgICB7XG4gICAgICAgICAgICBPbW5pdHVyZS5vblNsaWRlc2hvd0l0ZW1PcGVuKHttZWRpYVRpdGxlOiBcImdhbGxlcnlcIn0pO1xuICAgICAgICB9XG4gICAgfSxcblxuICAgIHJlY2xhaW1NZWRpYU5vZGU6IGZ1bmN0aW9uKGluZGV4KVxuICAgIHtcbiAgICAgICAgLy8gcmVtb3ZlIHRoZSBwcmV2aW91c2x5IGFwcGVuZGVkIGVsZW1lbnQgZnJvbSB0aGUgZG9tIGFuZCBwdXQgaXQgYmFjayBpbiB0aGUgZG9jdW1lbnQgZnJhZ21lbnRcbiAgICAgICAgdGhpcy5tZWRpYUVsZW1lbnRzLmluc2VydEJlZm9yZShcbiAgICAgICAgICAgIC8vIHRoZSBmaXJzdCBkaXYgaW4gLmNvbnRlbnQtY3RyIGlzIHRoZSBzYW1lIG5vZGUgYXMgbWVkaWFOb2RlQ29udGFpbmVyXG4gICAgICAgICAgICAvLyBmcm9tIGFueSBwcmV2aW91cyBjYWxscyB0byBydW5TaG93U3ViVmlld1xuICAgICAgICAgICAgdGhpcy4kaXRlbXMuZXEoaW5kZXgpLmZpbmQoJz4gZGl2ID4gLmNvbnRlbnQtY3RyID4gZGl2JylbMF0sXG4gICAgICAgICAgICB0aGlzLm1lZGlhRWxlbWVudHMuY2hpbGROb2Rlc1tpbmRleF1cbiAgICAgICAgKTtcbiAgICB9LFxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTaG93L0Nsb3NlL1N3YXAgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgcnVuU2hvd1N1YlZpZXc6IGZ1bmN0aW9uICh2aWV3TmFtZSkge1xuICAgICAgICB2YXIgJGl0ZW0gPSB0aGlzLiRpdGVtcy5maWx0ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QXR0cmlidXRlKCdkYXRhLWlkJykgPT09IHZpZXdOYW1lO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgaW5kZXggPSAkaXRlbS5pbmRleCgpO1xuICAgICAgICB2YXIgb2xkSW5kZXggPSB0aGlzLnJvb3RlZEl0ZW07XG5cbiAgICAgICAgdGhpcy5zdWJWaWV3ID0gJGl0ZW07XG5cbiAgICAgICAgaWYoaW5kZXggIT09IG9sZEluZGV4KSB7XG5cbiAgICAgICAgICAgIGlmKG9sZEluZGV4ICE9PSAwKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5yZWNsYWltTWVkaWFOb2RlKG9sZEluZGV4KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hbmltYXRlVG9JdGVtKGluZGV4LCAwLjM1LCB1bmRlZmluZWQsIF8uYmluZChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmluc2VydE1lZGlhTm9kZShpbmRleCk7XG4gICAgICAgICAgICAgICAgdGhpcy5vbldpbmRvd1Jlc2l6ZSgpO1xuXG4gICAgICAgICAgICB9LCB0aGlzKSk7XG4gICAgICAgIH1cblxuXG4gICAgfSxcbiAgICBydW5DbG9zZVN1YlZpZXc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZGVsZXRlIHRoaXMuc3ViVmlldztcblxuICAgICAgICBpZih0aGlzLnJvb3RlZEl0ZW0gIT09IDApIHtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0ZVRvSXRlbSgwLCAwLjM1LCB1bmRlZmluZWQsIHRoaXMucmVjbGFpbU1lZGlhTm9kZS5iaW5kKHRoaXMsIHRoaXMucm9vdGVkSXRlbSkpO1xuICAgICAgICB9XG4gICAgfSxcblxuXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICAvKiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+IENyZWF0ZS9Qb3NpdGlvbi9QcmUtYW5pbWF0aW9uIEZ1bmN0aW9ucyB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiAqL1xuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG5cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBBbmltYXRpb24gRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG5cblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBJdGVtcyBDb250YWluZXIgRnVuY3Rpb25zIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBBcnJvdyBTdHVmZiB+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICBkZXRlY3RBbmRUb2dnbGVBcnJvd3M6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy50b2dnbGVJdGVtQ29udGFpbmVyQXJyb3dzKCk7XG4gICAgfSxcblxuICAgIC8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09IC8vXG4gICAgLyogfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fiBTZWN0aW9uIGFjdGl2YXRlL2RlYWN0aXZhdGUgfn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gKi9cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuXG5cbiAgICAvLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAvL1xuICAgIC8qIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn4gRXZlbnQgTGlzdGVuZXJzIH5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+fn5+ICovXG4gICAgLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gLy9cbiAgICBvbk5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgdmFyIG5ld0l0ZW0gPSB0aGlzLnJvb3RlZEl0ZW0gKyAxO1xuXG4gICAgICAgICAgICBpZiAobmV3SXRlbSA+PSB0aGlzLiRpdGVtcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmlzQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnNob3dTdWJWaWV3KHRoaXMuJGl0ZW1zLmVxKG5ld0l0ZW0pLmF0dHIoJ2RhdGEtaWQnKSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIG9uUHJldjogZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNBbmltYXRpbmcpIHtcbiAgICAgICAgICAgIHRoaXMuaXNBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICB2YXIgbmV3SXRlbSA9IHRoaXMucm9vdGVkSXRlbSAtIDE7XG5cbiAgICAgICAgICAgIGlmIChuZXdJdGVtID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcodGhpcy4kaXRlbXMuZXEobmV3SXRlbSkuYXR0cignZGF0YS1pZCcpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVN1YlZpZXcoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgb25DbGlja1NvY2lhbDogZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgdmFyIGl0ZW1JbmRleCA9IHRoaXMucm9vdGVkSXRlbTtcbiAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG5cbiAgICAgICAgdmFyIGxpbmsgPSBkb2N1bWVudC5VUkw7XG5cbiAgICAgICAgdmFyIGR2ID0gdGhpcy5zdWJWaWV3WzBdLmRldGFpbFZpZXc7XG5cbiAgICAgICAgaWYoZHYuaXRlbU5hbWUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIHZhciBpdGVtTmFtZSA9IGR2Lml0ZW1OYW1lO1xuICAgICAgICAgICAgdmFyIHNvY2lhbFNoYXJlID0gdGhpcy5tb2RlbC5pdGVtc1tpdGVtSW5kZXhdLmltYWdlc1tpdGVtTmFtZV0uc29jaWFsU2hhcmVbdHlwZV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLml0ZW1zW2l0ZW1JbmRleF0uc29jaWFsU2hhcmVbdHlwZV07XG4gICAgICAgIH1cblxuICAgICAgICBpZih0eXBlb2YgdGhpcy5zb2NpYWxbdHlwZV0gPT09ICdmdW5jdGlvbicgJiYgc29jaWFsU2hhcmUpIHtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWxbdHlwZV0oe1xuICAgICAgICAgICAgICAgIHRpdGxlOiBzb2NpYWxTaGFyZS50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogc29jaWFsU2hhcmUuY29weSxcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sXG5cbiAgICBvblByZXZlbnREZWZhdWx0OiBmdW5jdGlvbihlKVxuICAgIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1lZGlhVmlldztcbiIsInZhciBWaWV3ID0gcmVxdWlyZShcIi4uLy4uL1ZpZXcuanNcIik7XG52YXIgdGVtcGxhdGUgPSByZXF1aXJlKFwiLi4vLi4vLi4vLi4vdGVtcGxhdGVzL3NlY3Rpb25zL3RhYmxldC9zdG9yeS5oYnNcIik7XG52YXIgU2Nyb2xsQmFyVmlldyA9IHJlcXVpcmUoXCIuLi8uLi9TY3JvbGxCYXJWaWV3LmpzXCIpO1xuXG52YXIgU29jaWFsID0gcmVxdWlyZShcIi4uLy4uLy4uL3NlcnZpY2VzL1NvY2lhbC5qc1wiKTtcblxudmFyIFN0b3J5VmlldyA9IFZpZXcuZXh0ZW5kKFxuICAgIHtcbiAgICAgICAgZXZlbnRzIDoge1xuICAgICAgICAgICAgXCJ0YXAgLnJlYWQtbW9yZVwiICAgICAgIDogXCJvblJlYWRNb3JlQ2xpY2tlZFwiLFxuICAgICAgICAgICAgXCJ0YXAgLmJpby1saW5rLW11cnBoeVwiIDogXCJvbk11cnBoeUNsaWNrZWRcIixcbiAgICAgICAgICAgIFwidGFwIC5iaW8tbGluay1rcmFtZXJcIiA6IFwib25LcmFtZXJDbGlja2VkXCIsXG4gICAgICAgICAgICBcInRhcCAuY2xvc2VcIiAgICAgICAgICAgOiBcIm9uQ2xvc2VcIixcbiAgICAgICAgICAgICd0YXAgZGl2LnNvY2lhbCA+IGEnICAgOiAnb25DbGlja1NvY2lhbCcsXG5cbiAgICAgICAgICAgIFwiY2xpY2sgLmJpby1saW5rLW11cnBoeVwiIDogJ29uUHJldmVudERlZmF1bHQnLFxuICAgICAgICAgICAgXCJjbGljayAuYmlvLWxpbmsta3JhbWVyXCIgOiAnb25QcmV2ZW50RGVmYXVsdCcsXG4gICAgICAgICAgICAnY2xpY2sgZGl2LnNvY2lhbCA+IGEnICAgOiAnb25QcmV2ZW50RGVmYXVsdCcsXG4gICAgICAgICAgICBcInRvdWNoZW5kIC5iaW8tbGluay1tdXJwaHlcIiA6ICdvblByZXZlbnREZWZhdWx0JyxcbiAgICAgICAgICAgIFwidG91Y2hlbmQgLmJpby1saW5rLWtyYW1lclwiIDogJ29uUHJldmVudERlZmF1bHQnLFxuICAgICAgICAgICAgJ3RvdWNoZW5kIGRpdi5zb2NpYWwgPiBhJyAgIDogJ29uUHJldmVudERlZmF1bHQnXG4gICAgICAgIH0sXG5cbiAgICAgICAgaW5pdGlhbGl6ZSA6IGZ1bmN0aW9uIChvcHRpb25zKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcihvcHRpb25zKTtcbiAgICAgICAgICAgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICAgICAgICAgIHRoaXMucmVhZE1vcmUgPSBmYWxzZTtcblxuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbihcIndpbmRvdy5yZXNpemVcIiwgdGhpcy5vbldpbmRvd1Jlc2l6ZSwgdGhpcyk7XG4gICAgICAgICAgICBCYWNrYm9uZS5Ob3RpZmljYXRpb25zLm9uKCdzZWN0aW9uLmJlZm9yZUFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy5vbignc2VjdGlvbi5hZnRlckFjdGl2ZScsIHRoaXMub25TZWN0aW9uQWN0aXZhdGUsIHRoaXMpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHNldHVwIDogZnVuY3Rpb24gKClcbiAgICAgICAge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzLCBwYWdlcywgaW5kZXg7XG5cbiAgICAgICAgICAgIHBhZ2VzID0gWydtYWluQ29weScsICdyeWFuLW11cnBoeScsICdsYXJyeS1rcmFtZXInXTtcblxuICAgICAgICAgICAgdGhpc1tcInJ5YW4tbXVycGh5XCJdID0gdGhpcy4kKCcuYmlvLW11cnBoeScpO1xuICAgICAgICAgICAgdGhpc1tcImxhcnJ5LWtyYW1lclwiXSA9IHRoaXMuJCgnLmJpby1rcmFtZXInKTtcblxuICAgICAgICAgICAgdGhpcy5zdG9yeSA9IHRoaXMuJCgnLnN0b3J5Jyk7XG5cbiAgICAgICAgICAgIHRoaXMubW9yZUNvcHlQYXJhZ3JhcGhzID0gdGhpcy5zdG9yeS5maW5kKCcubW9yZScpO1xuXG4gICAgICAgICAgICB0aGlzLm11cnBoeVBhZ2VzID0gdGhpcy4kKCcuYmlvLXBhZ2UubXVycGh5JykuY2hpbGRyZW4oKTtcblxuICAgICAgICAgICAgdGhpcy5iZ0ltZyA9IHRoaXMuJCgnLnZpZGVvSW1hZ2UnKTtcblxuICAgICAgICAgICAgdGhpcy5pbml0U29jaWFsRnVuY3Rpb25zKCk7XG4gICAgICAgIH0sXG4gICAgICAgIGluaXRTb2NpYWxGdW5jdGlvbnM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpcy5zb2NpYWwgPSB7fTtcblxuICAgICAgICAgICAgdGhpcy5zb2NpYWwuZmFjZWJvb2sgPSBfLmJpbmQoU29jaWFsLlNoYXJlRmFjZWJvb2ssIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50d2l0dGVyID0gXy5iaW5kKFNvY2lhbC5TaGFyZVR3aXR0ZXIsIFNvY2lhbCk7XG4gICAgICAgICAgICB0aGlzLnNvY2lhbC50dW1ibHIgPSBfLmJpbmQoU29jaWFsLlNoYXJlVHVtYmxyLCBTb2NpYWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIHVwZGF0ZVNjcm9sbGluZzogZnVuY3Rpb24oY29udGFpbmVyLCBlKVxuICAgICAgICB7XG4gICAgICAgICAgICB2YXIgcGVyY2VudCA9IGUucGVyY2VudC8xMDA7XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AoICggKCBIZWxwZXJGdW5jcy5FbGVtZW50LmNvbnRlbnRIZWlnaHQoY29udGFpbmVyWzBdICkgLSBjb250YWluZXIub3V0ZXJIZWlnaHQodHJ1ZSkgKSAqIHBlcmNlbnQpICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgaGFuZGxlUm91dGUgOiBmdW5jdGlvbiAoc3Vic2VjdGlvbiwgZGV0YWlsKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBjbGVhbnVwXG4gICAgICAgICAgICBpZiAoIXN1YnNlY3Rpb24pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgLy90aGlzLmNsb3NlU3ViVmlldygpO1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFkTW9yZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9zdXBlcihzdWJzZWN0aW9uLCBkZXRhaWwpO1xuICAgICAgICB9LFxuXG4gICAgICAgIG9uU2VjdGlvbkFjdGl2YXRlIDogZnVuY3Rpb24gKGVsKVxuICAgICAgICB7XG4gICAgICAgICAgICBpZiAoZWxbMF0gPT0gdGhpcy5lbClcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uV2luZG93UmVzaXplKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc2hvd1N1YlZpZXcgOiBmdW5jdGlvbiAodmlld05hbWUsIG9wdGlvbnMpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnJlYWRNb3JlKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFkTW9yZSgpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3N1cGVyKHZpZXdOYW1lLCBvcHRpb25zKTtcblxuICAgICAgICAgICAgdGhpcy5zdWJWaWV3ID0gdGhpc1t2aWV3TmFtZV07XG5cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAncnlhbi1tdXJwaHknKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIC8vIGFuaW1hdGUgaW4gZnJvbSB0aGUgbGVmdFxuICAgICAgICAgICAgICAgIHRoaXMuc3ViVmlldy5jc3MoXCJsZWZ0XCIsIC10aGlzLnN1YlZpZXcud2lkdGgoKSArIFwicHhcIik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICh2aWV3TmFtZSA9PSAnbGFycnkta3JhbWVyJylcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBhbmltYXRlIGluIGZyb20gdGhlIHJpZ2h0XG4gICAgICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmNzcyhcImxlZnRcIiwgJCh3aW5kb3cpLndpZHRoKCkgKyBcInB4XCIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcuY3NzKFwiZGlzcGxheVwiLCBcImJsb2NrXCIpO1xuXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHNsaWRlIGFuaW1hdGlvblxuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzICA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnIDogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZSA6IFBvd2VyMS5lYXNlT3V0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBjbG9zZVN1YlZpZXcgOiBmdW5jdGlvbiAoKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLl9zdXBlcigpO1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZE1vcmUpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZVJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghdGhpcy5zdWJWaWV3KVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgVHdlZW5MaXRlLnRvKHRoaXMuc3ViVmlldywgMC41LCB7XG4gICAgICAgICAgICAgICAgY3NzICA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ2xlZnQnIDogdGhpcy5zdWJWaWV3ID09PSB0aGlzWydyeWFuLW11cnBoeSddID8gJy0xMDAlJyA6ICcxMDAlJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZWFzZSA6IFBvd2VyMS5lYXNlT3V0LFxuICAgICAgICAgICAgICAgIG9uQ29tcGxldGU6IHRoaXMuZGVzdHJveVN1YlZpZXcuYmluZCh0aGlzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGVzdHJveVN1YlZpZXc6IGZ1bmN0aW9uKClcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy5zdWJWaWV3LmNzcyhcImRpc3BsYXlcIiwgXCJcIik7XG4gICAgICAgICAgICB0aGlzLnN1YlZpZXcgPSBudWxsO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5zdWJWaWV3ID09PSB0aGlzWydyeWFuLW11cnBoeSddKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMubXVycGh5U2xpZGVyLmRlc3Ryb3lTbGlkZXIoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuc3ViVmlldyA9PT0gdGhpc1snbGFycnkta3JhbWVyJ10pXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdGhpcy5rcmFtZXJTbGlkZXIuZGVzdHJveVNsaWRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge2V2ZW50fSBbZV1cbiAgICAgICAgICovXG4gICAgICAgIG9wZW5SZWFkTW9yZSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygncmVhZC1tb3JlJyk7XG4gICAgICAgICAgICB0aGlzLnJlYWRNb3JlID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMuc3RvcnkucGFyZW50KCkuYWRkQ2xhc3MoJ21vcmUnKTtcbiAgICAgICAgICAgIHRoaXMubW9yZUNvcHlQYXJhZ3JhcGhzLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIEJhY2tib25lLk5vdGlmaWNhdGlvbnMudHJpZ2dlcihcIlN1YlZpZXcuT3BlbmVkXCIpO1xuICAgICAgICB9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKlxuICAgICAgICAgKiBAcGFyYW0ge2V2ZW50fSBbZV1cbiAgICAgICAgICovXG4gICAgICAgIGNsb3NlUmVhZE1vcmUgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ3JlYWQtbW9yZScpO1xuICAgICAgICAgICAgdGhpcy5yZWFkTW9yZSA9IGZhbHNlO1xuICAgICAgICAgICAgdGhpcy5zdG9yeS5wYXJlbnQoKS5yZW1vdmVDbGFzcygnbW9yZScpO1xuICAgICAgICAgICAgdGhpcy5tb3JlQ29weVBhcmFncmFwaHMucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgQmFja2JvbmUuTm90aWZpY2F0aW9ucy50cmlnZ2VyKFwiU3ViVmlldy5DbG9zZWRcIik7XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25SZWFkTW9yZUNsaWNrZWQgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy4kZWwuaGFzQ2xhc3MoJ3JlYWQtbW9yZScpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2VSZWFkTW9yZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHRoaXMub3BlblJlYWRNb3JlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb25NdXJwaHlDbGlja2VkIDogZnVuY3Rpb24gKGUpXG4gICAgICAgIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuc2hvd1N1YlZpZXcoXCJyeWFuLW11cnBoeVwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbktyYW1lckNsaWNrZWQgOiBmdW5jdGlvbiAoZSlcbiAgICAgICAge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5zaG93U3ViVmlldyhcImxhcnJ5LWtyYW1lclwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbldpbmRvd1Jlc2l6ZSA6IGZ1bmN0aW9uIChlKVxuICAgICAgICB7XG4gICAgICAgICAgICAvLyBGSVhNRSBtZW1vcnlcbiAgICAgICAgICAgIHZhciBoYWxmV2luVyA9ICQod2luZG93KS53aWR0aCgpIC8gMjtcbiAgICAgICAgICAgIHZhciBoYWxmV2luSCA9ICQod2luZG93KS5oZWlnaHQoKSAvIDI7XG5cbiAgICAgICAgICAgIHRoaXMuYmdJbWcuY3NzKFwibGVmdFwiLCAoaGFsZldpblcgLSAodGhpcy5iZ0ltZy53aWR0aCgpIC8gMikpICsgXCJweFwiKTtcbiAgICAgICAgICAgIHRoaXMuYmdJbWcuY3NzKFwidG9wXCIsIChoYWxmV2luSCAtICh0aGlzLmJnSW1nLmhlaWdodCgpIC8gMikpICsgXCJweFwiKTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbkNsaWNrU29jaWFsOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHZhciBsaW5rID0gZG9jdW1lbnQuVVJMO1xuICAgICAgICAgICAgdmFyIHR5cGUgPSBlLmN1cnJlbnRUYXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNoYXJlJyk7XG4gICAgICAgICAgICB2YXIgc29jaWFsSWQ7XG4gICAgICAgICAgICBpZih0aGlzLnN1YlZpZXcuaGFzQ2xhc3MoJ2Jpby1tdXJwaHknKSkge1xuICAgICAgICAgICAgICAgIHNvY2lhbElkID0gJ3J5YW5NdXJwaHknO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzb2NpYWxJZCA9ICdsYXJyeUtyYW1lcic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgc29jaWFsU2hhcmUgPSB0aGlzLm1vZGVsLnNvY2lhbENvcHlbc29jaWFsSWRdO1xuXG4gICAgICAgICAgICB0aGlzLnNvY2lhbFt0eXBlXSh7XG4gICAgICAgICAgICAgICAgcGljdHVyZTogc29jaWFsU2hhcmUudGh1bWIsXG4gICAgICAgICAgICAgICAgdGl0bGU6IHNvY2lhbFNoYXJlLnRpdGxlLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzb2NpYWxTaGFyZVt0eXBlXSxcbiAgICAgICAgICAgICAgICBsaW5rOiBsaW5rXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcblxuICAgICAgICBvbkNsb3NlOiBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VTdWJWaWV3KCk7XG4gICAgICAgIH0sXG4gICAgICAgIG9uUHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0b3J5VmlldztcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzLnRlbXBsYXRlKGZ1bmN0aW9uIChIYW5kbGViYXJzLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgdGhpcy5jb21waWxlckluZm8gPSBbNCwnPj0gMS4wLjAnXTtcbmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMsIEhhbmRsZWJhcnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9O1xuICBcblxuXG4gIHJldHVybiBcIjxkaXY+XFxuICA8dWw+XFxuICAgIDxsaT5USEU8L2xpPlxcbiAgICA8bGk+REVGQVVMVDwvbGk+XFxuICAgIDxsaT5WSUVXPC9saT5cXG4gICAgPGxpPlRFTVBMQVRFPC9saT5cXG4gIDwvdWw+XFxuPC9kaXY+XFxuXCI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgPGxpPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJtZW51LWl0ZW1cXFwiIGhyZWY9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAubGluaykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwidGV4dFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnRpdGxlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJvcmRlclxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDwvbGk+XFxuICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiPGRpdiBpZD1cXFwibWVudVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6dXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvbWVudS9iZy5qcGcpO1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcInRvcC1iYXJcXFwiPlxcbiAgICAgICAgPGltZyBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvbWVudS9sb2dvQDJ4LnBuZ1xcXCIvPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZGVza3RvcC1sb2dvXFxcIj5cXG4gICAgICAgIDxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2xvZ28ucG5nXFxcIi8+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJtZW51LWNvbnRhaW5lclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZW51LWl0ZW1zLWN0blxcXCI+XFxuICAgICAgICAgICAgPHVsPlxcbiAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5pdGVtcyksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSgxLCBwcm9ncmFtMSwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICA8L3VsPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZW51LWhiby1jdG5cXFwiPlxcblx0XHRcdDxkaXY+XFxuXHRcdFx0XHQ8YSBjbGFzcz1cXFwidGFwLWhhY2tcXFwiIGhyZWY9XFxcImh0dHA6Ly93d3cuaGJvZ28uY29tLyNtb3ZpZXMvdmlkZW8mYXNzZXRJRD1HT1JPU1RHUDQzMDk5P3ZpZGVvTW9kZT1pbmZvcGFnZVByZXZpZXcvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJoYm8tbG9nb1xcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL21lbnUvaGJvX2dvLnBuZ1xcXCIgYWx0PVxcXCJIQk9HTyBMb2dvXFxcIj5cXG4gICAgICAgICAgICAgICAgPC9hPlxcblxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwOi8vc3RvcmUuaGJvLmNvbS90aGUtbm9ybWFsLWhlYXJ0LWJsdS1yYXktd2l0aC1kaWdpdGFsLWhkL2RldGFpbC5waHA/cD01ODgxNTMmZWNpZD1QUkYtSEJPLTgwMzMwMyZwYT1QUkYtSEJPLTgwMzMwM1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlxcbiAgICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImJ1eS1idG4gdGFwLWhhY2tcXFwiPkJ1eSB0aGUgRFZEIG5vdzwvYnV0dG9uPlxcbiAgICAgICAgICAgICAgICA8L2E+XFxuXFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcblx0XHRcdFx0XHQ8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiZmFjZWJvb2stc2hhcmUgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOnVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL21lbnUvZmItc2hhcmUucG5nKTtcXFwiPnNoYXJlIG9uIGZhY2Vib29rPC9hPlxcblx0XHRcdFx0XHQ8IS0tIDxkaXYgY2xhc3M9XFxcImZiLWxpa2VcXFwiIGRhdGEtaHJlZj1cXFwiaHR0cDovL25vcm1hbGhlYXJ0bW92aWUuY29tXFxcIiBkYXRhLWxheW91dD1cXFwiYnV0dG9uX2NvdW50XFxcIiBkYXRhLWFjdGlvbj1cXFwibGlrZVxcXCIgZGF0YS1zaG93LWZhY2VzPVxcXCJmYWxzZVxcXCIgZGF0YS1zaGFyZT1cXFwiZmFsc2VcXFwiPjwvZGl2PiAtLT5cXG5cdFx0XHRcdFx0PGRpdiBjbGFzcz1cXFwiZmFjZWJvb2stbGlrZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGlmcmFtZSBzcmM9XFxcIi8vd3d3LmZhY2Vib29rLmNvbS9wbHVnaW5zL2xpa2UucGhwP2hyZWY9aHR0cHMlM0ElMkYlMkZub3JtYWxoZWFydG1vdmllLmNvbSZhbXA7d2lkdGgmYW1wO2xheW91dD1idXR0b25fY291bnQmYW1wO2FjdGlvbj1saWtlJmFtcDtzaG93X2ZhY2VzPWZhbHNlJmFtcDtzaGFyZT1mYWxzZSZhbXA7aGVpZ2h0PTIxJmFtcDthcHBJZD0xMzkwNTk3Mzk0NDk4NTIwXFxcIiBzY3JvbGxpbmc9XFxcIm5vXFxcIiBmcmFtZWJvcmRlcj1cXFwiMFxcXCIgc3R5bGU9XFxcImJvcmRlcjpub25lOyBvdmVyZmxvdzpoaWRkZW47IGhlaWdodDoyMXB4O1xcXCIgYWxsb3dUcmFuc3BhcmVuY3k9XFxcInRydWVcXFwiPjwvaWZyYW1lPlxcblx0XHRcdFx0XHQ8L2Rpdj5cXG5cdFx0XHRcdDwvZGl2Plxcblx0XHRcdFx0PGEgY2xhc3M9XFxcInRhcC1oYWNrIHZpZXctc2NoZWR1bGVcXFwiIGhyZWY9XFxcImh0dHA6Ly93d3cuaGJvLmNvbS8jL3NjaGVkdWxlL2RldGFpbC9mb2N1c0lkLzc1Njk5Nz9zdGFydFRpbWU9MjAxNC0wNC0xNlQxNToxNjoxNlomY21waWQ9QUJDNDY0P2ljaWQ9QUJDMTUxNlxcXCIgY2xhc3M9XFxcInNjaGVkdWxlXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICBWaWV3IHRoZSBzY2hlZHVsZVxcbiAgICAgICAgICAgICAgICA8L2E+XFxuXHRcdFx0PC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImhhbWJ1cmdlclxcXCIgZGF0YS1zdGF0ZT1cXFwibWVudVxcXCIgaHJlZj1cXFwiI1xcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6dXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL21lbnUvbWVudS1pY29uQDJ4LnBuZycpXFxcIj48L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcInByZWxvYWRlckNvbnRhaW5lclxcXCI+XFxuICA8c3ZnIHdpZHRoPVxcXCIyNTBcXFwiIGhlaWdodD1cXFwiMjUwXFxcIiB2aWV3Ym94PVxcXCIwIDAgMjUwIDI1MFxcXCI+XFxuICAgIDxwYXRoIGNsYXNzPVxcXCJib3JkZXJcXFwiIHRyYW5zZm9ybT1cXFwidHJhbnNsYXRlKDEyNSwgMTI1KVxcXCIvPlxcbiAgICA8cGF0aCBjbGFzcz1cXFwibG9hZGVyXFxcIiB0cmFuc2Zvcm09XFxcInRyYW5zbGF0ZSgxMjUsIDEyNSkgc2NhbGUoLjk0KVxcXCIvPlxcbiAgPC9zdmc+XFxuICA8aW1nIGNsYXNzPVxcXCJsb2dvXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvbG9nb0AyeC5wbmdcXFwiLz5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgXG5cblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJzY3JvbGxiYXJcXFwiPlxcbiAgPGRpdiBjbGFzcz1cXFwidHJhY2tcXFwiPjwvZGl2PlxcbiAgPGRpdiBjbGFzcz1cXFwiaGFuZGxlXFxcIj48L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgXG5cblxuICByZXR1cm4gXCI8ZGl2IGNsYXNzPVxcXCJjb250YWluZXJcXFwiPlxcblxcbjwvZGl2PlxcblwiO1xuICB9KTtcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzLnRlbXBsYXRlKGZ1bmN0aW9uIChIYW5kbGViYXJzLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgdGhpcy5jb21waWxlckluZm8gPSBbNCwnPj0gMS4wLjAnXTtcbmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMsIEhhbmRsZWJhcnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9O1xuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXIsIGZ1bmN0aW9uVHlwZT1cImZ1bmN0aW9uXCIsIGVzY2FwZUV4cHJlc3Npb249dGhpcy5lc2NhcGVFeHByZXNzaW9uLCBzZWxmPXRoaXM7XG5cbmZ1bmN0aW9uIHByb2dyYW0xKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCIgZGF0YS1wb3M9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY29udGVudFBvc2l0aW9uKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIGRhdGEtaWQ9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaWQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmdWxsLXJlbGF0aXZlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnNbJ2lmJ10uY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDIsIHByb2dyYW0yLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnNbJ2lmJ10uY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmFjdG9yTmFtZSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg0LCBwcm9ncmFtNCwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuZnVuY3Rpb24gcHJvZ3JhbTIoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiIGJhY2tncm91bmQtaW1hZ2U6dXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5waG90bykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEuc3JjKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCIpOyBiYWNrZ3JvdW5kLXBvc2l0aW9uOlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5waG90bykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEucG9zaXRpb24pKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIjtcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG5mdW5jdGlvbiBwcm9ncmFtNChkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyPlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuYWN0b3JOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCIgYXM8L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmNoYXJhY3Rlck5hbWUpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIjwvaDE+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImRldGFpbC1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnF1b3RlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjdGEtY3RyIGNsZWFyZml4XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnNbJ2lmJ10uY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmludGVydmlldyksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg1LCBwcm9ncmFtNSwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR3aXR0ZXI8L2E+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZiIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPmZhY2Vib29rPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiY2xvc2VcXFwiPlggQ2xvc2U8L2J1dHRvbj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuZnVuY3Rpb24gcHJvZ3JhbTUoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbnRlcnZpZXdcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOnVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9tZWRpYV9wbGF5LnBuZycpO1xcXCIgZGF0YS15b3V0dWJlLWlkPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmludGVydmlldykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnRlcnZpZXdcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImNoYXJhY3RlcnMtcGFnZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LWxlZnRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfbGVmdC5wbmcnKTtcXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvdyBhcnJvdy1yaWdodFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9hcnJvd19yaWdodC5wbmcnKTtcXFwiPjwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhbGwtaXRlbXMtY3RyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImZ1bGwtcmVsYXRpdmVcXFwiPlxcbiAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmNoYXJhY3RlcnMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFjdGl2ZS1pdGVtLWN0clxcXCI+XFxuXFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ5b3V0dWJlLWVtYmVkLWN0clxcXCI+XFxuICAgICAgICA8IS0tIHlvdXR1YmUuanMgcGFydGlhbCB0ZW1wbGF0ZSBpcyBpbmplY3RlZCBoZXJlLiAtLT5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5saW5rKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibG9nby1jdHIgXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMFsnY2xhc3MnXSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVtcHR5LXNwYWNlXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJhY2tncm91bmRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaW1hZ2UpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIicpO1xcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jb3B5KSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG5mdW5jdGlvbiBwcm9ncmFtMyhkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAubGluaykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWN0ciBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwWydjbGFzcyddKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaW1hZ2UpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIicpO1xcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmNvcHkpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW01KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImRhdGEtcG9pbnQgXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMFsnY2xhc3MnXSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmltYWdlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCInKVxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJvZHktY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlci1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5cIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50aXRsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIjwvaDE+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGgyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5zdWJIZWFkZXIpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvY2lhbC1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyXFxcIiBhbHQ9XFxcIlR3aXR0ZXJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIZHBkSFJsY2w5ZmVESTRYMkZzZEY5NE1qbGZJaUJtYVd4c1BTSWpSa1pHUmtaR0lpQmtQU0pOT0RRdU9EQXpMRFEyTGpVMk5HTTFMakExTlMwd0xqUXhOeXc0TGpRNE15MHlMamN4TlN3NUxqZ3dNeTAxTGpnek13MEtDV010TVM0NE1qTXNNUzR4TWkwM0xqUTRNeXd5TGpNME1TMHhNQzQyTURrc01TNHhOemhqTFRBdU1UVXpMVEF1TnpNMExUQXVNekkwTFRFdU5ETXlMVEF1TkRreUxUSXVNRFl5WXkweUxqTTRNaTA0TGpjME5pMHhNQzQxTXpjdE1UVXVOemt5TFRFNUxqQTRNaTB4TkM0NU5ERU5DZ2xqTUM0Mk9URXRNQzR5Tnprc01TNHpPVE10TUM0MU16a3NNaTR3T1RJdE1DNDNOekpqTUM0NU5DMHdMak16Tnl3MkxqUTFPUzB4TGpJek5TdzFMalU1TFRNdU1UZ3pZeTB3TGpjek1pMHhMamN4TXkwM0xqUTNOU3d4TGpJNU5TMDRMamMwTkN3eExqWTRPQTBLQ1dNeExqWTNOaTB3TGpZekxEUXVORFEzTFRFdU56RTBMRFF1TnpRMExUTXVOalJqTFRJdU5UWTNMREF1TXpVeUxUVXVNRGc0TERFdU5UWTJMVGN1TURNMUxETXVNek14WXpBdU56QXpMVEF1TnpVM0xERXVNak0yTFRFdU5qYzVMREV1TXpVdE1pNDJOeklOQ2dsakxUWXVPRFE0TERRdU16YzFMVEV3TGpnME9Dd3hNeTR4T1RVdE1UUXVNRGcxTERJeExqYzFZeTB5TGpVME1pMHlMalEyTXkwMExqYzVOUzAwTGpRd015MDJMamd4TmkwMUxqUTRZeTAxTGpZM0xUTXVNRFF4TFRFeUxqUTBPUzAyTGpJeE15MHlNeTR3T1RFdE1UQXVNVFkwRFFvSll5MHdMak15Tnl3ekxqVXlNU3d4TGpjME1TdzRMakl3TXl3M0xqY3NNVEV1TXpFMll5MHhMakk1TVMwd0xqRTNNeTB6TGpZMU1pd3dMakl4TXkwMUxqVTBMREF1TmpZMVl6QXVOelk1TERRdU1ETTBMRE11TWpnc055NHpOVGNzTVRBdU1EYzVMRGd1T1RZMERRb0pZeTB6TGpFd055d3dMakl3TlMwMExqY3hNeXd3TGpreE1pMDJMakUyT0N3eUxqUXpObU14TGpReE5Td3lMamd3TlN3MExqZzJPQ3cyTGpFd055d3hNUzR3T0N3MUxqUXlPV010Tmk0NU1EWXNNaTQ1TnpjdE1pNDRNVFlzT0M0ME9Td3lMamd3TkN3M0xqWTJOdzBLQ1VNeU9DNDNPVFFzTnpJdU1UUXpMREV6TGpZM09TdzNNUzQwTVRZc05TdzJNeTR4TXpSak1qSXVOall4TERNd0xqZzRMRGN4TGpreU1Td3hPQzR5TmpNc056a3VNall5TFRFeExqUTRNV00xTGpVc01DNHdORGdzT0M0M016TXRNUzQ1TURRc01UQXVOek00TFRRdU1EVTJEUW9KUXpreExqZ3pNU3cwT0M0eE16UXNPRGN1TWpNNExEUTNMalUzT0N3NE5DNDRNRE1zTkRZdU5UWTBlaUl2UGcwS1BDOXpkbWMrRFFvPVxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZhY2Vib29rXFxcIiBhbHQ9XFxcIkZhY2Vib29rXFxcIiBzcmM9XFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE5pNHdMakFzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p3aFJFOURWRmxRUlNCemRtY2dVRlZDVEVsRElDSXRMeTlYTTBNdkwwUlVSQ0JUVmtjZ01TNHhMeTlGVGlJZ0ltaDBkSEE2THk5M2QzY3Vkek11YjNKbkwwZHlZWEJvYVdOekwxTldSeTh4TGpFdlJGUkVMM04yWnpFeExtUjBaQ0krRFFvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJa2xqYjI1eklpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lOQ2drZ2QybGtkR2c5SWpFd01IQjRJaUJvWldsbmFIUTlJakV3TUhCNElpQjJhV1YzUW05NFBTSXdJREFnTVRBd0lERXdNQ0lnWlc1aFlteGxMV0poWTJ0bmNtOTFibVE5SW01bGR5QXdJREFnTVRBd0lERXdNQ0lnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjR0YwYUNCcFpEMGlSbUZqWldKdmIyc2lJR1pwYkd3OUlpTkdSa1pHUmtZaUlHUTlJazB6T0M0d056Z3NNakl1TkRNeFl6QXNNaTR5Tmpnc01Dd3hNaTR6T1RFc01Dd3hNaTR6T1RGSU1qbDJNVFV1TVRVeWFEa3VNRGM0VmprMWFERTRMalkwT0ZZME9TNDVOelZJTmprdU1qUU5DZ2xqTUN3d0xERXVNVGN5TFRjdU1qWTFMREV1TnpRdE1UVXVNakE1WXkweExqWXlPU3d3TFRFMExqRTROQ3d3TFRFMExqRTROQ3d3Y3pBdE9DNDRNVFVzTUMweE1DNHpObU13TFRFdU5UUTRMREl1TURNekxUTXVOak14TERRdU1EUXpMVE11TmpNeFl6SXVNREEyTERBc05pNHlNemtzTUN3eE1DNHhOaXd3RFFvSll6QXRNaTR3TmpNc01DMDVMakU1TVN3d0xURTFMamMzTkdNdE5TNHlNelFzTUMweE1TNHhPRGtzTUMweE15NDRNVFFzTUVNek55NDJNVGNzTlN3ek9DNHdOemdzTWpBdU1UWTNMRE00TGpBM09Dd3lNaTQwTXpGNklpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR1bWJsclxcXCIgY2xhc3M9XFxcInR1bWJsclxcXCIgYWx0PVxcXCJUdW1ibHJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIVnRZbXh5SWlCbWFXeHNQU0lqUmtaR1JrWkdJaUJrUFNKTk5UY3VPRGsyTERjNExqVTFPV010TVM0MU1UTXRNQzQ0T0RrdE1pNDVNREV0TWk0ME1UWXRNeTQwTlRVdE15NDRPV010TUM0MU5qRXRNUzQwT0RNdE1DNDBPRGt0TkM0ME9Ea3RNQzQwT0RrdE9TNDNNVE1OQ2dsV05ERXVPRGM0YURJd0xqazROMVl5TlM0NE1UVklOVE11T1RVelZqVklOREV1TURSakxUQXVOVGMyTERRdU5qTTJMVEV1TmpNM0xEZ3VORFkyTFRNdU1UYzJMREV4TGpRM1l5MHhMalUwTWl3ekxqQXdPQzB6TGpVM05pdzFMalUzT0MwMkxqRXlOaXczTGpjeU5nMEtDVU15T1M0eUxESTJMak0wTERJMUxqQTJOQ3d5Tnk0NU9USXNNakV1TlN3eU9TNHhNekoyTVRJdU56UTJhREV5TGpNeU9YWXpNUzQxTmpKak1DdzBMakV5TVN3d0xqUXpOeXczTGpJMk5Td3hMak13Tml3NUxqUXlPV013TGpnM015d3lMakUyTWl3eUxqUXpNaXcwTGpJeE1TdzBMalk0TkN3MkxqRXpPUTBLQ1dNeUxqSTFNaXd4TGprd055dzBMamszTVN3ekxqTTVOaXc0TGpFMk1TdzBMalEwTVVNMU1TNHhOallzT1RRdU5EZ3lMRFV6TGpZeE5pdzVOU3cxTnk0M05qWXNPVFZqTXk0Mk5Td3dMRGN1TURRNUxUQXVNelk0TERFd0xqSXRNUzR3T0RnTkNnbGpNeTR4TkRjdE1DNDNNemdzTmk0Mk5qRXRNaTR3TVN3eE1DNDFNelF0TXk0NE1USldOelV1T1dNdE5DNDFORFVzTWk0NU5qVXRPUzR4TVRZc05DNDBOQzB4TXk0M01UTXNOQzQwTkVNMk1pNHlMRGd3TGpNME1pdzFPUzQ1TVRNc056a3VOelEzTERVM0xqZzVOaXczT0M0MU5UbDZJaTgrRFFvOEwzTjJaejROQ2c9PVxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2hhcnRcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInZpc2libGUtc21cXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50YWJsZXRDaGFydCkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiAvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImhpZGRlbi1zbSBcIjtcbiAgc3RhY2sxID0gaGVscGVyc1snaWYnXS5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuY2hhcnRTZXF1ZW5jZSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg2LCBwcm9ncmFtNiwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXFwiIHN0eWxlPVxcXCJ3aWR0aDogOTMlXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY2hhcnQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic291cmNlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jb3B5KSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwOi8vd3d3LnVuYWlkcy5vcmcvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvZGF0YS12aXMvdW5haWRzLnBuZ1xcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlXFxcIj54IGNsb3NlPC9idXR0b24+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuZnVuY3Rpb24gcHJvZ3JhbTYoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIFxuICByZXR1cm4gXCJjaGFydFNlcXVlbmNlXCI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJmaWdodC1wYWdlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctbGVmdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9hcnJvd19sZWZ0LnBuZycpO1xcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LXJpZ2h0XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X3JpZ2h0LnBuZycpO1xcXCI+PC9kaXY+XFxuXFxuICAgIDxpbWcgY2xhc3M9XFxcImJnIHZpc2libGUteHNcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9tb2JpbGUvZmlnaHQtY29udGludWVzLmpwZ1xcXCIgLz5cXG4gICAgPGltZyBjbGFzcz1cXFwiYmcgdmlzaWJsZS1zbVxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L3RhYmxldC9maWdodC1jb250aW51ZXMuanBnXFxcIiAvPlxcbiAgICA8dmlkZW8gcG9zdGVyPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L3ZpZGVvX3Bvc3Rlci5qcGdcXFwiPlxcbiAgICAgICAgPHNvdXJjZSBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi92aWRlb3MvZmlnaHQvdmlkZW8ud2VibVxcXCIgcHJlbG9hZD1cXFwiYXV0b1xcXCIgdHlwZT1cXFwidmlkZW8vd2VibVxcXCI+XFxuICAgICAgICA8c291cmNlIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL3ZpZGVvcy9maWdodC92aWRlby5tcDRcXFwiIHByZWxvYWQ9XFxcImF1dG9cXFwiIHR5cGU9XFxcInZpZGVvL21wNFxcXCI+XFxuICAgICAgICA8c291cmNlIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL3ZpZGVvcy9maWdodC92aWRlby5vZ3ZcXFwiIHByZWxvYWQ9XFxcImF1dG9cXFwiIHR5cGU9XFxcInZpZGVvL29ndlxcXCI+XFxuICAgIDwvdmlkZW8+XFxuICAgIDxkaXYgY2xhc3M9XFxcImZpZ2h0LWN0clxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJib2R5LWN0clxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgIDxwPlxcbiAgICAgICAgICAgICAgICAgICAgVGhlIGNydXNhZGUgYWdhaW5zdCBISVYvQUlEUyBoYXMgcmFnZWQgZm9yIG1vcmUgdGhhbiAzMCB5ZWFycywgcmVzdWx0aW5nIGluIHNvbWUgYmlnIHdpbnM6IFRyZWF0bWVudHNcXG4gICAgICAgICAgICAgICAgICAgIGFyZSBrZWVwaW5nIHBlb3BsZSB3aXRoIEhJViBsaXZpbmcgbG9uZ2VyLCB5ZWFybHkgZGVhdGhzIHdvcmxkd2lkZSBoYXZlIGRlY2xpbmVkIHNpbmNlIDIwMDUsIGFuZCByZXNlYXJjaGVyc1xcbiAgICAgICAgICAgICAgICAgICAgY29udGludWUgdG8gd29yayB0byB1bmxvY2sgdGhlIG15c3RlcmllcyBvZiB0aGlzIGRpc2Vhc2UuIEJ1dCB0aGUgd2FyIGFnYWluc3QgSElWL0FJRFMgaXMgZmFyIGZyb20gb3ZlcuKAlGFuZCBpdCB3b27igJl0IGJlIHVudGlsIGEgdmFjY2luZSBpcyBkaXNjb3ZlcmVkLlxcbiAgICAgICAgICAgICAgICA8L3A+XFxuICAgICAgICAgICAgICAgIDxwPlxcbiAgICAgICAgICAgICAgICAgICAgSm9pbiB0aGUgZmlnaHQgdG9kYXkgYnkgdmlzaXRpbmcgPGVtPlRoZSBOb3JtYWwgSGVhcnTigJlzPC9lbT4gcGFydG5lcnMgYW5kIHJlc291cmNlcyBhbmQgYXJtaW5nIHlvdXJzZWxmIHdpdGhcXG4gICAgICAgICAgICAgICAgICAgIGtub3dsZWRnZSBhYm91dCB3aGVyZSB0aGUgYmF0dGxlIHN0YW5kcyB0b2RheS5cXG4gICAgICAgICAgICAgICAgPC9wPlxcbiAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbiBkYXRhLWJ0blxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImltYWdlXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvZmlnaHQtZGF0YS1idG4ucG5nKVxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGgyPmxlYXJuIG1vcmU8L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgPGgxPjxzdHJvbmc+SElWL0FJRFM6PC9zdHJvbmc+IFdoZXJlIFdlIFN0YW5kIFRvZGF5PC9oMT5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uIHBhcnRuZXJzLWJ0blxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImltYWdlXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvZmlnaHQtcGFydG5lcnMtYnRuLnBuZylcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj5maW5kIGluZm9ybWF0aW9uPC9oMj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMT48c3Ryb25nPlBhcnRuZXJzICYgUmVzb3VyY2VzPC9zdHJvbmc+PC9oMT5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImtub3dfc3RhdHVzXFxcIiBocmVmPVxcXCJodHRwOi8vbG9jYXRvci5haWRzLmdvdi9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uIHRlc3RlZC1idG5cXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGgyPmtub3cgeW91ciBzdGF0dXM8L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoMT5HZXQgdGVzdGVkIGFuZCBmaW5kIHNlcnZpY2VzIDxici8+d2l0aCB0aGUgQUlEUy5nb3YgbG9jYXRvcjwvaDE+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJwYXJ0bmVycy1yZXNvdXJjZXMtY3RyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvZmlnaHQtYmctbm8tdGV4dC5qcGcpO1xcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwci1jdHIgcGFydG5lcnMtY3RyIGFjdGl2ZVxcXCI+XFxuICAgICAgICAgICAgPGgxPlBhcnRuZXJzPC9oMT5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJib2R5LWN0clxcXCI+XFxuICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFydG5lcnNBbmRSZXNvdXJjZXMpKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxLnBhcnRuZXJzKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwci1jdHIgcmVzb3VyY2VzLWN0clxcXCI+XFxuICAgICAgICAgICAgPGgxPlJlc291cmNlczwvaDE+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJyb3ctdG9wXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsICgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJ0bmVyc0FuZFJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEucmVzb3VyY2VzKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMVsncm93LXRvcCddKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDMsIHByb2dyYW0zLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicm93LWJvdHRvbVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFydG5lcnNBbmRSZXNvdXJjZXMpKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxLnJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazFbJ3Jvdy1ib3R0b20nXSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSgzLCBwcm9ncmFtMywgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInN3aXRjaFxcXCI+XFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiY2xvc2VcXFwiPnggY2xvc2U8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZGF0YS12aXN1YWxpemF0aW9uLWN0clxcXCI+XFxuICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5kYXRhUG9pbnRzKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDUsIHByb2dyYW01LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcblxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwibWFza1xcXCI+PC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJmb290ZXItcGFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9mb290ZXIvYmcuanBnJyk7XFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZm9vdGVyLWN0clxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmb290ZXItY3RyLWN0clxcXCI+XFxuICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cDovL3d3dy5oYm8uY29tXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImhiby1sb2dvXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZm9vdGVyL2hiby5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgPC9hPlxcblxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInRpdGxlLXRyZWF0bWVudCB2aXNpYmxlLXhzXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZm9vdGVyL21vYmlsZS90aXRsZS10cmVhdG1lbnRAMngucG5nXFxcIiAvPlxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInRpdGxlLXRyZWF0bWVudCBoaWRkZW4teHNcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9mb290ZXIvdGl0bGUtdHJlYXRtZW50LnBuZ1xcXCIgLz5cXG5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ2aXNpYmxlLXhzIHByZW1pZXJlXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cDovL3d3dy5oYm8uY29tLyMvc2NoZWR1bGUvZGV0YWlsL2ZvY3VzSWQvNzU2OTk3P3N0YXJ0VGltZT0yMDE0LTA0LTE2VDE1OjE2OjE2WiZjbXBpZD1BQkM0NjQ/aWNpZD1BQkMxNTE2XFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+VmlldyB0aGUgc2NoZWR1bGU8L2E+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGlkZGVuLXhzIHByZW1pZXJlXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cDovL3d3dy5oYm8uY29tLyMvc2NoZWR1bGUvZGV0YWlsL2ZvY3VzSWQvNzU2OTk3P3N0YXJ0VGltZT0yMDE0LTA0LTE2VDE1OjE2OjE2WiZjbXBpZD1BQkM0NjRcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5WaWV3IHRoZSBzY2hlZHVsZTwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwOi8vd3d3Lmhib2dvLmNvbS8jbW92aWVzL3ZpZGVvJmFzc2V0SUQ9R09ST1NUR1A0MzA5OT92aWRlb01vZGU9aW5mb3BhZ2VQcmV2aWV3L1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlxcbiAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJoYm8tbG9nbyBoYm8tZ29cXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9mb290ZXIvaGJvX2dvLnBuZ1xcXCIgLz5cXG4gICAgICAgICAgICA8L2E+XFxuXFxuICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cDovL3N0b3JlLmhiby5jb20vdGhlLW5vcm1hbC1oZWFydC1ibHUtcmF5LXdpdGgtZGlnaXRhbC1oZC9kZXRhaWwucGhwP3A9NTg4MTUzJmVjaWQ9UFJGLUhCTy04MDMzMDMmcGE9UFJGLUhCTy04MDMzMDNcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcInRhcC1oYWNrXFxcIj5CdXkgdGhlIERWRCBub3c8L2J1dHRvbj5cXG4gICAgICAgICAgICA8L2E+XFxuXFxuICAgICAgICAgICAgPGEgY2xhc3M9XFxcImpvaW4gaGlkZGVuLXhzXFxcIiBocmVmPVxcXCJodHRwOi8vY29ubmVjdC5oYm8uY29tL3RoZS1ub3JtYWwtaGVhcnRcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgSm9pbiB0aGUgQ29udmVyc2F0aW9uXFxuICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2Zvb3Rlci9oYm8tY29ubmVjdC5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgPC9hPlxcblxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImNyZWRpdHNcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9mb290ZXIvbGVnYWwucG5nXFxcIiAvPlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZvb3RlclxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInZpc2libGUteHMgc29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZhY2Vib29rLWxpa2VcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxpZnJhbWUgc3JjPVxcXCIvL3d3dy5mYWNlYm9vay5jb20vcGx1Z2lucy9saWtlLnBocD9ocmVmPWh0dHBzJTNBJTJGJTJGbm9ybWFsaGVhcnRtb3ZpZS5jb20mYW1wO3dpZHRoJmFtcDtsYXlvdXQ9YnV0dG9uX2NvdW50JmFtcDthY3Rpb249bGlrZSZhbXA7c2hvd19mYWNlcz1mYWxzZSZhbXA7c2hhcmU9ZmFsc2UmYW1wO2hlaWdodD0yMSZhbXA7YXBwSWQ9MTM5MDU5NzM5NDQ5ODUyMFxcXCIgc2Nyb2xsaW5nPVxcXCJub1xcXCIgZnJhbWVib3JkZXI9XFxcIjBcXFwiIHN0eWxlPVxcXCJib3JkZXI6bm9uZTsgb3ZlcmZsb3c6aGlkZGVuOyBoZWlnaHQ6MjFweDtcXFwiIGFsbG93VHJhbnNwYXJlbmN5PVxcXCJ0cnVlXFxcIj48L2lmcmFtZT5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cHM6Ly93d3cuZmFjZWJvb2suY29tL1RoZU5vcm1hbEhlYXJ0b25IQk9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJmYWNlYm9va1xcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2Zvb3Rlci9mYWNlYm9vay5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsZWdhbFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8c3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwOi8vd3d3Lmhiby5jb20vaHRtbC9wcml2YWN5LXBvbGljeS9pbmRleC5odG1sXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFByaXZhY3kgUG9saWN5XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgPHNwYW4+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiaHR0cDovL3d3dy5oYm8uY29tL2h0bWwvdGVybXMtb2YtdXNlL2luZGV4Lmh0bWxcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgVGVybXMgb2YgVXNlXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcdTAwMDPCqSBIb21lIEJveCBPZmZpY2UgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLjxiciBjbGFzcz1cXFwidmlzaWJsZS14c1xcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgICAgICBUaGlzIHdlYnNpdGUgY29udGFpbnMgYWR1bHQgY29udGVudC5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGlkZGVuLXhzIHNvY2lhbFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmYWNlYm9vay1saWtlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz1cXFwiLy93d3cuZmFjZWJvb2suY29tL3BsdWdpbnMvbGlrZS5waHA/aHJlZj1odHRwcyUzQSUyRiUyRm5vcm1hbGhlYXJ0bW92aWUuY29tJmFtcDt3aWR0aCZhbXA7bGF5b3V0PWJ1dHRvbl9jb3VudCZhbXA7YWN0aW9uPWxpa2UmYW1wO3Nob3dfZmFjZXM9ZmFsc2UmYW1wO3NoYXJlPWZhbHNlJmFtcDtoZWlnaHQ9MjEmYW1wO2FwcElkPTEzOTA1OTczOTQ0OTg1MjBcXFwiIHNjcm9sbGluZz1cXFwibm9cXFwiIGZyYW1lYm9yZGVyPVxcXCIwXFxcIiBzdHlsZT1cXFwiYm9yZGVyOm5vbmU7IG92ZXJmbG93OmhpZGRlbjsgaGVpZ2h0OjIxcHg7XFxcIiBhbGxvd1RyYW5zcGFyZW5jeT1cXFwidHJ1ZVxcXCI+PC9pZnJhbWU+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcImh0dHBzOi8vd3d3LmZhY2Vib29rLmNvbS9UaGVOb3JtYWxIZWFydG9uSEJPXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiZmFjZWJvb2tcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9mb290ZXIvZmFjZWJvb2sucG5nXFxcIiAvPlxcbiAgICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImhvbWUtcGFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvYmcuanBnKVxcXCI+XFxuICAgIDxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvcnVmZi5wbmdcXFwiIGNsYXNzPVxcXCJjaGFyYWN0ZXIgY2hhcmFjdGVyLWxlZnRcXFwiLz5cXG4gICAgPGltZyBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9qdWxpYS5wbmdcXFwiIGNsYXNzPVxcXCJjaGFyYWN0ZXIgY2hhcmFjdGVyLXJpZ2h0XFxcIi8+XFxuICAgIDxkaXYgY2xhc3M9XFxcImJpbGxpbmctYmxvY2tcXFwiPlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiY2FzdC1jdHJcXFwiPlxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImNhc3RcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9ob21lL2Nhc3QucG5nXFxcIi8+XFxuICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImxvZ28tY29udGFpbmVyXFxcIj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJsb2dvXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9sb2dvLnBuZ1xcXCIvPlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ0bi1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwibmV3cyB0YXAtaGFja1xcXCI+QXdhcmRzIE5ld3M8L2J1dHRvbj5cXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcInRyYWlsZXIgdGFwLWhhY2tcXFwiPlxcbiAgICAgICAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcInRyYWlsZXJQbGF5XFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvdHJhaWxlcl9pY29uLnBuZ1xcXCIvPlxcbiAgICAgICAgICAgICAgICAgIDxkaXY+V2F0Y2ggVHJhaWxlcjwvZGl2PlxcbiAgICAgICAgICAgICAgPC9idXR0b24+XFxuICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicHJlbWllcmUtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcInRhcC1oYWNrXFxcIiBocmVmPVxcXCJodHRwOi8vd3d3Lmhib2dvLmNvbS8jbW92aWVzL3ZpZGVvJmFzc2V0SUQ9R09ST1NUR1A0MzA5OT92aWRlb01vZGU9aW5mb3BhZ2VQcmV2aWV3L1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGJvLWxvZ29cXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9ob21lL2hib19nby5wbmcpXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJsb2NrLXVwXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInNjcm9sbC1kb3duXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9zY3JvbGwtZG93bi5wbmcpXFxcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhiby1maWxtc1xcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvaGJvLWZpbG1zLnBuZylcXFwiPjwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwib3ZlcmxheVxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1vZGFsXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNsb3NlXFxcIj5YPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJvdmVyZmxvdy1jb250YWluZXJcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudFxcXCI+XFxuICAgICAgICAgICAgICAgICAgPGgxPkhCTydzIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IFdpbnMgT25lIFNBRyBBd2FyZCwgT25lIEdvbGRlbiBHbG9iZSwgVHdvIEVtbXlzPC9oMT5cXG4gICAgICAgICAgICAgICAgICA8cD48aT5UaGUgTm9ybWFsIEhlYXJ0PC9pPiBwcmV2YWlsZWQgYXQgdGhlIEphbi4gMjUgU2NyZWVuIEFjdG9ycyBHdWlsZCBBd2FyZHMgY2VyZW1vbnksIHdpdGggTWFyayBSdWZmYWxvIHRha2luZyBob21lIGEgc3RhdHVlIGZvciBoaXMgcm9sZSBhcyBISVYvQUlEUyBhY3RpdmlzdCBOZWQgV2Vla3MuIFJ1ZmZhbG8gd29uIGZvciBPdXRzdGFuZGluZyBQZXJmb3JtYW5jZSBieSBhIE1hbGUgQWN0b3IgaW4gYSBUZWxldmlzaW9uIE1vdmllIG9yIE1pbmlzZXJpZXMuPC9wPlxcbiAgICAgICAgICAgICAgICAgIDxwPlByZXZpb3VzbHksIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IHRvb2sgaG9tZSBvbmUgR29sZGVuIEdsb2JlIEF3YXJkIGZvciBNYXR0IEJvbWVyJ3MgcG9ydHJheWFsIG9mIE5ldyBZb3VyIFRpbWVzIHJlcG9ydGVyIEZlbGl4IFR1cm5lciBpbiBhIGNlcmVtb255IHB1dCBvbiBKYW4uIDExLCAyMDE1LCBieSB0aGUgSG9sbHl3b29kIEZvcmVpZ24gUHJlc3MgQXNzb2NpYXRpb24uIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IGFsc28gbmFiYmVkIHR3byBQcmltZXRpbWUgRW1teSBBd2FyZHMsIGF3YXJkZWQgYnkgdGhlIFRlbGV2aXNpb24gQWNhZGVteSBpbiBjZXJlbW9uaWVzIG9uIEF1Zy4gMTYgYW5kIDI1LCAyMDE0LiBUaGUgYXdhcmRzIGluY2x1ZGVkIE91dHN0YW5kaW5nIFRlbGV2aXNpb24gTW92aWUgYW5kIE91dHN0YW5kaW5nIE1ha2V1cCBGb3IgQSBNaW5pc2VyaWVzIG9yIGEgTW92aWUgKE5vbi1Qcm9zdGhldGljKS48L3A+XFxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicGFkZGluZ1xcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8IS0tPGRpdiBjbGFzcz1cXFwicGxheS1jdHJcXFwiPi0tPlxcbiAgICA8IS0tPGltZyBhbHQ9XFxcIlxcXCIgaWQ9XFxcImRyb3Atc2hhZG93XFxcIiBzcmM9XFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE5pNHdMakFzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p3aFJFOURWRmxRUlNCemRtY2dVRlZDVEVsRElDSXRMeTlYTTBNdkwwUlVSQ0JUVmtjZ01TNHhMeTlGVGlJZ0ltaDBkSEE2THk5M2QzY3Vkek11YjNKbkwwZHlZWEJvYVdOekwxTldSeTh4TGpFdlJGUkVMM04yWnpFeExtUjBaQ0krRFFvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJa3hoZVdWeVh6RWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5SWdlRzFzYm5NNmVHeHBibXM5SW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTHpFNU9Ua3ZlR3hwYm1zaUlIZzlJakJ3ZUNJZ2VUMGlNSEI0SWcwS0NTQjNhV1IwYUQwaU16RXVOakU0Y0hnaUlHaGxhV2RvZEQwaU16RXVOakU0Y0hnaUlIWnBaWGRDYjNnOUlqQWdNQ0F6TVM0Mk1UZ2dNekV1TmpFNElpQmxibUZpYkdVdFltRmphMmR5YjNWdVpEMGlibVYzSURBZ01DQXpNUzQyTVRnZ016RXVOakU0SWlCNGJXdzZjM0JoWTJVOUluQnlaWE5sY25abElqNE5Danh3YjJ4NVoyOXVJR1pwYkd3OUlpTkdSa1pHUmtZaUlIQnZhVzUwY3owaU1DNDFMREF1T0RBNUlEQXVOU3d6TUM0NE1Ea2dNekF1TlN3eE5TNDRNRGtnSWk4K0RRbzhMM04yWno0TkNnPT1cXFwiIC8+LS0+XFxuICAgIDwhLS08L2Rpdj4tLT5cXG48L2Rpdj5cXG5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJpbnRyby1wYWdlXFxcIiBkYXRhLWR1cmF0aW9uPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmFuaW1hdGlvbkR1cmF0aW9uKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgPGNhbnZhcyBjbGFzcz1cXFwiaW50cm8tY2FudmFzXFxcIj48L2NhbnZhcz5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZWRpYS1pdGVtXFxcIiBkYXRhLWlkPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmlkKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmdWxsLXJlbGF0aXZlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLnVubGVzcy5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuaXNMYW5kaW5nKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDIsIHByb2dyYW0yLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmFja2dyb3VuZFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6dXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGhvdG9TcmMpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIilcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZpbHRlclxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIiBkYXRhLXR5cGU9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAudHlwZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwidGl0bGUtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnRpdGxlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5mdW5jdGlvbiBwcm9ncmFtMihkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiaWNvblxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6dXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaWNvbikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiKTtcXFwiPjwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiPGRpdiBjbGFzcz1cXFwibWVkaWEtcGFnZVxcXCI+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LWxlZnRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfbGVmdC5wbmcnKTtcXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvdyBhcnJvdy1yaWdodFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9hcnJvd19yaWdodC5wbmcnKTtcXFwiPjwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJtZWRpYS1jdHJcXFwiPlxcbiAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuaXRlbXMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhY3RpdmUtaXRlbS1jb250YWluZXJcXFwiPlxcblxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiIGRhdGEtaWQ9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaWQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzWydpZiddLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5hY3Rvck5hbWUpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMiwgcHJvZ3JhbTIsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuXHRcdFx0XHRcIjtcbiAgc3RhY2sxID0gaGVscGVycy51bmxlc3MuY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmFjdG9yTmFtZSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg0LCBwcm9ncmFtNCwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cbmZ1bmN0aW9uIHByb2dyYW0yKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcblx0XHRcdFx0XHQ8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGhvdG8pKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxLm1vYmlsZVNyYykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiJyk7XFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkZXItY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyPlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuYWN0b3JOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCIgYXM8L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jaGFyYWN0ZXJOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI8L2gxPlxcblx0XHRcdFx0XHRcdFx0PGRpdj48YnV0dG9uIGNsYXNzPVxcXCJvcGVuXFxcIj5tb3JlPC9idXR0b24+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGV0YWlsLWN0clxcXCI+XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuZnVuY3Rpb24gcHJvZ3JhbTQoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuXHRcdFx0XHQ8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kIGxhbmRpbmdcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5waG90bykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEubW9iaWxlU3JjKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCInKTtcXFwiPjwvZGl2Plxcblx0XHRcdFx0PGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHQgYWN0aXZlXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X3JpZ2h0LnBuZycpO1xcXCI+PC9kaXY+XFxuXHRcdFx0XHRcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImNoYXJhY3RlcnMtcGFnZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImJnLWZpbHRlclxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFsbC1pdGVtcy1jdHJcXFwiPlxcbiAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5jaGFyYWN0ZXJzKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYWN0aXZlLWl0ZW0tY3RyXFxcIj5cXG5cXG4gICAgPC9kaXY+XFxuXFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuXFxuXHQgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInlvdXR1YmUtY29udGFpbmVyXFxcIj5cXG5cdCAgICAgICAgICAgICAgICA8aW1nIC8+XFxuXHQgICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcInlvdXR1YmUtZW1iZWRcXFwiIGhyZWY9XFxcIi8vd3d3LnlvdXR1YmUuY29tL3dhdGNoP3Y9XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5pbnRlcnZpZXcpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIiZodG1sNT0xXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+IDxkaXYgY2xhc3M9XFxcInBsYXktYnV0XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvbWVkaWFfcGxheUAyeC5wbmcpO1xcXCI+PC9kaXY+XFxuXHQgICAgICAgICAgICAgICAgPC9hPlxcblx0ICAgICAgICAgICAgICA8L2Rpdj5cXG5cdCAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiPGRpdiBjbGFzcz1cXFwiZGV0YWlsLWJhY2tncm91bmRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS5tb2JpbGVTcmMpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIik7XFxcIj5cXG48L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJkZXRhaWwtY29udGVudFxcXCI+XFxuXHQ8ZGl2IGNsYXNzPVxcXCJoZWFkZXItY3RyXFxcIj5cXG5cdCAgPGgyPlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuYWN0b3JOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCIgYXM8L2gyPlxcblx0ICA8aDE+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jaGFyYWN0ZXJOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI8L2gxPlxcblx0PC9kaXY+XFxuXHQ8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG5cdCAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LXdyYXBwZXJcXFwiPlxcblx0ICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0blxcXCI+XFxuXHQgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJxdW90ZVxcXCI+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5xdW90ZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiPC9kaXY+XFxuXHQgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVyc1snaWYnXS5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuaW50ZXJ2aWV3KSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcblxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+ZmFjZWJvb2s8L2E+XFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0dW1ibHJcXFwiIGNsYXNzPVxcXCJ0dW1ibHIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHVtYmxyPC9hPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cdCAgICAgICAgPC9kaXY+XFxuXHQgICAgPC9kaXY+XFxuXHQ8L2Rpdj5cXG48L2Rpdj5cXG5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAubGluaykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWN0ciBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwWydjbGFzcyddKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVtcHR5LXNwYWNlXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmltYWdlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCInKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmNvcHkpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW0zKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImluZm8tY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5saW5rKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxvZ28tY3RyIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDBbJ2NsYXNzJ10pKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5pbWFnZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiJyk7XFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY29weSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJmaWdodC1wYWdlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZmlnaHQtY29udGludWVzIHZpc2libGUteHNcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9tb2JpbGUvZmlnaHQtY29udGludWVzLmpwZylcXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJmaWdodC1jdHJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHJcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbiBsZWFybi1idG5cXFwiPlxcbiAgICAgICAgICAgICAgICBMZWFybiBhYm91dCB0aGUgZmlnaHRcXG4gICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICA8YSBjbGFzcz1cXFwia25vd19zdGF0dXNcXFwiIGhyZWY9XFxcImh0dHA6Ly9sb2NhdG9yLmFpZHMuZ292L1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24gdGVzdGVkLWJ0blxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDE+R2V0IHRlc3RlZCBhbmQgZmluZCBzZXJ2aWNlcyA8YnIvPndpdGggdGhlIEFJRFMuZ292IGxvY2F0b3I8L2gxPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvYT5cXG5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24gZGF0YS1idG5cXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L2ZpZ2h0LWRhdGEtYnRuLnBuZylcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj5sZWFybiBtb3JlPC9oMj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMT48c3Ryb25nPkhJVi9BSURTOjwvc3Ryb25nPiBXaGVyZSBXZSBTdGFuZCBUb2RheTwvaDE+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbiBwYXJ0bmVycy1idG5cXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbWFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L2ZpZ2h0LXBhcnRuZXJzLWJ0bi5wbmcpXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+ZmluZCBpbmZvcm1hdGlvbjwvaDI+XFxuICAgICAgICAgICAgICAgICAgICA8aDE+PHN0cm9uZz5QYXJ0bmVycyAmIFJlc291cmNlczwvc3Ryb25nPjwvaDE+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsZWFyblxcXCI+XFxuICAgICAgICAgICAgPHA+XFxuICAgICAgICAgICAgICAgIFRoZSBjcnVzYWRlIGFnYWluc3QgSElWL0FJRFMgaGFzIHJhZ2VkIGZvciBtb3JlIHRoYW4gMzAgeWVhcnMsIHJlc3VsdGluZyBpbiBzb21lIGJpZyB3aW5zOiBUcmVhdG1lbnRzXFxuICAgICAgICAgICAgICAgIGFyZSBrZWVwaW5nIHBlb3BsZSB3aXRoIEhJViBsaXZpbmcgbG9uZ2VyLCB5ZWFybHkgZGVhdGhzIHdvcmxkd2lkZSBoYXZlIGRlY2xpbmVkIHNpbmNlIDIwMDUsIGFuZCByZXNlYXJjaGVyc1xcbiAgICAgICAgICAgICAgICBjb250aW51ZSB0byB3b3JrIHRvIHVubG9jayB0aGUgbXlzdGVyaWVzIG9mIHRoaXMgZGlzZWFzZS4gQnV0IHRoZSB3YXIgYWdhaW5zdCBISVYvQUlEUyBpcyBmYXIgZnJvbSBvdmVyXFxuICAgICAgICAgICAgICAgIOKAlCBhbmQgaXQgd29u4oCZdCBiZSB1bnRpbCBhIHZhY2NpbmUgaXMgZGlzY292ZXJlZC5cXG4gICAgICAgICAgICA8L3A+XFxuICAgICAgICAgICAgPHA+XFxuICAgICAgICAgICAgICAgIEpvaW4gdGhlIGZpZ2h0IHRvZGF5IGJ5IHZpc2l0aW5nIDxlbT5UaGUgTm9ybWFsIEhlYXJ04oCZczwvZW0+IHBhcnRuZXJzIGFuZCByZXNvdXJjZXMgYW5kIGFybWluZyB5b3Vyc2VsZiB3aXRoXFxuICAgICAgICAgICAgICAgIGtub3dsZWRnZSBhYm91dCB3aGVyZSB0aGUgYmF0dGxlIHN0YW5kcyB0b2RheS5cXG4gICAgICAgICAgICA8L3A+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcInBhcnRuZXJzLXJlc291cmNlcy1jdHJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW5uZXJcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInByLWN0ciBwYXJ0bmVycy1jdHIgYWN0aXZlXFxcIj5cXG4gICAgICAgICAgICAgICAgPGgxPlBhcnRuZXJzPC9oMT5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHIgY2xlYXJmaXhcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJ0bmVyc0FuZFJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEucGFydG5lcnMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgIDxoMSBjbGFzcz1cXFwicmVzb3VyY2VzXFxcIj5SZXNvdXJjZXM8L2gxPlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInByLWN0ciByZXNvdXJjZXMtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHIgY2xlYXJmaXhcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBhcnRuZXJzQW5kUmVzb3VyY2VzKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS5yZXNvdXJjZXMpKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxWydyb3ctdG9wJ10pLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMywgcHJvZ3JhbTMsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFydG5lcnNBbmRSZXNvdXJjZXMpKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxLnJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazFbJ3Jvdy1ib3R0b20nXSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSgzLCBwcm9ncmFtMywgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImRhdGEtdmlzdWFsaXphdGlvbi1jdHJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctbGVmdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9tb2JpbGUvc20tYXJyb3ctbGVmdC5wbmcnKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvbW9iaWxlL3NtLWFycm93LXJpZ2h0LnBuZycpO1xcXCI+PC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJkYXRhLXBvaW50IGFjdGl2ZSBkcC13b3JsZHdpZGVcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9tb2JpbGUvYmcxLmpwZylcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJvZHktY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDE+TU9SRSBBUkUgSU5GRUNURUQgV0lUSCA8YnIvPkhJViBFVkVSWSBZRUFSPC9oMT5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBTaW5jZSB0aGUgZXBpZGVtaWMgYmVnYW4sIHRoZSBVbml0ZWQgTmF0aW9ucyBlc3RpbWF0ZXMgdGhhdCA3NSBtaWxsaW9uIHBlb3BsZVxcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhdmUgYmVjb21lIGluZmVjdGVkIHdpdGggSElWIGFuZCAzNiBtaWxsaW9uIGhhdmUgZGllZCBvZiBBSURTIHRocm91Z2ggMjAxMixcXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGUgbW9zdCByZWNlbnQgeWVhciBzdGF0aXN0aWNzIGFyZSBhdmFpbGFibGUuXFxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJjaGFydFxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L21vYmlsZS9jaGFydDEucG5nXFxcIiAvPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvY2lhbC1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyXFxcIiBhbHQ9XFxcIlR3aXR0ZXJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIZHBkSFJsY2w5ZmVESTRYMkZzZEY5NE1qbGZJaUJtYVd4c1BTSWpSa1pHUmtaR0lpQmtQU0pOT0RRdU9EQXpMRFEyTGpVMk5HTTFMakExTlMwd0xqUXhOeXc0TGpRNE15MHlMamN4TlN3NUxqZ3dNeTAxTGpnek13MEtDV010TVM0NE1qTXNNUzR4TWkwM0xqUTRNeXd5TGpNME1TMHhNQzQyTURrc01TNHhOemhqTFRBdU1UVXpMVEF1TnpNMExUQXVNekkwTFRFdU5ETXlMVEF1TkRreUxUSXVNRFl5WXkweUxqTTRNaTA0TGpjME5pMHhNQzQxTXpjdE1UVXVOemt5TFRFNUxqQTRNaTB4TkM0NU5ERU5DZ2xqTUM0Mk9URXRNQzR5Tnprc01TNHpPVE10TUM0MU16a3NNaTR3T1RJdE1DNDNOekpqTUM0NU5DMHdMak16Tnl3MkxqUTFPUzB4TGpJek5TdzFMalU1TFRNdU1UZ3pZeTB3TGpjek1pMHhMamN4TXkwM0xqUTNOU3d4TGpJNU5TMDRMamMwTkN3eExqWTRPQTBLQ1dNeExqWTNOaTB3TGpZekxEUXVORFEzTFRFdU56RTBMRFF1TnpRMExUTXVOalJqTFRJdU5UWTNMREF1TXpVeUxUVXVNRGc0TERFdU5UWTJMVGN1TURNMUxETXVNek14WXpBdU56QXpMVEF1TnpVM0xERXVNak0yTFRFdU5qYzVMREV1TXpVdE1pNDJOeklOQ2dsakxUWXVPRFE0TERRdU16YzFMVEV3TGpnME9Dd3hNeTR4T1RVdE1UUXVNRGcxTERJeExqYzFZeTB5TGpVME1pMHlMalEyTXkwMExqYzVOUzAwTGpRd015MDJMamd4TmkwMUxqUTRZeTAxTGpZM0xUTXVNRFF4TFRFeUxqUTBPUzAyTGpJeE15MHlNeTR3T1RFdE1UQXVNVFkwRFFvSll5MHdMak15Tnl3ekxqVXlNU3d4TGpjME1TdzRMakl3TXl3M0xqY3NNVEV1TXpFMll5MHhMakk1TVMwd0xqRTNNeTB6TGpZMU1pd3dMakl4TXkwMUxqVTBMREF1TmpZMVl6QXVOelk1TERRdU1ETTBMRE11TWpnc055NHpOVGNzTVRBdU1EYzVMRGd1T1RZMERRb0pZeTB6TGpFd055d3dMakl3TlMwMExqY3hNeXd3TGpreE1pMDJMakUyT0N3eUxqUXpObU14TGpReE5Td3lMamd3TlN3MExqZzJPQ3cyTGpFd055d3hNUzR3T0N3MUxqUXlPV010Tmk0NU1EWXNNaTQ1TnpjdE1pNDRNVFlzT0M0ME9Td3lMamd3TkN3M0xqWTJOdzBLQ1VNeU9DNDNPVFFzTnpJdU1UUXpMREV6TGpZM09TdzNNUzQwTVRZc05TdzJNeTR4TXpSak1qSXVOall4TERNd0xqZzRMRGN4TGpreU1Td3hPQzR5TmpNc056a3VNall5TFRFeExqUTRNV00xTGpVc01DNHdORGdzT0M0M016TXRNUzQ1TURRc01UQXVOek00TFRRdU1EVTJEUW9KUXpreExqZ3pNU3cwT0M0eE16UXNPRGN1TWpNNExEUTNMalUzT0N3NE5DNDRNRE1zTkRZdU5UWTBlaUl2UGcwS1BDOXpkbWMrRFFvPVxcXCIgLz5cXG4gICAgICAgICAgICAgICAgPGltZyBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZhY2Vib29rXFxcIiBhbHQ9XFxcIkZhY2Vib29rXFxcIiBzcmM9XFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE5pNHdMakFzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p3aFJFOURWRmxRUlNCemRtY2dVRlZDVEVsRElDSXRMeTlYTTBNdkwwUlVSQ0JUVmtjZ01TNHhMeTlGVGlJZ0ltaDBkSEE2THk5M2QzY3Vkek11YjNKbkwwZHlZWEJvYVdOekwxTldSeTh4TGpFdlJGUkVMM04yWnpFeExtUjBaQ0krRFFvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJa2xqYjI1eklpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lOQ2drZ2QybGtkR2c5SWpFd01IQjRJaUJvWldsbmFIUTlJakV3TUhCNElpQjJhV1YzUW05NFBTSXdJREFnTVRBd0lERXdNQ0lnWlc1aFlteGxMV0poWTJ0bmNtOTFibVE5SW01bGR5QXdJREFnTVRBd0lERXdNQ0lnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjR0YwYUNCcFpEMGlSbUZqWldKdmIyc2lJR1pwYkd3OUlpTkdSa1pHUmtZaUlHUTlJazB6T0M0d056Z3NNakl1TkRNeFl6QXNNaTR5Tmpnc01Dd3hNaTR6T1RFc01Dd3hNaTR6T1RGSU1qbDJNVFV1TVRVeWFEa3VNRGM0VmprMWFERTRMalkwT0ZZME9TNDVOelZJTmprdU1qUU5DZ2xqTUN3d0xERXVNVGN5TFRjdU1qWTFMREV1TnpRdE1UVXVNakE1WXkweExqWXlPU3d3TFRFMExqRTROQ3d3TFRFMExqRTROQ3d3Y3pBdE9DNDRNVFVzTUMweE1DNHpObU13TFRFdU5UUTRMREl1TURNekxUTXVOak14TERRdU1EUXpMVE11TmpNeFl6SXVNREEyTERBc05pNHlNemtzTUN3eE1DNHhOaXd3RFFvSll6QXRNaTR3TmpNc01DMDVMakU1TVN3d0xURTFMamMzTkdNdE5TNHlNelFzTUMweE1TNHhPRGtzTUMweE15NDRNVFFzTUVNek55NDJNVGNzTlN3ek9DNHdOemdzTWpBdU1UWTNMRE00TGpBM09Dd3lNaTQwTXpGNklpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPlxcbiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR1bWJsclxcXCIgY2xhc3M9XFxcInR1bWJsclxcXCIgYWx0PVxcXCJUdW1ibHJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIVnRZbXh5SWlCbWFXeHNQU0lqUmtaR1JrWkdJaUJrUFNKTk5UY3VPRGsyTERjNExqVTFPV010TVM0MU1UTXRNQzQ0T0RrdE1pNDVNREV0TWk0ME1UWXRNeTQwTlRVdE15NDRPV010TUM0MU5qRXRNUzQwT0RNdE1DNDBPRGt0TkM0ME9Ea3RNQzQwT0RrdE9TNDNNVE1OQ2dsV05ERXVPRGM0YURJd0xqazROMVl5TlM0NE1UVklOVE11T1RVelZqVklOREV1TURSakxUQXVOVGMyTERRdU5qTTJMVEV1TmpNM0xEZ3VORFkyTFRNdU1UYzJMREV4TGpRM1l5MHhMalUwTWl3ekxqQXdPQzB6TGpVM05pdzFMalUzT0MwMkxqRXlOaXczTGpjeU5nMEtDVU15T1M0eUxESTJMak0wTERJMUxqQTJOQ3d5Tnk0NU9USXNNakV1TlN3eU9TNHhNekoyTVRJdU56UTJhREV5TGpNeU9YWXpNUzQxTmpKak1DdzBMakV5TVN3d0xqUXpOeXczTGpJMk5Td3hMak13Tml3NUxqUXlPV013TGpnM015d3lMakUyTWl3eUxqUXpNaXcwTGpJeE1TdzBMalk0TkN3MkxqRXpPUTBLQ1dNeUxqSTFNaXd4TGprd055dzBMamszTVN3ekxqTTVOaXc0TGpFMk1TdzBMalEwTVVNMU1TNHhOallzT1RRdU5EZ3lMRFV6TGpZeE5pdzVOU3cxTnk0M05qWXNPVFZqTXk0Mk5Td3dMRGN1TURRNUxUQXVNelk0TERFd0xqSXRNUzR3T0RnTkNnbGpNeTR4TkRjdE1DNDNNemdzTmk0Mk5qRXRNaTR3TVN3eE1DNDFNelF0TXk0NE1USldOelV1T1dNdE5DNDFORFVzTWk0NU5qVXRPUzR4TVRZc05DNDBOQzB4TXk0M01UTXNOQzQwTkVNMk1pNHlMRGd3TGpNME1pdzFPUzQ1TVRNc056a3VOelEzTERVM0xqZzVOaXczT0M0MU5UbDZJaTgrRFFvOEwzTjJaejROQ2c9PVxcXCIgLz5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb3VyY2VcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgPHNwYW4+XFxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlNvdXJjZTo8L3N0cm9uZz4gVU5BSURTIEdsb2JhbCBGYWN0IFNoZWV0IDIwMTNcXG4gICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGEgY2xhc3M9XFxcInRhcC1oYWNrXFxcIiBocmVmPVxcXCJodHRwOi8vd3d3LnVuYWlkcy5vcmcvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aW1nIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9kYXRhLXZpcy91bmFpZHMucG5nXFxcIiAvPlxcbiAgICAgICAgICAgICAgICA8L2E+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImRhdGEtcG9pbnQgZHAtYWZyaWNhXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvbW9iaWxlL2JnMi5qcGcpXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJib2R5LWN0clxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRlci1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGgxPkhJVi9BSURTIElTIEEgPGJyLz5DUklTSVMgSU4gQUZSSUNBPC9oMT5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBUaGUgVU4gc2F5cyB0aGF0IDEuNiBtaWxsaW9uIGRpZWQgb2YgQUlEUyBnbG9iYWxseSBpbiAyMDEyLFxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZSBtYWpvcml0eSBmcm9tIFN1Yi1TYWhhcmFuIEFmcmljYSwgd2hlcmUgMS4yIG1pbGxpb27igJRcXG4gICAgICAgICAgICAgICAgICAgICAgICBvciA3NSBwZXJjZW50IG9mIHRoZSB3b3JsZHdpZGUgdG90YWzigJRwZXJpc2hlZC5cXG4gICAgICAgICAgICAgICAgICAgIDwvaDI+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxpbWcgY2xhc3M9XFxcImNoYXJ0XFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvbW9iaWxlL2NoYXJ0Mi5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgIDxpbWcgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXJcXFwiIGFsdD1cXFwiVHdpdHRlclxcXCIgc3JjPVxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhOaTR3TGpBc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK0RRbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SWtsamIyNXpJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJTkNna2dkMmxrZEdnOUlqRXdNSEI0SWlCb1pXbG5hSFE5SWpFd01IQjRJaUIyYVdWM1FtOTRQU0l3SURBZ01UQXdJREV3TUNJZ1pXNWhZbXhsTFdKaFkydG5jbTkxYm1ROUltNWxkeUF3SURBZ01UQXdJREV3TUNJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84Y0dGMGFDQnBaRDBpVkhkcGRIUmxjbDlmZURJNFgyRnNkRjk0TWpsZklpQm1hV3hzUFNJalJrWkdSa1pHSWlCa1BTSk5PRFF1T0RBekxEUTJMalUyTkdNMUxqQTFOUzB3TGpReE55dzRMalE0TXkweUxqY3hOU3c1TGpnd015MDFMamd6TXcwS0NXTXRNUzQ0TWpNc01TNHhNaTAzTGpRNE15d3lMak0wTVMweE1DNDJNRGtzTVM0eE56aGpMVEF1TVRVekxUQXVOek0wTFRBdU16STBMVEV1TkRNeUxUQXVORGt5TFRJdU1EWXlZeTB5TGpNNE1pMDRMamMwTmkweE1DNDFNemN0TVRVdU56a3lMVEU1TGpBNE1pMHhOQzQ1TkRFTkNnbGpNQzQyT1RFdE1DNHlOemtzTVM0ek9UTXRNQzQxTXprc01pNHdPVEl0TUM0M056SmpNQzQ1TkMwd0xqTXpOeXcyTGpRMU9TMHhMakl6TlN3MUxqVTVMVE11TVRnell5MHdMamN6TWkweExqY3hNeTAzTGpRM05Td3hMakk1TlMwNExqYzBOQ3d4TGpZNE9BMEtDV014TGpZM05pMHdMall6TERRdU5EUTNMVEV1TnpFMExEUXVOelEwTFRNdU5qUmpMVEl1TlRZM0xEQXVNelV5TFRVdU1EZzRMREV1TlRZMkxUY3VNRE0xTERNdU16TXhZekF1TnpBekxUQXVOelUzTERFdU1qTTJMVEV1TmpjNUxERXVNelV0TWk0Mk56SU5DZ2xqTFRZdU9EUTRMRFF1TXpjMUxURXdMamcwT0N3eE15NHhPVFV0TVRRdU1EZzFMREl4TGpjMVl5MHlMalUwTWkweUxqUTJNeTAwTGpjNU5TMDBMalF3TXkwMkxqZ3hOaTAxTGpRNFl5MDFMalkzTFRNdU1EUXhMVEV5TGpRME9TMDJMakl4TXkweU15NHdPVEV0TVRBdU1UWTBEUW9KWXkwd0xqTXlOeXd6TGpVeU1Td3hMamMwTVN3NExqSXdNeXczTGpjc01URXVNekUyWXkweExqSTVNUzB3TGpFM015MHpMalkxTWl3d0xqSXhNeTAxTGpVMExEQXVOalkxWXpBdU56WTVMRFF1TURNMExETXVNamdzTnk0ek5UY3NNVEF1TURjNUxEZ3VPVFkwRFFvSll5MHpMakV3Tnl3d0xqSXdOUzAwTGpjeE15d3dMamt4TWkwMkxqRTJPQ3d5TGpRek5tTXhMalF4TlN3eUxqZ3dOU3cwTGpnMk9DdzJMakV3Tnl3eE1TNHdPQ3cxTGpReU9XTXROaTQ1TURZc01pNDVOemN0TWk0NE1UWXNPQzQwT1N3eUxqZ3dOQ3czTGpZMk53MEtDVU15T0M0M09UUXNOekl1TVRRekxERXpMalkzT1N3M01TNDBNVFlzTlN3Mk15NHhNelJqTWpJdU5qWXhMRE13TGpnNExEY3hMamt5TVN3eE9DNHlOak1zTnprdU1qWXlMVEV4TGpRNE1XTTFMalVzTUM0d05EZ3NPQzQzTXpNdE1TNDVNRFFzTVRBdU56TTRMVFF1TURVMkRRb0pRemt4TGpnek1TdzBPQzR4TXpRc09EY3VNak00TERRM0xqVTNPQ3c0TkM0NE1ETXNORFl1TlRZMGVpSXZQZzBLUEM5emRtYytEUW89XFxcIiAvPlxcbiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmFjZWJvb2tcXFwiIGFsdD1cXFwiRmFjZWJvb2tcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVJtRmpaV0p2YjJzaUlHWnBiR3c5SWlOR1JrWkdSa1lpSUdROUlrMHpPQzR3Tnpnc01qSXVORE14WXpBc01pNHlOamdzTUN3eE1pNHpPVEVzTUN3eE1pNHpPVEZJTWpsMk1UVXVNVFV5YURrdU1EYzRWamsxYURFNExqWTBPRlkwT1M0NU56VklOamt1TWpRTkNnbGpNQ3d3TERFdU1UY3lMVGN1TWpZMUxERXVOelF0TVRVdU1qQTVZeTB4TGpZeU9Td3dMVEUwTGpFNE5Dd3dMVEUwTGpFNE5Dd3djekF0T0M0NE1UVXNNQzB4TUM0ek5tTXdMVEV1TlRRNExESXVNRE16TFRNdU5qTXhMRFF1TURRekxUTXVOak14WXpJdU1EQTJMREFzTmk0eU16a3NNQ3d4TUM0eE5pd3dEUW9KWXpBdE1pNHdOak1zTUMwNUxqRTVNU3d3TFRFMUxqYzNOR010TlM0eU16UXNNQzB4TVM0eE9Ea3NNQzB4TXk0NE1UUXNNRU16Tnk0Mk1UY3NOU3d6T0M0d056Z3NNakF1TVRZM0xETTRMakEzT0N3eU1pNDBNekY2SWk4K0RRbzhMM04yWno0TkNnPT1cXFwiIC8+XFxuICAgICAgICAgICAgICAgIDxpbWcgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyXFxcIiBhbHQ9XFxcIlR1bWJsclxcXCIgc3JjPVxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhOaTR3TGpBc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK0RRbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SWtsamIyNXpJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJTkNna2dkMmxrZEdnOUlqRXdNSEI0SWlCb1pXbG5hSFE5SWpFd01IQjRJaUIyYVdWM1FtOTRQU0l3SURBZ01UQXdJREV3TUNJZ1pXNWhZbXhsTFdKaFkydG5jbTkxYm1ROUltNWxkeUF3SURBZ01UQXdJREV3TUNJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84Y0dGMGFDQnBaRDBpVkhWdFlteHlJaUJtYVd4c1BTSWpSa1pHUmtaR0lpQmtQU0pOTlRjdU9EazJMRGM0TGpVMU9XTXRNUzQxTVRNdE1DNDRPRGt0TWk0NU1ERXRNaTQwTVRZdE15NDBOVFV0TXk0NE9XTXRNQzQxTmpFdE1TNDBPRE10TUM0ME9Ea3ROQzQwT0RrdE1DNDBPRGt0T1M0M01UTU5DZ2xXTkRFdU9EYzRhREl3TGprNE4xWXlOUzQ0TVRWSU5UTXVPVFV6VmpWSU5ERXVNRFJqTFRBdU5UYzJMRFF1TmpNMkxURXVOak0zTERndU5EWTJMVE11TVRjMkxERXhMalEzWXkweExqVTBNaXd6TGpBd09DMHpMalUzTml3MUxqVTNPQzAyTGpFeU5pdzNMamN5TmcwS0NVTXlPUzR5TERJMkxqTTBMREkxTGpBMk5Dd3lOeTQ1T1RJc01qRXVOU3d5T1M0eE16SjJNVEl1TnpRMmFERXlMak15T1hZek1TNDFOakpqTUN3MExqRXlNU3d3TGpRek55dzNMakkyTlN3eExqTXdOaXc1TGpReU9XTXdMamczTXl3eUxqRTJNaXd5TGpRek1pdzBMakl4TVN3MExqWTROQ3cyTGpFek9RMEtDV015TGpJMU1pd3hMamt3Tnl3MExqazNNU3d6TGpNNU5pdzRMakUyTVN3MExqUTBNVU0xTVM0eE5qWXNPVFF1TkRneUxEVXpMall4Tml3NU5TdzFOeTQzTmpZc09UVmpNeTQyTlN3d0xEY3VNRFE1TFRBdU16WTRMREV3TGpJdE1TNHdPRGdOQ2dsak15NHhORGN0TUM0M016Z3NOaTQyTmpFdE1pNHdNU3d4TUM0MU16UXRNeTQ0TVRKV056VXVPV010TkM0MU5EVXNNaTQ1TmpVdE9TNHhNVFlzTkM0ME5DMHhNeTQzTVRNc05DNDBORU0yTWk0eUxEZ3dMak0wTWl3MU9TNDVNVE1zTnprdU56UTNMRFUzTGpnNU5pdzNPQzQxTlRsNklpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvdXJjZVxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICA8c3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+U291cmNlOjwvc3Ryb25nPiBVTkFJRFMgR2xvYmFsIEZhY3QgU2hlZXQgMjAxM1xcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwidGFwLWhhY2tcXFwiIGhyZWY9XFxcImh0dHA6Ly93d3cudW5haWRzLm9yZy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L2RhdGEtdmlzL3VuYWlkcy5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGF0YS1wb2ludCBkcC13b21lblxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L21vYmlsZS9iZzMuanBnKVxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkZXItY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMT5NT1JFIFdPTUVOIFRIQU4gPGJyLz5NRU4gSEFWRSBISVYvQUlEUzwvaDE+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgV29ybGR3aWRlLCBhbiBlc3RpbWF0ZWQgMzUgbWlsbGlvbiBwZW9wbGUgbGl2ZSB3aXRoIEhJVi9BSURTLCA8YnIvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZCA1MiBwZXJjZW50IG9mIHRob3NlIHBlb3BsZSBhcmUgd29tZW4sIGFjY29yZGluZyB0byB0aGUgVU4uXFxuICAgICAgICAgICAgICAgICAgICA8L2gyPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJjaGFydFxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L21vYmlsZS9jaGFydDMucG5nXFxcIiAvPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvY2lhbC1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyXFxcIiBhbHQ9XFxcIlR3aXR0ZXJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIZHBkSFJsY2w5ZmVESTRYMkZzZEY5NE1qbGZJaUJtYVd4c1BTSWpSa1pHUmtaR0lpQmtQU0pOT0RRdU9EQXpMRFEyTGpVMk5HTTFMakExTlMwd0xqUXhOeXc0TGpRNE15MHlMamN4TlN3NUxqZ3dNeTAxTGpnek13MEtDV010TVM0NE1qTXNNUzR4TWkwM0xqUTRNeXd5TGpNME1TMHhNQzQyTURrc01TNHhOemhqTFRBdU1UVXpMVEF1TnpNMExUQXVNekkwTFRFdU5ETXlMVEF1TkRreUxUSXVNRFl5WXkweUxqTTRNaTA0TGpjME5pMHhNQzQxTXpjdE1UVXVOemt5TFRFNUxqQTRNaTB4TkM0NU5ERU5DZ2xqTUM0Mk9URXRNQzR5Tnprc01TNHpPVE10TUM0MU16a3NNaTR3T1RJdE1DNDNOekpqTUM0NU5DMHdMak16Tnl3MkxqUTFPUzB4TGpJek5TdzFMalU1TFRNdU1UZ3pZeTB3TGpjek1pMHhMamN4TXkwM0xqUTNOU3d4TGpJNU5TMDRMamMwTkN3eExqWTRPQTBLQ1dNeExqWTNOaTB3TGpZekxEUXVORFEzTFRFdU56RTBMRFF1TnpRMExUTXVOalJqTFRJdU5UWTNMREF1TXpVeUxUVXVNRGc0TERFdU5UWTJMVGN1TURNMUxETXVNek14WXpBdU56QXpMVEF1TnpVM0xERXVNak0yTFRFdU5qYzVMREV1TXpVdE1pNDJOeklOQ2dsakxUWXVPRFE0TERRdU16YzFMVEV3TGpnME9Dd3hNeTR4T1RVdE1UUXVNRGcxTERJeExqYzFZeTB5TGpVME1pMHlMalEyTXkwMExqYzVOUzAwTGpRd015MDJMamd4TmkwMUxqUTRZeTAxTGpZM0xUTXVNRFF4TFRFeUxqUTBPUzAyTGpJeE15MHlNeTR3T1RFdE1UQXVNVFkwRFFvSll5MHdMak15Tnl3ekxqVXlNU3d4TGpjME1TdzRMakl3TXl3M0xqY3NNVEV1TXpFMll5MHhMakk1TVMwd0xqRTNNeTB6TGpZMU1pd3dMakl4TXkwMUxqVTBMREF1TmpZMVl6QXVOelk1TERRdU1ETTBMRE11TWpnc055NHpOVGNzTVRBdU1EYzVMRGd1T1RZMERRb0pZeTB6TGpFd055d3dMakl3TlMwMExqY3hNeXd3TGpreE1pMDJMakUyT0N3eUxqUXpObU14TGpReE5Td3lMamd3TlN3MExqZzJPQ3cyTGpFd055d3hNUzR3T0N3MUxqUXlPV010Tmk0NU1EWXNNaTQ1TnpjdE1pNDRNVFlzT0M0ME9Td3lMamd3TkN3M0xqWTJOdzBLQ1VNeU9DNDNPVFFzTnpJdU1UUXpMREV6TGpZM09TdzNNUzQwTVRZc05TdzJNeTR4TXpSak1qSXVOall4TERNd0xqZzRMRGN4TGpreU1Td3hPQzR5TmpNc056a3VNall5TFRFeExqUTRNV00xTGpVc01DNHdORGdzT0M0M016TXRNUzQ1TURRc01UQXVOek00TFRRdU1EVTJEUW9KUXpreExqZ3pNU3cwT0M0eE16UXNPRGN1TWpNNExEUTNMalUzT0N3NE5DNDRNRE1zTkRZdU5UWTBlaUl2UGcwS1BDOXpkbWMrRFFvPVxcXCIgLz5cXG4gICAgICAgICAgICAgICAgPGltZyBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZhY2Vib29rXFxcIiBhbHQ9XFxcIkZhY2Vib29rXFxcIiBzcmM9XFxcImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEQ5NGJXd2dkbVZ5YzJsdmJqMGlNUzR3SWlCbGJtTnZaR2x1WnowaWRYUm1MVGdpUHo0TkNqd2hMUzBnUjJWdVpYSmhkRzl5T2lCQlpHOWlaU0JKYkd4MWMzUnlZWFJ2Y2lBeE5pNHdMakFzSUZOV1J5QkZlSEJ2Y25RZ1VHeDFaeTFKYmlBdUlGTldSeUJXWlhKemFXOXVPaUEyTGpBd0lFSjFhV3hrSURBcElDQXRMVDROQ2p3aFJFOURWRmxRUlNCemRtY2dVRlZDVEVsRElDSXRMeTlYTTBNdkwwUlVSQ0JUVmtjZ01TNHhMeTlGVGlJZ0ltaDBkSEE2THk5M2QzY3Vkek11YjNKbkwwZHlZWEJvYVdOekwxTldSeTh4TGpFdlJGUkVMM04yWnpFeExtUjBaQ0krRFFvOGMzWm5JSFpsY25OcGIyNDlJakV1TVNJZ2FXUTlJa2xqYjI1eklpQjRiV3h1Y3owaWFIUjBjRG92TDNkM2R5NTNNeTV2Y21jdk1qQXdNQzl6ZG1jaUlIaHRiRzV6T25oc2FXNXJQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh4T1RrNUwzaHNhVzVySWlCNFBTSXdjSGdpSUhrOUlqQndlQ0lOQ2drZ2QybGtkR2c5SWpFd01IQjRJaUJvWldsbmFIUTlJakV3TUhCNElpQjJhV1YzUW05NFBTSXdJREFnTVRBd0lERXdNQ0lnWlc1aFlteGxMV0poWTJ0bmNtOTFibVE5SW01bGR5QXdJREFnTVRBd0lERXdNQ0lnZUcxc09uTndZV05sUFNKd2NtVnpaWEoyWlNJK0RRbzhjR0YwYUNCcFpEMGlSbUZqWldKdmIyc2lJR1pwYkd3OUlpTkdSa1pHUmtZaUlHUTlJazB6T0M0d056Z3NNakl1TkRNeFl6QXNNaTR5Tmpnc01Dd3hNaTR6T1RFc01Dd3hNaTR6T1RGSU1qbDJNVFV1TVRVeWFEa3VNRGM0VmprMWFERTRMalkwT0ZZME9TNDVOelZJTmprdU1qUU5DZ2xqTUN3d0xERXVNVGN5TFRjdU1qWTFMREV1TnpRdE1UVXVNakE1WXkweExqWXlPU3d3TFRFMExqRTROQ3d3TFRFMExqRTROQ3d3Y3pBdE9DNDRNVFVzTUMweE1DNHpObU13TFRFdU5UUTRMREl1TURNekxUTXVOak14TERRdU1EUXpMVE11TmpNeFl6SXVNREEyTERBc05pNHlNemtzTUN3eE1DNHhOaXd3RFFvSll6QXRNaTR3TmpNc01DMDVMakU1TVN3d0xURTFMamMzTkdNdE5TNHlNelFzTUMweE1TNHhPRGtzTUMweE15NDRNVFFzTUVNek55NDJNVGNzTlN3ek9DNHdOemdzTWpBdU1UWTNMRE00TGpBM09Dd3lNaTQwTXpGNklpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPlxcbiAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcInR1bWJsclxcXCIgY2xhc3M9XFxcInR1bWJsclxcXCIgYWx0PVxcXCJUdW1ibHJcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVZIVnRZbXh5SWlCbWFXeHNQU0lqUmtaR1JrWkdJaUJrUFNKTk5UY3VPRGsyTERjNExqVTFPV010TVM0MU1UTXRNQzQ0T0RrdE1pNDVNREV0TWk0ME1UWXRNeTQwTlRVdE15NDRPV010TUM0MU5qRXRNUzQwT0RNdE1DNDBPRGt0TkM0ME9Ea3RNQzQwT0RrdE9TNDNNVE1OQ2dsV05ERXVPRGM0YURJd0xqazROMVl5TlM0NE1UVklOVE11T1RVelZqVklOREV1TURSakxUQXVOVGMyTERRdU5qTTJMVEV1TmpNM0xEZ3VORFkyTFRNdU1UYzJMREV4TGpRM1l5MHhMalUwTWl3ekxqQXdPQzB6TGpVM05pdzFMalUzT0MwMkxqRXlOaXczTGpjeU5nMEtDVU15T1M0eUxESTJMak0wTERJMUxqQTJOQ3d5Tnk0NU9USXNNakV1TlN3eU9TNHhNekoyTVRJdU56UTJhREV5TGpNeU9YWXpNUzQxTmpKak1DdzBMakV5TVN3d0xqUXpOeXczTGpJMk5Td3hMak13Tml3NUxqUXlPV013TGpnM015d3lMakUyTWl3eUxqUXpNaXcwTGpJeE1TdzBMalk0TkN3MkxqRXpPUTBLQ1dNeUxqSTFNaXd4TGprd055dzBMamszTVN3ekxqTTVOaXc0TGpFMk1TdzBMalEwTVVNMU1TNHhOallzT1RRdU5EZ3lMRFV6TGpZeE5pdzVOU3cxTnk0M05qWXNPVFZqTXk0Mk5Td3dMRGN1TURRNUxUQXVNelk0TERFd0xqSXRNUzR3T0RnTkNnbGpNeTR4TkRjdE1DNDNNemdzTmk0Mk5qRXRNaTR3TVN3eE1DNDFNelF0TXk0NE1USldOelV1T1dNdE5DNDFORFVzTWk0NU5qVXRPUzR4TVRZc05DNDBOQzB4TXk0M01UTXNOQzQwTkVNMk1pNHlMRGd3TGpNME1pdzFPUzQ1TVRNc056a3VOelEzTERVM0xqZzVOaXczT0M0MU5UbDZJaTgrRFFvOEwzTjJaejROQ2c9PVxcXCIgLz5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb3VyY2VcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgPHNwYW4+XFxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlNvdXJjZXM6PC9zdHJvbmc+IFVOQUlEUyBHbG9iYWwgRmFjdCBTaGVldCAyMDEzOyA8YnIvPlxcbiAgICAgICAgICAgICAgICAgICAgVU5BSURTIFJlcG9ydCBvbiB0aGUgR2xvYmFsIEFJRFMgRXBpZGVtaWMgMjAxM1xcbiAgICAgICAgICAgICAgICA8L3NwYW4+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8YSBjbGFzcz1cXFwidGFwLWhhY2tcXFwiIGhyZWY9XFxcImh0dHA6Ly93d3cudW5haWRzLm9yZy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2ZpZ2h0L2RhdGEtdmlzL3VuYWlkcy5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwibWFza1xcXCIgc3R5bGU9XFxcImNsZWFyOmJvdGg7XFxcIj48L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImhvbWUtcGFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvbW9iaWxlL2JnLmpwZylcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJiaWxsaW5nLWJsb2NrXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNhc3QtY3RyXFxcIj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJjYXN0XFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9jYXN0LnBuZ1xcXCIvPlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWN0clxcXCI+XFxuICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwibG9nb1xcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvbW9iaWxlL2xvY2t1cEAyeC5wbmdcXFwiIC8+XFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwibmV3c1xcXCI+QXdhcmRzIE5ld3M8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwicHJlbWllcmUtY3RyXFxcIj5cXG4gICAgICAgICAgICA8YSBjbGFzcz1cXFwidGFwLWhhY2tcXFwiIGhyZWY9XFxcImh0dHA6Ly93d3cuaGJvZ28uY29tLyNtb3ZpZXMvdmlkZW8mYXNzZXRJRD1HT1JPU1RHUDQzMDk5P3ZpZGVvTW9kZT1pbmZvcGFnZVByZXZpZXcvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhiby1sb2dvXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9oYm9fZ28ucG5nKVxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJsb2NrLXVwXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInNjcm9sbC1kb3duXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9tb2JpbGUvc2Nyb2xsQDJ4LnBuZylcXFwiPjwvZGl2PlxcbiAgICAgICAgPHNwYW4+c2Nyb2xsIGRvd24gdG8gY29udGludWU8L3NwYW4+XFxuICAgIDwvZGl2PlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJoYm8tZmlsbXNcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9ob21lL2hiby1maWxtcy5wbmcpXFxcIj48L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwibW9kYWxcXFwiPlxcbiAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnRcXFwiPlxcbiAgICAgICAgICA8aDE+SEJPJ3MgPGk+VGhlIE5vcm1hbCBIZWFydDwvaT4gV2lucyBPbmUgU0FHIEF3YXJkLCBPbmUgR29sZGVuIEdsb2JlLCBUd28gRW1teXM8L2gxPlxcbiAgICAgICAgICAgICAgICAgIDxwPjxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IHByZXZhaWxlZCBhdCB0aGUgSmFuLiAyNSBTY3JlZW4gQWN0b3JzIEd1aWxkIEF3YXJkcyBjZXJlbW9ueSwgd2l0aCBNYXJrIFJ1ZmZhbG8gdGFraW5nIGhvbWUgYSBzdGF0dWUgZm9yIGhpcyByb2xlIGFzIEhJVi9BSURTIGFjdGl2aXN0IE5lZCBXZWVrcy4gUnVmZmFsbyB3b24gZm9yIE91dHN0YW5kaW5nIFBlcmZvcm1hbmNlIGJ5IGEgTWFsZSBBY3RvciBpbiBhIFRlbGV2aXNpb24gTW92aWUgb3IgTWluaXNlcmllcy48L3A+XFxuICAgICAgICAgICAgICAgICAgPHA+UHJldmlvdXNseSwgPGk+VGhlIE5vcm1hbCBIZWFydDwvaT4gdG9vayBob21lIG9uZSBHb2xkZW4gR2xvYmUgQXdhcmQgZm9yIE1hdHQgQm9tZXIncyBwb3J0cmF5YWwgb2YgTmV3IFlvdXIgVGltZXMgcmVwb3J0ZXIgRmVsaXggVHVybmVyIGluIGEgY2VyZW1vbnkgcHV0IG9uIEphbi4gMTEsIDIwMTUsIGJ5IHRoZSBIb2xseXdvb2QgRm9yZWlnbiBQcmVzcyBBc3NvY2lhdGlvbi4gPGk+VGhlIE5vcm1hbCBIZWFydDwvaT4gYWxzbyBuYWJiZWQgdHdvIFByaW1ldGltZSBFbW15IEF3YXJkcywgYXdhcmRlZCBieSB0aGUgVGVsZXZpc2lvbiBBY2FkZW15IGluIGNlcmVtb25pZXMgb24gQXVnLiAxNiBhbmQgMjUsIDIwMTQuIFRoZSBhd2FyZHMgaW5jbHVkZWQgT3V0c3RhbmRpbmcgVGVsZXZpc2lvbiBNb3ZpZSBhbmQgT3V0c3RhbmRpbmcgTWFrZXVwIEZvciBBIE1pbmlzZXJpZXMgb3IgYSBNb3ZpZSAoTm9uLVByb3N0aGV0aWMpLjwvcD5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImludHJvLXBhZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5tb2JpbGUpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIilcXFwiPjwvZGl2PlxcblwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9KTtcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzLnRlbXBsYXRlKGZ1bmN0aW9uIChIYW5kbGViYXJzLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgdGhpcy5jb21waWxlckluZm8gPSBbNCwnPj0gMS4wLjAnXTtcbmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMsIEhhbmRsZWJhcnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9O1xuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpdGVtXFxcIiBkYXRhLWlkPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmlkKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLm1vYmlsZVNyYykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiJyk7XFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMudW5sZXNzLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5pc0xhbmRpbmcpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMiwgcHJvZ3JhbTIsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuXHRcdFx0XHRcXG5cdFx0XHRcdFwiO1xuICBzdGFjazEgPSBoZWxwZXJzWydpZiddLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5pc0xhbmRpbmcpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oNCwgcHJvZ3JhbTQsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5mdW5jdGlvbiBwcm9ncmFtMihkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cXFwiaWNvblxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6dXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaWNvbk1vYmlsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiKTtcXFwiPjwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkZXItY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGgyPlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAudGl0bGUpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIjwvaDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGV0YWlsLWN0clxcXCI+XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuZnVuY3Rpb24gcHJvZ3JhbTQoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuXHRcdFx0XHQgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHQgYWN0aXZlXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X3JpZ2h0LnBuZycpO1xcXCI+PC9kaXY+XFxuXHRcdFx0XHQgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJtZWRpYS1wYWdlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYmctZmlsdGVyXFxcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxsLWl0ZW1zLWN0clxcXCI+XFxuICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLml0ZW1zKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYWN0aXZlLWl0ZW0tY3RyXFxcIj5cXG5cXG4gICAgPC9kaXY+XFxuXFxuICAgXFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgc2VsZj10aGlzLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICA8cD5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBhcmFncmFwaCkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICA8L3A+XFxuICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuZnVuY3Rpb24gcHJvZ3JhbTMoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoND5cIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5xdWVzdGlvbikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIjwvaDQ+XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5hbnN3ZXIpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oNCwgcHJvZ3JhbTQsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuZnVuY3Rpb24gcHJvZ3JhbTQoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlwiO1xuICBzdGFjazEgPSAodHlwZW9mIGRlcHRoMCA9PT0gZnVuY3Rpb25UeXBlID8gZGVwdGgwLmFwcGx5KGRlcHRoMCkgOiBkZXB0aDApO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiPC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuZnVuY3Rpb24gcHJvZ3JhbTYoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlwiO1xuICBzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBhcmFncmFwaCkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiPGRpdiBjbGFzcz1cXFwic3RvcnktcGFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L21vYmlsZS9iZ0AyeC5qcGcpO1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImJnLWZpbHRlclxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInN0b3J5XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm1haW5Db3B5XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjbG9zZUJ1dHRvblxcXCI+WDwvZGl2PlxcbiAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLm1haW5Db3B5KSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJyZWFkLW1vcmVcXFwiPnJlYWQ8L2Rpdj5cXG4gICAgPGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImJpby1saW5rIGJpby1saW5rLW11cnBoeVxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkc2hvdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L2hlYWRzaG90LW11cnBoeS5qcGcpO1xcXCI+PC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0ZXh0XFxcIj5cXG4gICAgICAgICAgICA8ZGl2PlxcbiAgICAgICAgICAgICAgICA8c3Bhbj5jb252ZXJzYXRpb24gd2l0aDwvc3Bhbj5cXG4gICAgICAgICAgICAgICAgPGg1PlJ5YW4gTXVycGh5PC9oNT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2E+XFxuICAgIDxhIGhyZWY9XFxcIiNcXFwiIGNsYXNzPVxcXCJiaW8tbGluayBiaW8tbGluay1rcmFtZXJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZHNob3RcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS9oZWFkc2hvdC1rcmFtZXIuanBnKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwidGV4dFxcXCI+XFxuICAgICAgICAgICAgPGRpdj5cXG4gICAgICAgICAgICAgICAgPHNwYW4+YmlvZ3JhcGh5IG9mPC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8aDU+TGFycnkgS3JhbWVyPC9oNT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2E+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImJpbyBiaW8tbXVycGh5XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRzaG90XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvaGVhZHNob3QtbXVycGh5LmpwZyk7XFxcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktd3JhcHBlclxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RuXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj5hIGNvbnZlcnNhdGlvbiB3aXRoIHJ5YW4gbXVycGh5PC9oMj5cXG5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJpby1wYWdlIG11cnBoeVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAucnlhbk11cnBoeSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSgzLCBwcm9ncmFtMywgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0d2l0dGVyXFxcIiBjbGFzcz1cXFwidHdpdHRlciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50d2l0dGVyPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+ZmFjZWJvb2s8L2E+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAgPCEtLSAvLmJpby1tdXJwaHkgLS0+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImJpbyBiaW8ta3JhbWVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRzaG90XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvaGVhZHNob3Qta3JhbWVyLmpwZyk7XFxcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktd3JhcHBlclxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RuXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj50aGUgYmlvZ3JhcGh5IG9mIExhcnJ5IEtyYW1lcjwvaDI+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiaW8tcGFnZSBrcmFtZXJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmxhcnJ5S3JhbWVyKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDYsIHByb2dyYW02LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR3aXR0ZXI8L2E+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwiZmFjZWJvb2tcXFwiIGNsYXNzPVxcXCJmYiBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj5mYWNlYm9vazwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0dW1ibHJcXFwiIGNsYXNzPVxcXCJ0dW1ibHIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHVtYmxyPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8IS0tIC8uYmlvLWtyYW1lciAtLT5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCIgZGF0YS1pZD1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC55ZWFyKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmFja2dyb3VuZFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS5tb2JpbGVTcmMpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIicpO1xcXCI+PC9kaXY+XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwieWVhclxcXCI+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC55ZWFyKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzdW1tYXJ5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50aXRsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJ1dHRvbnNcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGRhdGEtaWQ9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAueWVhcikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiBjbGFzcz1cXFwib3BlblxcXCI+bW9yZTwvYnV0dG9uPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbiAgYnVmZmVyICs9IFwiPGRpdiBjbGFzcz1cXFwidGltZWxpbmUtcGFnZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcInRpbWVsaW5lXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFsbC1pdGVtcy1jdHJcXFwiPlxcbiAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLnllYXJzKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDEsIHByb2dyYW0xLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhY3RpdmUtaXRlbS1jdHJcXFwiPlxcblxcbiAgICAgICAgPC9kaXY+XFxuXHRcdDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LWxlZnRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfbGVmdC5wbmcnKTtcXFwiPjwvZGl2Plxcblx0XHQgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfcmlnaHQucG5nJyk7XFxcIj48L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIFxuXG5cbiAgcmV0dXJuIFwiPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm92ZXJsYXlcXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ5b3V0dWJlLXJlc2l6ZXJcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZW1wdHktc3BhY2VcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInlvdXR1YmUtZW1iZWRcXFwiIGFsbG93ZnVsbHNjcmVlbj48L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjbG9zZS1pbnRlcnZpZXdcXFwiPlg8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cIjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImdhbGxlcnktdGFibGVcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJnYWxsZXJ5LWNlbGxcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibmF2IGltZy1jb250cm9scyBjbGVhcmZpeFxcXCI+XFxuICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInBhZ2luYXRpb25cXFwiPjxzcGFuIGNsYXNzPVxcXCJwcmV2SW1hZ2VcXFwiPiZsdDsgUHJldmlvdXMgSW1hZ2U8L3NwYW4+fDxzcGFuIGNsYXNzPVxcXCJuZXh0SW1hZ2VcXFwiPk5leHQgSW1hZ2UgJmd0Ozwvc3Bhbj48L2Rpdj5cXG5cdCAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiY2xvc2VcXFwiPlg8L2J1dHRvbj5cXG5cdFx0PC9kaXY+XFxuICAgICAgICA8aW1nIGNsYXNzPVxcXCJnYWxsZXJ5SW1hZ2VcXFwiIC8+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0clxcXCI+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuXFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibnVtYmVyc1xcXCI+XFxuICAgICAgICAgICAgPC9kaXY+XFxuXHRcdFx0PGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwiZmFjZWJvb2tcXFwiIGNsYXNzPVxcXCJmYiBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj5mYWNlYm9vazwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG5cdFx0XHQ8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbjtcblxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImVtcHR5LXNwYWNlXFxcIj48L2Rpdj5cXG48ZGl2IGNsYXNzPVxcXCJtZWRpYS10YWJsZVxcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1lZGlhLWNlbGxcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibmF2IGltZy1jb250cm9scyBjbGVhcmZpeFxcXCI+XFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiY2xvc2VcXFwiPlg8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibWVkaWFcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZ1bGwtcmVsYXRpdmVcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ5b3V0dWJlLWVtYmVkXFxcIiBhbGxvd2Z1bGxzY3JlZW4+PC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RyXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50aXRsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwiZmFjZWJvb2tcXFwiIGNsYXNzPVxcXCJmYiBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj5mYWNlYm9vazwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG5cXG4gICAgPCEtLTxkaXYgY2xhc3M9XFxcInBsYXktY3RyXFxcIj4tLT5cXG4gICAgPCEtLTxpbWcgYWx0PVxcXCJcXFwiIGlkPVxcXCJkcm9wLXNoYWRvd1xcXCIgc3JjPVxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhOaTR3TGpBc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK0RRbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SWt4aGVXVnlYekVpSUhodGJHNXpQU0pvZEhSd09pOHZkM2QzTG5jekxtOXlaeTh5TURBd0wzTjJaeUlnZUcxc2JuTTZlR3hwYm1zOUltaDBkSEE2THk5M2QzY3Vkek11YjNKbkx6RTVPVGt2ZUd4cGJtc2lJSGc5SWpCd2VDSWdlVDBpTUhCNElnMEtDU0IzYVdSMGFEMGlNekV1TmpFNGNIZ2lJR2hsYVdkb2REMGlNekV1TmpFNGNIZ2lJSFpwWlhkQ2IzZzlJakFnTUNBek1TNDJNVGdnTXpFdU5qRTRJaUJsYm1GaWJHVXRZbUZqYTJkeWIzVnVaRDBpYm1WM0lEQWdNQ0F6TVM0Mk1UZ2dNekV1TmpFNElpQjRiV3c2YzNCaFkyVTlJbkJ5WlhObGNuWmxJajROQ2p4d2IyeDVaMjl1SUdacGJHdzlJaU5HUmtaR1JrWWlJSEJ2YVc1MGN6MGlNQzQxTERBdU9EQTVJREF1TlN3ek1DNDRNRGtnTXpBdU5Td3hOUzQ0TURrZ0lpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPi0tPlxcbiAgICA8IS0tPC9kaXY+LS0+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJnYWxsZXJ5LXRhYmxlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZ2FsbGVyeS1jZWxsXFxcIj5cXG4gICAgICAgIDxpbWcgY2xhc3M9XFxcImdhbGxlcnlJbWFnZVxcXCIgLz5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RyXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0d2l0dGVyXFxcIiBjbGFzcz1cXFwidHdpdHRlciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50d2l0dGVyPC9hPlxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZiIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPmZhY2Vib29rPC9hPlxcbiAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0dW1ibHJcXFwiIGNsYXNzPVxcXCJ0dW1ibHIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHVtYmxyPC9hPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvdyBhcnJvdy1sZWZ0IGFjdGl2ZSBwcmV2SW1hZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfbGVmdC5wbmcnKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHQgYWN0aXZlIG5leHRJbWFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9hcnJvd19yaWdodC5wbmcnKTtcXFwiPjwvZGl2PlxcblxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwibnVtYmVyc1xcXCI+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJkZXRhaWwtYmFja2dyb3VuZFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLm1vYmlsZVNyYykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiKTtcXFwiPjwvZGl2PlxcbjxkaXYgY2xhc3M9XFxcIm1lZGlhLXRhYmxlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwibWVkaWEtY2VsbFxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJtZWRpYVxcXCI+XFxuICAgICAgICAgICAgICAgIDxpZnJhbWUgc3JjPVxcXCIvL3d3dy55b3V0dWJlLmNvbS9lbWJlZC9cIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnZpZGVvSWQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIj9yZWw9MFxcXCIgZnJhbWVib3JkZXI9XFxcIjBcXFwiIGFsbG93ZnVsbHNjcmVlbj48L2lmcmFtZT5cXG4gICAgICAgIDwvZGl2Plxcblx0ICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RyXFxcIj5cXG5cdCAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuXHQgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnRpdGxlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG5cdCAgICAgICAgPC9kaXY+XFxuXHRcdFx0PGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwiZmFjZWJvb2tcXFwiIGNsYXNzPVxcXCJmYiBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj5mYWNlYm9vazwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG5cdFx0XHQ8L2Rpdj5cXG5cdCAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJlbXB0eS1zcGFjZVxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcIm1lZGlhLXRhYmxlXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcIm1lZGlhLWNlbGxcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm5hdiBpbWctY29udHJvbHMgY2xlYXJmaXhcXFwiPlxcbiAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJjbG9zZVxcXCI+WDwvYnV0dG9uPlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIm1lZGlhXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aWZyYW1lIHNyYz1cXFwiLy93d3cueW91dHViZS5jb20vZW1iZWQvXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC52aWRlb0lkKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI/cmVsPTAmYXV0b3BsYXk9MSZodG1sNT0xXFxcIiBmcmFtZWJvcmRlcj1cXFwiMFxcXCIgYWxsb3dmdWxsc2NyZWVuPjwvaWZyYW1lPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0clxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50aXRsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+ZmFjZWJvb2s8L2E+XFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0dW1ibHJcXFwiIGNsYXNzPVxcXCJ0dW1ibHIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHVtYmxyPC9hPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcblxcblxcbiAgICAgICAgPCEtLTxkaXYgY2xhc3M9XFxcInBsYXktY3RyXFxcIj4tLT5cXG4gICAgICAgIDwhLS08aW1nIGFsdD1cXFwiXFxcIiBpZD1cXFwiZHJvcC1zaGFkb3dcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlreGhlV1Z5WHpFaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJZ2VHMXNibk02ZUd4cGJtczlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1RrdmVHeHBibXNpSUhnOUlqQndlQ0lnZVQwaU1IQjRJZzBLQ1NCM2FXUjBhRDBpTXpFdU5qRTRjSGdpSUdobGFXZG9kRDBpTXpFdU5qRTRjSGdpSUhacFpYZENiM2c5SWpBZ01DQXpNUzQyTVRnZ016RXVOakU0SWlCbGJtRmliR1V0WW1GamEyZHliM1Z1WkQwaWJtVjNJREFnTUNBek1TNDJNVGdnTXpFdU5qRTRJaUI0Yld3NmMzQmhZMlU5SW5CeVpYTmxjblpsSWo0TkNqeHdiMng1WjI5dUlHWnBiR3c5SWlOR1JrWkdSa1lpSUhCdmFXNTBjejBpTUM0MUxEQXVPREE1SURBdU5Td3pNQzQ0TURrZ016QXVOU3d4TlM0NE1Ea2dJaTgrRFFvOEwzTjJaejROQ2c9PVxcXCIgLz4tLT5cXG4gICAgICAgIDwhLS08L2Rpdj4tLT5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgc2VsZj10aGlzLCBoZWxwZXJNaXNzaW5nPWhlbHBlcnMuaGVscGVyTWlzc2luZywgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cbmZ1bmN0aW9uIHByb2dyYW0xKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXIsIG9wdGlvbnM7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSAoaGVscGVyID0gaGVscGVycy5pZkNvbmQgfHwgKGRlcHRoMCAmJiBkZXB0aDAuaWZDb25kKSxvcHRpb25zPXtoYXNoOnt9LGludmVyc2U6c2VsZi5wcm9ncmFtKDQsIHByb2dyYW00LCBkYXRhKSxmbjpzZWxmLnByb2dyYW0oMiwgcHJvZ3JhbTIsIGRhdGEpLGRhdGE6ZGF0YX0saGVscGVyID8gaGVscGVyLmNhbGwoZGVwdGgwLCAoZGF0YSA9PSBudWxsIHx8IGRhdGEgPT09IGZhbHNlID8gZGF0YSA6IGRhdGEuaW5kZXgpLCBcIj5cIiwgMSwgb3B0aW9ucykgOiBoZWxwZXJNaXNzaW5nLmNhbGwoZGVwdGgwLCBcImlmQ29uZFwiLCAoZGF0YSA9PSBudWxsIHx8IGRhdGEgPT09IGZhbHNlID8gZGF0YSA6IGRhdGEuaW5kZXgpLCBcIj5cIiwgMSwgb3B0aW9ucykpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuZnVuY3Rpb24gcHJvZ3JhbTIoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazE7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz1cXFwibW9yZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJhZ3JhcGgpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW00KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJhZ3JhcGgpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW02KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFydGljbGU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDQ+XCI7XG4gIHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucXVlc3Rpb24pKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCI8L2g0PlxcblxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuYW5zd2VyKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDcsIHByb2dyYW03LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cbmZ1bmN0aW9uIHByb2dyYW03KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cIjtcbiAgc3RhY2sxID0gKHR5cGVvZiBkZXB0aDAgPT09IGZ1bmN0aW9uVHlwZSA/IGRlcHRoMC5hcHBseShkZXB0aDApIDogZGVwdGgwKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIjwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW05KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGFydGljbGU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJhZ3JhcGgpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCI8L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcInN0b3J5LXBhZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS9iZy5qcGcpO1xcXCI+XFxuICAgIDxpbWcgY2xhc3M9XFxcInZpZGVvSW1hZ2VcXFwiIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS92aWRlby5qcGdcXFwiPlxcbiAgICA8dmlkZW8gcG9zdGVyPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L3ZpZGVvX3Bvc3Rlci5qcGdcXFwiPlxcbiAgICAgIDxzb3VyY2Ugc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvdmlkZW9zL3N0b3J5L3ZpZGVvLndlYm1cXFwiIHByZWxvYWQ9XFxcImF1dG9cXFwiIHR5cGU9XFxcInZpZGVvL3dlYm1cXFwiPlxcbiAgICAgIDxzb3VyY2Ugc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvdmlkZW9zL3N0b3J5L3ZpZGVvLm1wNFxcXCIgcHJlbG9hZD1cXFwiYXV0b1xcXCIgdHlwZT1cXFwidmlkZW8vbXA0XFxcIj5cXG4gICAgICA8c291cmNlIHNyYz1cXFwiXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL3ZpZGVvcy9zdG9yeS92aWRlby5vZ3ZcXFwiIHByZWxvYWQ9XFxcImF1dG9cXFwiIHR5cGU9XFxcInZpZGVvL29ndlxcXCI+XFxuICAgIDwvdmlkZW8+XFxuICAgIDxkaXYgY2xhc3M9XFxcImJnLWZpbHRlclxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInN0b3J5T3ZlcmZsb3dXcmFwcGVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInN0b3J5XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYWdlQ29udGFpbmVyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibWFpbkNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAubWFpbkNvcHkpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJyZWFkLW1vcmVcXFwiPjwhLS1jb250ZW50IGluIENTUy0tPjwvZGl2PlxcbiAgICA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiYmlvLWxpbmsgYmlvLWxpbmstbXVycGh5XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRzaG90XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvaGVhZHNob3QtbXVycGh5LmpwZyk7XFxcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInRleHRcXFwiPlxcbiAgICAgICAgICAgIDxkaXY+XFxuICAgICAgICAgICAgICAgIDxzcGFuPmNvbnZlcnNhdGlvbiB3aXRoPC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8aDU+UnlhbiBNdXJwaHk8L2g1PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvYT5cXG4gICAgPGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImJpby1saW5rIGJpby1saW5rLWtyYW1lclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkc2hvdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L2hlYWRzaG90LWtyYW1lci5qcGcpO1xcXCI+PC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0ZXh0XFxcIj5cXG4gICAgICAgICAgICA8ZGl2PlxcbiAgICAgICAgICAgICAgICA8c3Bhbj5iaW9ncmFwaHkgb2Y8L3NwYW4+XFxuICAgICAgICAgICAgICAgIDxoNT5MYXJyeSBLcmFtZXI8L2g1PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvYT5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYmlvIGJpby1tdXJwaHlcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZHNob3RcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS9oZWFkc2hvdC1tdXJwaHkuanBnKTtcXFwiPlxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlIHdpdGgtdGV4dCBzdWItdmlld1xcXCI+WCBDbG9zZTwvYnV0dG9uPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0blxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+YSBjb252ZXJzYXRpb24gd2l0aCByeWFuIG11cnBoeTwvaDI+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiaW8tcGFnZSBtdXJwaHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLnJ5YW5NdXJwaHkpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oNiwgcHJvZ3JhbTYsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvY2lhbFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZiIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPmZhY2Vib29rPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcInR1bWJsclxcXCIgY2xhc3M9XFxcInR1bWJsciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50dW1ibHI8L2E+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDwhLS0gLy5iaW8tbXVycGh5IC0tPlxcblxcbiAgICA8ZGl2IGNsYXNzPVxcXCJiaW8gYmlvLWtyYW1lclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0blxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+dGhlIGJpb2dyYXBoeSBvZiBMYXJyeSBLcmFtZXI8L2gyPlxcblxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmlvLXBhZ2Uga3JhbWVyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5sYXJyeUtyYW1lciksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg5LCBwcm9ncmFtOSwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0d2l0dGVyXFxcIiBjbGFzcz1cXFwidHdpdHRlciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50d2l0dGVyPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+ZmFjZWJvb2s8L2E+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZHNob3RcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS9oZWFkc2hvdC1rcmFtZXIuanBnKTtcXFwiPlxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlIHdpdGgtdGV4dCBzdWItdmlld1xcXCI+WCBDbG9zZTwvYnV0dG9uPlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8IS0tIC8uYmlvLWtyYW1lciAtLT5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMTtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCIgZGF0YS1wb3M9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY29udGVudFBvc2l0aW9uKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIGRhdGEtaWQ9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaWQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZ1bGwtcmVsYXRpdmVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYmFja2dyb3VuZFxcXCIgc3R5bGU9XFxcIlwiO1xuICBzdGFjazEgPSBoZWxwZXJzWydpZiddLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5waG90byksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSgyLCBwcm9ncmFtMiwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVyc1snaWYnXS5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuYWN0b3JOYW1lKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDQsIHByb2dyYW00LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5mdW5jdGlvbiBwcm9ncmFtMihkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCIgYmFja2dyb3VuZC1pbWFnZTp1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS50YWJsZXRTcmMpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIik7IGJhY2tncm91bmQtcG9zaXRpb246XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS5wb3NpdGlvbikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiO1wiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW00KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvbnRlbnQtY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5hY3Rvck5hbWUpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIiBhczwvaDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aDE+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jaGFyYWN0ZXJOYW1lKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI8L2gxPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGV0YWlsLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnF1b3RlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY3RhLWN0ciBjbGVhcmZpeFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnNbJ2lmJ10uY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmludGVydmlldyksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg1LCBwcm9ncmFtNSwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzb2NpYWxcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0d2l0dGVyXFxcIiBjbGFzcz1cXFwidHdpdHRlciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50d2l0dGVyPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJmYWNlYm9va1xcXCIgY2xhc3M9XFxcImZiIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPmZhY2Vib29rPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCIjXFxcIiBkYXRhLXNoYXJlPVxcXCJ0dW1ibHJcXFwiIGNsYXNzPVxcXCJ0dW1ibHIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHVtYmxyPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJjbG9zZVxcXCI+WCBDbG9zZTwvYnV0dG9uPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5mdW5jdGlvbiBwcm9ncmFtNShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW50ZXJ2aWV3XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTp1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvbWVkaWFfcGxheS5wbmcnKTtcXFwiIGRhdGEteW91dHViZS1pZD1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5pbnRlcnZpZXcpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnRlcnZpZXdcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJjaGFyYWN0ZXJzLXBhZ2VcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvdyBhcnJvdy1sZWZ0XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X2xlZnQucG5nJyk7XFxcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfcmlnaHQucG5nJyk7XFxcIj48L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYWxsLWl0ZW1zLWN0clxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmdWxsLXJlbGF0aXZlXFxcIj5cXG4gICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmNoYXJhY3RlcnMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFjdGl2ZS1pdGVtLWN0clxcXCI+XFxuXFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJ5b3V0dWJlLWVtYmVkLWN0clxcXCI+XFxuICAgICAgICA8IS0tIHlvdXR1YmUgZW1iZWQgdGVtcGxhdGUgZ29lcyBoZXJlIC0tPlxcbiAgICA8L2Rpdj5cXG48L2Rpdj5cXG5cIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfSk7XG4iLCIvLyBoYnNmeSBjb21waWxlZCBIYW5kbGViYXJzIHRlbXBsYXRlXG52YXIgSGFuZGxlYmFycyA9IHJlcXVpcmUoJ2hic2Z5L3J1bnRpbWUnKTtcbm1vZHVsZS5leHBvcnRzID0gSGFuZGxlYmFycy50ZW1wbGF0ZShmdW5jdGlvbiAoSGFuZGxlYmFycyxkZXB0aDAsaGVscGVycyxwYXJ0aWFscyxkYXRhKSB7XG4gIHRoaXMuY29tcGlsZXJJbmZvID0gWzQsJz49IDEuMC4wJ107XG5oZWxwZXJzID0gdGhpcy5tZXJnZShoZWxwZXJzLCBIYW5kbGViYXJzLmhlbHBlcnMpOyBkYXRhID0gZGF0YSB8fCB7fTtcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBmdW5jdGlvblR5cGU9XCJmdW5jdGlvblwiLCBlc2NhcGVFeHByZXNzaW9uPXRoaXMuZXNjYXBlRXhwcmVzc2lvbiwgc2VsZj10aGlzO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJpbmZvLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAubGluaykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWN0ciBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwWydjbGFzcyddKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImVtcHR5LXNwYWNlXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmltYWdlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCInKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmNvcHkpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW0zKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImluZm8tY3RyIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDBbJ2NsYXNzJ10pKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAubGluaykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWN0ciBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwWydjbGFzcyddKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaW1hZ2UpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIicpO1xcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLmNvcHkpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5cbmZ1bmN0aW9uIHByb2dyYW01KGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXI7XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImluZm8tY3RyXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5saW5rKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImxvZ28tY3RyIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDBbJ2NsYXNzJ10pKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5pbWFnZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiJyk7XFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY29weSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuZnVuY3Rpb24gcHJvZ3JhbTcoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZGF0YS1wb2ludCBcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwWydjbGFzcyddKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuaW1hZ2UpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIicpXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZGVyLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPlwiO1xuICBzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnRpdGxlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiPC9oMT5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnN1YkhlYWRlcikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvaDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXJcXFwiIGFsdD1cXFwiVHdpdHRlclxcXCIgc3JjPVxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhOaTR3TGpBc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK0RRbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SWtsamIyNXpJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJTkNna2dkMmxrZEdnOUlqRXdNSEI0SWlCb1pXbG5hSFE5SWpFd01IQjRJaUIyYVdWM1FtOTRQU0l3SURBZ01UQXdJREV3TUNJZ1pXNWhZbXhsTFdKaFkydG5jbTkxYm1ROUltNWxkeUF3SURBZ01UQXdJREV3TUNJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84Y0dGMGFDQnBaRDBpVkhkcGRIUmxjbDlmZURJNFgyRnNkRjk0TWpsZklpQm1hV3hzUFNJalJrWkdSa1pHSWlCa1BTSk5PRFF1T0RBekxEUTJMalUyTkdNMUxqQTFOUzB3TGpReE55dzRMalE0TXkweUxqY3hOU3c1TGpnd015MDFMamd6TXcwS0NXTXRNUzQ0TWpNc01TNHhNaTAzTGpRNE15d3lMak0wTVMweE1DNDJNRGtzTVM0eE56aGpMVEF1TVRVekxUQXVOek0wTFRBdU16STBMVEV1TkRNeUxUQXVORGt5TFRJdU1EWXlZeTB5TGpNNE1pMDRMamMwTmkweE1DNDFNemN0TVRVdU56a3lMVEU1TGpBNE1pMHhOQzQ1TkRFTkNnbGpNQzQyT1RFdE1DNHlOemtzTVM0ek9UTXRNQzQxTXprc01pNHdPVEl0TUM0M056SmpNQzQ1TkMwd0xqTXpOeXcyTGpRMU9TMHhMakl6TlN3MUxqVTVMVE11TVRnell5MHdMamN6TWkweExqY3hNeTAzTGpRM05Td3hMakk1TlMwNExqYzBOQ3d4TGpZNE9BMEtDV014TGpZM05pMHdMall6TERRdU5EUTNMVEV1TnpFMExEUXVOelEwTFRNdU5qUmpMVEl1TlRZM0xEQXVNelV5TFRVdU1EZzRMREV1TlRZMkxUY3VNRE0xTERNdU16TXhZekF1TnpBekxUQXVOelUzTERFdU1qTTJMVEV1TmpjNUxERXVNelV0TWk0Mk56SU5DZ2xqTFRZdU9EUTRMRFF1TXpjMUxURXdMamcwT0N3eE15NHhPVFV0TVRRdU1EZzFMREl4TGpjMVl5MHlMalUwTWkweUxqUTJNeTAwTGpjNU5TMDBMalF3TXkwMkxqZ3hOaTAxTGpRNFl5MDFMalkzTFRNdU1EUXhMVEV5TGpRME9TMDJMakl4TXkweU15NHdPVEV0TVRBdU1UWTBEUW9KWXkwd0xqTXlOeXd6TGpVeU1Td3hMamMwTVN3NExqSXdNeXczTGpjc01URXVNekUyWXkweExqSTVNUzB3TGpFM015MHpMalkxTWl3d0xqSXhNeTAxTGpVMExEQXVOalkxWXpBdU56WTVMRFF1TURNMExETXVNamdzTnk0ek5UY3NNVEF1TURjNUxEZ3VPVFkwRFFvSll5MHpMakV3Tnl3d0xqSXdOUzAwTGpjeE15d3dMamt4TWkwMkxqRTJPQ3d5TGpRek5tTXhMalF4TlN3eUxqZ3dOU3cwTGpnMk9DdzJMakV3Tnl3eE1TNHdPQ3cxTGpReU9XTXROaTQ1TURZc01pNDVOemN0TWk0NE1UWXNPQzQwT1N3eUxqZ3dOQ3czTGpZMk53MEtDVU15T0M0M09UUXNOekl1TVRRekxERXpMalkzT1N3M01TNDBNVFlzTlN3Mk15NHhNelJqTWpJdU5qWXhMRE13TGpnNExEY3hMamt5TVN3eE9DNHlOak1zTnprdU1qWXlMVEV4TGpRNE1XTTFMalVzTUM0d05EZ3NPQzQzTXpNdE1TNDVNRFFzTVRBdU56TTRMVFF1TURVMkRRb0pRemt4TGpnek1TdzBPQzR4TXpRc09EY3VNak00TERRM0xqVTNPQ3c0TkM0NE1ETXNORFl1TlRZMGVpSXZQZzBLUEM5emRtYytEUW89XFxcIiAvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmFjZWJvb2tcXFwiIGFsdD1cXFwiRmFjZWJvb2tcXFwiIHNyYz1cXFwiZGF0YTppbWFnZS9zdmcreG1sO2Jhc2U2NCxQRDk0Yld3Z2RtVnljMmx2YmowaU1TNHdJaUJsYm1OdlpHbHVaejBpZFhSbUxUZ2lQejROQ2p3aExTMGdSMlZ1WlhKaGRHOXlPaUJCWkc5aVpTQkpiR3gxYzNSeVlYUnZjaUF4Tmk0d0xqQXNJRk5XUnlCRmVIQnZjblFnVUd4MVp5MUpiaUF1SUZOV1J5QldaWEp6YVc5dU9pQTJMakF3SUVKMWFXeGtJREFwSUNBdExUNE5DandoUkU5RFZGbFFSU0J6ZG1jZ1VGVkNURWxESUNJdEx5OVhNME12TDBSVVJDQlRWa2NnTVM0eEx5OUZUaUlnSW1oMGRIQTZMeTkzZDNjdWR6TXViM0puTDBkeVlYQm9hV056TDFOV1J5OHhMakV2UkZSRUwzTjJaekV4TG1SMFpDSStEUW84YzNabklIWmxjbk5wYjI0OUlqRXVNU0lnYVdROUlrbGpiMjV6SWlCNGJXeHVjejBpYUhSMGNEb3ZMM2QzZHk1M015NXZjbWN2TWpBd01DOXpkbWNpSUhodGJHNXpPbmhzYVc1clBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHhPVGs1TDNoc2FXNXJJaUI0UFNJd2NIZ2lJSGs5SWpCd2VDSU5DZ2tnZDJsa2RHZzlJakV3TUhCNElpQm9aV2xuYUhROUlqRXdNSEI0SWlCMmFXVjNRbTk0UFNJd0lEQWdNVEF3SURFd01DSWdaVzVoWW14bExXSmhZMnRuY205MWJtUTlJbTVsZHlBd0lEQWdNVEF3SURFd01DSWdlRzFzT25Od1lXTmxQU0p3Y21WelpYSjJaU0krRFFvOGNHRjBhQ0JwWkQwaVJtRmpaV0p2YjJzaUlHWnBiR3c5SWlOR1JrWkdSa1lpSUdROUlrMHpPQzR3Tnpnc01qSXVORE14WXpBc01pNHlOamdzTUN3eE1pNHpPVEVzTUN3eE1pNHpPVEZJTWpsMk1UVXVNVFV5YURrdU1EYzRWamsxYURFNExqWTBPRlkwT1M0NU56VklOamt1TWpRTkNnbGpNQ3d3TERFdU1UY3lMVGN1TWpZMUxERXVOelF0TVRVdU1qQTVZeTB4TGpZeU9Td3dMVEUwTGpFNE5Dd3dMVEUwTGpFNE5Dd3djekF0T0M0NE1UVXNNQzB4TUM0ek5tTXdMVEV1TlRRNExESXVNRE16TFRNdU5qTXhMRFF1TURRekxUTXVOak14WXpJdU1EQTJMREFzTmk0eU16a3NNQ3d4TUM0eE5pd3dEUW9KWXpBdE1pNHdOak1zTUMwNUxqRTVNU3d3TFRFMUxqYzNOR010TlM0eU16UXNNQzB4TVM0eE9Ea3NNQzB4TXk0NE1UUXNNRU16Tnk0Mk1UY3NOU3d6T0M0d056Z3NNakF1TVRZM0xETTRMakEzT0N3eU1pNDBNekY2SWk4K0RRbzhMM04yWno0TkNnPT1cXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyXFxcIiBhbHQ9XFxcIlR1bWJsclxcXCIgc3JjPVxcXCJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBEOTRiV3dnZG1WeWMybHZiajBpTVM0d0lpQmxibU52WkdsdVp6MGlkWFJtTFRnaVB6NE5DandoTFMwZ1IyVnVaWEpoZEc5eU9pQkJaRzlpWlNCSmJHeDFjM1J5WVhSdmNpQXhOaTR3TGpBc0lGTldSeUJGZUhCdmNuUWdVR3gxWnkxSmJpQXVJRk5XUnlCV1pYSnphVzl1T2lBMkxqQXdJRUoxYVd4a0lEQXBJQ0F0TFQ0TkNqd2hSRTlEVkZsUVJTQnpkbWNnVUZWQ1RFbERJQ0l0THk5WE0wTXZMMFJVUkNCVFZrY2dNUzR4THk5RlRpSWdJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MMGR5WVhCb2FXTnpMMU5XUnk4eExqRXZSRlJFTDNOMlp6RXhMbVIwWkNJK0RRbzhjM1puSUhabGNuTnBiMjQ5SWpFdU1TSWdhV1E5SWtsamIyNXpJaUI0Yld4dWN6MGlhSFIwY0RvdkwzZDNkeTUzTXk1dmNtY3ZNakF3TUM5emRtY2lJSGh0Ykc1ek9uaHNhVzVyUFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eE9UazVMM2hzYVc1cklpQjRQU0l3Y0hnaUlIazlJakJ3ZUNJTkNna2dkMmxrZEdnOUlqRXdNSEI0SWlCb1pXbG5hSFE5SWpFd01IQjRJaUIyYVdWM1FtOTRQU0l3SURBZ01UQXdJREV3TUNJZ1pXNWhZbXhsTFdKaFkydG5jbTkxYm1ROUltNWxkeUF3SURBZ01UQXdJREV3TUNJZ2VHMXNPbk53WVdObFBTSndjbVZ6WlhKMlpTSStEUW84Y0dGMGFDQnBaRDBpVkhWdFlteHlJaUJtYVd4c1BTSWpSa1pHUmtaR0lpQmtQU0pOTlRjdU9EazJMRGM0TGpVMU9XTXRNUzQxTVRNdE1DNDRPRGt0TWk0NU1ERXRNaTQwTVRZdE15NDBOVFV0TXk0NE9XTXRNQzQxTmpFdE1TNDBPRE10TUM0ME9Ea3ROQzQwT0RrdE1DNDBPRGt0T1M0M01UTU5DZ2xXTkRFdU9EYzRhREl3TGprNE4xWXlOUzQ0TVRWSU5UTXVPVFV6VmpWSU5ERXVNRFJqTFRBdU5UYzJMRFF1TmpNMkxURXVOak0zTERndU5EWTJMVE11TVRjMkxERXhMalEzWXkweExqVTBNaXd6TGpBd09DMHpMalUzTml3MUxqVTNPQzAyTGpFeU5pdzNMamN5TmcwS0NVTXlPUzR5TERJMkxqTTBMREkxTGpBMk5Dd3lOeTQ1T1RJc01qRXVOU3d5T1M0eE16SjJNVEl1TnpRMmFERXlMak15T1hZek1TNDFOakpqTUN3MExqRXlNU3d3TGpRek55dzNMakkyTlN3eExqTXdOaXc1TGpReU9XTXdMamczTXl3eUxqRTJNaXd5TGpRek1pdzBMakl4TVN3MExqWTROQ3cyTGpFek9RMEtDV015TGpJMU1pd3hMamt3Tnl3MExqazNNU3d6TGpNNU5pdzRMakUyTVN3MExqUTBNVU0xTVM0eE5qWXNPVFF1TkRneUxEVXpMall4Tml3NU5TdzFOeTQzTmpZc09UVmpNeTQyTlN3d0xEY3VNRFE1TFRBdU16WTRMREV3TGpJdE1TNHdPRGdOQ2dsak15NHhORGN0TUM0M016Z3NOaTQyTmpFdE1pNHdNU3d4TUM0MU16UXRNeTQ0TVRKV056VXVPV010TkM0MU5EVXNNaTQ1TmpVdE9TNHhNVFlzTkM0ME5DMHhNeTQzTVRNc05DNDBORU0yTWk0eUxEZ3dMak0wTWl3MU9TNDVNVE1zTnprdU56UTNMRFUzTGpnNU5pdzNPQzQxTlRsNklpOCtEUW84TDNOMlp6NE5DZz09XFxcIiAvPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjaGFydFxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwidmlzaWJsZS1zbVxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnRhYmxldENoYXJ0KSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiIC8+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwiaGlkZGVuLXNtXFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAuY2hhcnQpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic291cmNlXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5jb3B5KSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9zcGFuPlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8YSBocmVmPVxcXCJodHRwOi8vd3d3LnVuYWlkcy5vcmcvXFxcIiB0YXJnZXQ9XFxcIl9ibGFua1xcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGltZyBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvZmlnaHQvZGF0YS12aXMvdW5haWRzLnBuZ1xcXCIgLz5cXG4gICAgICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlXFxcIj54IGNsb3NlPC9idXR0b24+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG4gIGJ1ZmZlciArPSBcIjxkaXYgY2xhc3M9XFxcImZpZ2h0LXBhZ2VcXFwiPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJhcnJvdyBhcnJvdy1sZWZ0XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X2xlZnQucG5nJyk7XFxcIj48L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfcmlnaHQucG5nJyk7XFxcIj48L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwidmlkZW9JbWFnZVxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC90YWJsZXQvdmlkZW8uanBnJylcXFwiPlxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZmlnaHQtY3RyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImJvZHktY3RyXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgPHA+XFxuICAgICAgICAgICAgICAgICAgICBUaGUgY3J1c2FkZSBhZ2FpbnN0IEhJVi9BSURTIGhhcyByYWdlZCBmb3IgbW9yZSB0aGFuIDMwIHllYXJzLCByZXN1bHRpbmcgaW4gc29tZSBiaWcgd2luczogVHJlYXRtZW50c1xcbiAgICAgICAgICAgICAgICAgICAgYXJlIGtlZXBpbmcgcGVvcGxlIHdpdGggSElWIGxpdmluZyBsb25nZXIsIHllYXJseSBkZWF0aHMgd29ybGR3aWRlIGhhdmUgZGVjbGluZWQgc2luY2UgMjAwNSwgYW5kIHJlc2VhcmNoZXJzXFxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZSB0byB3b3JrIHRvIHVubG9jayB0aGUgbXlzdGVyaWVzIG9mIHRoaXMgZGlzZWFzZS4gQnV0IHRoZSB3YXIgYWdhaW5zdCBISVYvQUlEUyBpcyBmYXIgZnJvbSBvdmVy4oCUYW5kIGl0IHdvbuKAmXQgYmUgdW50aWwgYSB2YWNjaW5lIGlzIGRpc2NvdmVyZWQuXFxuICAgICAgICAgICAgICAgIDwvcD5cXG4gICAgICAgICAgICAgICAgPHA+XFxuICAgICAgICAgICAgICAgICAgICBKb2luIHRoZSBmaWdodCB0b2RheSBieSB2aXNpdGluZyA8ZW0+VGhlIE5vcm1hbCBIZWFydOKAmXM8L2VtPiBwYXJ0bmVycyBhbmQgcmVzb3VyY2VzIGFuZCBhcm1pbmcgeW91cnNlbGYgd2l0aFxcbiAgICAgICAgICAgICAgICAgICAga25vd2xlZGdlIGFib3V0IHdoZXJlIHRoZSBiYXR0bGUgc3RhbmRzIHRvZGF5LlxcbiAgICAgICAgICAgICAgICA8L3A+XFxuICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYnV0dG9uIGRhdGEtYnRuXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1hZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9maWdodC1kYXRhLWJ0bi5wbmcpXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29weVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+bGVhcm4gbW9yZTwvaDI+XFxuICAgICAgICAgICAgICAgICAgICA8aDE+PHN0cm9uZz5ISVYvQUlEUzo8L3N0cm9uZz4gV2hlcmUgV2UgU3RhbmQgVG9kYXk8L2gxPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24gcGFydG5lcnMtYnRuXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaW1hZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9maWdodC1wYXJ0bmVycy1idG4ucG5nKVxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgPGgyPmZpbmQgaW5mb3JtYXRpb248L2gyPlxcbiAgICAgICAgICAgICAgICAgICAgPGgxPjxzdHJvbmc+UGFydG5lcnMgJiBSZXNvdXJjZXM8L3N0cm9uZz48L2gxPlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICA8YSBjbGFzcz1cXFwia25vd19zdGF0dXNcXFwiIGhyZWY9XFxcImh0dHA6Ly9sb2NhdG9yLmFpZHMuZ292L1xcXCIgdGFyZ2V0PVxcXCJfYmxhbmtcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b24gdGVzdGVkLWJ0blxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDI+a25vdyB5b3VyIHN0YXR1czwvaDI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGgxPkdldCB0ZXN0ZWQgYW5kIGZpbmQgc2VydmljZXMgPGJyLz53aXRoIHRoZSBBSURTLmdvdiBsb2NhdG9yPC9oMT5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICA8L2E+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcInBhcnRuZXJzLXJlc291cmNlcy1jdHJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9maWdodC9maWdodC1iZy1uby10ZXh0LmpwZyk7XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInByLWN0ciBwYXJ0bmVycy1jdHIgYWN0aXZlXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJmdWxsLXJlbGF0aXZlXFxcIj5cXG4gICAgICAgICAgICAgICAgPGgxPlBhcnRuZXJzPC9oMT5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHIgY2xlYXJmaXhcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJ0bmVyc0FuZFJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEucGFydG5lcnMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwci1jdHIgcmVzb3VyY2VzLWN0clxcXCI+XFxuICAgICAgICAgICAgPGgxPlJlc291cmNlczwvaDE+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiYm9keS1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJyb3ctdG9wXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsICgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5wYXJ0bmVyc0FuZFJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEucmVzb3VyY2VzKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMVsncm93LXRvcCddKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDMsIHByb2dyYW0zLCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwicm93LWJvdHRvbVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoKHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFydG5lcnNBbmRSZXNvdXJjZXMpKSxzdGFjazEgPT0gbnVsbCB8fCBzdGFjazEgPT09IGZhbHNlID8gc3RhY2sxIDogc3RhY2sxLnJlc291cmNlcykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazFbJ3Jvdy1ib3R0b20nXSksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg1LCBwcm9ncmFtNSwgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInN3aXRjaFxcXCI+XFxuICAgICAgICAgICAgPGJ1dHRvbiBjbGFzcz1cXFwiY2xvc2VcXFwiPnggY2xvc2U8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwiZGF0YS12aXN1YWxpemF0aW9uLWN0clxcXCI+XFxuICAgICAgICBcIjtcbiAgc3RhY2sxID0gaGVscGVycy5lYWNoLmNhbGwoZGVwdGgwLCAoZGVwdGgwICYmIGRlcHRoMC5kYXRhUG9pbnRzKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDcsIHByb2dyYW03LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcblxcbiAgICA8L2Rpdj5cXG4gICAgPGRpdiBjbGFzcz1cXFwibWFza1xcXCI+PC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb247XG5cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJob21lLXBhZ2VcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9ob21lL3RhYmxldC9iZy5qcGcpXFxcIj5cXG4gICAgPCEtLTxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvcnVmZi5wbmdcXFwiIGNsYXNzPVxcXCJjaGFyYWN0ZXIgY2hhcmFjdGVyLWxlZnRcXFwiLz4tLT5cXG4gICAgPCEtLTxpbWcgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvanVsaWEucG5nXFxcIiBjbGFzcz1cXFwiY2hhcmFjdGVyIGNoYXJhY3Rlci1yaWdodFxcXCIvPi0tPlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJiaWxsaW5nLWJsb2NrXFxcIj5cXG5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNhc3QtY3RyXFxcIj5cXG4gICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJjYXN0XFxcIiBzcmM9XFxcIlwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9jYXN0LnBuZ1xcXCIvPlxcbiAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJsb2dvLWNvbnRhaW5lclxcXCI+XFxuICAgICAgICAgICAgPGltZyBjbGFzcz1cXFwibG9nb1xcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvbG9nby5wbmdcXFwiLz5cXG5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidG4tY3RyXFxcIj5cXG4gICAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcIm5ld3MgdGFwLWhhY2tcXFwiPkF3YXJkcyBOZXdzPC9idXR0b24+XFxuICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJ0cmFpbGVyIHRhcC1oYWNrXFxcIj5cXG4gICAgICAgICAgICAgICAgICA8aW1nIGNsYXNzPVxcXCJ0cmFpbGVyUGxheVxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL3RyYWlsZXJfaWNvbi5wbmdcXFwiLz5cXG4gICAgICAgICAgICAgICAgICA8ZGl2PldhdGNoIFRyYWlsZXI8L2Rpdj5cXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxcbiAgICAgICAgICAgIDwvZGl2PlxcblxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInByZW1pZXJlLWN0clxcXCI+XFxuICAgICAgICAgICAgICAgIDxhIGNsYXNzPVxcXCJ0YXAtaGFja1xcXCIgaHJlZj1cXFwiaHR0cDovL3d3dy5oYm9nby5jb20vI21vdmllcy92aWRlbyZhc3NldElEPUdPUk9TVEdQNDMwOTk/dmlkZW9Nb2RlPWluZm9wYWdlUHJldmlldy9cXFwiIHRhcmdldD1cXFwiX2JsYW5rXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImhiby1sb2dvXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvaG9tZS9oYm9fZ28ucG5nKVxcXCI+PC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcblxcbiAgICA8L2Rpdj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwibG9jay11cFxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzY3JvbGwtZG93blxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL2hvbWUvc2Nyb2xsLWRvd24ucG5nKVxcXCI+PC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoYm8tZmlsbXNcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9ob21lL2hiby1maWxtcy5wbmcpXFxcIj48L2Rpdj5cXG4gICAgPC9kaXY+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcIm92ZXJsYXlcXFwiPjwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJtb2RhbFxcXCI+XFxuICAgICAgPGRpdiBjbGFzcz1cXFwiY2xvc2VcXFwiPlg8L2Rpdj5cXG4gICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50LWN0clxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb250ZW50XFxcIj5cXG4gICAgICAgICAgPGgxPkhCTydzIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IFdpbnMgT25lIFNBRyBBd2FyZCwgT25lIEdvbGRlbiBHbG9iZSwgVHdvIEVtbXlzPC9oMT5cXG4gICAgICAgICAgICAgICAgICA8cD48aT5UaGUgTm9ybWFsIEhlYXJ0PC9pPiBwcmV2YWlsZWQgYXQgdGhlIEphbi4gMjUgU2NyZWVuIEFjdG9ycyBHdWlsZCBBd2FyZHMgY2VyZW1vbnksIHdpdGggTWFyayBSdWZmYWxvIHRha2luZyBob21lIGEgc3RhdHVlIGZvciBoaXMgcm9sZSBhcyBISVYvQUlEUyBhY3RpdmlzdCBOZWQgV2Vla3MuIFJ1ZmZhbG8gd29uIGZvciBPdXRzdGFuZGluZyBQZXJmb3JtYW5jZSBieSBhIE1hbGUgQWN0b3IgaW4gYSBUZWxldmlzaW9uIE1vdmllIG9yIE1pbmlzZXJpZXMuPC9wPlxcbiAgICAgICAgICAgICAgICAgIDxwPlByZXZpb3VzbHksIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IHRvb2sgaG9tZSBvbmUgR29sZGVuIEdsb2JlIEF3YXJkIGZvciBNYXR0IEJvbWVyJ3MgcG9ydHJheWFsIG9mIE5ldyBZb3VyIFRpbWVzIHJlcG9ydGVyIEZlbGl4IFR1cm5lciBpbiBhIGNlcmVtb255IHB1dCBvbiBKYW4uIDExLCAyMDE1LCBieSB0aGUgSG9sbHl3b29kIEZvcmVpZ24gUHJlc3MgQXNzb2NpYXRpb24uIDxpPlRoZSBOb3JtYWwgSGVhcnQ8L2k+IGFsc28gbmFiYmVkIHR3byBQcmltZXRpbWUgRW1teSBBd2FyZHMsIGF3YXJkZWQgYnkgdGhlIFRlbGV2aXNpb24gQWNhZGVteSBpbiBjZXJlbW9uaWVzIG9uIEF1Zy4gMTYgYW5kIDI1LCAyMDE0LiBUaGUgYXdhcmRzIGluY2x1ZGVkIE91dHN0YW5kaW5nIFRlbGV2aXNpb24gTW92aWUgYW5kIE91dHN0YW5kaW5nIE1ha2V1cCBGb3IgQSBNaW5pc2VyaWVzIG9yIGEgTW92aWUgKE5vbi1Qcm9zdGhldGljKS48L3A+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICA8L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiaXRlbVxcXCIgZGF0YS1pZD1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5pZCkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiYWNrZ3JvdW5kXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTp1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5waG90b1NyYykpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiKVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZmlsdGVyXFxcIj48L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiY29udGVudC1jdHJcXFwiIGRhdGEtdHlwZT1cXFwiXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50eXBlKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCJcXFwiPlxcblxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0aXRsZS1jdHJcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAudGl0bGUpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJtZWRpYS1wYWdlXFxcIj5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctbGVmdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9VSS9hcnJvd19sZWZ0LnBuZycpO1xcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LXJpZ2h0XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL1VJL2Fycm93X3JpZ2h0LnBuZycpO1xcXCI+PC9kaXY+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImFsbC1pdGVtcy1jdHJcXFwiPlxcbiAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAuaXRlbXMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgIDwvZGl2PlxcbjwvZGl2PlxcblwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9KTtcbiIsIi8vIGhic2Z5IGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVcbnZhciBIYW5kbGViYXJzID0gcmVxdWlyZSgnaGJzZnkvcnVudGltZScpO1xubW9kdWxlLmV4cG9ydHMgPSBIYW5kbGViYXJzLnRlbXBsYXRlKGZ1bmN0aW9uIChIYW5kbGViYXJzLGRlcHRoMCxoZWxwZXJzLHBhcnRpYWxzLGRhdGEpIHtcbiAgdGhpcy5jb21waWxlckluZm8gPSBbNCwnPj0gMS4wLjAnXTtcbmhlbHBlcnMgPSB0aGlzLm1lcmdlKGhlbHBlcnMsIEhhbmRsZWJhcnMuaGVscGVycyk7IGRhdGEgPSBkYXRhIHx8IHt9O1xuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxLCBoZWxwZXIsIGZ1bmN0aW9uVHlwZT1cImZ1bmN0aW9uXCIsIHNlbGY9dGhpcywgaGVscGVyTWlzc2luZz1oZWxwZXJzLmhlbHBlck1pc3NpbmcsIGVzY2FwZUV4cHJlc3Npb249dGhpcy5lc2NhcGVFeHByZXNzaW9uO1xuXG5mdW5jdGlvbiBwcm9ncmFtMShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMSwgaGVscGVyLCBvcHRpb25zO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKGhlbHBlciA9IGhlbHBlcnMuaWZDb25kIHx8IChkZXB0aDAgJiYgZGVwdGgwLmlmQ29uZCksb3B0aW9ucz17aGFzaDp7fSxpbnZlcnNlOnNlbGYucHJvZ3JhbSg0LCBwcm9ncmFtNCwgZGF0YSksZm46c2VsZi5wcm9ncmFtKDIsIHByb2dyYW0yLCBkYXRhKSxkYXRhOmRhdGF9LGhlbHBlciA/IGhlbHBlci5jYWxsKGRlcHRoMCwgKGRhdGEgPT0gbnVsbCB8fCBkYXRhID09PSBmYWxzZSA/IGRhdGEgOiBkYXRhLmluZGV4KSwgXCI+XCIsIDEsIG9wdGlvbnMpIDogaGVscGVyTWlzc2luZy5jYWxsKGRlcHRoMCwgXCJpZkNvbmRcIiwgKGRhdGEgPT0gbnVsbCB8fCBkYXRhID09PSBmYWxzZSA/IGRhdGEgOiBkYXRhLmluZGV4KSwgXCI+XCIsIDEsIG9wdGlvbnMpKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cbmZ1bmN0aW9uIHByb2dyYW0yKGRlcHRoMCxkYXRhKSB7XG4gIFxuICB2YXIgYnVmZmVyID0gXCJcIiwgc3RhY2sxO1xuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgY2xhc3M9XFxcIm1vcmVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFyYWdyYXBoKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG5mdW5jdGlvbiBwcm9ncmFtNChkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMTtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFyYWdyYXBoKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG5mdW5jdGlvbiBwcm9ncmFtNihkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMTtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlwiO1xuICBzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnF1ZXN0aW9uKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiPC9oND5cXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmFuc3dlciksIHtoYXNoOnt9LGludmVyc2U6c2VsZi5ub29wLGZuOnNlbGYucHJvZ3JhbSg3LCBwcm9ncmFtNywgZGF0YSksZGF0YTpkYXRhfSk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCJcXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICByZXR1cm4gYnVmZmVyO1xuICB9XG5mdW5jdGlvbiBwcm9ncmFtNyhkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMTtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XCI7XG4gIHN0YWNrMSA9ICh0eXBlb2YgZGVwdGgwID09PSBmdW5jdGlvblR5cGUgPyBkZXB0aDAuYXBwbHkoZGVwdGgwKSA6IGRlcHRoMCk7XG4gIGlmKHN0YWNrMSB8fCBzdGFjazEgPT09IDApIHsgYnVmZmVyICs9IHN0YWNrMTsgfVxuICBidWZmZXIgKz0gXCI8L3A+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgcmV0dXJuIGJ1ZmZlcjtcbiAgfVxuXG5mdW5jdGlvbiBwcm9ncmFtOShkZXB0aDAsZGF0YSkge1xuICBcbiAgdmFyIGJ1ZmZlciA9IFwiXCIsIHN0YWNrMTtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+XCI7XG4gIHN0YWNrMSA9ICgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAucGFyYWdyYXBoKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiPC9wPlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XFxuICAgICAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJzdG9yeS1wYWdlXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvdGFibGV0L2JnLmpwZyk7XFxcIj5cXG4gICAgPGltZyBjbGFzcz1cXFwidmlkZW9JbWFnZVxcXCIgc3JjPVxcXCJcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L3ZpZGVvLmpwZ1xcXCI+XFxuICAgIDxkaXYgY2xhc3M9XFxcImJnLWZpbHRlclxcXCI+PC9kaXY+XFxuICAgIDxkaXYgY2xhc3M9XFxcInN0b3J5T3ZlcmZsb3dXcmFwcGVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInN0b3J5IGFsbG93LXRvdWNoXFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJwYWdlQ29udGFpbmVyXFxcIj5cXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwibWFpbkNvcHlcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAubWFpbkNvcHkpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvZGl2PlxcbiAgICA8ZGl2IGNsYXNzPVxcXCJyZWFkLW1vcmVcXFwiPjwhLS1jb250ZW50IGluIENTUy0tPjwvZGl2PlxcbiAgICA8YSBocmVmPVxcXCIjXFxcIiBjbGFzcz1cXFwiYmlvLWxpbmsgYmlvLWxpbmstbXVycGh5XFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRzaG90XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvaGVhZHNob3QtbXVycGh5LmpwZyk7XFxcIj48L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcInRleHRcXFwiPlxcbiAgICAgICAgICAgIDxkaXY+XFxuICAgICAgICAgICAgICAgIDxzcGFuPmNvbnZlcnNhdGlvbiB3aXRoPC9zcGFuPlxcbiAgICAgICAgICAgICAgICA8aDU+UnlhbiBNdXJwaHk8L2g1PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvYT5cXG4gICAgPGEgaHJlZj1cXFwiI1xcXCIgY2xhc3M9XFxcImJpby1saW5rIGJpby1saW5rLWtyYW1lclxcXCI+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJoZWFkc2hvdFxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybChcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3N0b3J5L2hlYWRzaG90LWtyYW1lci5qcGcpO1xcXCI+PC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJ0ZXh0XFxcIj5cXG4gICAgICAgICAgICA8ZGl2PlxcbiAgICAgICAgICAgICAgICA8c3Bhbj5iaW9ncmFwaHkgb2Y8L3NwYW4+XFxuICAgICAgICAgICAgICAgIDxoNT5MYXJyeSBLcmFtZXI8L2g1PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgPC9kaXY+XFxuICAgIDwvYT5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwiYmlvIGJpby1tdXJwaHlcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiaGVhZHNob3RcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zdG9yeS9oZWFkc2hvdC1tdXJwaHkuanBnKTtcXFwiPlxcbiAgICAgICAgICAgIDxidXR0b24gY2xhc3M9XFxcImNsb3NlIHdpdGgtdGV4dCBzdWItdmlld1xcXCI+WCBDbG9zZTwvYnV0dG9uPlxcbiAgICAgICAgPC9kaXY+XFxuICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5XFxcIj5cXG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LXdyYXBwZXJcXFwiPlxcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJjb3B5LWN0blxcXCI+XFxuICAgICAgICAgICAgICAgICAgICA8aDI+YSBjb252ZXJzYXRpb24gd2l0aCByeWFuIG11cnBoeTwvaDI+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiaW8tcGFnZSBtdXJwaHkgYWxsb3ctdG91Y2hcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLnJ5YW5NdXJwaHkpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oNiwgcHJvZ3JhbTYsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwic29jaWFsXFxcIj5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHdpdHRlclxcXCIgY2xhc3M9XFxcInR3aXR0ZXIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+dHdpdHRlcjwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwiZmFjZWJvb2tcXFwiIGNsYXNzPVxcXCJmYiBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj5mYWNlYm9vazwvYT5cXG4gICAgICAgICAgICAgICAgPGEgaHJlZj1cXFwiI1xcXCIgZGF0YS1zaGFyZT1cXFwidHVtYmxyXFxcIiBjbGFzcz1cXFwidHVtYmxyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR1bWJscjwvYT5cXG4gICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAgPCEtLSAvLmJpby1tdXJwaHkgLS0+XFxuXFxuICAgIDxkaXYgY2xhc3M9XFxcImJpbyBiaW8ta3JhbWVyXFxcIj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHlcXFwiPlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktd3JhcHBlclxcXCI+XFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImNvcHktY3RuXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxoMj50aGUgYmlvZ3JhcGh5IG9mIExhcnJ5IEtyYW1lcjwvaDI+XFxuXFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJiaW8tcGFnZSBrcmFtZXIgYWxsb3ctdG91Y2hcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiO1xuICBzdGFjazEgPSBoZWxwZXJzLmVhY2guY2FsbChkZXB0aDAsIChkZXB0aDAgJiYgZGVwdGgwLmxhcnJ5S3JhbWVyKSwge2hhc2g6e30saW52ZXJzZTpzZWxmLm5vb3AsZm46c2VsZi5wcm9ncmFtKDksIHByb2dyYW05LCBkYXRhKSxkYXRhOmRhdGF9KTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuXFxuICAgICAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDwvZGl2PlxcbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcInNvY2lhbFxcXCI+XFxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcInR3aXR0ZXJcXFwiIGNsYXNzPVxcXCJ0d2l0dGVyIGlyXFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKCdcIjtcbiAgaWYgKGhlbHBlciA9IGhlbHBlcnMuQ0ROKSB7IHN0YWNrMSA9IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSk7IH1cbiAgZWxzZSB7IGhlbHBlciA9IChkZXB0aDAgJiYgZGVwdGgwLkNETik7IHN0YWNrMSA9IHR5cGVvZiBoZWxwZXIgPT09IGZ1bmN0aW9uVHlwZSA/IGhlbHBlci5jYWxsKGRlcHRoMCwge2hhc2g6e30sZGF0YTpkYXRhfSkgOiBoZWxwZXI7IH1cbiAgYnVmZmVyICs9IGVzY2FwZUV4cHJlc3Npb24oc3RhY2sxKVxuICAgICsgXCIvaW1hZ2VzL3NvY2lhbC1pY29uc0AyeC5wbmcnKTtcXFwiPnR3aXR0ZXI8L2E+XFxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcImZhY2Vib29rXFxcIiBjbGFzcz1cXFwiZmIgaXJcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc29jaWFsLWljb25zQDJ4LnBuZycpO1xcXCI+ZmFjZWJvb2s8L2E+XFxuICAgICAgICAgICAgICAgIDxhIGhyZWY9XFxcIiNcXFwiIGRhdGEtc2hhcmU9XFxcInR1bWJsclxcXCIgY2xhc3M9XFxcInR1bWJsciBpclxcXCIgc3R5bGU9XFxcImJhY2tncm91bmQtaW1hZ2U6IHVybCgnXCI7XG4gIGlmIChoZWxwZXIgPSBoZWxwZXJzLkNETikgeyBzdGFjazEgPSBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pOyB9XG4gIGVsc2UgeyBoZWxwZXIgPSAoZGVwdGgwICYmIGRlcHRoMC5DRE4pOyBzdGFjazEgPSB0eXBlb2YgaGVscGVyID09PSBmdW5jdGlvblR5cGUgPyBoZWxwZXIuY2FsbChkZXB0aDAsIHtoYXNoOnt9LGRhdGE6ZGF0YX0pIDogaGVscGVyOyB9XG4gIGJ1ZmZlciArPSBlc2NhcGVFeHByZXNzaW9uKHN0YWNrMSlcbiAgICArIFwiL2ltYWdlcy9zb2NpYWwtaWNvbnNAMngucG5nJyk7XFxcIj50dW1ibHI8L2E+XFxuICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImhlYWRzaG90XFxcIiBzdHlsZT1cXFwiYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvc3RvcnkvaGVhZHNob3Qta3JhbWVyLmpwZyk7XFxcIj5cXG4gICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVxcXCJjbG9zZSB3aXRoLXRleHQgc3ViLXZpZXdcXFwiPlggQ2xvc2U8L2J1dHRvbj5cXG4gICAgICAgIDwvZGl2PlxcbiAgICA8L2Rpdj5cXG4gICAgPCEtLSAvLmJpby1rcmFtZXIgLS0+XFxuPC9kaXY+XCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiLy8gaGJzZnkgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZVxudmFyIEhhbmRsZWJhcnMgPSByZXF1aXJlKCdoYnNmeS9ydW50aW1lJyk7XG5tb2R1bGUuZXhwb3J0cyA9IEhhbmRsZWJhcnMudGVtcGxhdGUoZnVuY3Rpb24gKEhhbmRsZWJhcnMsZGVwdGgwLGhlbHBlcnMscGFydGlhbHMsZGF0YSkge1xuICB0aGlzLmNvbXBpbGVySW5mbyA9IFs0LCc+PSAxLjAuMCddO1xuaGVscGVycyA9IHRoaXMubWVyZ2UoaGVscGVycywgSGFuZGxlYmFycy5oZWxwZXJzKTsgZGF0YSA9IGRhdGEgfHwge307XG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlciwgZnVuY3Rpb25UeXBlPVwiZnVuY3Rpb25cIiwgZXNjYXBlRXhwcmVzc2lvbj10aGlzLmVzY2FwZUV4cHJlc3Npb24sIHNlbGY9dGhpcztcblxuZnVuY3Rpb24gcHJvZ3JhbTEoZGVwdGgwLGRhdGEpIHtcbiAgXG4gIHZhciBidWZmZXIgPSBcIlwiLCBzdGFjazEsIGhlbHBlcjtcbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcIml0ZW1cXFwiIGRhdGEtaWQ9XFxcIlwiXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKGRlcHRoMCAmJiBkZXB0aDAueWVhcikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImZ1bGwtcmVsYXRpdmVcXFwiPlxcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XFxcImJhY2tncm91bmRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBlc2NhcGVFeHByZXNzaW9uKCgoc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC5waG90bykpLHN0YWNrMSA9PSBudWxsIHx8IHN0YWNrMSA9PT0gZmFsc2UgPyBzdGFjazEgOiBzdGFjazEuc3JjKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCInKTsgYmFja2dyb3VuZC1wb3NpdGlvbjogXCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnBob3RvKSksc3RhY2sxID09IG51bGwgfHwgc3RhY2sxID09PSBmYWxzZSA/IHN0YWNrMSA6IHN0YWNrMS5wb3NpdGlvbikpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKSlcbiAgICArIFwiO1xcXCI+PC9kaXY+XFxuXFxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwieWVhclxcXCI+XCJcbiAgICArIGVzY2FwZUV4cHJlc3Npb24oKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC55ZWFyKSksdHlwZW9mIHN0YWNrMSA9PT0gZnVuY3Rpb25UeXBlID8gc3RhY2sxLmFwcGx5KGRlcHRoMCkgOiBzdGFjazEpKVxuICAgICsgXCI8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJzdW1tYXJ5XFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cXFwiZnVsbC1yZWxhdGl2ZVxcXCI+XFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjtcbiAgc3RhY2sxID0gKChzdGFjazEgPSAoZGVwdGgwICYmIGRlcHRoMC50aXRsZSkpLHR5cGVvZiBzdGFjazEgPT09IGZ1bmN0aW9uVHlwZSA/IHN0YWNrMS5hcHBseShkZXB0aDApIDogc3RhY2sxKTtcbiAgaWYoc3RhY2sxIHx8IHN0YWNrMSA9PT0gMCkgeyBidWZmZXIgKz0gc3RhY2sxOyB9XG4gIGJ1ZmZlciArPSBcIlxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG5cXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVxcXCJidXR0b25zXFxcIj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnllYXIpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgY2xhc3M9XFxcIm9wZW5cXFwiPm9wZW48L2J1dHRvbj5cXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvbiBkYXRhLWlkPVxcXCJcIlxuICAgICsgZXNjYXBlRXhwcmVzc2lvbigoKHN0YWNrMSA9IChkZXB0aDAgJiYgZGVwdGgwLnllYXIpKSx0eXBlb2Ygc3RhY2sxID09PSBmdW5jdGlvblR5cGUgPyBzdGFjazEuYXBwbHkoZGVwdGgwKSA6IHN0YWNrMSkpXG4gICAgKyBcIlxcXCIgY2xhc3M9XFxcImNsb3NlXFxcIj54IGNsb3NlPC9idXR0b24+XFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cXG4gICAgICAgICAgICAgICAgPC9kaXY+XFxuICAgICAgICAgICAgXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH1cblxuICBidWZmZXIgKz0gXCI8ZGl2IGNsYXNzPVxcXCJ0aW1lbGluZS1wYWdlXFxcIj5cXG5cXG4gICAgPGRpdiBjbGFzcz1cXFwidGltZWxpbmVcXFwiPlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYWxsLWl0ZW1zLWN0clxcXCI+XFxuICAgICAgICAgICAgXCI7XG4gIHN0YWNrMSA9IGhlbHBlcnMuZWFjaC5jYWxsKGRlcHRoMCwgKGRlcHRoMCAmJiBkZXB0aDAueWVhcnMpLCB7aGFzaDp7fSxpbnZlcnNlOnNlbGYubm9vcCxmbjpzZWxmLnByb2dyYW0oMSwgcHJvZ3JhbTEsIGRhdGEpLGRhdGE6ZGF0YX0pO1xuICBpZihzdGFjazEgfHwgc3RhY2sxID09PSAwKSB7IGJ1ZmZlciArPSBzdGFjazE7IH1cbiAgYnVmZmVyICs9IFwiXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFjdGl2ZS1pdGVtLWN0clxcXCI+XFxuXFxuICAgICAgICA8L2Rpdj5cXG4gICAgICAgIDxkaXYgY2xhc3M9XFxcImFycm93IGFycm93LWxlZnRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfbGVmdC5wbmcnKTtcXFwiPjwvZGl2PlxcbiAgICAgICAgPGRpdiBjbGFzcz1cXFwiYXJyb3cgYXJyb3ctcmlnaHRcXFwiIHN0eWxlPVxcXCJiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJ1wiO1xuICBpZiAoaGVscGVyID0gaGVscGVycy5DRE4pIHsgc3RhY2sxID0gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KTsgfVxuICBlbHNlIHsgaGVscGVyID0gKGRlcHRoMCAmJiBkZXB0aDAuQ0ROKTsgc3RhY2sxID0gdHlwZW9mIGhlbHBlciA9PT0gZnVuY3Rpb25UeXBlID8gaGVscGVyLmNhbGwoZGVwdGgwLCB7aGFzaDp7fSxkYXRhOmRhdGF9KSA6IGhlbHBlcjsgfVxuICBidWZmZXIgKz0gZXNjYXBlRXhwcmVzc2lvbihzdGFjazEpXG4gICAgKyBcIi9pbWFnZXMvVUkvYXJyb3dfcmlnaHQucG5nJyk7XFxcIj48L2Rpdj5cXG4gICAgPC9kaXY+XFxuPC9kaXY+XFxuXCI7XG4gIHJldHVybiBidWZmZXI7XG4gIH0pO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG4vKmdsb2JhbHMgSGFuZGxlYmFyczogdHJ1ZSAqL1xudmFyIGJhc2UgPSByZXF1aXJlKFwiLi9oYW5kbGViYXJzL2Jhc2VcIik7XG5cbi8vIEVhY2ggb2YgdGhlc2UgYXVnbWVudCB0aGUgSGFuZGxlYmFycyBvYmplY3QuIE5vIG5lZWQgdG8gc2V0dXAgaGVyZS5cbi8vIChUaGlzIGlzIGRvbmUgdG8gZWFzaWx5IHNoYXJlIGNvZGUgYmV0d2VlbiBjb21tb25qcyBhbmQgYnJvd3NlIGVudnMpXG52YXIgU2FmZVN0cmluZyA9IHJlcXVpcmUoXCIuL2hhbmRsZWJhcnMvc2FmZS1zdHJpbmdcIilbXCJkZWZhdWx0XCJdO1xudmFyIEV4Y2VwdGlvbiA9IHJlcXVpcmUoXCIuL2hhbmRsZWJhcnMvZXhjZXB0aW9uXCIpW1wiZGVmYXVsdFwiXTtcbnZhciBVdGlscyA9IHJlcXVpcmUoXCIuL2hhbmRsZWJhcnMvdXRpbHNcIik7XG52YXIgcnVudGltZSA9IHJlcXVpcmUoXCIuL2hhbmRsZWJhcnMvcnVudGltZVwiKTtcblxuLy8gRm9yIGNvbXBhdGliaWxpdHkgYW5kIHVzYWdlIG91dHNpZGUgb2YgbW9kdWxlIHN5c3RlbXMsIG1ha2UgdGhlIEhhbmRsZWJhcnMgb2JqZWN0IGEgbmFtZXNwYWNlXG52YXIgY3JlYXRlID0gZnVuY3Rpb24oKSB7XG4gIHZhciBoYiA9IG5ldyBiYXNlLkhhbmRsZWJhcnNFbnZpcm9ubWVudCgpO1xuXG4gIFV0aWxzLmV4dGVuZChoYiwgYmFzZSk7XG4gIGhiLlNhZmVTdHJpbmcgPSBTYWZlU3RyaW5nO1xuICBoYi5FeGNlcHRpb24gPSBFeGNlcHRpb247XG4gIGhiLlV0aWxzID0gVXRpbHM7XG5cbiAgaGIuVk0gPSBydW50aW1lO1xuICBoYi50ZW1wbGF0ZSA9IGZ1bmN0aW9uKHNwZWMpIHtcbiAgICByZXR1cm4gcnVudGltZS50ZW1wbGF0ZShzcGVjLCBoYik7XG4gIH07XG5cbiAgcmV0dXJuIGhiO1xufTtcblxudmFyIEhhbmRsZWJhcnMgPSBjcmVhdGUoKTtcbkhhbmRsZWJhcnMuY3JlYXRlID0gY3JlYXRlO1xuXG5leHBvcnRzW1wiZGVmYXVsdFwiXSA9IEhhbmRsZWJhcnM7IiwiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgVXRpbHMgPSByZXF1aXJlKFwiLi91dGlsc1wiKTtcbnZhciBFeGNlcHRpb24gPSByZXF1aXJlKFwiLi9leGNlcHRpb25cIilbXCJkZWZhdWx0XCJdO1xuXG52YXIgVkVSU0lPTiA9IFwiMS4zLjBcIjtcbmV4cG9ydHMuVkVSU0lPTiA9IFZFUlNJT047dmFyIENPTVBJTEVSX1JFVklTSU9OID0gNDtcbmV4cG9ydHMuQ09NUElMRVJfUkVWSVNJT04gPSBDT01QSUxFUl9SRVZJU0lPTjtcbnZhciBSRVZJU0lPTl9DSEFOR0VTID0ge1xuICAxOiAnPD0gMS4wLnJjLjInLCAvLyAxLjAucmMuMiBpcyBhY3R1YWxseSByZXYyIGJ1dCBkb2Vzbid0IHJlcG9ydCBpdFxuICAyOiAnPT0gMS4wLjAtcmMuMycsXG4gIDM6ICc9PSAxLjAuMC1yYy40JyxcbiAgNDogJz49IDEuMC4wJ1xufTtcbmV4cG9ydHMuUkVWSVNJT05fQ0hBTkdFUyA9IFJFVklTSU9OX0NIQU5HRVM7XG52YXIgaXNBcnJheSA9IFV0aWxzLmlzQXJyYXksXG4gICAgaXNGdW5jdGlvbiA9IFV0aWxzLmlzRnVuY3Rpb24sXG4gICAgdG9TdHJpbmcgPSBVdGlscy50b1N0cmluZyxcbiAgICBvYmplY3RUeXBlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbmZ1bmN0aW9uIEhhbmRsZWJhcnNFbnZpcm9ubWVudChoZWxwZXJzLCBwYXJ0aWFscykge1xuICB0aGlzLmhlbHBlcnMgPSBoZWxwZXJzIHx8IHt9O1xuICB0aGlzLnBhcnRpYWxzID0gcGFydGlhbHMgfHwge307XG5cbiAgcmVnaXN0ZXJEZWZhdWx0SGVscGVycyh0aGlzKTtcbn1cblxuZXhwb3J0cy5IYW5kbGViYXJzRW52aXJvbm1lbnQgPSBIYW5kbGViYXJzRW52aXJvbm1lbnQ7SGFuZGxlYmFyc0Vudmlyb25tZW50LnByb3RvdHlwZSA9IHtcbiAgY29uc3RydWN0b3I6IEhhbmRsZWJhcnNFbnZpcm9ubWVudCxcblxuICBsb2dnZXI6IGxvZ2dlcixcbiAgbG9nOiBsb2csXG5cbiAgcmVnaXN0ZXJIZWxwZXI6IGZ1bmN0aW9uKG5hbWUsIGZuLCBpbnZlcnNlKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIGlmIChpbnZlcnNlIHx8IGZuKSB7IHRocm93IG5ldyBFeGNlcHRpb24oJ0FyZyBub3Qgc3VwcG9ydGVkIHdpdGggbXVsdGlwbGUgaGVscGVycycpOyB9XG4gICAgICBVdGlscy5leHRlbmQodGhpcy5oZWxwZXJzLCBuYW1lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGludmVyc2UpIHsgZm4ubm90ID0gaW52ZXJzZTsgfVxuICAgICAgdGhpcy5oZWxwZXJzW25hbWVdID0gZm47XG4gICAgfVxuICB9LFxuXG4gIHJlZ2lzdGVyUGFydGlhbDogZnVuY3Rpb24obmFtZSwgc3RyKSB7XG4gICAgaWYgKHRvU3RyaW5nLmNhbGwobmFtZSkgPT09IG9iamVjdFR5cGUpIHtcbiAgICAgIFV0aWxzLmV4dGVuZCh0aGlzLnBhcnRpYWxzLCAgbmFtZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGFydGlhbHNbbmFtZV0gPSBzdHI7XG4gICAgfVxuICB9XG59O1xuXG5mdW5jdGlvbiByZWdpc3RlckRlZmF1bHRIZWxwZXJzKGluc3RhbmNlKSB7XG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdoZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24oYXJnKSB7XG4gICAgaWYoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIk1pc3NpbmcgaGVscGVyOiAnXCIgKyBhcmcgKyBcIidcIik7XG4gICAgfVxuICB9KTtcblxuICBpbnN0YW5jZS5yZWdpc3RlckhlbHBlcignYmxvY2tIZWxwZXJNaXNzaW5nJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIHZhciBpbnZlcnNlID0gb3B0aW9ucy5pbnZlcnNlIHx8IGZ1bmN0aW9uKCkge30sIGZuID0gb3B0aW9ucy5mbjtcblxuICAgIGlmIChpc0Z1bmN0aW9uKGNvbnRleHQpKSB7IGNvbnRleHQgPSBjb250ZXh0LmNhbGwodGhpcyk7IH1cblxuICAgIGlmKGNvbnRleHQgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiBmbih0aGlzKTtcbiAgICB9IGVsc2UgaWYoY29udGV4dCA9PT0gZmFsc2UgfHwgY29udGV4dCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gaW52ZXJzZSh0aGlzKTtcbiAgICB9IGVsc2UgaWYgKGlzQXJyYXkoY29udGV4dCkpIHtcbiAgICAgIGlmKGNvbnRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICByZXR1cm4gaW5zdGFuY2UuaGVscGVycy5lYWNoKGNvbnRleHQsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGludmVyc2UodGhpcyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBmbihjb250ZXh0KTtcbiAgICB9XG4gIH0pO1xuXG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCdlYWNoJywgZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIHZhciBmbiA9IG9wdGlvbnMuZm4sIGludmVyc2UgPSBvcHRpb25zLmludmVyc2U7XG4gICAgdmFyIGkgPSAwLCByZXQgPSBcIlwiLCBkYXRhO1xuXG4gICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dCkpIHsgY29udGV4dCA9IGNvbnRleHQuY2FsbCh0aGlzKTsgfVxuXG4gICAgaWYgKG9wdGlvbnMuZGF0YSkge1xuICAgICAgZGF0YSA9IGNyZWF0ZUZyYW1lKG9wdGlvbnMuZGF0YSk7XG4gICAgfVxuXG4gICAgaWYoY29udGV4dCAmJiB0eXBlb2YgY29udGV4dCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGlmIChpc0FycmF5KGNvbnRleHQpKSB7XG4gICAgICAgIGZvcih2YXIgaiA9IGNvbnRleHQubGVuZ3RoOyBpPGo7IGkrKykge1xuICAgICAgICAgIGlmIChkYXRhKSB7XG4gICAgICAgICAgICBkYXRhLmluZGV4ID0gaTtcbiAgICAgICAgICAgIGRhdGEuZmlyc3QgPSAoaSA9PT0gMCk7XG4gICAgICAgICAgICBkYXRhLmxhc3QgID0gKGkgPT09IChjb250ZXh0Lmxlbmd0aC0xKSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRbaV0sIHsgZGF0YTogZGF0YSB9KTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gY29udGV4dCkge1xuICAgICAgICAgIGlmKGNvbnRleHQuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgICAgaWYoZGF0YSkgeyBcbiAgICAgICAgICAgICAgZGF0YS5rZXkgPSBrZXk7IFxuICAgICAgICAgICAgICBkYXRhLmluZGV4ID0gaTtcbiAgICAgICAgICAgICAgZGF0YS5maXJzdCA9IChpID09PSAwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldCA9IHJldCArIGZuKGNvbnRleHRba2V5XSwge2RhdGE6IGRhdGF9KTtcbiAgICAgICAgICAgIGkrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZihpID09PSAwKXtcbiAgICAgIHJldCA9IGludmVyc2UodGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJldDtcbiAgfSk7XG5cbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2lmJywgZnVuY3Rpb24oY29uZGl0aW9uYWwsIG9wdGlvbnMpIHtcbiAgICBpZiAoaXNGdW5jdGlvbihjb25kaXRpb25hbCkpIHsgY29uZGl0aW9uYWwgPSBjb25kaXRpb25hbC5jYWxsKHRoaXMpOyB9XG5cbiAgICAvLyBEZWZhdWx0IGJlaGF2aW9yIGlzIHRvIHJlbmRlciB0aGUgcG9zaXRpdmUgcGF0aCBpZiB0aGUgdmFsdWUgaXMgdHJ1dGh5IGFuZCBub3QgZW1wdHkuXG4gICAgLy8gVGhlIGBpbmNsdWRlWmVyb2Agb3B0aW9uIG1heSBiZSBzZXQgdG8gdHJlYXQgdGhlIGNvbmR0aW9uYWwgYXMgcHVyZWx5IG5vdCBlbXB0eSBiYXNlZCBvbiB0aGVcbiAgICAvLyBiZWhhdmlvciBvZiBpc0VtcHR5LiBFZmZlY3RpdmVseSB0aGlzIGRldGVybWluZXMgaWYgMCBpcyBoYW5kbGVkIGJ5IHRoZSBwb3NpdGl2ZSBwYXRoIG9yIG5lZ2F0aXZlLlxuICAgIGlmICgoIW9wdGlvbnMuaGFzaC5pbmNsdWRlWmVybyAmJiAhY29uZGl0aW9uYWwpIHx8IFV0aWxzLmlzRW1wdHkoY29uZGl0aW9uYWwpKSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcbiAgICB9XG4gIH0pO1xuXG4gIGluc3RhbmNlLnJlZ2lzdGVySGVscGVyKCd1bmxlc3MnLCBmdW5jdGlvbihjb25kaXRpb25hbCwgb3B0aW9ucykge1xuICAgIHJldHVybiBpbnN0YW5jZS5oZWxwZXJzWydpZiddLmNhbGwodGhpcywgY29uZGl0aW9uYWwsIHtmbjogb3B0aW9ucy5pbnZlcnNlLCBpbnZlcnNlOiBvcHRpb25zLmZuLCBoYXNoOiBvcHRpb25zLmhhc2h9KTtcbiAgfSk7XG5cbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ3dpdGgnLCBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgaWYgKGlzRnVuY3Rpb24oY29udGV4dCkpIHsgY29udGV4dCA9IGNvbnRleHQuY2FsbCh0aGlzKTsgfVxuXG4gICAgaWYgKCFVdGlscy5pc0VtcHR5KGNvbnRleHQpKSByZXR1cm4gb3B0aW9ucy5mbihjb250ZXh0KTtcbiAgfSk7XG5cbiAgaW5zdGFuY2UucmVnaXN0ZXJIZWxwZXIoJ2xvZycsIGZ1bmN0aW9uKGNvbnRleHQsIG9wdGlvbnMpIHtcbiAgICB2YXIgbGV2ZWwgPSBvcHRpb25zLmRhdGEgJiYgb3B0aW9ucy5kYXRhLmxldmVsICE9IG51bGwgPyBwYXJzZUludChvcHRpb25zLmRhdGEubGV2ZWwsIDEwKSA6IDE7XG4gICAgaW5zdGFuY2UubG9nKGxldmVsLCBjb250ZXh0KTtcbiAgfSk7XG59XG5cbnZhciBsb2dnZXIgPSB7XG4gIG1ldGhvZE1hcDogeyAwOiAnZGVidWcnLCAxOiAnaW5mbycsIDI6ICd3YXJuJywgMzogJ2Vycm9yJyB9LFxuXG4gIC8vIFN0YXRlIGVudW1cbiAgREVCVUc6IDAsXG4gIElORk86IDEsXG4gIFdBUk46IDIsXG4gIEVSUk9SOiAzLFxuICBsZXZlbDogMyxcblxuICAvLyBjYW4gYmUgb3ZlcnJpZGRlbiBpbiB0aGUgaG9zdCBlbnZpcm9ubWVudFxuICBsb2c6IGZ1bmN0aW9uKGxldmVsLCBvYmopIHtcbiAgICBpZiAobG9nZ2VyLmxldmVsIDw9IGxldmVsKSB7XG4gICAgICB2YXIgbWV0aG9kID0gbG9nZ2VyLm1ldGhvZE1hcFtsZXZlbF07XG4gICAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIGNvbnNvbGVbbWV0aG9kXSkge1xuICAgICAgICBjb25zb2xlW21ldGhvZF0uY2FsbChjb25zb2xlLCBvYmopO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmV4cG9ydHMubG9nZ2VyID0gbG9nZ2VyO1xuZnVuY3Rpb24gbG9nKGxldmVsLCBvYmopIHsgbG9nZ2VyLmxvZyhsZXZlbCwgb2JqKTsgfVxuXG5leHBvcnRzLmxvZyA9IGxvZzt2YXIgY3JlYXRlRnJhbWUgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgdmFyIG9iaiA9IHt9O1xuICBVdGlscy5leHRlbmQob2JqLCBvYmplY3QpO1xuICByZXR1cm4gb2JqO1xufTtcbmV4cG9ydHMuY3JlYXRlRnJhbWUgPSBjcmVhdGVGcmFtZTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIGVycm9yUHJvcHMgPSBbJ2Rlc2NyaXB0aW9uJywgJ2ZpbGVOYW1lJywgJ2xpbmVOdW1iZXInLCAnbWVzc2FnZScsICduYW1lJywgJ251bWJlcicsICdzdGFjayddO1xuXG5mdW5jdGlvbiBFeGNlcHRpb24obWVzc2FnZSwgbm9kZSkge1xuICB2YXIgbGluZTtcbiAgaWYgKG5vZGUgJiYgbm9kZS5maXJzdExpbmUpIHtcbiAgICBsaW5lID0gbm9kZS5maXJzdExpbmU7XG5cbiAgICBtZXNzYWdlICs9ICcgLSAnICsgbGluZSArICc6JyArIG5vZGUuZmlyc3RDb2x1bW47XG4gIH1cblxuICB2YXIgdG1wID0gRXJyb3IucHJvdG90eXBlLmNvbnN0cnVjdG9yLmNhbGwodGhpcywgbWVzc2FnZSk7XG5cbiAgLy8gVW5mb3J0dW5hdGVseSBlcnJvcnMgYXJlIG5vdCBlbnVtZXJhYmxlIGluIENocm9tZSAoYXQgbGVhc3QpLCBzbyBgZm9yIHByb3AgaW4gdG1wYCBkb2Vzbid0IHdvcmsuXG4gIGZvciAodmFyIGlkeCA9IDA7IGlkeCA8IGVycm9yUHJvcHMubGVuZ3RoOyBpZHgrKykge1xuICAgIHRoaXNbZXJyb3JQcm9wc1tpZHhdXSA9IHRtcFtlcnJvclByb3BzW2lkeF1dO1xuICB9XG5cbiAgaWYgKGxpbmUpIHtcbiAgICB0aGlzLmxpbmVOdW1iZXIgPSBsaW5lO1xuICAgIHRoaXMuY29sdW1uID0gbm9kZS5maXJzdENvbHVtbjtcbiAgfVxufVxuXG5FeGNlcHRpb24ucHJvdG90eXBlID0gbmV3IEVycm9yKCk7XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gRXhjZXB0aW9uOyIsIlwidXNlIHN0cmljdFwiO1xudmFyIFV0aWxzID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG52YXIgRXhjZXB0aW9uID0gcmVxdWlyZShcIi4vZXhjZXB0aW9uXCIpW1wiZGVmYXVsdFwiXTtcbnZhciBDT01QSUxFUl9SRVZJU0lPTiA9IHJlcXVpcmUoXCIuL2Jhc2VcIikuQ09NUElMRVJfUkVWSVNJT047XG52YXIgUkVWSVNJT05fQ0hBTkdFUyA9IHJlcXVpcmUoXCIuL2Jhc2VcIikuUkVWSVNJT05fQ0hBTkdFUztcblxuZnVuY3Rpb24gY2hlY2tSZXZpc2lvbihjb21waWxlckluZm8pIHtcbiAgdmFyIGNvbXBpbGVyUmV2aXNpb24gPSBjb21waWxlckluZm8gJiYgY29tcGlsZXJJbmZvWzBdIHx8IDEsXG4gICAgICBjdXJyZW50UmV2aXNpb24gPSBDT01QSUxFUl9SRVZJU0lPTjtcblxuICBpZiAoY29tcGlsZXJSZXZpc2lvbiAhPT0gY3VycmVudFJldmlzaW9uKSB7XG4gICAgaWYgKGNvbXBpbGVyUmV2aXNpb24gPCBjdXJyZW50UmV2aXNpb24pIHtcbiAgICAgIHZhciBydW50aW1lVmVyc2lvbnMgPSBSRVZJU0lPTl9DSEFOR0VTW2N1cnJlbnRSZXZpc2lvbl0sXG4gICAgICAgICAgY29tcGlsZXJWZXJzaW9ucyA9IFJFVklTSU9OX0NIQU5HRVNbY29tcGlsZXJSZXZpc2lvbl07XG4gICAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiVGVtcGxhdGUgd2FzIHByZWNvbXBpbGVkIHdpdGggYW4gb2xkZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gXCIrXG4gICAgICAgICAgICBcIlBsZWFzZSB1cGRhdGUgeW91ciBwcmVjb21waWxlciB0byBhIG5ld2VyIHZlcnNpb24gKFwiK3J1bnRpbWVWZXJzaW9ucytcIikgb3IgZG93bmdyYWRlIHlvdXIgcnVudGltZSB0byBhbiBvbGRlciB2ZXJzaW9uIChcIitjb21waWxlclZlcnNpb25zK1wiKS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSB0aGUgZW1iZWRkZWQgdmVyc2lvbiBpbmZvIHNpbmNlIHRoZSBydW50aW1lIGRvZXNuJ3Qga25vdyBhYm91dCB0aGlzIHJldmlzaW9uIHlldFxuICAgICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRlbXBsYXRlIHdhcyBwcmVjb21waWxlZCB3aXRoIGEgbmV3ZXIgdmVyc2lvbiBvZiBIYW5kbGViYXJzIHRoYW4gdGhlIGN1cnJlbnQgcnVudGltZS4gXCIrXG4gICAgICAgICAgICBcIlBsZWFzZSB1cGRhdGUgeW91ciBydW50aW1lIHRvIGEgbmV3ZXIgdmVyc2lvbiAoXCIrY29tcGlsZXJJbmZvWzFdK1wiKS5cIik7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydHMuY2hlY2tSZXZpc2lvbiA9IGNoZWNrUmV2aXNpb247Ly8gVE9ETzogUmVtb3ZlIHRoaXMgbGluZSBhbmQgYnJlYWsgdXAgY29tcGlsZVBhcnRpYWxcblxuZnVuY3Rpb24gdGVtcGxhdGUodGVtcGxhdGVTcGVjLCBlbnYpIHtcbiAgaWYgKCFlbnYpIHtcbiAgICB0aHJvdyBuZXcgRXhjZXB0aW9uKFwiTm8gZW52aXJvbm1lbnQgcGFzc2VkIHRvIHRlbXBsYXRlXCIpO1xuICB9XG5cbiAgLy8gTm90ZTogVXNpbmcgZW52LlZNIHJlZmVyZW5jZXMgcmF0aGVyIHRoYW4gbG9jYWwgdmFyIHJlZmVyZW5jZXMgdGhyb3VnaG91dCB0aGlzIHNlY3Rpb24gdG8gYWxsb3dcbiAgLy8gZm9yIGV4dGVybmFsIHVzZXJzIHRvIG92ZXJyaWRlIHRoZXNlIGFzIHBzdWVkby1zdXBwb3J0ZWQgQVBJcy5cbiAgdmFyIGludm9rZVBhcnRpYWxXcmFwcGVyID0gZnVuY3Rpb24ocGFydGlhbCwgbmFtZSwgY29udGV4dCwgaGVscGVycywgcGFydGlhbHMsIGRhdGEpIHtcbiAgICB2YXIgcmVzdWx0ID0gZW52LlZNLmludm9rZVBhcnRpYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAocmVzdWx0ICE9IG51bGwpIHsgcmV0dXJuIHJlc3VsdDsgfVxuXG4gICAgaWYgKGVudi5jb21waWxlKSB7XG4gICAgICB2YXIgb3B0aW9ucyA9IHsgaGVscGVyczogaGVscGVycywgcGFydGlhbHM6IHBhcnRpYWxzLCBkYXRhOiBkYXRhIH07XG4gICAgICBwYXJ0aWFsc1tuYW1lXSA9IGVudi5jb21waWxlKHBhcnRpYWwsIHsgZGF0YTogZGF0YSAhPT0gdW5kZWZpbmVkIH0sIGVudik7XG4gICAgICByZXR1cm4gcGFydGlhbHNbbmFtZV0oY29udGV4dCwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFeGNlcHRpb24oXCJUaGUgcGFydGlhbCBcIiArIG5hbWUgKyBcIiBjb3VsZCBub3QgYmUgY29tcGlsZWQgd2hlbiBydW5uaW5nIGluIHJ1bnRpbWUtb25seSBtb2RlXCIpO1xuICAgIH1cbiAgfTtcblxuICAvLyBKdXN0IGFkZCB3YXRlclxuICB2YXIgY29udGFpbmVyID0ge1xuICAgIGVzY2FwZUV4cHJlc3Npb246IFV0aWxzLmVzY2FwZUV4cHJlc3Npb24sXG4gICAgaW52b2tlUGFydGlhbDogaW52b2tlUGFydGlhbFdyYXBwZXIsXG4gICAgcHJvZ3JhbXM6IFtdLFxuICAgIHByb2dyYW06IGZ1bmN0aW9uKGksIGZuLCBkYXRhKSB7XG4gICAgICB2YXIgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldO1xuICAgICAgaWYoZGF0YSkge1xuICAgICAgICBwcm9ncmFtV3JhcHBlciA9IHByb2dyYW0oaSwgZm4sIGRhdGEpO1xuICAgICAgfSBlbHNlIGlmICghcHJvZ3JhbVdyYXBwZXIpIHtcbiAgICAgICAgcHJvZ3JhbVdyYXBwZXIgPSB0aGlzLnByb2dyYW1zW2ldID0gcHJvZ3JhbShpLCBmbik7XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvZ3JhbVdyYXBwZXI7XG4gICAgfSxcbiAgICBtZXJnZTogZnVuY3Rpb24ocGFyYW0sIGNvbW1vbikge1xuICAgICAgdmFyIHJldCA9IHBhcmFtIHx8IGNvbW1vbjtcblxuICAgICAgaWYgKHBhcmFtICYmIGNvbW1vbiAmJiAocGFyYW0gIT09IGNvbW1vbikpIHtcbiAgICAgICAgcmV0ID0ge307XG4gICAgICAgIFV0aWxzLmV4dGVuZChyZXQsIGNvbW1vbik7XG4gICAgICAgIFV0aWxzLmV4dGVuZChyZXQsIHBhcmFtKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfSxcbiAgICBwcm9ncmFtV2l0aERlcHRoOiBlbnYuVk0ucHJvZ3JhbVdpdGhEZXB0aCxcbiAgICBub29wOiBlbnYuVk0ubm9vcCxcbiAgICBjb21waWxlckluZm86IG51bGxcbiAgfTtcblxuICByZXR1cm4gZnVuY3Rpb24oY29udGV4dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgIHZhciBuYW1lc3BhY2UgPSBvcHRpb25zLnBhcnRpYWwgPyBvcHRpb25zIDogZW52LFxuICAgICAgICBoZWxwZXJzLFxuICAgICAgICBwYXJ0aWFscztcblxuICAgIGlmICghb3B0aW9ucy5wYXJ0aWFsKSB7XG4gICAgICBoZWxwZXJzID0gb3B0aW9ucy5oZWxwZXJzO1xuICAgICAgcGFydGlhbHMgPSBvcHRpb25zLnBhcnRpYWxzO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gdGVtcGxhdGVTcGVjLmNhbGwoXG4gICAgICAgICAgY29udGFpbmVyLFxuICAgICAgICAgIG5hbWVzcGFjZSwgY29udGV4dCxcbiAgICAgICAgICBoZWxwZXJzLFxuICAgICAgICAgIHBhcnRpYWxzLFxuICAgICAgICAgIG9wdGlvbnMuZGF0YSk7XG5cbiAgICBpZiAoIW9wdGlvbnMucGFydGlhbCkge1xuICAgICAgZW52LlZNLmNoZWNrUmV2aXNpb24oY29udGFpbmVyLmNvbXBpbGVySW5mbyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuZXhwb3J0cy50ZW1wbGF0ZSA9IHRlbXBsYXRlO2Z1bmN0aW9uIHByb2dyYW1XaXRoRGVwdGgoaSwgZm4sIGRhdGEgLyosICRkZXB0aCAqLykge1xuICB2YXIgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMyk7XG5cbiAgdmFyIHByb2cgPSBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgW2NvbnRleHQsIG9wdGlvbnMuZGF0YSB8fCBkYXRhXS5jb25jYXQoYXJncykpO1xuICB9O1xuICBwcm9nLnByb2dyYW0gPSBpO1xuICBwcm9nLmRlcHRoID0gYXJncy5sZW5ndGg7XG4gIHJldHVybiBwcm9nO1xufVxuXG5leHBvcnRzLnByb2dyYW1XaXRoRGVwdGggPSBwcm9ncmFtV2l0aERlcHRoO2Z1bmN0aW9uIHByb2dyYW0oaSwgZm4sIGRhdGEpIHtcbiAgdmFyIHByb2cgPSBmdW5jdGlvbihjb250ZXh0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgICByZXR1cm4gZm4oY29udGV4dCwgb3B0aW9ucy5kYXRhIHx8IGRhdGEpO1xuICB9O1xuICBwcm9nLnByb2dyYW0gPSBpO1xuICBwcm9nLmRlcHRoID0gMDtcbiAgcmV0dXJuIHByb2c7XG59XG5cbmV4cG9ydHMucHJvZ3JhbSA9IHByb2dyYW07ZnVuY3Rpb24gaW52b2tlUGFydGlhbChwYXJ0aWFsLCBuYW1lLCBjb250ZXh0LCBoZWxwZXJzLCBwYXJ0aWFscywgZGF0YSkge1xuICB2YXIgb3B0aW9ucyA9IHsgcGFydGlhbDogdHJ1ZSwgaGVscGVyczogaGVscGVycywgcGFydGlhbHM6IHBhcnRpYWxzLCBkYXRhOiBkYXRhIH07XG5cbiAgaWYocGFydGlhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEV4Y2VwdGlvbihcIlRoZSBwYXJ0aWFsIFwiICsgbmFtZSArIFwiIGNvdWxkIG5vdCBiZSBmb3VuZFwiKTtcbiAgfSBlbHNlIGlmKHBhcnRpYWwgaW5zdGFuY2VvZiBGdW5jdGlvbikge1xuICAgIHJldHVybiBwYXJ0aWFsKGNvbnRleHQsIG9wdGlvbnMpO1xuICB9XG59XG5cbmV4cG9ydHMuaW52b2tlUGFydGlhbCA9IGludm9rZVBhcnRpYWw7ZnVuY3Rpb24gbm9vcCgpIHsgcmV0dXJuIFwiXCI7IH1cblxuZXhwb3J0cy5ub29wID0gbm9vcDsiLCJcInVzZSBzdHJpY3RcIjtcbi8vIEJ1aWxkIG91dCBvdXIgYmFzaWMgU2FmZVN0cmluZyB0eXBlXG5mdW5jdGlvbiBTYWZlU3RyaW5nKHN0cmluZykge1xuICB0aGlzLnN0cmluZyA9IHN0cmluZztcbn1cblxuU2FmZVN0cmluZy5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbigpIHtcbiAgcmV0dXJuIFwiXCIgKyB0aGlzLnN0cmluZztcbn07XG5cbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gU2FmZVN0cmluZzsiLCJcInVzZSBzdHJpY3RcIjtcbi8qanNoaW50IC1XMDA0ICovXG52YXIgU2FmZVN0cmluZyA9IHJlcXVpcmUoXCIuL3NhZmUtc3RyaW5nXCIpW1wiZGVmYXVsdFwiXTtcblxudmFyIGVzY2FwZSA9IHtcbiAgXCImXCI6IFwiJmFtcDtcIixcbiAgXCI8XCI6IFwiJmx0O1wiLFxuICBcIj5cIjogXCImZ3Q7XCIsXG4gICdcIic6IFwiJnF1b3Q7XCIsXG4gIFwiJ1wiOiBcIiYjeDI3O1wiLFxuICBcImBcIjogXCImI3g2MDtcIlxufTtcblxudmFyIGJhZENoYXJzID0gL1smPD5cIidgXS9nO1xudmFyIHBvc3NpYmxlID0gL1smPD5cIidgXS87XG5cbmZ1bmN0aW9uIGVzY2FwZUNoYXIoY2hyKSB7XG4gIHJldHVybiBlc2NhcGVbY2hyXSB8fCBcIiZhbXA7XCI7XG59XG5cbmZ1bmN0aW9uIGV4dGVuZChvYmosIHZhbHVlKSB7XG4gIGZvcih2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHZhbHVlLCBrZXkpKSB7XG4gICAgICBvYmpba2V5XSA9IHZhbHVlW2tleV07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydHMuZXh0ZW5kID0gZXh0ZW5kO3ZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5leHBvcnRzLnRvU3RyaW5nID0gdG9TdHJpbmc7XG4vLyBTb3VyY2VkIGZyb20gbG9kYXNoXG4vLyBodHRwczovL2dpdGh1Yi5jb20vYmVzdGllanMvbG9kYXNoL2Jsb2IvbWFzdGVyL0xJQ0VOU0UudHh0XG52YXIgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbic7XG59O1xuLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHZlcnNpb25zIG9mIENocm9tZSBhbmQgU2FmYXJpXG5pZiAoaXNGdW5jdGlvbigveC8pKSB7XG4gIGlzRnVuY3Rpb24gPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicgJiYgdG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXSc7XG4gIH07XG59XG52YXIgaXNGdW5jdGlvbjtcbmV4cG9ydHMuaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG52YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24odmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSA/IHRvU3RyaW5nLmNhbGwodmFsdWUpID09PSAnW29iamVjdCBBcnJheV0nIDogZmFsc2U7XG59O1xuZXhwb3J0cy5pc0FycmF5ID0gaXNBcnJheTtcblxuZnVuY3Rpb24gZXNjYXBlRXhwcmVzc2lvbihzdHJpbmcpIHtcbiAgLy8gZG9uJ3QgZXNjYXBlIFNhZmVTdHJpbmdzLCBzaW5jZSB0aGV5J3JlIGFscmVhZHkgc2FmZVxuICBpZiAoc3RyaW5nIGluc3RhbmNlb2YgU2FmZVN0cmluZykge1xuICAgIHJldHVybiBzdHJpbmcudG9TdHJpbmcoKTtcbiAgfSBlbHNlIGlmICghc3RyaW5nICYmIHN0cmluZyAhPT0gMCkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG5cbiAgLy8gRm9yY2UgYSBzdHJpbmcgY29udmVyc2lvbiBhcyB0aGlzIHdpbGwgYmUgZG9uZSBieSB0aGUgYXBwZW5kIHJlZ2FyZGxlc3MgYW5kXG4gIC8vIHRoZSByZWdleCB0ZXN0IHdpbGwgZG8gdGhpcyB0cmFuc3BhcmVudGx5IGJlaGluZCB0aGUgc2NlbmVzLCBjYXVzaW5nIGlzc3VlcyBpZlxuICAvLyBhbiBvYmplY3QncyB0byBzdHJpbmcgaGFzIGVzY2FwZWQgY2hhcmFjdGVycyBpbiBpdC5cbiAgc3RyaW5nID0gXCJcIiArIHN0cmluZztcblxuICBpZighcG9zc2libGUudGVzdChzdHJpbmcpKSB7IHJldHVybiBzdHJpbmc7IH1cbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKGJhZENoYXJzLCBlc2NhcGVDaGFyKTtcbn1cblxuZXhwb3J0cy5lc2NhcGVFeHByZXNzaW9uID0gZXNjYXBlRXhwcmVzc2lvbjtmdW5jdGlvbiBpc0VtcHR5KHZhbHVlKSB7XG4gIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSAmJiB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn1cblxuZXhwb3J0cy5pc0VtcHR5ID0gaXNFbXB0eTsiLCIvLyBDcmVhdGUgYSBzaW1wbGUgcGF0aCBhbGlhcyB0byBhbGxvdyBicm93c2VyaWZ5IHRvIHJlc29sdmVcbi8vIHRoZSBydW50aW1lIG9uIGEgc3VwcG9ydGVkIHBhdGguXG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vZGlzdC9janMvaGFuZGxlYmFycy5ydW50aW1lJyk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCJoYW5kbGViYXJzL3J1bnRpbWVcIilbXCJkZWZhdWx0XCJdO1xuIl19
