!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("crypto"),require("https")):"function"==typeof define&&define.amd?define(["exports","crypto","https"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).Psm={},t.crypto,t.https)}(this,(function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var i=r(e),o=r(n),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function u(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t,e){return t(e={exports:{}},e.exports),e.exports}s((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(t){u=function(t,e,n){return t[e]=n}}function s(t,e,n,r){var i=e&&e.prototype instanceof l?e:l,o=Object.create(i.prototype),a=new S(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return T()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=b(a,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=c(t,e,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}(t,n,a),o}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var f={};function l(){}function d(){}function h(){}var p={};p[i]=function(){return this};var y=Object.getPrototypeOf,g=y&&y(y(w([])));g&&g!==e&&n.call(g,i)&&(p=g);var v=h.prototype=l.prototype=Object.create(p);function _(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function m(t,e){var r;this._invoke=function(i,o){function a(){return new e((function(r,a){!function r(i,o,a,u){var s=c(t[i],t,o);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,u)}),(function(t){r("throw",t,a,u)})):e.resolve(l).then((function(t){f.value=t,a(f)}),(function(t){return r("throw",t,a,u)}))}u(s.arg)}(i,o,r,a)}))}return r=r?r.then(a,a):a()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var i=r.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function E(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(E,this),this.reset(!0)}function w(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:T}}function T(){return{value:void 0,done:!0}}return d.prototype=v.constructor=h,h.constructor=d,d.displayName=u(h,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,u(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},_(m.prototype),m.prototype[o]=function(){return this},t.AsyncIterator=m,t.async=function(e,n,r,i,o){void 0===o&&(o=Promise);var a=new m(s(e,n,r,i),o);return t.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},_(v),u(v,a,"Generator"),v[i]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=w,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var u=n.call(o,"catchLoc"),s=n.call(o,"finallyLoc");if(u&&s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,f):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:w(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t,e,n,r,i,o,a){try{var u=t[o](a),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(r,i)}function l(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var o=t.apply(e,n);function a(t){f(o,r,i,a,u,"next",t)}function u(t){f(o,r,i,a,u,"throw",t)}a(void 0)}))}}function d(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g=function(t){return t&&t.Math==Math&&t},v=g("object"==typeof globalThis&&globalThis)||g("object"==typeof window&&window)||g("object"==typeof self&&self)||g("object"==typeof a&&a)||Function("return this")(),_=function(t){try{return!!t()}catch(t){return!0}},m=!_((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),b={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,A={f:E&&!b.call({1:2},1)?function(t){var e=E(this,t);return!!e&&e.enumerable}:b},S=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},w={}.toString,T=function(t){return w.call(t).slice(8,-1)},O="".split,I=_((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==T(t)?O.call(t,""):Object(t)}:Object,N=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},C=function(t){return I(N(t))},P=function(t){return"object"==typeof t?null!==t:"function"==typeof t},R=function(t,e){if(!P(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!P(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!P(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!P(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},M={}.hasOwnProperty,L=function(t,e){return M.call(t,e)},x=v.document,D=P(x)&&P(x.createElement),U=function(t){return D?x.createElement(t):{}},F=!m&&!_((function(){return 7!=Object.defineProperty(U("div"),"a",{get:function(){return 7}}).a})),j=Object.getOwnPropertyDescriptor,k={f:m?j:function(t,e){if(t=C(t),e=R(e,!0),F)try{return j(t,e)}catch(t){}if(L(t,e))return S(!A.f.call(t,e),t[e])}},B=function(t){if(!P(t))throw TypeError(String(t)+" is not an object");return t},G=Object.defineProperty,W={f:m?G:function(t,e,n){if(B(t),e=R(e,!0),B(n),F)try{return G(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},V=m?function(t,e,n){return W.f(t,e,S(1,n))}:function(t,e,n){return t[e]=n,t},K=function(t,e){try{V(v,t,e)}catch(n){v[t]=e}return e},q=v["__core-js_shared__"]||K("__core-js_shared__",{}),Y=Function.toString;"function"!=typeof q.inspectSource&&(q.inspectSource=function(t){return Y.call(t)});var J,H,z,Q=q.inspectSource,$=v.WeakMap,X="function"==typeof $&&/native code/.test(Q($)),Z=s((function(t){(t.exports=function(t,e){return q[t]||(q[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),tt=0,et=Math.random(),nt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++tt+et).toString(36)},rt=Z("keys"),it=function(t){return rt[t]||(rt[t]=nt(t))},ot={},at=v.WeakMap;if(X){var ut=new at,st=ut.get,ct=ut.has,ft=ut.set;J=function(t,e){return ft.call(ut,t,e),e},H=function(t){return st.call(ut,t)||{}},z=function(t){return ct.call(ut,t)}}else{var lt=it("state");ot[lt]=!0,J=function(t,e){return V(t,lt,e),e},H=function(t){return L(t,lt)?t[lt]:{}},z=function(t){return L(t,lt)}}var dt,ht,pt={set:J,get:H,has:z,enforce:function(t){return z(t)?H(t):J(t,{})},getterFor:function(t){return function(e){var n;if(!P(e)||(n=H(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},yt=s((function(t){var e=pt.get,n=pt.enforce,r=String(String).split("String");(t.exports=function(t,e,i,o){var a=!!o&&!!o.unsafe,u=!!o&&!!o.enumerable,s=!!o&&!!o.noTargetGet;"function"==typeof i&&("string"!=typeof e||L(i,"name")||V(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==v?(a?!s&&t[e]&&(u=!0):delete t[e],u?t[e]=i:V(t,e,i)):u?t[e]=i:K(e,i)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||Q(this)}))})),gt=v,vt=function(t){return"function"==typeof t?t:void 0},_t=function(t,e){return arguments.length<2?vt(gt[t])||vt(v[t]):gt[t]&&gt[t][e]||v[t]&&v[t][e]},mt=Math.ceil,bt=Math.floor,Et=function(t){return isNaN(t=+t)?0:(t>0?bt:mt)(t)},At=Math.min,St=function(t){return t>0?At(Et(t),9007199254740991):0},wt=Math.max,Tt=Math.min,Ot=function(t,e){var n=Et(t);return n<0?wt(n+e,0):Tt(n,e)},It=function(t){return function(e,n,r){var i,o=C(e),a=St(o.length),u=Ot(r,a);if(t&&n!=n){for(;a>u;)if((i=o[u++])!=i)return!0}else for(;a>u;u++)if((t||u in o)&&o[u]===n)return t||u||0;return!t&&-1}},Nt={includes:It(!0),indexOf:It(!1)},Ct=Nt.indexOf,Pt=function(t,e){var n,r=C(t),i=0,o=[];for(n in r)!L(ot,n)&&L(r,n)&&o.push(n);for(;e.length>i;)L(r,n=e[i++])&&(~Ct(o,n)||o.push(n));return o},Rt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mt=Rt.concat("length","prototype"),Lt={f:Object.getOwnPropertyNames||function(t){return Pt(t,Mt)}},xt={f:Object.getOwnPropertySymbols},Dt=_t("Reflect","ownKeys")||function(t){var e=Lt.f(B(t)),n=xt.f;return n?e.concat(n(t)):e},Ut=function(t,e){for(var n=Dt(e),r=W.f,i=k.f,o=0;o<n.length;o++){var a=n[o];L(t,a)||r(t,a,i(e,a))}},Ft=/#|\.prototype\./,jt=function(t,e){var n=Bt[kt(t)];return n==Wt||n!=Gt&&("function"==typeof e?_(e):!!e)},kt=jt.normalize=function(t){return String(t).replace(Ft,".").toLowerCase()},Bt=jt.data={},Gt=jt.NATIVE="N",Wt=jt.POLYFILL="P",Vt=jt,Kt=k.f,qt=function(t,e){var n,r,i,o,a,u=t.target,s=t.global,c=t.stat;if(n=s?v:c?v[u]||K(u,{}):(v[u]||{}).prototype)for(r in e){if(o=e[r],i=t.noTargetGet?(a=Kt(n,r))&&a.value:n[r],!Vt(s?r:u+(c?".":"#")+r,t.forced)&&void 0!==i){if(typeof o==typeof i)continue;Ut(o,i)}(t.sham||i&&i.sham)&&V(o,"sham",!0),yt(n,r,o,t)}},Yt=Array.isArray||function(t){return"Array"==T(t)},Jt=function(t){return Object(N(t))},Ht=function(t,e,n){var r=R(e);r in t?W.f(t,r,S(0,n)):t[r]=n},zt=!!Object.getOwnPropertySymbols&&!_((function(){return!String(Symbol())})),Qt=zt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$t=Z("wks"),Xt=v.Symbol,Zt=Qt?Xt:Xt&&Xt.withoutSetter||nt,te=function(t){return L($t,t)||(zt&&L(Xt,t)?$t[t]=Xt[t]:$t[t]=Zt("Symbol."+t)),$t[t]},ee=te("species"),ne=function(t,e){var n;return Yt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Yt(n.prototype)?P(n)&&null===(n=n[ee])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},re=_t("navigator","userAgent")||"",ie=v.process,oe=ie&&ie.versions,ae=oe&&oe.v8;ae?ht=(dt=ae.split("."))[0]+dt[1]:re&&(!(dt=re.match(/Edge\/(\d+)/))||dt[1]>=74)&&(dt=re.match(/Chrome\/(\d+)/))&&(ht=dt[1]);var ue=ht&&+ht,se=te("species"),ce=function(t){return ue>=51||!_((function(){var e=[];return(e.constructor={})[se]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},fe=te("isConcatSpreadable"),le=ue>=51||!_((function(){var t=[];return t[fe]=!1,t.concat()[0]!==t})),de=ce("concat"),he=function(t){if(!P(t))return!1;var e=t[fe];return void 0!==e?!!e:Yt(t)};qt({target:"Array",proto:!0,forced:!le||!de},{concat:function(t){var e,n,r,i,o,a=Jt(this),u=ne(a,0),s=0;for(e=-1,r=arguments.length;e<r;e++)if(he(o=-1===e?a:arguments[e])){if(s+(i=St(o.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<i;n++,s++)n in o&&Ht(u,s,o[n])}else{if(s>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Ht(u,s++,o)}return u.length=s,u}});var pe=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ye=function(t,e,n){if(pe(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},ge=[].push,ve=function(t){var e=1==t,n=2==t,r=3==t,i=4==t,o=6==t,a=5==t||o;return function(u,s,c,f){for(var l,d,h=Jt(u),p=I(h),y=ye(s,c,3),g=St(p.length),v=0,_=f||ne,m=e?_(u,g):n?_(u,0):void 0;g>v;v++)if((a||v in p)&&(d=y(l=p[v],v,h),t))if(e)m[v]=d;else if(d)switch(t){case 3:return!0;case 5:return l;case 6:return v;case 2:ge.call(m,l)}else if(i)return!1;return o?-1:r||i?i:m}},_e={forEach:ve(0),map:ve(1),filter:ve(2),some:ve(3),every:ve(4),find:ve(5),findIndex:ve(6)},me=function(t,e){var n=[][t];return!!n&&_((function(){n.call(null,e||function(){throw 1},1)}))},be=Object.defineProperty,Ee={},Ae=function(t){throw t},Se=function(t,e){if(L(Ee,t))return Ee[t];e||(e={});var n=[][t],r=!!L(e,"ACCESSORS")&&e.ACCESSORS,i=L(e,0)?e[0]:Ae,o=L(e,1)?e[1]:void 0;return Ee[t]=!!n&&!_((function(){if(r&&!m)return!0;var t={length:-1};r?be(t,1,{enumerable:!0,get:Ae}):t[1]=1,n.call(t,i,o)}))},we=_e.forEach,Te=me("forEach"),Oe=Se("forEach"),Ie=Te&&Oe?[].forEach:function(t){return we(this,t,arguments.length>1?arguments[1]:void 0)};qt({target:"Array",proto:!0,forced:[].forEach!=Ie},{forEach:Ie});var Ne,Ce=Object.keys||function(t){return Pt(t,Rt)},Pe=m?Object.defineProperties:function(t,e){B(t);for(var n,r=Ce(e),i=r.length,o=0;i>o;)W.f(t,n=r[o++],e[n]);return t},Re=_t("document","documentElement"),Me=it("IE_PROTO"),Le=function(){},xe=function(t){return"<script>"+t+"<\/script>"},De=function(){try{Ne=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;De=Ne?function(t){t.write(xe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Ne):((e=U("iframe")).style.display="none",Re.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(xe("document.F=Object")),t.close(),t.F);for(var n=Rt.length;n--;)delete De.prototype[Rt[n]];return De()};ot[Me]=!0;var Ue=Object.create||function(t,e){var n;return null!==t?(Le.prototype=B(t),n=new Le,Le.prototype=null,n[Me]=t):n=De(),void 0===e?n:Pe(n,e)},Fe=te("unscopables"),je=Array.prototype;null==je[Fe]&&W.f(je,Fe,{configurable:!0,value:Ue(null)});var ke,Be,Ge,We=function(t){je[Fe][t]=!0},Ve={},Ke=!_((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),qe=it("IE_PROTO"),Ye=Object.prototype,Je=Ke?Object.getPrototypeOf:function(t){return t=Jt(t),L(t,qe)?t[qe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ye:null},He=te("iterator"),ze=!1;[].keys&&("next"in(Ge=[].keys())?(Be=Je(Je(Ge)))!==Object.prototype&&(ke=Be):ze=!0),null==ke&&(ke={}),L(ke,He)||V(ke,He,(function(){return this}));var Qe={IteratorPrototype:ke,BUGGY_SAFARI_ITERATORS:ze},$e=W.f,Xe=te("toStringTag"),Ze=function(t,e,n){t&&!L(t=n?t:t.prototype,Xe)&&$e(t,Xe,{configurable:!0,value:e})},tn=Qe.IteratorPrototype,en=function(){return this},nn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return B(n),function(t){if(!P(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),rn=Qe.IteratorPrototype,on=Qe.BUGGY_SAFARI_ITERATORS,an=te("iterator"),un=function(){return this},sn=function(t,e,n,r,i,o,a){!function(t,e,n){var r=e+" Iterator";t.prototype=Ue(tn,{next:S(1,n)}),Ze(t,r,!1),Ve[r]=en}(n,e,r);var u,s,c,f=function(t){if(t===i&&y)return y;if(!on&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",d=!1,h=t.prototype,p=h[an]||h["@@iterator"]||i&&h[i],y=!on&&p||f(i),g="Array"==e&&h.entries||p;if(g&&(u=Je(g.call(new t)),rn!==Object.prototype&&u.next&&(Je(u)!==rn&&(nn?nn(u,rn):"function"!=typeof u[an]&&V(u,an,un)),Ze(u,l,!0))),"values"==i&&p&&"values"!==p.name&&(d=!0,y=function(){return p.call(this)}),h[an]!==y&&V(h,an,y),Ve[e]=y,i)if(s={values:f("values"),keys:o?y:f("keys"),entries:f("entries")},a)for(c in s)(on||d||!(c in h))&&yt(h,c,s[c]);else qt({target:e,proto:!0,forced:on||d},s);return s},cn=pt.set,fn=pt.getterFor("Array Iterator"),ln=sn(Array,"Array",(function(t,e){cn(this,{type:"Array Iterator",target:C(t),index:0,kind:e})}),(function(){var t=fn(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Ve.Arguments=Ve.Array,We("keys"),We("values"),We("entries");var dn=[].join,hn=I!=Object,pn=me("join",",");qt({target:"Array",proto:!0,forced:hn||!pn},{join:function(t){return dn.call(C(this),void 0===t?",":t)}});var yn=ce("splice"),gn=Se("splice",{ACCESSORS:!0,0:0,1:2}),vn=Math.max,_n=Math.min;qt({target:"Array",proto:!0,forced:!yn||!gn},{splice:function(t,e){var n,r,i,o,a,u,s=Jt(this),c=St(s.length),f=Ot(t,c),l=arguments.length;if(0===l?n=r=0:1===l?(n=0,r=c-f):(n=l-2,r=_n(vn(Et(e),0),c-f)),c+n-r>9007199254740991)throw TypeError("Maximum allowed length exceeded");for(i=ne(s,r),o=0;o<r;o++)(a=f+o)in s&&Ht(i,o,s[a]);if(i.length=r,n<r){for(o=f;o<c-r;o++)u=o+n,(a=o+r)in s?s[u]=s[a]:delete s[u];for(o=c;o>c-r+n;o--)delete s[o-1]}else if(n>r)for(o=c-r;o>f;o--)u=o+n-1,(a=o+r-1)in s?s[u]=s[a]:delete s[u];for(o=0;o<n;o++)s[o+f]=arguments[o+2];return s.length=c-r+n,i}});var mn=function(t,e,n){var r,i;return nn&&"function"==typeof(r=e.constructor)&&r!==n&&P(i=r.prototype)&&i!==n.prototype&&nn(t,i),t},bn="[\t\n\v\f\r                　\u2028\u2029\ufeff]",En=RegExp("^"+bn+bn+"*"),An=RegExp(bn+bn+"*$"),Sn=function(t){return function(e){var n=String(N(e));return 1&t&&(n=n.replace(En,"")),2&t&&(n=n.replace(An,"")),n}},wn={start:Sn(1),end:Sn(2),trim:Sn(3)},Tn=Lt.f,On=k.f,In=W.f,Nn=wn.trim,Cn=v.Number,Pn=Cn.prototype,Rn="Number"==T(Ue(Pn)),Mn=function(t){var e,n,r,i,o,a,u,s,c=R(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=Nn(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+c}for(a=(o=c.slice(2)).length,u=0;u<a;u++)if((s=o.charCodeAt(u))<48||s>i)return NaN;return parseInt(o,r)}return+c};if(Vt("Number",!Cn(" 0o1")||!Cn("0b1")||Cn("+0x1"))){for(var Ln,xn=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof xn&&(Rn?_((function(){Pn.valueOf.call(n)})):"Number"!=T(n))?mn(new Cn(Mn(e)),n,xn):Mn(e)},Dn=m?Tn(Cn):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Un=0;Dn.length>Un;Un++)L(Cn,Ln=Dn[Un])&&!L(xn,Ln)&&In(xn,Ln,On(Cn,Ln));xn.prototype=Pn,Pn.constructor=xn,yt(v,"Number",xn)}var Fn=!_((function(){return Object.isExtensible(Object.preventExtensions({}))})),jn=s((function(t){var e=W.f,n=nt("meta"),r=0,i=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},a=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!P(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!L(t,n)){if(!i(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!L(t,n)){if(!i(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return Fn&&a.REQUIRED&&i(t)&&!L(t,n)&&o(t),t}};ot[n]=!0})),kn=(jn.REQUIRED,jn.fastKey,jn.getWeakData,jn.onFreeze,jn.onFreeze),Bn=Object.freeze,Gn=_((function(){Bn(1)}));qt({target:"Object",stat:!0,forced:Gn,sham:!Fn},{freeze:function(t){return Bn&&P(t)?Bn(kn(t)):t}});var Wn=k.f,Vn=_((function(){Wn(1)}));qt({target:"Object",stat:!0,forced:!m||Vn,sham:!m},{getOwnPropertyDescriptor:function(t,e){return Wn(C(t),e)}});var Kn=_((function(){Ce(1)}));qt({target:"Object",stat:!0,forced:Kn},{keys:function(t){return Ce(Jt(t))}});var qn={};qn[te("toStringTag")]="z";var Yn="[object z]"===String(qn),Jn=te("toStringTag"),Hn="Arguments"==T(function(){return arguments}()),zn=Yn?T:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),Jn))?n:Hn?T(e):"Object"==(r=T(e))&&"function"==typeof e.callee?"Arguments":r},Qn=Yn?{}.toString:function(){return"[object "+zn(this)+"]"};Yn||yt(Object.prototype,"toString",Qn,{unsafe:!0});var $n=v.Promise,Xn=function(t,e,n){for(var r in e)yt(t,r,e[r],n);return t},Zn=te("species"),tr=function(t){var e=_t(t),n=W.f;m&&e&&!e[Zn]&&n(e,Zn,{configurable:!0,get:function(){return this}})},er=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},nr=te("iterator"),rr=Array.prototype,ir=function(t){return void 0!==t&&(Ve.Array===t||rr[nr]===t)},or=te("iterator"),ar=function(t){if(null!=t)return t[or]||t["@@iterator"]||Ve[zn(t)]},ur=function(t,e,n,r){try{return r?e(B(n)[0],n[1]):e(n)}catch(e){var i=t.return;throw void 0!==i&&B(i.call(t)),e}},sr=s((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,i,o){var a,u,s,c,f,l,d,h=ye(n,r,i?2:1);if(o)a=t;else{if("function"!=typeof(u=ar(t)))throw TypeError("Target is not iterable");if(ir(u)){for(s=0,c=St(t.length);c>s;s++)if((f=i?h(B(d=t[s])[0],d[1]):h(t[s]))&&f instanceof e)return f;return new e(!1)}a=u.call(t)}for(l=a.next;!(d=l.call(a)).done;)if("object"==typeof(f=ur(a,h,d.value,i))&&f&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}})),cr=te("iterator"),fr=!1;try{var lr=0,dr={next:function(){return{done:!!lr++}},return:function(){fr=!0}};dr[cr]=function(){return this},Array.from(dr,(function(){throw 2}))}catch(t){}var hr,pr,yr,gr=function(t,e){if(!e&&!fr)return!1;var n=!1;try{var r={};r[cr]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},vr=te("species"),_r=function(t,e){var n,r=B(t).constructor;return void 0===r||null==(n=B(r)[vr])?e:pe(n)},mr=/(iphone|ipod|ipad).*applewebkit/i.test(re),br=v.location,Er=v.setImmediate,Ar=v.clearImmediate,Sr=v.process,wr=v.MessageChannel,Tr=v.Dispatch,Or=0,Ir={},Nr=function(t){if(Ir.hasOwnProperty(t)){var e=Ir[t];delete Ir[t],e()}},Cr=function(t){return function(){Nr(t)}},Pr=function(t){Nr(t.data)},Rr=function(t){v.postMessage(t+"",br.protocol+"//"+br.host)};Er&&Ar||(Er=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ir[++Or]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},hr(Or),Or},Ar=function(t){delete Ir[t]},"process"==T(Sr)?hr=function(t){Sr.nextTick(Cr(t))}:Tr&&Tr.now?hr=function(t){Tr.now(Cr(t))}:wr&&!mr?(yr=(pr=new wr).port2,pr.port1.onmessage=Pr,hr=ye(yr.postMessage,yr,1)):!v.addEventListener||"function"!=typeof postMessage||v.importScripts||_(Rr)||"file:"===br.protocol?hr="onreadystatechange"in U("script")?function(t){Re.appendChild(U("script")).onreadystatechange=function(){Re.removeChild(this),Nr(t)}}:function(t){setTimeout(Cr(t),0)}:(hr=Rr,v.addEventListener("message",Pr,!1)));var Mr,Lr,xr,Dr,Ur,Fr,jr,kr,Br={set:Er,clear:Ar},Gr=k.f,Wr=Br.set,Vr=v.MutationObserver||v.WebKitMutationObserver,Kr=v.process,qr=v.Promise,Yr="process"==T(Kr),Jr=Gr(v,"queueMicrotask"),Hr=Jr&&Jr.value;Hr||(Mr=function(){var t,e;for(Yr&&(t=Kr.domain)&&t.exit();Lr;){e=Lr.fn,Lr=Lr.next;try{e()}catch(t){throw Lr?Dr():xr=void 0,t}}xr=void 0,t&&t.enter()},Yr?Dr=function(){Kr.nextTick(Mr)}:Vr&&!mr?(Ur=!0,Fr=document.createTextNode(""),new Vr(Mr).observe(Fr,{characterData:!0}),Dr=function(){Fr.data=Ur=!Ur}):qr&&qr.resolve?(jr=qr.resolve(void 0),kr=jr.then,Dr=function(){kr.call(jr,Mr)}):Dr=function(){Wr.call(v,Mr)});var zr,Qr,$r,Xr,Zr=Hr||function(t){var e={fn:t,next:void 0};xr&&(xr.next=e),Lr||(Lr=e,Dr()),xr=e},ti=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=pe(e),this.reject=pe(n)},ei={f:function(t){return new ti(t)}},ni=function(t,e){if(B(t),P(e)&&e.constructor===t)return e;var n=ei.f(t);return(0,n.resolve)(e),n.promise},ri=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},ii=Br.set,oi=te("species"),ai="Promise",ui=pt.get,si=pt.set,ci=pt.getterFor(ai),fi=$n,li=v.TypeError,di=v.document,hi=v.process,pi=_t("fetch"),yi=ei.f,gi=yi,vi="process"==T(hi),_i=!!(di&&di.createEvent&&v.dispatchEvent),mi=Vt(ai,(function(){if(!(Q(fi)!==String(fi))){if(66===ue)return!0;if(!vi&&"function"!=typeof PromiseRejectionEvent)return!0}if(ue>=51&&/native code/.test(fi))return!1;var t=fi.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[oi]=e,!(t.then((function(){}))instanceof e)})),bi=mi||!gr((function(t){fi.all(t).catch((function(){}))})),Ei=function(t){var e;return!(!P(t)||"function"!=typeof(e=t.then))&&e},Ai=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;Zr((function(){for(var i=e.value,o=1==e.state,a=0;r.length>a;){var u,s,c,f=r[a++],l=o?f.ok:f.fail,d=f.resolve,h=f.reject,p=f.domain;try{l?(o||(2===e.rejection&&Oi(t,e),e.rejection=1),!0===l?u=i:(p&&p.enter(),u=l(i),p&&(p.exit(),c=!0)),u===f.promise?h(li("Promise-chain cycle")):(s=Ei(u))?s.call(u,d,h):d(u)):h(i)}catch(t){p&&!c&&p.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&wi(t,e)}))}},Si=function(t,e,n){var r,i;_i?((r=di.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),v.dispatchEvent(r)):r={promise:e,reason:n},(i=v["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},wi=function(t,e){ii.call(v,(function(){var n,r=e.value;if(Ti(e)&&(n=ri((function(){vi?hi.emit("unhandledRejection",r,t):Si("unhandledrejection",t,r)})),e.rejection=vi||Ti(e)?2:1,n.error))throw n.value}))},Ti=function(t){return 1!==t.rejection&&!t.parent},Oi=function(t,e){ii.call(v,(function(){vi?hi.emit("rejectionHandled",t):Si("rejectionhandled",t,e.value)}))},Ii=function(t,e,n,r){return function(i){t(e,n,i,r)}},Ni=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Ai(t,e,!0))},Ci=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw li("Promise can't be resolved itself");var i=Ei(n);i?Zr((function(){var r={done:!1};try{i.call(n,Ii(Ci,t,r,e),Ii(Ni,t,r,e))}catch(n){Ni(t,r,n,e)}})):(e.value=n,e.state=1,Ai(t,e,!1))}catch(n){Ni(t,{done:!1},n,e)}}};mi&&(fi=function(t){er(this,fi,ai),pe(t),zr.call(this);var e=ui(this);try{t(Ii(Ci,this,e),Ii(Ni,this,e))}catch(t){Ni(this,e,t)}},(zr=function(t){si(this,{type:ai,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Xn(fi.prototype,{then:function(t,e){var n=ci(this),r=yi(_r(this,fi));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=vi?hi.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Ai(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Qr=function(){var t=new zr,e=ui(t);this.promise=t,this.resolve=Ii(Ci,t,e),this.reject=Ii(Ni,t,e)},ei.f=yi=function(t){return t===fi||t===$r?new Qr(t):gi(t)},"function"==typeof $n&&(Xr=$n.prototype.then,yt($n.prototype,"then",(function(t,e){var n=this;return new fi((function(t,e){Xr.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof pi&&qt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return ni(fi,pi.apply(v,arguments))}}))),qt({global:!0,wrap:!0,forced:mi},{Promise:fi}),Ze(fi,ai,!1),tr(ai),$r=_t(ai),qt({target:ai,stat:!0,forced:mi},{reject:function(t){var e=yi(this);return e.reject.call(void 0,t),e.promise}}),qt({target:ai,stat:!0,forced:mi},{resolve:function(t){return ni(this,t)}}),qt({target:ai,stat:!0,forced:bi},{all:function(t){var e=this,n=yi(e),r=n.resolve,i=n.reject,o=ri((function(){var n=pe(e.resolve),o=[],a=0,u=1;sr(t,(function(t){var s=a++,c=!1;o.push(void 0),u++,n.call(e,t).then((function(t){c||(c=!0,o[s]=t,--u||r(o))}),i)})),--u||r(o)}));return o.error&&i(o.value),n.promise},race:function(t){var e=this,n=yi(e),r=n.reject,i=ri((function(){var i=pe(e.resolve);sr(t,(function(t){i.call(e,t).then(n.resolve,r)}))}));return i.error&&r(i.value),n.promise}});var Pi=function(){var t=B(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Ri(t,e){return RegExp(t,e)}var Mi,Li,xi={UNSUPPORTED_Y:_((function(){var t=Ri("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:_((function(){var t=Ri("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Di=RegExp.prototype.exec,Ui=String.prototype.replace,Fi=Di,ji=(Mi=/a/,Li=/b*/g,Di.call(Mi,"a"),Di.call(Li,"a"),0!==Mi.lastIndex||0!==Li.lastIndex),ki=xi.UNSUPPORTED_Y||xi.BROKEN_CARET,Bi=void 0!==/()??/.exec("")[1];(ji||Bi||ki)&&(Fi=function(t){var e,n,r,i,o=this,a=ki&&o.sticky,u=Pi.call(o),s=o.source,c=0,f=t;return a&&(-1===(u=u.replace("y","")).indexOf("g")&&(u+="g"),f=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(s="(?: "+s+")",f=" "+f,c++),n=new RegExp("^(?:"+s+")",u)),Bi&&(n=new RegExp("^"+s+"$(?!\\s)",u)),ji&&(e=o.lastIndex),r=Di.call(a?n:o,f),a?r?(r.input=r.input.slice(c),r[0]=r[0].slice(c),r.index=o.lastIndex,o.lastIndex+=r[0].length):o.lastIndex=0:ji&&r&&(o.lastIndex=o.global?r.index+r[0].length:e),Bi&&r&&r.length>1&&Ui.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r});var Gi=Fi;qt({target:"RegExp",proto:!0,forced:/./.exec!==Gi},{exec:Gi});var Wi=RegExp.prototype,Vi=Wi.toString,Ki=_((function(){return"/a/b"!=Vi.call({source:"a",flags:"b"})})),qi="toString"!=Vi.name;(Ki||qi)&&yt(RegExp.prototype,"toString",(function(){var t=B(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in Wi)?Pi.call(t):n)}),{unsafe:!0});var Yi=te("species"),Ji=!_((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Hi="$0"==="a".replace(/./,"$0"),zi=te("replace"),Qi=!!/./[zi]&&""===/./[zi]("a","$0"),$i=!_((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),Xi=function(t,e,n,r){var i=te(t),o=!_((function(){var e={};return e[i]=function(){return 7},7!=""[t](e)})),a=o&&!_((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[Yi]=function(){return n},n.flags="",n[i]=/./[i]),n.exec=function(){return e=!0,null},n[i](""),!e}));if(!o||!a||"replace"===t&&(!Ji||!Hi||Qi)||"split"===t&&!$i){var u=/./[i],s=n(i,""[t],(function(t,e,n,r,i){return e.exec===Gi?o&&!i?{done:!0,value:u.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Hi,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Qi}),c=s[0],f=s[1];yt(String.prototype,t,c),yt(RegExp.prototype,i,2==e?function(t,e){return f.call(t,this,e)}:function(t){return f.call(t,this)})}r&&V(RegExp.prototype[i],"sham",!0)},Zi=function(t){return function(e,n){var r,i,o=String(N(e)),a=Et(n),u=o.length;return a<0||a>=u?t?"":void 0:(r=o.charCodeAt(a))<55296||r>56319||a+1===u||(i=o.charCodeAt(a+1))<56320||i>57343?t?o.charAt(a):r:t?o.slice(a,a+2):i-56320+(r-55296<<10)+65536}},to={codeAt:Zi(!1),charAt:Zi(!0)},eo=to.charAt,no=function(t,e,n){return e+(n?eo(t,e).length:1)},ro=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==T(t))throw TypeError("RegExp#exec called on incompatible receiver");return Gi.call(t,e)};Xi("match",1,(function(t,e,n){return[function(e){var n=N(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=B(t),o=String(this);if(!i.global)return ro(i,o);var a=i.unicode;i.lastIndex=0;for(var u,s=[],c=0;null!==(u=ro(i,o));){var f=String(u[0]);s[c]=f,""===f&&(i.lastIndex=no(o,St(i.lastIndex),a)),c++}return 0===c?null:s}]}));var io=Math.max,oo=Math.min,ao=Math.floor,uo=/\$([$&'`]|\d\d?|<[^>]*>)/g,so=/\$([$&'`]|\d\d?)/g;Xi("replace",2,(function(t,e,n,r){var i=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=r.REPLACE_KEEPS_$0,a=i?"$":"$0";return[function(n,r){var i=N(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,i,r):e.call(String(i),n,r)},function(t,r){if(!i&&o||"string"==typeof r&&-1===r.indexOf(a)){var s=n(e,t,this,r);if(s.done)return s.value}var c=B(t),f=String(this),l="function"==typeof r;l||(r=String(r));var d=c.global;if(d){var h=c.unicode;c.lastIndex=0}for(var p=[];;){var y=ro(c,f);if(null===y)break;if(p.push(y),!d)break;""===String(y[0])&&(c.lastIndex=no(f,St(c.lastIndex),h))}for(var g,v="",_=0,m=0;m<p.length;m++){y=p[m];for(var b=String(y[0]),E=io(oo(Et(y.index),f.length),0),A=[],S=1;S<y.length;S++)A.push(void 0===(g=y[S])?g:String(g));var w=y.groups;if(l){var T=[b].concat(A,E,f);void 0!==w&&T.push(w);var O=String(r.apply(void 0,T))}else O=u(b,f,E,A,w,r);E>=_&&(v+=f.slice(_,E)+O,_=E+b.length)}return v+f.slice(_)}];function u(t,n,r,i,o,a){var u=r+t.length,s=i.length,c=so;return void 0!==o&&(o=Jt(o),c=uo),e.call(a,c,(function(e,a){var c;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(u);case"<":c=o[a.slice(1,-1)];break;default:var f=+a;if(0===f)return e;if(f>s){var l=ao(f/10);return 0===l?e:l<=s?void 0===i[l-1]?a.charAt(1):i[l-1]+a.charAt(1):e}c=i[f-1]}return void 0===c?"":c}))}}));var co=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e};Xi("search",1,(function(t,e,n){return[function(e){var n=N(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var i=B(t),o=String(this),a=i.lastIndex;co(a,0)||(i.lastIndex=0);var u=ro(i,o);return co(i.lastIndex,a)||(i.lastIndex=a),null===u?-1:u.index}]}));var fo=te("match"),lo=[].push,ho=Math.min,po=!_((function(){return!RegExp(4294967295,"y")}));Xi("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r,i,o=String(N(this)),a=void 0===n?4294967295:n>>>0;if(0===a)return[];if(void 0===t)return[o];if(!P(r=t)||!(void 0!==(i=r[fo])?i:"RegExp"==T(r)))return e.call(o,t,a);for(var u,s,c,f=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,h=new RegExp(t.source,l+"g");(u=Gi.call(h,o))&&!((s=h.lastIndex)>d&&(f.push(o.slice(d,u.index)),u.length>1&&u.index<o.length&&lo.apply(f,u.slice(1)),c=u[0].length,d=s,f.length>=a));)h.lastIndex===u.index&&h.lastIndex++;return d===o.length?!c&&h.test("")||f.push(""):f.push(o.slice(d)),f.length>a?f.slice(0,a):f}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var i=N(this),o=null==e?void 0:e[t];return void 0!==o?o.call(e,i,n):r.call(String(i),e,n)},function(t,i){var o=n(r,t,this,i,r!==e);if(o.done)return o.value;var a=B(t),u=String(this),s=_r(a,RegExp),c=a.unicode,f=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(po?"y":"g"),l=new s(po?a:"^(?:"+a.source+")",f),d=void 0===i?4294967295:i>>>0;if(0===d)return[];if(0===u.length)return null===ro(l,u)?[u]:[];for(var h=0,p=0,y=[];p<u.length;){l.lastIndex=po?p:0;var g,v=ro(l,po?u:u.slice(p));if(null===v||(g=ho(St(l.lastIndex+(po?0:p)),u.length))===h)p=no(u,p,c);else{if(y.push(u.slice(h,p)),y.length===d)return y;for(var _=1;_<=v.length-1;_++)if(y.push(v[_]),y.length===d)return y;p=h=g}}return y.push(u.slice(h)),y}]}),!po);var yo,go="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,vo=W.f,_o=v.Int8Array,mo=_o&&_o.prototype,bo=v.Uint8ClampedArray,Eo=bo&&bo.prototype,Ao=_o&&Je(_o),So=mo&&Je(mo),wo=Object.prototype,To=wo.isPrototypeOf,Oo=te("toStringTag"),Io=nt("TYPED_ARRAY_TAG"),No=go&&!!nn&&"Opera"!==zn(v.opera),Co=!1,Po={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Ro=function(t){return P(t)&&L(Po,zn(t))};for(yo in Po)v[yo]||(No=!1);if((!No||"function"!=typeof Ao||Ao===Function.prototype)&&(Ao=function(){throw TypeError("Incorrect invocation")},No))for(yo in Po)v[yo]&&nn(v[yo],Ao);if((!No||!So||So===wo)&&(So=Ao.prototype,No))for(yo in Po)v[yo]&&nn(v[yo].prototype,So);if(No&&Je(Eo)!==So&&nn(Eo,So),m&&!L(So,Oo))for(yo in Co=!0,vo(So,Oo,{get:function(){return P(this)?this[Io]:void 0}}),Po)v[yo]&&V(v[yo],Io,yo);var Mo={NATIVE_ARRAY_BUFFER_VIEWS:No,TYPED_ARRAY_TAG:Co&&Io,aTypedArray:function(t){if(Ro(t))return t;throw TypeError("Target is not a typed array")},aTypedArrayConstructor:function(t){if(nn){if(To.call(Ao,t))return t}else for(var e in Po)if(L(Po,yo)){var n=v[e];if(n&&(t===n||To.call(n,t)))return t}throw TypeError("Target is not a typed array constructor")},exportTypedArrayMethod:function(t,e,n){if(m){if(n)for(var r in Po){var i=v[r];i&&L(i.prototype,t)&&delete i.prototype[t]}So[t]&&!n||yt(So,t,n?e:No&&mo[t]||e)}},exportTypedArrayStaticMethod:function(t,e,n){var r,i;if(m){if(nn){if(n)for(r in Po)(i=v[r])&&L(i,t)&&delete i[t];if(Ao[t]&&!n)return;try{return yt(Ao,t,n?e:No&&_o[t]||e)}catch(t){}}for(r in Po)!(i=v[r])||i[t]&&!n||yt(i,t,e)}},isView:function(t){var e=zn(t);return"DataView"===e||L(Po,e)},isTypedArray:Ro,TypedArray:Ao,TypedArrayPrototype:So},Lo=Mo.NATIVE_ARRAY_BUFFER_VIEWS,xo=v.ArrayBuffer,Do=v.Int8Array,Uo=!Lo||!_((function(){Do(1)}))||!_((function(){new Do(-1)}))||!gr((function(t){new Do,new Do(null),new Do(1.5),new Do(t)}),!0)||_((function(){return 1!==new Do(new xo(2),1,void 0).length})),Fo=function(t){if(void 0===t)return 0;var e=Et(t),n=St(e);if(e!==n)throw RangeError("Wrong length or index");return n},jo=Math.abs,ko=Math.pow,Bo=Math.floor,Go=Math.log,Wo=Math.LN2,Vo=function(t,e,n){var r,i,o,a=new Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,f=23===e?ko(2,-24)-ko(2,-77):0,l=t<0||0===t&&1/t<0?1:0,d=0;for((t=jo(t))!=t||t===1/0?(i=t!=t?1:0,r=s):(r=Bo(Go(t)/Wo),t*(o=ko(2,-r))<1&&(r--,o*=2),(t+=r+c>=1?f/o:f*ko(2,1-c))*o>=2&&(r++,o/=2),r+c>=s?(i=0,r=s):r+c>=1?(i=(t*o-1)*ko(2,e),r+=c):(i=t*ko(2,c-1)*ko(2,e),r=0));e>=8;a[d++]=255&i,i/=256,e-=8);for(r=r<<e|i,u+=e;u>0;a[d++]=255&r,r/=256,u-=8);return a[--d]|=128*l,a},Ko=function(t,e){var n,r=t.length,i=8*r-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=r-1,c=t[s--],f=127&c;for(c>>=7;u>0;f=256*f+t[s],s--,u-=8);for(n=f&(1<<-u)-1,f>>=-u,u+=e;u>0;n=256*n+t[s],s--,u-=8);if(0===f)f=1-a;else{if(f===o)return n?NaN:c?-1/0:1/0;n+=ko(2,e),f-=a}return(c?-1:1)*n*ko(2,f-e)},qo=function(t){for(var e=Jt(this),n=St(e.length),r=arguments.length,i=Ot(r>1?arguments[1]:void 0,n),o=r>2?arguments[2]:void 0,a=void 0===o?n:Ot(o,n);a>i;)e[i++]=t;return e},Yo=Lt.f,Jo=W.f,Ho=pt.get,zo=pt.set,Qo=v.ArrayBuffer,$o=Qo,Xo=v.DataView,Zo=Xo&&Xo.prototype,ta=Object.prototype,ea=v.RangeError,na=Vo,ra=Ko,ia=function(t){return[255&t]},oa=function(t){return[255&t,t>>8&255]},aa=function(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]},ua=function(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]},sa=function(t){return na(t,23,4)},ca=function(t){return na(t,52,8)},fa=function(t,e){Jo(t.prototype,e,{get:function(){return Ho(this)[e]}})},la=function(t,e,n,r){var i=Fo(n),o=Ho(t);if(i+e>o.byteLength)throw ea("Wrong index");var a=Ho(o.buffer).bytes,u=i+o.byteOffset,s=a.slice(u,u+e);return r?s:s.reverse()},da=function(t,e,n,r,i,o){var a=Fo(n),u=Ho(t);if(a+e>u.byteLength)throw ea("Wrong index");for(var s=Ho(u.buffer).bytes,c=a+u.byteOffset,f=r(+i),l=0;l<e;l++)s[c+l]=f[o?l:e-l-1]};if(go){if(!_((function(){Qo(1)}))||!_((function(){new Qo(-1)}))||_((function(){return new Qo,new Qo(1.5),new Qo(NaN),"ArrayBuffer"!=Qo.name}))){for(var ha,pa=($o=function(t){return er(this,$o),new Qo(Fo(t))}).prototype=Qo.prototype,ya=Yo(Qo),ga=0;ya.length>ga;)(ha=ya[ga++])in $o||V($o,ha,Qo[ha]);pa.constructor=$o}nn&&Je(Zo)!==ta&&nn(Zo,ta);var va=new Xo(new $o(2)),_a=Zo.setInt8;va.setInt8(0,2147483648),va.setInt8(1,2147483649),!va.getInt8(0)&&va.getInt8(1)||Xn(Zo,{setInt8:function(t,e){_a.call(this,t,e<<24>>24)},setUint8:function(t,e){_a.call(this,t,e<<24>>24)}},{unsafe:!0})}else $o=function(t){er(this,$o,"ArrayBuffer");var e=Fo(t);zo(this,{bytes:qo.call(new Array(e),0),byteLength:e}),m||(this.byteLength=e)},Xo=function(t,e,n){er(this,Xo,"DataView"),er(t,$o,"DataView");var r=Ho(t).byteLength,i=Et(e);if(i<0||i>r)throw ea("Wrong offset");if(i+(n=void 0===n?r-i:St(n))>r)throw ea("Wrong length");zo(this,{buffer:t,byteLength:n,byteOffset:i}),m||(this.buffer=t,this.byteLength=n,this.byteOffset=i)},m&&(fa($o,"byteLength"),fa(Xo,"buffer"),fa(Xo,"byteLength"),fa(Xo,"byteOffset")),Xn(Xo.prototype,{getInt8:function(t){return la(this,1,t)[0]<<24>>24},getUint8:function(t){return la(this,1,t)[0]},getInt16:function(t){var e=la(this,2,t,arguments.length>1?arguments[1]:void 0);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=la(this,2,t,arguments.length>1?arguments[1]:void 0);return e[1]<<8|e[0]},getInt32:function(t){return ua(la(this,4,t,arguments.length>1?arguments[1]:void 0))},getUint32:function(t){return ua(la(this,4,t,arguments.length>1?arguments[1]:void 0))>>>0},getFloat32:function(t){return ra(la(this,4,t,arguments.length>1?arguments[1]:void 0),23)},getFloat64:function(t){return ra(la(this,8,t,arguments.length>1?arguments[1]:void 0),52)},setInt8:function(t,e){da(this,1,t,ia,e)},setUint8:function(t,e){da(this,1,t,ia,e)},setInt16:function(t,e){da(this,2,t,oa,e,arguments.length>2?arguments[2]:void 0)},setUint16:function(t,e){da(this,2,t,oa,e,arguments.length>2?arguments[2]:void 0)},setInt32:function(t,e){da(this,4,t,aa,e,arguments.length>2?arguments[2]:void 0)},setUint32:function(t,e){da(this,4,t,aa,e,arguments.length>2?arguments[2]:void 0)},setFloat32:function(t,e){da(this,4,t,sa,e,arguments.length>2?arguments[2]:void 0)},setFloat64:function(t,e){da(this,8,t,ca,e,arguments.length>2?arguments[2]:void 0)}});Ze($o,"ArrayBuffer"),Ze(Xo,"DataView");var ma={ArrayBuffer:$o,DataView:Xo},ba=function(t,e){var n=function(t){var e=Et(t);if(e<0)throw RangeError("The argument can't be less than 0");return e}(t);if(n%e)throw RangeError("Wrong offset");return n},Ea=Mo.aTypedArrayConstructor,Aa=function(t){var e,n,r,i,o,a,u=Jt(t),s=arguments.length,c=s>1?arguments[1]:void 0,f=void 0!==c,l=ar(u);if(null!=l&&!ir(l))for(a=(o=l.call(u)).next,u=[];!(i=a.call(o)).done;)u.push(i.value);for(f&&s>2&&(c=ye(c,arguments[2],2)),n=St(u.length),r=new(Ea(this))(n),e=0;n>e;e++)r[e]=f?c(u[e],e):u[e];return r};s((function(t){var e=Lt.f,n=_e.forEach,r=pt.get,i=pt.set,o=W.f,a=k.f,u=Math.round,s=v.RangeError,c=ma.ArrayBuffer,f=ma.DataView,l=Mo.NATIVE_ARRAY_BUFFER_VIEWS,d=Mo.TYPED_ARRAY_TAG,h=Mo.TypedArray,p=Mo.TypedArrayPrototype,y=Mo.aTypedArrayConstructor,g=Mo.isTypedArray,_=function(t,e){for(var n=0,r=e.length,i=new(y(t))(r);r>n;)i[n]=e[n++];return i},b=function(t,e){o(t,e,{get:function(){return r(this)[e]}})},E=function(t){var e;return t instanceof c||"ArrayBuffer"==(e=zn(t))||"SharedArrayBuffer"==e},A=function(t,e){return g(t)&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},w=function(t,e){return A(t,e=R(e,!0))?S(2,t[e]):a(t,e)},T=function(t,e,n){return!(A(t,e=R(e,!0))&&P(n)&&L(n,"value"))||L(n,"get")||L(n,"set")||n.configurable||L(n,"writable")&&!n.writable||L(n,"enumerable")&&!n.enumerable?o(t,e,n):(t[e]=n.value,t)};m?(l||(k.f=w,W.f=T,b(p,"buffer"),b(p,"byteOffset"),b(p,"byteLength"),b(p,"length")),qt({target:"Object",stat:!0,forced:!l},{getOwnPropertyDescriptor:w,defineProperty:T}),t.exports=function(t,a,y){var m=t.match(/\d+$/)[0]/8,b=t+(y?"Clamped":"")+"Array",A="get"+t,S="set"+t,w=v[b],T=w,O=T&&T.prototype,I={},N=function(t,e){o(t,e,{get:function(){return function(t,e){var n=r(t);return n.view[A](e*m+n.byteOffset,!0)}(this,e)},set:function(t){return function(t,e,n){var i=r(t);y&&(n=(n=u(n))<0?0:n>255?255:255&n),i.view[S](e*m+i.byteOffset,n,!0)}(this,e,t)},enumerable:!0})};l?Uo&&(T=a((function(t,e,n,r){return er(t,T,b),mn(P(e)?E(e)?void 0!==r?new w(e,ba(n,m),r):void 0!==n?new w(e,ba(n,m)):new w(e):g(e)?_(T,e):Aa.call(T,e):new w(Fo(e)),t,T)})),nn&&nn(T,h),n(e(w),(function(t){t in T||V(T,t,w[t])})),T.prototype=O):(T=a((function(t,e,n,r){er(t,T,b);var o,a,u,l=0,d=0;if(P(e)){if(!E(e))return g(e)?_(T,e):Aa.call(T,e);o=e,d=ba(n,m);var h=e.byteLength;if(void 0===r){if(h%m)throw s("Wrong length");if((a=h-d)<0)throw s("Wrong length")}else if((a=St(r)*m)+d>h)throw s("Wrong length");u=a/m}else u=Fo(e),o=new c(a=u*m);for(i(t,{buffer:o,byteOffset:d,byteLength:a,length:u,view:new f(o)});l<u;)N(t,l++)})),nn&&nn(T,h),O=T.prototype=Ue(p)),O.constructor!==T&&V(O,"constructor",T),d&&V(O,d,b),I[b]=T,qt({global:!0,forced:T!=w,sham:!l},I),"BYTES_PER_ELEMENT"in T||V(T,"BYTES_PER_ELEMENT",m),"BYTES_PER_ELEMENT"in O||V(O,"BYTES_PER_ELEMENT",m),tr(b)}):t.exports=function(){}}))("Uint8",(function(t){return function(e,n,r){return t(this,e,n,r)}}));var Sa=Math.min,wa=[].copyWithin||function(t,e){var n=Jt(this),r=St(n.length),i=Ot(t,r),o=Ot(e,r),a=arguments.length>2?arguments[2]:void 0,u=Sa((void 0===a?r:Ot(a,r))-o,r-i),s=1;for(o<i&&i<o+u&&(s=-1,o+=u-1,i+=u-1);u-- >0;)o in n?n[i]=n[o]:delete n[i],i+=s,o+=s;return n},Ta=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("copyWithin",(function(t,e){return wa.call(Ta(this),t,e,arguments.length>2?arguments[2]:void 0)}));var Oa=_e.every,Ia=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("every",(function(t){return Oa(Ia(this),t,arguments.length>1?arguments[1]:void 0)}));var Na=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("fill",(function(t){return qo.apply(Na(this),arguments)}));var Ca=_e.filter,Pa=Mo.aTypedArray,Ra=Mo.aTypedArrayConstructor;(0,Mo.exportTypedArrayMethod)("filter",(function(t){for(var e=Ca(Pa(this),t,arguments.length>1?arguments[1]:void 0),n=_r(this,this.constructor),r=0,i=e.length,o=new(Ra(n))(i);i>r;)o[r]=e[r++];return o}));var Ma=_e.find,La=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("find",(function(t){return Ma(La(this),t,arguments.length>1?arguments[1]:void 0)}));var xa=_e.findIndex,Da=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("findIndex",(function(t){return xa(Da(this),t,arguments.length>1?arguments[1]:void 0)}));var Ua=_e.forEach,Fa=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("forEach",(function(t){Ua(Fa(this),t,arguments.length>1?arguments[1]:void 0)}));var ja=Nt.includes,ka=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("includes",(function(t){return ja(ka(this),t,arguments.length>1?arguments[1]:void 0)}));var Ba=Nt.indexOf,Ga=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("indexOf",(function(t){return Ba(Ga(this),t,arguments.length>1?arguments[1]:void 0)}));var Wa=te("iterator"),Va=v.Uint8Array,Ka=ln.values,qa=ln.keys,Ya=ln.entries,Ja=Mo.aTypedArray,Ha=Mo.exportTypedArrayMethod,za=Va&&Va.prototype[Wa],Qa=!!za&&("values"==za.name||null==za.name),$a=function(){return Ka.call(Ja(this))};Ha("entries",(function(){return Ya.call(Ja(this))})),Ha("keys",(function(){return qa.call(Ja(this))})),Ha("values",$a,!Qa),Ha(Wa,$a,!Qa);var Xa=Mo.aTypedArray,Za=[].join;(0,Mo.exportTypedArrayMethod)("join",(function(t){return Za.apply(Xa(this),arguments)}));var tu=Math.min,eu=[].lastIndexOf,nu=!!eu&&1/[1].lastIndexOf(1,-0)<0,ru=me("lastIndexOf"),iu=Se("indexOf",{ACCESSORS:!0,1:0}),ou=nu||!ru||!iu?function(t){if(nu)return eu.apply(this,arguments)||0;var e=C(this),n=St(e.length),r=n-1;for(arguments.length>1&&(r=tu(r,Et(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}:eu,au=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("lastIndexOf",(function(t){return ou.apply(au(this),arguments)}));var uu=_e.map,su=Mo.aTypedArray,cu=Mo.aTypedArrayConstructor;(0,Mo.exportTypedArrayMethod)("map",(function(t){return uu(su(this),t,arguments.length>1?arguments[1]:void 0,(function(t,e){return new(cu(_r(t,t.constructor)))(e)}))}));var fu=function(t){return function(e,n,r,i){pe(n);var o=Jt(e),a=I(o),u=St(o.length),s=t?u-1:0,c=t?-1:1;if(r<2)for(;;){if(s in a){i=a[s],s+=c;break}if(s+=c,t?s<0:u<=s)throw TypeError("Reduce of empty array with no initial value")}for(;t?s>=0:u>s;s+=c)s in a&&(i=n(i,a[s],s,o));return i}},lu={left:fu(!1),right:fu(!0)},du=lu.left,hu=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("reduce",(function(t){return du(hu(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var pu=lu.right,yu=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("reduceRight",(function(t){return pu(yu(this),t,arguments.length,arguments.length>1?arguments[1]:void 0)}));var gu=Mo.aTypedArray,vu=Mo.exportTypedArrayMethod,_u=Math.floor;vu("reverse",(function(){for(var t,e=gu(this).length,n=_u(e/2),r=0;r<n;)t=this[r],this[r++]=this[--e],this[e]=t;return this}));var mu=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("set",(function(t){mu(this);var e=ba(arguments.length>1?arguments[1]:void 0,1),n=this.length,r=Jt(t),i=St(r.length),o=0;if(i+e>n)throw RangeError("Wrong length");for(;o<i;)this[e+o]=r[o++]}),_((function(){new Int8Array(1).set({})})));var bu=Mo.aTypedArray,Eu=Mo.aTypedArrayConstructor,Au=[].slice;(0,Mo.exportTypedArrayMethod)("slice",(function(t,e){for(var n=Au.call(bu(this),t,e),r=_r(this,this.constructor),i=0,o=n.length,a=new(Eu(r))(o);o>i;)a[i]=n[i++];return a}),_((function(){new Int8Array(1).slice()})));var Su=_e.some,wu=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("some",(function(t){return Su(wu(this),t,arguments.length>1?arguments[1]:void 0)}));var Tu=Mo.aTypedArray,Ou=[].sort;(0,Mo.exportTypedArrayMethod)("sort",(function(t){return Ou.call(Tu(this),t)}));var Iu=Mo.aTypedArray;(0,Mo.exportTypedArrayMethod)("subarray",(function(t,e){var n=Iu(this),r=n.length,i=Ot(t,r);return new(_r(n,n.constructor))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,St((void 0===e?r:Ot(e,r))-i))}));var Nu=v.Int8Array,Cu=Mo.aTypedArray,Pu=Mo.exportTypedArrayMethod,Ru=[].toLocaleString,Mu=[].slice,Lu=!!Nu&&_((function(){Ru.call(new Nu(1))}));Pu("toLocaleString",(function(){return Ru.apply(Lu?Mu.call(Cu(this)):Cu(this),arguments)}),_((function(){return[1,2].toLocaleString()!=new Nu([1,2]).toLocaleString()}))||!_((function(){Nu.prototype.toLocaleString.call([1,2])})));var xu=Mo.exportTypedArrayMethod,Du=v.Uint8Array,Uu=Du&&Du.prototype||{},Fu=[].toString,ju=[].join;_((function(){Fu.call({})}))&&(Fu=function(){return ju.call(this)});var ku=Uu.toString!=Fu;xu("toString",Fu,ku);var Bu={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};for(var Gu in Bu){var Wu=v[Gu],Vu=Wu&&Wu.prototype;if(Vu&&Vu.forEach!==Ie)try{V(Vu,"forEach",Ie)}catch(t){Vu.forEach=Ie}}var Ku=s((function(t,e){function n(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}function r(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==a)return a;throw new Error("cannot find the global object")}function o(t){var e=this;return new Promise(function(r,i){var o=this;n(this,e);try{var a=function(t){return"string"==typeof t.payload?t.payload:t.payload instanceof String?t.payload.valueOf():JSON.stringify(t.payload)}(t),u=new XMLHttpRequest;if(u.open(t.method,t.url,!0),u.setRequestHeader("Content-Type","application/json"),t.headers&&Object.keys(t.headers).length>0)for(var s in t.headers)Object.prototype.hasOwnProperty.call(t.headers,s)&&u.setRequestHeader(s,t.headers[s]);u.addEventListener("readystatechange",function(){if(n(this,o),4===u.readyState){var t={status:u.status,statusText:u.statusText,headers:u.getAllResponseHeaders(),data:""};if(u.status>=200&&u.status<300)try{return t.data=JSON.parse(u.response),r(JSON.parse(JSON.stringify(t)))}catch(t){return r(u.response)}}}.bind(this)),u.addEventListener("error",function(){return n(this,o),i({status:u.status,statusText:"An error occurred during the transaction"})}.bind(this)),u.send(a)}catch(t){return i(new Error(t.message))}}.bind(this))}function u(){try{return"undefined"!=typeof process&&void 0!==process.versions.node}catch(t){return!1}}function s(){var t=this;return[1e7,1e3,4e3,8e3,1e11].join("-").replace(/[018]/g,function(e){n(this,t);var o=Number(e);return(o^function(){var t=this;if(u())return Promise.resolve().then((function(){return function(t){if(t&&t.__esModule)return t;var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}(i.default)})).then(function(e){return n(this,t),e.default.randomBytes(1)[0]}.bind(this)).catch(function(e){return n(this,t),console.error(e)}.bind(this));var e=r().crypto||r().msCrypto;return e?e.getRandomValues(new Uint8Array(1))[0]:void 0}()&15>>o/4).toString(16)}.bind(this))}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){this.url=t,this.metadata=e,this.level=-1!==window.location.search.search(/[?&]psm_debug=[1t]/)?"debug":"error"}var e=t.prototype;return e.transport=function(t,e,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var u={message:{version:this.metadata.version,level:t,appId:this.metadata.appId,wmukid:this.metadata.wmukid,eventId:s(),timestamp:(new Date).toISOString(),brand:this.metadata.brand,domain:this.metadata.domain,userAgent:window.navigator.userAgent.toString(),platform:"Web",scope:e,caller:n,data:i}};o({url:this.url,method:"POST",payload:JSON.stringify(u,null,2),headers:{type:"application/json"}})},e.debug=function(t,e){var n;if("debug"===this.level){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];(n=console).info.apply(n,["[PSM]",t,e].concat(i)),this.transport.apply(this,["debug",t,e].concat(i))}},e.error=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o;"debug"===this.level&&(o=console).error.apply(o,["[PSM]",t,e].concat(r)),this.transport.apply(this,["error",t,e].concat(r))},t}();e.Logger=c,e.generateUUID=s,e.getCookies=function(){var t=this,e=document.cookie,r={};return e.split(/\s*;\s*/).forEach(function(e){n(this,t);var i=e.split(/\s*=\s*/);r[i[0]]=i.splice(1).join("=")}.bind(this)),r},e.getCookiesArray=function(){var t=this,e=document.cookie,r=[];return e.split(/\s*;\s*/).forEach(function(e){n(this,t);var i=e.split(/\s*=\s*/),o={};o.key=i[0],o.value=i[1],r.push(o)}.bind(this)),r},e.getCurrentTime=function(){return(new Date).toISOString()},e.getGeoLocation=function(){var t=this;return new Promise(function(e,r){var i=this;n(this,t),o({url:"https://geo.ngtv.io/locate",method:"GET"}).then(function(t){return n(this,i),e(t.data)}.bind(this)).catch(function(t){return n(this,i),r(t)}.bind(this))}.bind(this))},e.getGlobalObject=r,e.getOneCookie=function(t){var e;try{decodeURIComponent(t),e=t+"="}catch(n){e=encodeURIComponent(t)+"="}var n=document.cookie.match("(^|;)\\s*"+e+"\\s*([^;]+)"),r=n&&n.pop();if(r)try{return JSON.parse(decodeURIComponent(r))}catch(t){return decodeURIComponent(r)}return null},e.isEnvNode=u,e.makeRequest=o,e.setCookie=function(t,e,n){var i;if(!t)return null;if(!e)return null;var o=new Date(Date.now()+31536e6);return i="string"==typeof e?e:JSON.stringify(e),n||(n=r().location.hostname),document.cookie=encodeURIComponent(t)+"="+encodeURIComponent(i)+";expires="+o.toUTCString()+"; domain="+n+"; samesite=Lax; path=/",e}}));u(Ku);Ku.Logger;var qu=Ku.generateUUID,Yu=Ku.getCookies,Ju=(Ku.getCookiesArray,Ku.getCurrentTime),Hu=Ku.getGeoLocation,zu=(Ku.getGlobalObject,Ku.getOneCookie),Qu=(Ku.isEnvNode,Ku.makeRequest),$u=Ku.setCookie,Xu=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MULTIPLE_INSTANCES_SUPPORT=e.UNABLE_TO_ACCESS_SESSION_STORAGE=e.UNABLE_TO_ACCESS_LOCAL_STORAGE=e.FAILED_TO_READ_CONFIG_FROM_STORAGE=e.REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT=e.FALLBACK_USED_FLAG_NOT_IN_REMOTE=e.FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED=e.FALLBACK_USED_REMOTE_LOAD_FAILED=e.FLAG_TYPE_NOT_SUPPORTED=e.CACHE_USED=e.CONFIG_CACHE_START=e.FEATURE_FLAG_RESULTS=e.FEATURE_FLAG_CONFIG_ETAG=e.FEATURE_FLAG_USER_ID=e.FEATURE_FLAG_CONFIG=e.APP_USER_ID=void 0,e.APP_USER_ID="wmAppUserId",e.FEATURE_FLAG_CONFIG="wmFeatureFlagConfig",e.FEATURE_FLAG_USER_ID="wmFeatureFlagUserId",e.FEATURE_FLAG_CONFIG_ETAG="wmFeatureFlagConfigEtag",e.FEATURE_FLAG_RESULTS="wmFeatureFlagResults",e.CONFIG_CACHE_START="wmConfigCacheStart",e.CACHE_USED="Cache was used due to remote loading failing.",e.FLAG_TYPE_NOT_SUPPORTED="A flag with the id was found, but the type is unsupported.",e.FALLBACK_USED_REMOTE_LOAD_FAILED="Fallback used because remote config loading failed.",e.FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED="Fallback or cache used because remote config loading failed.",e.FALLBACK_USED_FLAG_NOT_IN_REMOTE="Fallback used because a requested flag was present in it and not the remote.",e.REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT="Remote config used because a fallback config is not present.",e.FAILED_TO_READ_CONFIG_FROM_STORAGE="There was a problem reading the config object from storage, possibly due to invalid config JSON.",e.UNABLE_TO_ACCESS_LOCAL_STORAGE="Unable to access localStorage",e.UNABLE_TO_ACCESS_SESSION_STORAGE="Unable to access sessionStorage",e.MULTIPLE_INSTANCES_SUPPORT="A clientId must be provided for multiple instance support."}));u(Xu);Xu.MULTIPLE_INSTANCES_SUPPORT,Xu.UNABLE_TO_ACCESS_SESSION_STORAGE,Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE,Xu.FAILED_TO_READ_CONFIG_FROM_STORAGE,Xu.REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT,Xu.FALLBACK_USED_FLAG_NOT_IN_REMOTE,Xu.FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED,Xu.FALLBACK_USED_REMOTE_LOAD_FAILED,Xu.FLAG_TYPE_NOT_SUPPORTED,Xu.CACHE_USED,Xu.CONFIG_CACHE_START,Xu.FEATURE_FLAG_RESULTS,Xu.FEATURE_FLAG_CONFIG_ETAG,Xu.FEATURE_FLAG_USER_ID,Xu.FEATURE_FLAG_CONFIG,Xu.APP_USER_ID;var Zu=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureFlagStorage=void 0;var n=function(){function t(t,e){if(this.storageType=t,this.clientId=e,this.warnings=[],!this.clientId){var n={code:"MULTIPLE_INSTANCES_SUPPORT",message:""+Xu.MULTIPLE_INSTANCES_SUPPORT};this.warnings.push(n)}switch(this.storageType){case"localStorage":try{this.storage=localStorage;break}catch(t){n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE+": "+t};this.warnings.push(n)}case"sessionStorage":try{this.storage=sessionStorage;break}catch(t){n={code:"UNABLE_TO_ACCESS_SESSION_STORAGE",message:Xu.UNABLE_TO_ACCESS_SESSION_STORAGE+": "+t};this.warnings.push(n)}case"inMemory":default:try{this.storage=localStorage;break}catch(t){n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE+": "+t};this.warnings.push(n)}}}return t.prototype.get=function(t){var e;if("undefined"!=typeof Storage){var n=t;this.clientId&&(n=n+"-"+this.clientId);try{e=this.storage.getItem(n)}catch(t){var r={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE+": "+t};this.warnings.push(r)}return e}},t.prototype.set=function(t,e){if("undefined"!=typeof Storage){var n=t;this.clientId&&(n=n+"-"+this.clientId);try{this.storage.setItem(n,e)}catch(t){var r={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE+": "+t};this.warnings.push(r)}}},t.prototype.delete=function(t){if("undefined"!=typeof Storage){var e=t;this.clientId&&(e=e+"-"+this.clientId);try{this.storage.deleteItem(e)}catch(t){var n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:Xu.UNABLE_TO_ACCESS_LOCAL_STORAGE+": "+t};this.warnings.push(n)}}},t}();e.FeatureFlagStorage=n}));u(Zu);Zu.FeatureFlagStorage;var ts={ffLibraryVersionCode:1,ffLibraryVersionName:"1.0.2-beta",ffLibraryLanguage:"Javascript",minimumPollFrequencySeconds:60},es=Object.freeze({__proto__:null,ffLibraryVersionCode:1,ffLibraryVersionName:"1.0.2-beta",ffLibraryLanguage:"Javascript",minimumPollFrequencySeconds:60,default:ts}),ns=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=function(){Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null==this)throw TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw TypeError("predicate must be a function");for(var r=arguments[1],i=0;i<n;){var o=e[i];if(t.call(r,o,i,e))return o;i++}},configurable:!0,writable:!0})}}));u(ns);var rs,is=s((function(t){
/**
	 * [js-sha256]{@link https://github.com/emn178/js-sha256}
	 *
	 * @version 0.9.0
	 * @author Chen, Yi-Cyuan [emn178@gmail.com]
	 * @copyright Chen, Yi-Cyuan 2014-2017
	 * @license MIT
	 */
!function(){var e="input is invalid type",n="object"==typeof window,r=n?window:{};r.JS_SHA256_NO_WINDOW&&(n=!1);var i=!n&&"object"==typeof self;!r.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node?r=a:i&&(r=self);var o=!r.JS_SHA256_NO_COMMON_JS&&t.exports,u=!r.JS_SHA256_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,s="0123456789abcdef".split(""),c=[-2147483648,8388608,32768,128],f=[24,16,8,0],l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d=["hex","array","digest","arrayBuffer"],h=[];!r.JS_SHA256_NO_NODE_JS&&Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),!u||!r.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW&&ArrayBuffer.isView||(ArrayBuffer.isView=function(t){return"object"==typeof t&&t.buffer&&t.buffer.constructor===ArrayBuffer});var p=function(t,e){return function(n){return new _(e,!0).update(n)[t]()}},y=function(t){var e=p("hex",t);e.create=function(){return new _(t)},e.update=function(t){return e.create().update(t)};for(var n=0;n<d.length;++n){var r=d[n];e[r]=p(r,t)}return e},g=function(t,e){return function(n,r){return new m(n,e,!0).update(r)[t]()}},v=function(t){var e=g("hex",t);e.create=function(e){return new m(e,t)},e.update=function(t,n){return e.create(t).update(n)};for(var n=0;n<d.length;++n){var r=d[n];e[r]=g(r,t)}return e};function _(t,e){e?(h[0]=h[16]=h[1]=h[2]=h[3]=h[4]=h[5]=h[6]=h[7]=h[8]=h[9]=h[10]=h[11]=h[12]=h[13]=h[14]=h[15]=0,this.blocks=h):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=t}function m(t,n,r){var i,o=typeof t;if("string"===o){var a,s=[],c=t.length,f=0;for(i=0;i<c;++i)(a=t.charCodeAt(i))<128?s[f++]=a:a<2048?(s[f++]=192|a>>6,s[f++]=128|63&a):a<55296||a>=57344?(s[f++]=224|a>>12,s[f++]=128|a>>6&63,s[f++]=128|63&a):(a=65536+((1023&a)<<10|1023&t.charCodeAt(++i)),s[f++]=240|a>>18,s[f++]=128|a>>12&63,s[f++]=128|a>>6&63,s[f++]=128|63&a);t=s}else{if("object"!==o)throw new Error(e);if(null===t)throw new Error(e);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||u&&ArrayBuffer.isView(t)))throw new Error(e)}t.length>64&&(t=new _(n,!0).update(t).array());var l=[],d=[];for(i=0;i<64;++i){var h=t[i]||0;l[i]=92^h,d[i]=54^h}_.call(this,n,r),this.update(d),this.oKeyPad=l,this.inner=!0,this.sharedMemory=r}_.prototype.update=function(t){if(!this.finalized){var n,r=typeof t;if("string"!==r){if("object"!==r)throw new Error(e);if(null===t)throw new Error(e);if(u&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||u&&ArrayBuffer.isView(t)))throw new Error(e);n=!0}for(var i,o,a=0,s=t.length,c=this.blocks;a<s;){if(this.hashed&&(this.hashed=!1,c[0]=this.block,c[16]=c[1]=c[2]=c[3]=c[4]=c[5]=c[6]=c[7]=c[8]=c[9]=c[10]=c[11]=c[12]=c[13]=c[14]=c[15]=0),n)for(o=this.start;a<s&&o<64;++a)c[o>>2]|=t[a]<<f[3&o++];else for(o=this.start;a<s&&o<64;++a)(i=t.charCodeAt(a))<128?c[o>>2]|=i<<f[3&o++]:i<2048?(c[o>>2]|=(192|i>>6)<<f[3&o++],c[o>>2]|=(128|63&i)<<f[3&o++]):i<55296||i>=57344?(c[o>>2]|=(224|i>>12)<<f[3&o++],c[o>>2]|=(128|i>>6&63)<<f[3&o++],c[o>>2]|=(128|63&i)<<f[3&o++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++a)),c[o>>2]|=(240|i>>18)<<f[3&o++],c[o>>2]|=(128|i>>12&63)<<f[3&o++],c[o>>2]|=(128|i>>6&63)<<f[3&o++],c[o>>2]|=(128|63&i)<<f[3&o++]);this.lastByteIndex=o,this.bytes+=o-this.start,o>=64?(this.block=c[16],this.start=o-64,this.hash(),this.hashed=!0):this.start=o}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},_.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=c[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},_.prototype.hash=function(){var t,e,n,r,i,o,a,u,s,c=this.h0,f=this.h1,d=this.h2,h=this.h3,p=this.h4,y=this.h5,g=this.h6,v=this.h7,_=this.blocks;for(t=16;t<64;++t)e=((i=_[t-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,n=((i=_[t-2])>>>17|i<<15)^(i>>>19|i<<13)^i>>>10,_[t]=_[t-16]+e+_[t-7]+n<<0;for(s=f&d,t=0;t<64;t+=4)this.first?(this.is224?(o=300032,v=(i=_[0]-1413257819)-150054599<<0,h=i+24177077<<0):(o=704751109,v=(i=_[0]-210244248)-1521486534<<0,h=i+143694565<<0),this.first=!1):(e=(c>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),r=(o=c&f)^c&d^s,v=h+(i=v+(n=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&y^~p&g)+l[t]+_[t])<<0,h=i+(e+r)<<0),e=(h>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),r=(a=h&c)^h&f^o,g=d+(i=g+(n=(v>>>6|v<<26)^(v>>>11|v<<21)^(v>>>25|v<<7))+(v&p^~v&y)+l[t+1]+_[t+1])<<0,e=((d=i+(e+r)<<0)>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),r=(u=d&h)^d&c^a,y=f+(i=y+(n=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7))+(g&v^~g&p)+l[t+2]+_[t+2])<<0,e=((f=i+(e+r)<<0)>>>2|f<<30)^(f>>>13|f<<19)^(f>>>22|f<<10),r=(s=f&d)^f&h^u,p=c+(i=p+(n=(y>>>6|y<<26)^(y>>>11|y<<21)^(y>>>25|y<<7))+(y&g^~y&v)+l[t+3]+_[t+3])<<0,c=i+(e+r)<<0;this.h0=this.h0+c<<0,this.h1=this.h1+f<<0,this.h2=this.h2+d<<0,this.h3=this.h3+h<<0,this.h4=this.h4+p<<0,this.h5=this.h5+y<<0,this.h6=this.h6+g<<0,this.h7=this.h7+v<<0},_.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,u=this.h7,c=s[t>>28&15]+s[t>>24&15]+s[t>>20&15]+s[t>>16&15]+s[t>>12&15]+s[t>>8&15]+s[t>>4&15]+s[15&t]+s[e>>28&15]+s[e>>24&15]+s[e>>20&15]+s[e>>16&15]+s[e>>12&15]+s[e>>8&15]+s[e>>4&15]+s[15&e]+s[n>>28&15]+s[n>>24&15]+s[n>>20&15]+s[n>>16&15]+s[n>>12&15]+s[n>>8&15]+s[n>>4&15]+s[15&n]+s[r>>28&15]+s[r>>24&15]+s[r>>20&15]+s[r>>16&15]+s[r>>12&15]+s[r>>8&15]+s[r>>4&15]+s[15&r]+s[i>>28&15]+s[i>>24&15]+s[i>>20&15]+s[i>>16&15]+s[i>>12&15]+s[i>>8&15]+s[i>>4&15]+s[15&i]+s[o>>28&15]+s[o>>24&15]+s[o>>20&15]+s[o>>16&15]+s[o>>12&15]+s[o>>8&15]+s[o>>4&15]+s[15&o]+s[a>>28&15]+s[a>>24&15]+s[a>>20&15]+s[a>>16&15]+s[a>>12&15]+s[a>>8&15]+s[a>>4&15]+s[15&a];return this.is224||(c+=s[u>>28&15]+s[u>>24&15]+s[u>>20&15]+s[u>>16&15]+s[u>>12&15]+s[u>>8&15]+s[u>>4&15]+s[15&u]),c},_.prototype.toString=_.prototype.hex,_.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,n=this.h2,r=this.h3,i=this.h4,o=this.h5,a=this.h6,u=this.h7,s=[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,i>>24&255,i>>16&255,i>>8&255,255&i,o>>24&255,o>>16&255,o>>8&255,255&o,a>>24&255,a>>16&255,a>>8&255,255&a];return this.is224||s.push(u>>24&255,u>>16&255,u>>8&255,255&u),s},_.prototype.array=_.prototype.digest,_.prototype.arrayBuffer=function(){this.finalize();var t=new ArrayBuffer(this.is224?28:32),e=new DataView(t);return e.setUint32(0,this.h0),e.setUint32(4,this.h1),e.setUint32(8,this.h2),e.setUint32(12,this.h3),e.setUint32(16,this.h4),e.setUint32(20,this.h5),e.setUint32(24,this.h6),this.is224||e.setUint32(28,this.h7),t},m.prototype=new _,m.prototype.finalize=function(){if(_.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.array();_.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(t),_.prototype.finalize.call(this)}};var b=y();b.sha256=b,b.sha224=y(!0),b.sha256.hmac=v(),b.sha224.hmac=v(!0),o?t.exports=b:(r.sha256=b.sha256,r.sha224=b.sha224)}()})),os=(rs=es)&&rs.default||rs,as=s((function(t,e){var n=a&&a.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},r=a&&a.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),u=a&&a.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=a&&a.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&r(e,t,n);return u(e,t),e},c=a&&a.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))},f=a&&a.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}},l=a&&a.__spreadArrays||function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,u=o.length;a<u;a++,i++)r[i]=o[a];return r},d=a&&a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.FeatureFlagClient=void 0;var h=s(os);d(ns).default();var p=function(){function t(t,e,n){var r=this;if(void 0===n&&(n=!1),this.addStorageWarnings=function(){var t=[];return r.storage.warnings&&r.storage.warnings.length>0&&r.storage.warnings.map((function(e){t.push(e)})),t},this.targetingPropsToLowerCase=function(t){return Object.entries(t).reduce((function(t,e){var n,r=e[0],i=e[1];return"string"==typeof i&&(n=i.toLowerCase()),Array.isArray(i)&&(n=i.map((function(t){return t.toLowerCase()}))),t[r.toLowerCase()]=n,t}),{})},!t)throw new Error("Please provide a context object to the constructor.");if(!t.configUrl&&!e)throw new Error("Please provide either a config url or a valid config object.");this.config=void 0,this.configRefreshIntervalDefault=h.minimumPollFrequencySeconds,this.context=t,this.fallbackConfig=e,this.featureFlagUserId="",this.libraryLanguage=h.ffLibraryLanguage,this.initialized=!1,this.quickInit=n;var i=t&&t.storageType?t.storageType:"";this.storage=new Zu.FeatureFlagStorage(i,t.clientId),this.globalWarnings=[]}return t.prototype.createHash=function(t,e){var n=is.sha256.create();return n.update(""+t+e),n.hex()},t.prototype.createHashNode=function(t,e){var n=i.default.createHash("sha256");return n.update(""+t+e),n.digest("hex")},t.prototype.createUserId=function(){return Ku.generateUUID()},t.prototype.getUserFeatureIndex=function(t){return parseInt(t.substring(0,10),16).toString().slice(-2)},t.prototype.init=function(){return c(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,u,s,c,l,d,h,p,y,g,v,_,m,b,E,A,S;return f(this,(function(f){switch(f.label){case 0:if(t=[],n=(e=this).config,r=e.fallbackConfig,i=e.initialized,o=e.featureFlagUserId,a=e.libraryLanguage,u=e.storage,s=e.configRefreshIntervalDefault,c=e.quickInit,l=this.context,d=l.configUrl,h=l.userId,p=l.configRefreshInterval,y=void 0!==p?p:s,g=this.checkConfigCacheExpiry(y),n&&!g)return[3,6];v=u.get(Xu.FEATURE_FLAG_CONFIG);try{v&&(this.config=JSON.parse(v))}catch(e){m={code:"FAILED_TO_READ_CONFIG_FROM_STORAGE",message:Xu.FAILED_TO_READ_CONFIG_FROM_STORAGE},t.push(m)}if(v&&!g)return[3,6];if(!d)return[3,5];!g&&r&&this.updateConfig(r),_=u.get(Xu.FEATURE_FLAG_CONFIG_ETAG)||"-1",_=v?_:"-1",f.label=1;case 1:return f.trys.push([1,3,,4]),c&&r?(v||this.updateConfig(r),this.loadAndSetRemoteConfig(d,_),[2,t]):(c&&!r&&(m={code:"REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT",message:Xu.REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT},t.push(m)),[4,this.loadAndSetRemoteConfig(d,_)]);case 2:return f.sent(),[3,4];case 3:if(b=f.sent(),!v&&!r)throw new Error("Failed to load config file - no config url or default config provided. "+b);return this.setNoNewConfigWarning(),[3,4];case 4:return[3,6];case 5:if(!r)throw new Error("Failed to load config file - no config url or default config provided.");this.updateConfig(r),f.label=6;case 6:return i||(h?u.set(Xu.APP_USER_ID,h):(E=u.get(Xu.APP_USER_ID))&&(this.context.userId=E),o||((A=u.get(Xu.FEATURE_FLAG_USER_ID))&&(this.featureFlagUserId=A),A||(this.featureFlagUserId=this.createUserId(),u.set(Xu.FEATURE_FLAG_USER_ID,this.featureFlagUserId))),(!this.context.userTargetingProperties||this.context.userTargetingProperties&&!this.context.userTargetingProperties.ffLibraryLanguage)&&(S={ffLibraryLanguage:a},this.updateContext(void 0,S)),this.initialized=!0),[2,t]}}))}))},t.prototype.checkConfigCacheExpiry=function(t){var e,n=this.storage,r=new Date,i=function(t){return n.set(Xu.CONFIG_CACHE_START,t)},o=n.get(Xu.CONFIG_CACHE_START);if(!o){var a=new Date;i(JSON.stringify(a.getTime()))}var u=o?JSON.parse(o):r.getTime();if(!0===(e=r.getTime()-u>t)){var s=new Date;i(JSON.stringify(s.getTime()))}return e},t.prototype.isFeatureEnabled=function(t){return c(this,void 0,void 0,(function(){return f(this,(function(e){switch(e.label){case 0:return[4,this.queryFeatureFlag(t)];case 1:return[2,e.sent().enabled]}}))}))},t.prototype.setNoNewConfigWarning=function(){var t=this.fallbackConfig,e=this.storage.get(Xu.FEATURE_FLAG_CONFIG);if(e){var n={code:"CACHE_USED",message:Xu.CACHE_USED};this.globalWarnings.push(n)}else!e&&t&&(this.globalWarnings.push({code:"FALLBACK_USED_REMOTE_LOAD_FAILED",message:Xu.CACHE_USED}),this.updateConfig(t))},t.prototype.loadAndSetRemoteConfig=function(t,e){return c(this,void 0,void 0,(function(){var n,r;return f(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this.loadConfig(t,e)];case 1:return n=i.sent(),[3,3];case 2:return i.sent(),this.globalWarnings.push({code:"FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED",message:Xu.FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED}),this.setNoNewConfigWarning(),[3,3];case 3:return n&&(this.config=n.data?n.data:this.config,n.data||this.globalWarnings.push({code:"FALLBACK_USED_REMOTE_LOAD_FAILED",message:Xu.FALLBACK_USED_REMOTE_LOAD_FAILED}),r=n.headers&&n.headers.etag?n.headers.etag:"",n&&n.etag&&(r=n.etag),r&&this.storage.set(Xu.FEATURE_FLAG_CONFIG_ETAG,r),this.storage.set(Xu.FEATURE_FLAG_CONFIG,JSON.stringify(this.config))),[2]}}))}))},t.prototype.loadConfig=function(t,e){return void 0===e&&(e="-1"),c(this,void 0,void 0,(function(){var n,r,i,o,a;return f(this,(function(u){switch(u.label){case 0:r=t+"?version="+h.ffLibraryVersionCode,o={headers:i={"If-None-Match":e}},u.label=1;case 1:return u.trys.push([1,6,,7]),Ku.isEnvNode()?[4,this.nodeHttpRequest(o,r)]:[3,3];case 2:return n=u.sent(),[3,5];case 3:return[4,Ku.makeRequest({url:r,method:"GET",headers:i})];case 4:n=u.sent(),u.label=5;case 5:return[3,7];case 6:throw a=u.sent(),new Error("Failed to fetch config file: "+a);case 7:return[2,n]}}))}))},t.prototype.nodeHttpRequest=function(t,e){var n=o.default;return new Promise((function(r,i){var o=new URL(e);t.hostname=o.hostname,t.path=""+o.pathname+o.search,t.port=o.port,n.get(t,(function(t){var e="";t.on("data",(function(t){e+=t})),t.on("end",(function(){var n;try{n=JSON.parse(e)}catch(t){i("Failed to fetch resource: "+t)}t.data=n,r(t)}))})).on("error",(function(t){i("Failed to fetch resource: "+t)}))}))},t.prototype.updateConfig=function(t){this.config=t,this.storage.set(Xu.FEATURE_FLAG_CONFIG,JSON.stringify(t))},t.prototype.updateContext=function(t,e,r){var i=n({},this.context);if(t&&(i.userId=t),r)i.userTargetingProperties=e;else{var o=n(n({},i.userTargetingProperties),e);i.userTargetingProperties=o}this.context=i},t.prototype.getCohortConfig=function(t,e){var r={rolloutValue:"-1",cohortPriority:1,stickinessProperty:t.userId?"appUserId":"ffUserId"},i=l(e);i.sort((function(t,e){return t.cohortPriority>e.cohortPriority?1:-1}));var o=this.targetingPropsToLowerCase(t.userTargetingProperties),a=i.find((function(e){var n=!1;if(!t.userId&&"appUserId"===e.stickinessProperty)return!1;if(!e.cohortCriteria||e.cohortCriteria.length<1)return!0;for(var r=e.cohortCriteria,i=function(t){var e=r[t].requiredFieldName,i=r[t].requiredFieldValues;e=e.toLowerCase();var a=i.some((function(t){return t=t.toLowerCase(),!o.hasOwnProperty(e)&&""===t||("string"==typeof o[e]?o[e]===t:Array.isArray(o[e])?o[e].some((function(e){return e===t})):void 0)}));if(!(n=a))return"break"},a=0;a<r.length;a++){if("break"===i(a))break}return n}));return a&&(r=n({},a)),r},t.prototype.cacheFlagResults=function(t){var e=this.storage,n=[],r=[],i=[];Array.isArray(t)?i=t?l(t):[]:i.push(t);var o=e.get(Xu.FEATURE_FLAG_RESULTS),a=o?JSON.parse(o):[];(n=l(a)).length>0&&(r=n.reduce((function(t,e){return i.find((function(t){return t.flagId===e.flagId}))?t:l(t,[e])}),[]));var u=l(r,i);return e.set(Xu.FEATURE_FLAG_RESULTS,JSON.stringify(u)),u},t.prototype.checkIfFlagUpdated=function(t){var e=this.storage.get(Xu.FEATURE_FLAG_RESULTS),n=e?JSON.parse(e):[];if(n.length<1)return!0;var r=n.find((function(e){return e.flagId===t.flagId}));return!r||r.enabled!==t.enabled},t.prototype.queryFeatureFlag=function(t,e){return void 0===e&&(e=!1),c(this,void 0,void 0,(function(){var n,r,i,o,a,u,s,c,l,d,h,p,y,g,v,_,m,b,E,A,S,w,T,O,I,N,C,P,R,M,L,x,D=this;return f(this,(function(f){switch(f.label){case 0:r=(n=this).context,i=n.fallbackConfig,o=!1,d="appUserId",h=[],p=function(t){var n=e?[]:D.globalWarnings;return h.concat(t,n)},y=function(t,e){return t.flags.find((function(t){return t.id===e}))},g=function(t,e){if(a=y(t,e)){var n=D.addStorageWarnings();h=p(n);var i={clientId:r.clientId,flagId:a.id,flagName:a.name?a.name:void 0,enabled:a.defaultValue,updatedSinceLastQuery:!0,warnings:h};return i.updatedSinceLastQuery=D.checkIfFlagUpdated(i),D.cacheFlagResults(i),i}},f.label=1;case 1:return f.trys.push([1,8,,9]),[4,this.init()];case 2:if(v=f.sent(),h=v.concat(h),c=this.context.userId?this.context.userId:void 0,!this.config||!this.config.flags)throw new Error("Operation failed - no config file or invalid config file detected.");if(!(a=y(this.config,t))){if(i&&(R=g(i,t)))return _={code:"FALLBACK_USED_FLAG_NOT_IN_REMOTE",message:Xu.FALLBACK_USED_FLAG_NOT_IN_REMOTE},h.push(_),[2,R];throw new Error("Flag not found")}if(m=a.cohorts,b=a.defaultValue,E=a.name,(A=a.type)&&"boolean"!==A.toLowerCase()&&!e)throw new Error("Flag not found");return!m||m.length<1?(S=this.addStorageWarnings(),h=p(S),(w={clientId:r.clientId,flagId:a.id,flagName:E,enabled:a.defaultValue,updatedSinceLastQuery:!0,warnings:h}).updatedSinceLastQuery=this.checkIfFlagUpdated(w),this.cacheFlagResults(w),[2,w]):(u=E,T=this.getCohortConfig(r,m),O=T.rolloutValue,I=T.stickinessProperty,O=O||"0",N=a.id,s=this.context.userId?this.context.userId:void 0,"ffUserId"===I&&(c=this.featureFlagUserId,d="ffUserId",s=c),C=void 0,Ku.isEnvNode()?(C=s?this.createHashNode(s,N):void 0,[3,7]):[3,3]);case 3:return s?[4,this.createHash(s,N)]:[3,5];case 4:return P=f.sent(),[3,6];case 5:P=void 0,f.label=6;case 6:C=P,f.label=7;case 7:if(l=C?this.getUserFeatureIndex(C):"-1",o=parseInt(l,10)<parseInt(O,10),parseInt(O,10)<0||parseInt(l,10)<0||parseInt(l,10)>99){if(void 0===b){if(i){if(R=g(i,t))return[2,R];throw new Error("Flag not found")}throw new Error("Unable to determine flag default value")}o=b}return[3,9];case 8:throw M=f.sent(),new Error("Failed to query feature flag: "+M);case 9:return L=this.addStorageWarnings(),h=p(L),(x={flagId:t,flagName:u,enabled:o,updatedSinceLastQuery:!0,clientId:r.clientId,userId:c,userIdType:d,warnings:h}).updatedSinceLastQuery=this.checkIfFlagUpdated(x),this.cacheFlagResults(x),[2,x]}}))}))},t.prototype.queryAllFeatureFlags=function(){return c(this,void 0,void 0,(function(){var t,e,n,r=this;return f(this,(function(i){switch(i.label){case 0:return[4,this.init()];case 1:if(i.sent(),!(t=this.config)||!t.flags)throw new Error("No config file or invalid config file detected.");return e={anyFlagsUpdatedSinceLastQuery:!1,globalWarnings:this.globalWarnings,results:[]},n=t.flags.map((function(t){return c(r,void 0,void 0,(function(){var n;return f(this,(function(r){switch(r.label){case 0:return[4,this.queryFeatureFlag(t.id,!0)];case 1:return!0===(n=r.sent()).updatedSinceLastQuery&&(e.anyFlagsUpdatedSinceLastQuery=!0),e.results.push(n),[2]}}))}))})),[2,Promise.all(n).then((function(){return e}))]}}))}))},t}();e.FeatureFlagClient=p}));u(as);as.FeatureFlagClient;var us=s((function(t,e){var n=a&&a.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),r=a&&a.__exportStar||function(t,e){for(var r in t)"default"===r||e.hasOwnProperty(r)||n(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),r(as,e)}));u(us);var ss=us.FeatureFlagClient,cs=Lt.f,fs={}.toString,ls="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],ds={f:function(t){return ls&&"[object Window]"==fs.call(t)?function(t){try{return cs(t)}catch(t){return ls.slice()}}(t):cs(C(t))}},hs={f:te},ps=W.f,ys=function(t){var e=gt.Symbol||(gt.Symbol={});L(e,t)||ps(e,t,{value:hs.f(t)})},gs=_e.forEach,vs=it("hidden"),_s=te("toPrimitive"),ms=pt.set,bs=pt.getterFor("Symbol"),Es=Object.prototype,As=v.Symbol,Ss=_t("JSON","stringify"),ws=k.f,Ts=W.f,Os=ds.f,Is=A.f,Ns=Z("symbols"),Cs=Z("op-symbols"),Ps=Z("string-to-symbol-registry"),Rs=Z("symbol-to-string-registry"),Ms=Z("wks"),Ls=v.QObject,xs=!Ls||!Ls.prototype||!Ls.prototype.findChild,Ds=m&&_((function(){return 7!=Ue(Ts({},"a",{get:function(){return Ts(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=ws(Es,e);r&&delete Es[e],Ts(t,e,n),r&&t!==Es&&Ts(Es,e,r)}:Ts,Us=function(t,e){var n=Ns[t]=Ue(As.prototype);return ms(n,{type:"Symbol",tag:t,description:e}),m||(n.description=e),n},Fs=Qt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof As},js=function(t,e,n){t===Es&&js(Cs,e,n),B(t);var r=R(e,!0);return B(n),L(Ns,r)?(n.enumerable?(L(t,vs)&&t[vs][r]&&(t[vs][r]=!1),n=Ue(n,{enumerable:S(0,!1)})):(L(t,vs)||Ts(t,vs,S(1,{})),t[vs][r]=!0),Ds(t,r,n)):Ts(t,r,n)},ks=function(t,e){B(t);var n=C(e),r=Ce(n).concat(Vs(n));return gs(r,(function(e){m&&!Bs.call(n,e)||js(t,e,n[e])})),t},Bs=function(t){var e=R(t,!0),n=Is.call(this,e);return!(this===Es&&L(Ns,e)&&!L(Cs,e))&&(!(n||!L(this,e)||!L(Ns,e)||L(this,vs)&&this[vs][e])||n)},Gs=function(t,e){var n=C(t),r=R(e,!0);if(n!==Es||!L(Ns,r)||L(Cs,r)){var i=ws(n,r);return!i||!L(Ns,r)||L(n,vs)&&n[vs][r]||(i.enumerable=!0),i}},Ws=function(t){var e=Os(C(t)),n=[];return gs(e,(function(t){L(Ns,t)||L(ot,t)||n.push(t)})),n},Vs=function(t){var e=t===Es,n=Os(e?Cs:C(t)),r=[];return gs(n,(function(t){!L(Ns,t)||e&&!L(Es,t)||r.push(Ns[t])})),r};if(zt||(yt((As=function(){if(this instanceof As)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=nt(t),n=function(t){this===Es&&n.call(Cs,t),L(this,vs)&&L(this[vs],e)&&(this[vs][e]=!1),Ds(this,e,S(1,t))};return m&&xs&&Ds(Es,e,{configurable:!0,set:n}),Us(e,t)}).prototype,"toString",(function(){return bs(this).tag})),yt(As,"withoutSetter",(function(t){return Us(nt(t),t)})),A.f=Bs,W.f=js,k.f=Gs,Lt.f=ds.f=Ws,xt.f=Vs,hs.f=function(t){return Us(te(t),t)},m&&(Ts(As.prototype,"description",{configurable:!0,get:function(){return bs(this).description}}),yt(Es,"propertyIsEnumerable",Bs,{unsafe:!0}))),qt({global:!0,wrap:!0,forced:!zt,sham:!zt},{Symbol:As}),gs(Ce(Ms),(function(t){ys(t)})),qt({target:"Symbol",stat:!0,forced:!zt},{for:function(t){var e=String(t);if(L(Ps,e))return Ps[e];var n=As(e);return Ps[e]=n,Rs[n]=e,n},keyFor:function(t){if(!Fs(t))throw TypeError(t+" is not a symbol");if(L(Rs,t))return Rs[t]},useSetter:function(){xs=!0},useSimple:function(){xs=!1}}),qt({target:"Object",stat:!0,forced:!zt,sham:!m},{create:function(t,e){return void 0===e?Ue(t):ks(Ue(t),e)},defineProperty:js,defineProperties:ks,getOwnPropertyDescriptor:Gs}),qt({target:"Object",stat:!0,forced:!zt},{getOwnPropertyNames:Ws,getOwnPropertySymbols:Vs}),qt({target:"Object",stat:!0,forced:_((function(){xt.f(1)}))},{getOwnPropertySymbols:function(t){return xt.f(Jt(t))}}),Ss){var Ks=!zt||_((function(){var t=As();return"[null]"!=Ss([t])||"{}"!=Ss({a:t})||"{}"!=Ss(Object(t))}));qt({target:"JSON",stat:!0,forced:Ks},{stringify:function(t,e,n){for(var r,i=[t],o=1;arguments.length>o;)i.push(arguments[o++]);if(r=e,(P(e)||void 0!==t)&&!Fs(t))return Yt(e)||(e=function(t,e){if("function"==typeof r&&(e=r.call(this,t,e)),!Fs(e))return e}),i[1]=e,Ss.apply(null,i)}})}As.prototype[_s]||V(As.prototype,_s,As.prototype.valueOf),Ze(As,"Symbol"),ot[vs]=!0;var qs=W.f,Ys=v.Symbol;if(m&&"function"==typeof Ys&&(!("description"in Ys.prototype)||void 0!==Ys().description)){var Js={},Hs=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof Hs?new Ys(t):void 0===t?Ys():Ys(t);return""===t&&(Js[e]=!0),e};Ut(Hs,Ys);var zs=Hs.prototype=Ys.prototype;zs.constructor=Hs;var Qs=zs.toString,$s="Symbol(test)"==String(Ys("test")),Xs=/^Symbol\((.*)\)[^)]+$/;qs(zs,"description",{configurable:!0,get:function(){var t=P(this)?this.valueOf():this,e=Qs.call(t);if(L(Js,t))return"";var n=$s?e.slice(7,-1):e.replace(Xs,"$1");return""===n?void 0:n}}),qt({global:!0,forced:!0},{Symbol:Hs})}ys("iterator");var Zs=_e.find,tc=!0,ec=Se("find");"find"in[]&&Array(1).find((function(){tc=!1})),qt({target:"Array",proto:!0,forced:tc||!ec},{find:function(t){return Zs(this,t,arguments.length>1?arguments[1]:void 0)}}),We("find");var nc=!gr((function(t){Array.from(t)}));qt({target:"Array",stat:!0,forced:nc},{from:function(t){var e,n,r,i,o,a,u=Jt(t),s="function"==typeof this?this:Array,c=arguments.length,f=c>1?arguments[1]:void 0,l=void 0!==f,d=ar(u),h=0;if(l&&(f=ye(f,c>2?arguments[2]:void 0,2)),null==d||s==Array&&ir(d))for(n=new s(e=St(u.length));e>h;h++)a=l?f(u[h],h):u[h],Ht(n,h,a);else for(o=(i=d.call(u)).next,n=new s;!(r=o.call(i)).done;h++)a=l?ur(i,f,[r.value,h],!0):r.value,Ht(n,h,a);return n.length=h,n}});var rc=_e.map,ic=ce("map"),oc=Se("map");qt({target:"Array",proto:!0,forced:!ic||!oc},{map:function(t){return rc(this,t,arguments.length>1?arguments[1]:void 0)}});var ac=ce("slice"),uc=Se("slice",{ACCESSORS:!0,0:0,1:2}),sc=te("species"),cc=[].slice,fc=Math.max;qt({target:"Array",proto:!0,forced:!ac||!uc},{slice:function(t,e){var n,r,i,o=C(this),a=St(o.length),u=Ot(t,a),s=Ot(void 0===e?a:e,a);if(Yt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Yt(n.prototype)?P(n)&&null===(n=n[sc])&&(n=void 0):n=void 0,n===Array||void 0===n))return cc.call(o,u,s);for(r=new(void 0===n?Array:n)(fc(s-u,0)),i=0;u<s;u++,i++)u in o&&Ht(r,i,o[u]);return r.length=i,r}});var lc=W.f,dc=Function.prototype,hc=dc.toString,pc=/^\s*function ([^ (]*)/;m&&!("name"in dc)&&lc(dc,"name",{configurable:!0,get:function(){try{return hc.call(this).match(pc)[1]}catch(t){return""}}});var yc=Object.assign,gc=Object.defineProperty,vc=!yc||_((function(){if(m&&1!==yc({b:1},yc(gc({},"a",{enumerable:!0,get:function(){gc(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol();return t[n]=7,"abcdefghijklmnopqrst".split("").forEach((function(t){e[t]=t})),7!=yc({},t)[n]||"abcdefghijklmnopqrst"!=Ce(yc({},e)).join("")}))?function(t,e){for(var n=Jt(t),r=arguments.length,i=1,o=xt.f,a=A.f;r>i;)for(var u,s=I(arguments[i++]),c=o?Ce(s).concat(o(s)):Ce(s),f=c.length,l=0;f>l;)u=c[l++],m&&!a.call(s,u)||(n[u]=s[u]);return n}:yc;qt({target:"Object",stat:!0,forced:Object.assign!==vc},{assign:vc});var _c=to.charAt,mc=pt.set,bc=pt.getterFor("String Iterator");sn(String,"String",(function(t){mc(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=bc(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=_c(n,r),e.index+=t.length,{value:t,done:!1})}));var Ec=te("iterator"),Ac=te("toStringTag"),Sc=ln.values;for(var wc in Bu){var Tc=v[wc],Oc=Tc&&Tc.prototype;if(Oc){if(Oc[Ec]!==Sc)try{V(Oc,Ec,Sc)}catch(t){Oc[Ec]=Sc}if(Oc[Ac]||V(Oc,Ac,wc),Bu[wc])for(var Ic in ln)if(Oc[Ic]!==ln[Ic])try{V(Oc,Ic,ln[Ic])}catch(t){Oc[Ic]=ln[Ic]}}}var Nc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NAMED_TAG="named",e.NAME_TAG="name",e.UNMANAGED_TAG="unmanaged",e.OPTIONAL_TAG="optional",e.INJECT_TAG="inject",e.MULTI_INJECT_TAG="multi_inject",e.TAGGED="inversify:tagged",e.TAGGED_PROP="inversify:tagged_props",e.PARAM_TYPES="inversify:paramtypes",e.DESIGN_PARAM_TYPES="design:paramtypes",e.POST_CONSTRUCT="post_construct"}));u(Nc);Nc.NAMED_TAG,Nc.NAME_TAG,Nc.UNMANAGED_TAG,Nc.OPTIONAL_TAG,Nc.INJECT_TAG,Nc.MULTI_INJECT_TAG,Nc.TAGGED,Nc.TAGGED_PROP,Nc.PARAM_TYPES,Nc.DESIGN_PARAM_TYPES,Nc.POST_CONSTRUCT;var Cc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingScopeEnum={Request:"Request",Singleton:"Singleton",Transient:"Transient"};e.BindingTypeEnum={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"};e.TargetTypeEnum={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"}}));u(Cc);Cc.BindingScopeEnum,Cc.BindingTypeEnum,Cc.TargetTypeEnum;var Pc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=0;e.id=function(){return n++}}));u(Pc);Pc.id;var Rc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.id=Pc.id(),this.activated=!1,this.serviceIdentifier=t,this.scope=e,this.type=Cc.BindingTypeEnum.Invalid,this.constraint=function(t){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return t.prototype.clone=function(){var e=new t(this.serviceIdentifier,this.scope);return e.activated=!1,e.implementationType=this.implementationType,e.dynamicValue=this.dynamicValue,e.scope=this.scope,e.type=this.type,e.factory=this.factory,e.provider=this.provider,e.constraint=this.constraint,e.onActivation=this.onActivation,e.cache=this.cache,e},t}();e.Binding=n}));u(Rc);Rc.Binding;var Mc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.DUPLICATED_INJECTABLE_DECORATOR="Cannot apply @injectable decorator multiple times.",e.DUPLICATED_METADATA="Metadata key was used more than once in a parameter:",e.NULL_ARGUMENT="NULL argument",e.KEY_NOT_FOUND="Key Not Found",e.AMBIGUOUS_MATCH="Ambiguous match found for serviceIdentifier:",e.CANNOT_UNBIND="Could not unbind serviceIdentifier:",e.NOT_REGISTERED="No matching bindings found for serviceIdentifier:",e.MISSING_INJECTABLE_ANNOTATION="Missing required @injectable annotation in:",e.MISSING_INJECT_ANNOTATION="Missing required @inject or @multiInject annotation in:",e.UNDEFINED_INJECT_ANNOTATION=function(t){return"@inject called with undefined this could mean that the class "+t+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},e.CIRCULAR_DEPENDENCY="Circular dependency found:",e.NOT_IMPLEMENTED="Sorry, this feature is not fully implemented yet.",e.INVALID_BINDING_TYPE="Invalid binding type:",e.NO_MORE_SNAPSHOTS_AVAILABLE="No snapshot available to restore.",e.INVALID_MIDDLEWARE_RETURN="Invalid return type in middleware. Middleware must return!",e.INVALID_FUNCTION_BINDING="Value provided to function binding must be a function!",e.INVALID_TO_SELF_VALUE="The toSelf function can only be applied when a constructor is used as service identifier",e.INVALID_DECORATOR_OPERATION="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",e.ARGUMENTS_LENGTH_MISMATCH=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"The number of constructor arguments in the derived class "+t[0]+" must be >= than the number of constructor arguments of its base class."},e.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT="Invalid Container constructor argument. Container options must be an object.",e.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",e.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE="Invalid Container option. Auto bind injectable must be a boolean",e.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK="Invalid Container option. Skip base check must be a boolean",e.MULTIPLE_POST_CONSTRUCT_METHODS="Cannot apply @postConstruct decorator multiple times in the same class",e.POST_CONSTRUCT_ERROR=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"@postConstruct error in class "+t[0]+": "+t[1]},e.CIRCULAR_DEPENDENCY_IN_FACTORY=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return"It looks like there is a circular dependency in one of the '"+t[0]+"' bindings. Please investigate bindings withservice identifier '"+t[1]+"'."},e.STACK_OVERFLOW="Maximum call stack size exceeded"}));u(Mc);Mc.DUPLICATED_INJECTABLE_DECORATOR,Mc.DUPLICATED_METADATA,Mc.NULL_ARGUMENT,Mc.KEY_NOT_FOUND,Mc.AMBIGUOUS_MATCH,Mc.CANNOT_UNBIND,Mc.NOT_REGISTERED,Mc.MISSING_INJECTABLE_ANNOTATION,Mc.MISSING_INJECT_ANNOTATION,Mc.UNDEFINED_INJECT_ANNOTATION,Mc.CIRCULAR_DEPENDENCY,Mc.NOT_IMPLEMENTED,Mc.INVALID_BINDING_TYPE,Mc.NO_MORE_SNAPSHOTS_AVAILABLE,Mc.INVALID_MIDDLEWARE_RETURN,Mc.INVALID_FUNCTION_BINDING,Mc.INVALID_TO_SELF_VALUE,Mc.INVALID_DECORATOR_OPERATION,Mc.ARGUMENTS_LENGTH_MISMATCH,Mc.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT,Mc.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE,Mc.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE,Mc.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK,Mc.MULTIPLE_POST_CONSTRUCT_METHODS,Mc.POST_CONSTRUCT_ERROR,Mc.CIRCULAR_DEPENDENCY_IN_FACTORY,Mc.STACK_OVERFLOW;var Lc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.getConstructorMetadata=function(t){return{compilerGeneratedMetadata:Reflect.getMetadata(Nc.PARAM_TYPES,t),userGeneratedMetadata:Reflect.getMetadata(Nc.TAGGED,t)||{}}},t.prototype.getPropertiesMetadata=function(t){return Reflect.getMetadata(Nc.TAGGED_PROP,t)||[]},t}();e.MetadataReader=n}));u(Lc);Lc.MetadataReader;var xc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.BindingCount={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1}}));u(xc);xc.BindingCount;var Dc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isStackOverflowExeption=function(t){return t instanceof RangeError||t.message===Mc.STACK_OVERFLOW}}));u(Dc);Dc.isStackOverflowExeption;var Uc=s((function(t,e){function n(t){return"function"==typeof t?t.name:"symbol"==typeof t?t.toString():t}function r(t){if(t.name)return t.name;var e=t.toString(),n=e.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+e}Object.defineProperty(e,"__esModule",{value:!0}),e.getServiceIdentifierAsString=n,e.listRegisteredBindingsForServiceIdentifier=function(t,e,n){var i="",o=n(t,e);return 0!==o.length&&(i="\nRegistered bindings:",o.forEach((function(t){var e="Object";null!==t.implementationType&&(e=r(t.implementationType)),i=i+"\n "+e,t.constraint.metaData&&(i=i+" - "+t.constraint.metaData)}))),i},e.circularDependencyToException=function t(e){e.childRequests.forEach((function(e){if(function t(e,n){return null!==e.parentRequest&&(e.parentRequest.serviceIdentifier===n||t(e.parentRequest,n))}(e,e.serviceIdentifier)){var r=function(t){return function t(e,r){void 0===r&&(r=[]);var i=n(e.serviceIdentifier);return r.push(i),null!==e.parentRequest?t(e.parentRequest,r):r}(t).reverse().join(" --\x3e ")}(e);throw new Error(Mc.CIRCULAR_DEPENDENCY+" "+r)}t(e)}))},e.listMetadataForTarget=function(t,e){if(e.isTagged()||e.isNamed()){var n="",r=e.getNamedTag(),i=e.getCustomTags();return null!==r&&(n+=r.toString()+"\n"),null!==i&&i.forEach((function(t){n+=t.toString()+"\n"}))," "+t+"\n "+t+" - "+n}return" "+t},e.getFunctionName=r}));u(Uc);Uc.getServiceIdentifierAsString,Uc.listRegisteredBindingsForServiceIdentifier,Uc.circularDependencyToException,Uc.listMetadataForTarget,Uc.getFunctionName;var Fc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.id=Pc.id(),this.container=t}return t.prototype.addPlan=function(t){this.plan=t},t.prototype.setCurrentRequest=function(t){this.currentRequest=t},t}();e.Context=n}));u(Fc);Fc.Context;var jc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.toString=function(){return this.key===Nc.NAMED_TAG?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},t}();e.Metadata=n}));u(jc);jc.Metadata;var kc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){this.parentContext=t,this.rootRequest=e};e.Plan=n}));u(kc);kc.Plan;var Bc=s((function(t,e){function n(t,e,n,r,i){var o={},a="number"==typeof i,u=void 0!==i&&a?i.toString():n;if(a&&void 0!==n)throw new Error(Mc.INVALID_DECORATOR_OPERATION);Reflect.hasOwnMetadata(t,e)&&(o=Reflect.getMetadata(t,e));var s=o[u];if(Array.isArray(s))for(var c=0,f=s;c<f.length;c++){var l=f[c];if(l.key===r.key)throw new Error(Mc.DUPLICATED_METADATA+" "+l.key.toString())}else s=[];s.push(r),o[u]=s,Reflect.defineMetadata(t,o,e)}function r(t,e){Reflect.decorate(t,e)}function i(t,e){return function(n,r){e(n,r,t)}}Object.defineProperty(e,"__esModule",{value:!0}),e.tagParameter=function(t,e,r,i){n(Nc.TAGGED,t,e,i,r)},e.tagProperty=function(t,e,r){n(Nc.TAGGED_PROP,t.constructor,e,r)},e.decorate=function(t,e,n){"number"==typeof n?r([i(n,t)],e):"string"==typeof n?Reflect.decorate([t],e,n):r([t],e)}}));u(Bc);Bc.tagParameter,Bc.tagProperty,Bc.decorate;var Gc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._cb=t}return t.prototype.unwrap=function(){return this._cb()},t}();e.LazyServiceIdentifer=n,e.inject=function(t){return function(e,n,r){if(void 0===t)throw new Error(Mc.UNDEFINED_INJECT_ANNOTATION(e.name));var i=new jc.Metadata(Nc.INJECT_TAG,t);"number"==typeof r?Bc.tagParameter(e,n,r,i):Bc.tagProperty(e,n,i)}}}));u(Gc);Gc.LazyServiceIdentifer,Gc.inject;var Wc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this.str=t}return t.prototype.startsWith=function(t){return 0===this.str.indexOf(t)},t.prototype.endsWith=function(t){var e,n=t.split("").reverse().join("");return e=this.str.split("").reverse().join(""),this.startsWith.call({str:e},n)},t.prototype.contains=function(t){return-1!==this.str.indexOf(t)},t.prototype.equals=function(t){return this.str===t},t.prototype.value=function(){return this.str},t}();e.QueryableString=n}));u(Wc);Wc.QueryableString;var Vc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r){this.id=Pc.id(),this.type=t,this.serviceIdentifier=n,this.name=new Wc.QueryableString(e||""),this.metadata=new Array;var i=null;"string"==typeof r?i=new jc.Metadata(Nc.NAMED_TAG,r):r instanceof jc.Metadata&&(i=r),null!==i&&this.metadata.push(i)}return t.prototype.hasTag=function(t){for(var e=0,n=this.metadata;e<n.length;e++){if(n[e].key===t)return!0}return!1},t.prototype.isArray=function(){return this.hasTag(Nc.MULTI_INJECT_TAG)},t.prototype.matchesArray=function(t){return this.matchesTag(Nc.MULTI_INJECT_TAG)(t)},t.prototype.isNamed=function(){return this.hasTag(Nc.NAMED_TAG)},t.prototype.isTagged=function(){return this.metadata.some((function(t){return t.key!==Nc.INJECT_TAG&&t.key!==Nc.MULTI_INJECT_TAG&&t.key!==Nc.NAME_TAG&&t.key!==Nc.UNMANAGED_TAG&&t.key!==Nc.NAMED_TAG}))},t.prototype.isOptional=function(){return this.matchesTag(Nc.OPTIONAL_TAG)(!0)},t.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter((function(t){return t.key===Nc.NAMED_TAG}))[0]:null},t.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter((function(t){return t.key!==Nc.INJECT_TAG&&t.key!==Nc.MULTI_INJECT_TAG&&t.key!==Nc.NAME_TAG&&t.key!==Nc.UNMANAGED_TAG&&t.key!==Nc.NAMED_TAG})):null},t.prototype.matchesNamedTag=function(t){return this.matchesTag(Nc.NAMED_TAG)(t)},t.prototype.matchesTag=function(t){var e=this;return function(n){for(var r=0,i=e.metadata;r<i.length;r++){var o=i[r];if(o.key===t&&o.value===n)return!0}return!1}},t}();e.Target=n}));u(Vc);Vc.Target;var Kc=s((function(t,e){function n(t,e,n,o){var a=t.getConstructorMetadata(n),u=a.compilerGeneratedMetadata;if(void 0===u){var s=Mc.MISSING_INJECTABLE_ANNOTATION+" "+e+".";throw new Error(s)}var c=a.userGeneratedMetadata,f=Object.keys(c),l=function(t,e,n,i,o){for(var a=[],u=0;u<o;u++){var s=r(u,t,e,n,i);null!==s&&a.push(s)}return a}(o,e,u,c,0===n.length&&f.length>0?f.length:n.length),d=function t(e,n){for(var r=e.getPropertiesMetadata(n),o=[],a=Object.keys(r),u=0,s=a;u<s.length;u++){var c=s[u],f=r[c],l=i(r[c]),d=l.targetName||c,h=l.inject||l.multiInject,p=new Vc.Target(Cc.TargetTypeEnum.ClassProperty,d,h);p.metadata=f,o.push(p)}var y=Object.getPrototypeOf(n.prototype).constructor;if(y!==Object){var g=t(e,y);o=o.concat(g)}return o}(t,n);return l.concat(d)}function r(t,e,n,r,o){var a=o[t.toString()]||[],u=i(a),s=!0!==u.unmanaged,c=r[t],f=u.inject||u.multiInject;if((c=f||c)instanceof Gc.LazyServiceIdentifer&&(c=c.unwrap()),s){if(!e&&(c===Object||c===Function||void 0===c)){var l=Mc.MISSING_INJECT_ANNOTATION+" argument "+t+" in class "+n+".";throw new Error(l)}var d=new Vc.Target(Cc.TargetTypeEnum.ConstructorArgument,u.targetName,c);return d.metadata=a,d}return null}function i(t){var e={};return t.forEach((function(t){e[t.key.toString()]=t.value})),{inject:e[Nc.INJECT_TAG],multiInject:e[Nc.MULTI_INJECT_TAG],targetName:e[Nc.NAME_TAG],unmanaged:e[Nc.UNMANAGED_TAG]}}Object.defineProperty(e,"__esModule",{value:!0}),e.getFunctionName=Uc.getFunctionName,e.getDependencies=function(t,e){return n(t,Uc.getFunctionName(e),e,!1)},e.getBaseClassDependencyCount=function t(e,r){var i=Object.getPrototypeOf(r.prototype).constructor;if(i!==Object){var o=n(e,Uc.getFunctionName(i),i,!0),a=o.map((function(t){return t.metadata.filter((function(t){return t.key===Nc.UNMANAGED_TAG}))})),u=[].concat.apply([],a).length,s=o.length-u;return s>0?s:t(e,i)}return 0}}));u(Kc);Kc.getFunctionName,Kc.getDependencies,Kc.getBaseClassDependencyCount;var qc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e,n,r,i){this.id=Pc.id(),this.serviceIdentifier=t,this.parentContext=e,this.parentRequest=n,this.target=i,this.childRequests=[],this.bindings=Array.isArray(r)?r:[r],this.requestScope=null===n?new Map:null}return t.prototype.addChildRequest=function(e,n,r){var i=new t(e,this.parentContext,this,n,r);return this.childRequests.push(i),i},t}();e.Request=n}));u(qc);qc.Request;var Yc=s((function(t,e){function n(t){return t._bindingDictionary}function r(t,e,n,r,i,o){var a=t?Nc.MULTI_INJECT_TAG:Nc.INJECT_TAG,u=new jc.Metadata(a,n),s=new Vc.Target(e,r,n,u);if(void 0!==i){var c=new jc.Metadata(i,o);s.metadata.push(c)}return s}function i(t,e,n,r,i){var a=o(n.container,i.serviceIdentifier),u=[];return a.length===xc.BindingCount.NoBindingsAvailable&&n.container.options.autoBindInjectable&&"function"==typeof i.serviceIdentifier&&t.getConstructorMetadata(i.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(i.serviceIdentifier).toSelf(),a=o(n.container,i.serviceIdentifier)),u=e?a:a.filter((function(t){var e=new qc.Request(t.serviceIdentifier,n,r,t,i);return t.constraint(e)})),function(t,e,n,r){switch(e.length){case xc.BindingCount.NoBindingsAvailable:if(n.isOptional())return e;var i=Uc.getServiceIdentifierAsString(t),a=Mc.NOT_REGISTERED;throw a+=Uc.listMetadataForTarget(i,n),a+=Uc.listRegisteredBindingsForServiceIdentifier(r,i,o),new Error(a);case xc.BindingCount.OnlyOneBindingAvailable:if(!n.isArray())return e;case xc.BindingCount.MultipleBindingsAvailable:default:if(n.isArray())return e;i=Uc.getServiceIdentifierAsString(t),a=Mc.AMBIGUOUS_MATCH+" "+i;throw a+=Uc.listRegisteredBindingsForServiceIdentifier(r,i,o),new Error(a)}}(i.serviceIdentifier,u,i,n.container),u}function o(t,e){var r=[],i=n(t);return i.hasKey(e)?r=i.get(e):null!==t.parent&&(r=o(t.parent,e)),r}Object.defineProperty(e,"__esModule",{value:!0}),e.getBindingDictionary=n,e.plan=function(t,e,n,o,a,u,s,c){void 0===c&&(c=!1);var f=new Fc.Context(e),l=r(n,o,a,"",u,s);try{return function t(e,n,r,o,a,u){var s,c;if(null===a){s=i(e,n,o,null,u),c=new qc.Request(r,o,null,s,u);var f=new kc.Plan(o,c);o.addPlan(f)}else s=i(e,n,o,a,u),c=a.addChildRequest(u.serviceIdentifier,s,u);s.forEach((function(n){var r=null;if(u.isArray())r=c.addChildRequest(n.serviceIdentifier,n,u);else{if(n.cache)return;r=c}if(n.type===Cc.BindingTypeEnum.Instance&&null!==n.implementationType){var i=Kc.getDependencies(e,n.implementationType);if(!o.container.options.skipBaseClassChecks){var a=Kc.getBaseClassDependencyCount(e,n.implementationType);if(i.length<a){var s=Mc.ARGUMENTS_LENGTH_MISMATCH(Kc.getFunctionName(n.implementationType));throw new Error(s)}}i.forEach((function(n){t(e,!1,n.serviceIdentifier,o,r,n)}))}}))}(t,c,a,f,null,l),f}catch(t){throw Dc.isStackOverflowExeption(t)&&f.plan&&Uc.circularDependencyToException(f.plan.rootRequest),t}},e.createMockRequest=function(t,e,n,r){var i=new Vc.Target(Cc.TargetTypeEnum.Variable,"",e,new jc.Metadata(n,r)),o=new Fc.Context(t);return new qc.Request(e,o,null,[],i)}}));u(Yc);Yc.getBindingDictionary,Yc.plan,Yc.createMockRequest;var Jc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.resolveInstance=function(t,e,n){var r,i,o=null;if(e.length>0){var a=e.filter((function(t){return null!==t.target&&t.target.type===Cc.TargetTypeEnum.ConstructorArgument})).map(n);i=a,o=function(t,e,n){var r=e.filter((function(t){return null!==t.target&&t.target.type===Cc.TargetTypeEnum.ClassProperty})),i=r.map(n);return r.forEach((function(e,n){var r;r=e.target.name.value();var o=i[n];t[r]=o})),t}(o=new((r=t).bind.apply(r,[void 0].concat(i))),e,n)}else o=new t;return function(t,e){if(Reflect.hasMetadata(Nc.POST_CONSTRUCT,t)){var n=Reflect.getMetadata(Nc.POST_CONSTRUCT,t);try{e[n.value]()}catch(e){throw new Error(Mc.POST_CONSTRUCT_ERROR(t.name,e.message))}}}(t,o),o}}));u(Jc);Jc.resolveInstance;var Hc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,n){try{return n()}catch(n){throw Dc.isStackOverflowExeption(n)?new Error(Mc.CIRCULAR_DEPENDENCY_IN_FACTORY(t,e.toString())):n}},r=function(t){return function(e){e.parentContext.setCurrentRequest(e);var i=e.bindings,o=e.childRequests,a=e.target&&e.target.isArray(),u=!(e.parentRequest&&e.parentRequest.target&&e.target&&e.parentRequest.target.matchesArray(e.target.serviceIdentifier));if(a&&u)return o.map((function(e){return r(t)(e)}));var s=null;if(!e.target.isOptional()||0!==i.length){var c=i[0],f=c.scope===Cc.BindingScopeEnum.Singleton,l=c.scope===Cc.BindingScopeEnum.Request;if(f&&c.activated)return c.cache;if(l&&null!==t&&t.has(c.id))return t.get(c.id);if(c.type===Cc.BindingTypeEnum.ConstantValue)s=c.cache;else if(c.type===Cc.BindingTypeEnum.Function)s=c.cache;else if(c.type===Cc.BindingTypeEnum.Constructor)s=c.implementationType;else if(c.type===Cc.BindingTypeEnum.DynamicValue&&null!==c.dynamicValue)s=n("toDynamicValue",c.serviceIdentifier,(function(){return c.dynamicValue(e.parentContext)}));else if(c.type===Cc.BindingTypeEnum.Factory&&null!==c.factory)s=n("toFactory",c.serviceIdentifier,(function(){return c.factory(e.parentContext)}));else if(c.type===Cc.BindingTypeEnum.Provider&&null!==c.provider)s=n("toProvider",c.serviceIdentifier,(function(){return c.provider(e.parentContext)}));else{if(c.type!==Cc.BindingTypeEnum.Instance||null===c.implementationType){var d=Uc.getServiceIdentifierAsString(e.serviceIdentifier);throw new Error(Mc.INVALID_BINDING_TYPE+" "+d)}s=Jc.resolveInstance(c.implementationType,o,r(t))}return"function"==typeof c.onActivation&&(s=c.onActivation(e.parentContext,s)),f&&(c.cache=s,c.activated=!0),l&&null!==t&&!t.has(c.id)&&t.set(c.id,s),s}}};e.resolve=function(t){return r(t.plan.rootRequest.requestScope)(t.plan.rootRequest)}}));u(Hc);Hc.resolve;var zc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){var r=t.parentRequest;return null!==r&&(!!e(r)||n(r,e))};e.traverseAncerstors=n;var r=function(t){return function(e){var n=function(n){return null!==n&&null!==n.target&&n.target.matchesTag(t)(e)};return n.metaData=new jc.Metadata(t,e),n}};e.taggedConstraint=r;var i=r(Nc.NAMED_TAG);e.namedConstraint=i;e.typeConstraint=function(t){return function(e){var n=null;if(null!==e){if(n=e.bindings[0],"string"==typeof t)return n.serviceIdentifier===t;var r=e.bindings[0].implementationType;return t===r}return!1}}}));u(zc);zc.traverseAncerstors,zc.taggedConstraint,zc.namedConstraint,zc.typeConstraint;var Qc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.when=function(t){return this._binding.constraint=t,new $c.BindingOnSyntax(this._binding)},t.prototype.whenTargetNamed=function(t){return this._binding.constraint=zc.namedConstraint(t),new $c.BindingOnSyntax(this._binding)},t.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){return null!==t.target&&!t.target.isNamed()&&!t.target.isTagged()},new $c.BindingOnSyntax(this._binding)},t.prototype.whenTargetTagged=function(t,e){return this._binding.constraint=zc.taggedConstraint(t)(e),new $c.BindingOnSyntax(this._binding)},t.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(e){return zc.typeConstraint(t)(e.parentRequest)},new $c.BindingOnSyntax(this._binding)},t.prototype.whenParentNamed=function(t){return this._binding.constraint=function(e){return zc.namedConstraint(t)(e.parentRequest)},new $c.BindingOnSyntax(this._binding)},t.prototype.whenParentTagged=function(t,e){return this._binding.constraint=function(n){return zc.taggedConstraint(t)(e)(n.parentRequest)},new $c.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(e){return zc.traverseAncerstors(e,zc.typeConstraint(t))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(e){return!zc.traverseAncerstors(e,zc.typeConstraint(t))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(e){return zc.traverseAncerstors(e,zc.namedConstraint(t))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(e){return!zc.traverseAncerstors(e,zc.namedConstraint(t))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._binding.constraint=function(n){return zc.traverseAncerstors(n,zc.taggedConstraint(t)(e))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorTagged=function(t,e){return this._binding.constraint=function(n){return!zc.traverseAncerstors(n,zc.taggedConstraint(t)(e))},new $c.BindingOnSyntax(this._binding)},t.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(e){return zc.traverseAncerstors(e,t)},new $c.BindingOnSyntax(this._binding)},t.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(e){return!zc.traverseAncerstors(e,t)},new $c.BindingOnSyntax(this._binding)},t}();e.BindingWhenSyntax=n}));u(Qc);Qc.BindingWhenSyntax;var $c=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.onActivation=function(t){return this._binding.onActivation=t,new Qc.BindingWhenSyntax(this._binding)},t}();e.BindingOnSyntax=n}));u($c);$c.BindingOnSyntax;var Xc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Qc.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new $c.BindingOnSyntax(this._binding)}return t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingWhenOnSyntax=n}));u(Xc);Xc.BindingWhenOnSyntax;var Zc=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.inRequestScope=function(){return this._binding.scope=Cc.BindingScopeEnum.Request,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.inSingletonScope=function(){return this._binding.scope=Cc.BindingScopeEnum.Singleton,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.inTransientScope=function(){return this._binding.scope=Cc.BindingScopeEnum.Transient,new Xc.BindingWhenOnSyntax(this._binding)},t}();e.BindingInSyntax=n}));u(Zc);Zc.BindingInSyntax;var tf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t,this._bindingWhenSyntax=new Qc.BindingWhenSyntax(this._binding),this._bindingOnSyntax=new $c.BindingOnSyntax(this._binding),this._bindingInSyntax=new Zc.BindingInSyntax(t)}return t.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},t.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},t.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},t.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},t.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},t.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},t.prototype.whenTargetTagged=function(t,e){return this._bindingWhenSyntax.whenTargetTagged(t,e)},t.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},t.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},t.prototype.whenParentTagged=function(t,e){return this._bindingWhenSyntax.whenParentTagged(t,e)},t.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},t.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},t.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},t.prototype.whenAnyAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,e)},t.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},t.prototype.whenNoAncestorTagged=function(t,e){return this._bindingWhenSyntax.whenNoAncestorTagged(t,e)},t.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},t.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},t.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},t}();e.BindingInWhenOnSyntax=n}));u(tf);tf.BindingInWhenOnSyntax;var ef=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t){this._binding=t}return t.prototype.to=function(t){return this._binding.type=Cc.BindingTypeEnum.Instance,this._binding.implementationType=t,new tf.BindingInWhenOnSyntax(this._binding)},t.prototype.toSelf=function(){if("function"!=typeof this._binding.serviceIdentifier)throw new Error(""+Mc.INVALID_TO_SELF_VALUE);var t=this._binding.serviceIdentifier;return this.to(t)},t.prototype.toConstantValue=function(t){return this._binding.type=Cc.BindingTypeEnum.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.toDynamicValue=function(t){return this._binding.type=Cc.BindingTypeEnum.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new tf.BindingInWhenOnSyntax(this._binding)},t.prototype.toConstructor=function(t){return this._binding.type=Cc.BindingTypeEnum.Constructor,this._binding.implementationType=t,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.toFactory=function(t){return this._binding.type=Cc.BindingTypeEnum.Factory,this._binding.factory=t,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.toFunction=function(t){if("function"!=typeof t)throw new Error(Mc.INVALID_FUNCTION_BINDING);var e=this.toConstantValue(t);return this._binding.type=Cc.BindingTypeEnum.Function,e},t.prototype.toAutoFactory=function(t){return this._binding.type=Cc.BindingTypeEnum.Factory,this._binding.factory=function(e){return function(){return e.container.get(t)}},new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.toProvider=function(t){return this._binding.type=Cc.BindingTypeEnum.Provider,this._binding.provider=t,new Xc.BindingWhenOnSyntax(this._binding)},t.prototype.toService=function(t){this.toDynamicValue((function(e){return e.container.get(t)}))},t}();e.BindingToSyntax=n}));u(ef);ef.BindingToSyntax;var nf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){}return t.of=function(e,n){var r=new t;return r.bindings=e,r.middleware=n,r},t}();e.ContainerSnapshot=n}));u(nf);nf.ContainerSnapshot;var rf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(){this._map=new Map}return t.prototype.getMap=function(){return this._map},t.prototype.add=function(t,e){if(null==t)throw new Error(Mc.NULL_ARGUMENT);if(null==e)throw new Error(Mc.NULL_ARGUMENT);var n=this._map.get(t);void 0!==n?(n.push(e),this._map.set(t,n)):this._map.set(t,[e])},t.prototype.get=function(t){if(null==t)throw new Error(Mc.NULL_ARGUMENT);var e=this._map.get(t);if(void 0!==e)return e;throw new Error(Mc.KEY_NOT_FOUND)},t.prototype.remove=function(t){if(null==t)throw new Error(Mc.NULL_ARGUMENT);if(!this._map.delete(t))throw new Error(Mc.KEY_NOT_FOUND)},t.prototype.removeByCondition=function(t){var e=this;this._map.forEach((function(n,r){var i=n.filter((function(e){return!t(e)}));i.length>0?e._map.set(r,i):e._map.delete(r)}))},t.prototype.hasKey=function(t){if(null==t)throw new Error(Mc.NULL_ARGUMENT);return this._map.has(t)},t.prototype.clone=function(){var e=new t;return this._map.forEach((function(t,n){t.forEach((function(t){return e.add(n,t.clone())}))})),e},t.prototype.traverse=function(t){this._map.forEach((function(e,n){t(n,e)}))},t}();e.Lookup=n}));u(rf);rf.Lookup;var of=s((function(t,e){var n=a&&a.__awaiter||function(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,u)}s((r=r.apply(t,e||[])).next())}))},r=a&&a.__generator||function(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function u(o){return function(u){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=r[2&o[0]?"return":o[0]?"throw":"next"])&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[0,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,u])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t){var e=t||{};if("object"!=typeof e)throw new Error(""+Mc.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);if(void 0===e.defaultScope)e.defaultScope=Cc.BindingScopeEnum.Transient;else if(e.defaultScope!==Cc.BindingScopeEnum.Singleton&&e.defaultScope!==Cc.BindingScopeEnum.Transient&&e.defaultScope!==Cc.BindingScopeEnum.Request)throw new Error(""+Mc.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);if(void 0===e.autoBindInjectable)e.autoBindInjectable=!1;else if("boolean"!=typeof e.autoBindInjectable)throw new Error(""+Mc.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);if(void 0===e.skipBaseClassChecks)e.skipBaseClassChecks=!1;else if("boolean"!=typeof e.skipBaseClassChecks)throw new Error(""+Mc.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);this.options={autoBindInjectable:e.autoBindInjectable,defaultScope:e.defaultScope,skipBaseClassChecks:e.skipBaseClassChecks},this.id=Pc.id(),this._bindingDictionary=new rf.Lookup,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new Lc.MetadataReader}return t.merge=function(e,n){var r=new t,i=Yc.getBindingDictionary(r),o=Yc.getBindingDictionary(e),a=Yc.getBindingDictionary(n);function u(t,e){t.traverse((function(t,n){n.forEach((function(t){e.add(t.serviceIdentifier,t.clone())}))}))}return u(o,i),u(a,i),r},t.prototype.load=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=this._getContainerModuleHelpersFactory(),r=0,i=t;r<i.length;r++){var o=i[r],a=n(o.id);o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)}},t.prototype.loadAsync=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(this,void 0,void 0,(function(){var e,n,i,o,a;return r(this,(function(r){switch(r.label){case 0:e=this._getContainerModuleHelpersFactory(),n=0,i=t,r.label=1;case 1:return n<i.length?(o=i[n],a=e(o.id),[4,o.registry(a.bindFunction,a.unbindFunction,a.isboundFunction,a.rebindFunction)]):[3,4];case 2:r.sent(),r.label=3;case 3:return n++,[3,1];case 4:return[2]}}))}))},t.prototype.unload=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(t){return function(e){return e.moduleId===t}};e.forEach((function(e){var n=r(e.id);t._bindingDictionary.removeByCondition(n)}))},t.prototype.bind=function(t){var e=this.options.defaultScope||Cc.BindingScopeEnum.Transient,n=new Rc.Binding(t,e);return this._bindingDictionary.add(t,n),new ef.BindingToSyntax(n)},t.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},t.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch(e){throw new Error(Mc.CANNOT_UNBIND+" "+Uc.getServiceIdentifierAsString(t))}},t.prototype.unbindAll=function(){this._bindingDictionary=new rf.Lookup},t.prototype.isBound=function(t){var e=this._bindingDictionary.hasKey(t);return!e&&this.parent&&(e=this.parent.isBound(t)),e},t.prototype.isBoundNamed=function(t,e){return this.isBoundTagged(t,Nc.NAMED_TAG,e)},t.prototype.isBoundTagged=function(t,e,n){var r=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=Yc.createMockRequest(this,t,e,n);r=i.some((function(t){return t.constraint(o)}))}return!r&&this.parent&&(r=this.parent.isBoundTagged(t,e,n)),r},t.prototype.snapshot=function(){this._snapshots.push(nf.ContainerSnapshot.of(this._bindingDictionary.clone(),this._middleware))},t.prototype.restore=function(){var t=this._snapshots.pop();if(void 0===t)throw new Error(Mc.NO_MORE_SNAPSHOTS_AVAILABLE);this._bindingDictionary=t.bindings,this._middleware=t.middleware},t.prototype.createChild=function(e){var n=new t(e||this.options);return n.parent=this,n},t.prototype.applyMiddleware=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce((function(t,e){return e(t)}),n)},t.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},t.prototype.get=function(t){return this._get(!1,!1,Cc.TargetTypeEnum.Variable,t)},t.prototype.getTagged=function(t,e,n){return this._get(!1,!1,Cc.TargetTypeEnum.Variable,t,e,n)},t.prototype.getNamed=function(t,e){return this.getTagged(t,Nc.NAMED_TAG,e)},t.prototype.getAll=function(t){return this._get(!0,!0,Cc.TargetTypeEnum.Variable,t)},t.prototype.getAllTagged=function(t,e,n){return this._get(!1,!0,Cc.TargetTypeEnum.Variable,t,e,n)},t.prototype.getAllNamed=function(t,e){return this.getAllTagged(t,Nc.NAMED_TAG,e)},t.prototype.resolve=function(t){var e=this.createChild();return e.bind(t).toSelf(),e.get(t)},t.prototype._getContainerModuleHelpersFactory=function(){var t=this,e=function(t,e){t._binding.moduleId=e},n=function(n){return function(r){var i=t.rebind.bind(t)(r);return e(i,n),i}};return function(r){return{bindFunction:(i=r,function(n){var r=t.bind.bind(t)(n);return e(r,i),r}),isboundFunction:function(e){return t.isBound.bind(t)(e)},rebindFunction:n(r),unbindFunction:function(e){t.unbind.bind(t)(e)}};var i}},t.prototype._get=function(t,e,n,r,i,o){var a=null,u={avoidConstraints:t,contextInterceptor:function(t){return t},isMultiInject:e,key:i,serviceIdentifier:r,targetType:n,value:o};if(this._middleware){if(null==(a=this._middleware(u)))throw new Error(Mc.INVALID_MIDDLEWARE_RETURN)}else a=this._planAndResolve()(u);return a},t.prototype._planAndResolve=function(){var t=this;return function(e){var n=Yc.plan(t._metadataReader,t,e.isMultiInject,e.targetType,e.serviceIdentifier,e.key,e.value,e.avoidConstraints);return n=e.contextInterceptor(n),Hc.resolve(n)}},t}();e.Container=i}));u(of);of.Container;var af=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){this.id=Pc.id(),this.registry=t};e.ContainerModule=n;var r=function(t){this.id=Pc.id(),this.registry=t};e.AsyncContainerModule=r}));u(af);af.ContainerModule,af.AsyncContainerModule;var uf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.injectable=function(){return function(t){if(Reflect.hasOwnMetadata(Nc.PARAM_TYPES,t))throw new Error(Mc.DUPLICATED_INJECTABLE_DECORATOR);var e=Reflect.getMetadata(Nc.DESIGN_PARAM_TYPES,t)||[];return Reflect.defineMetadata(Nc.PARAM_TYPES,e,t),t}}}));u(uf);uf.injectable;var sf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.tagged=function(t,e){return function(n,r,i){var o=new jc.Metadata(t,e);"number"==typeof i?Bc.tagParameter(n,r,i,o):Bc.tagProperty(n,r,o)}}}));u(sf);sf.tagged;var cf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.named=function(t){return function(e,n,r){var i=new jc.Metadata(Nc.NAMED_TAG,t);"number"==typeof r?Bc.tagParameter(e,n,r,i):Bc.tagProperty(e,n,i)}}}));u(cf);cf.named;var ff=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.optional=function(){return function(t,e,n){var r=new jc.Metadata(Nc.OPTIONAL_TAG,!0);"number"==typeof n?Bc.tagParameter(t,e,n,r):Bc.tagProperty(t,e,r)}}}));u(ff);ff.optional;var lf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.unmanaged=function(){return function(t,e,n){var r=new jc.Metadata(Nc.UNMANAGED_TAG,!0);Bc.tagParameter(t,e,n,r)}}}));u(lf);lf.unmanaged;var df=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiInject=function(t){return function(e,n,r){var i=new jc.Metadata(Nc.MULTI_INJECT_TAG,t);"number"==typeof r?Bc.tagParameter(e,n,r,i):Bc.tagProperty(e,n,i)}}}));u(df);df.multiInject;var hf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.targetName=function(t){return function(e,n,r){var i=new jc.Metadata(Nc.NAME_TAG,t);Bc.tagParameter(e,n,r,i)}}}));u(hf);hf.targetName;var pf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.postConstruct=function(){return function(t,e,n){var r=new jc.Metadata(Nc.POST_CONSTRUCT,e);if(Reflect.hasOwnMetadata(Nc.POST_CONSTRUCT,t.constructor))throw new Error(Mc.MULTIPLE_POST_CONSTRUCT_METHODS);Reflect.defineMetadata(Nc.POST_CONSTRUCT,r,t.constructor)}}}));u(pf);pf.postConstruct;var yf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.multiBindToService=function(t){return function(e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.forEach((function(n){return t.bind(n).toService(e)}))}}}}));u(yf);yf.multiBindToService;var gf=s((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.METADATA_KEY=Nc,e.Container=of.Container,e.BindingScopeEnum=Cc.BindingScopeEnum,e.BindingTypeEnum=Cc.BindingTypeEnum,e.TargetTypeEnum=Cc.TargetTypeEnum,e.AsyncContainerModule=af.AsyncContainerModule,e.ContainerModule=af.ContainerModule,e.injectable=uf.injectable,e.tagged=sf.tagged,e.named=cf.named,e.inject=Gc.inject,e.LazyServiceIdentifer=Gc.LazyServiceIdentifer,e.optional=ff.optional,e.unmanaged=lf.unmanaged,e.multiInject=df.multiInject,e.targetName=hf.targetName,e.postConstruct=pf.postConstruct,e.MetadataReader=Lc.MetadataReader,e.id=Pc.id,e.decorate=Bc.decorate,e.traverseAncerstors=zc.traverseAncerstors,e.taggedConstraint=zc.taggedConstraint,e.namedConstraint=zc.namedConstraint,e.typeConstraint=zc.typeConstraint,e.getServiceIdentifierAsString=Uc.getServiceIdentifierAsString,e.multiBindToService=yf.multiBindToService}));u(gf);var vf;gf.METADATA_KEY,gf.Container,gf.BindingScopeEnum,gf.BindingTypeEnum,gf.TargetTypeEnum,gf.AsyncContainerModule,gf.ContainerModule,gf.injectable,gf.tagged,gf.named,gf.inject,gf.LazyServiceIdentifer,gf.optional,gf.unmanaged,gf.multiInject,gf.targetName,gf.postConstruct,gf.MetadataReader,gf.id,gf.decorate,gf.traverseAncerstors,gf.taggedConstraint,gf.namedConstraint,gf.typeConstraint,gf.getServiceIdentifierAsString,gf.multiBindToService;!function(t){!function(e){var n="object"==typeof a?a:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=i(t);function i(t,e){return function(n,r){"function"!=typeof t[n]&&Object.defineProperty(t,n,{configurable:!0,writable:!0,value:r}),e&&e(n,r)}}void 0===n.Reflect?n.Reflect=t:r=i(n.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,r=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",i=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,u=!o&&!a,s={create:o?function(){return M(Object.create(null))}:a?function(){return M({__proto__:null})}:function(){return M({})},has:u?function(t,n){return e.call(t,n)}:function(t,e){return e in t},get:u?function(t,n){return e.call(t,n)?t[n]:void 0}:function(t,e){return t[e]}},c=Object.getPrototypeOf(Function),f="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,l=f||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],n=function(){function t(t,e,n){this._index=0,this._keys=t,this._values=e,this._selector=n}return t.prototype["@@iterator"]=function(){return this},t.prototype[i]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var n=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var n=this._find(t,!0);return this._values[n]=e,this},e.prototype.delete=function(e){var n=this._find(e,!1);if(n>=0){for(var r=this._keys.length,i=n+1;i<r;i++)this._keys[i-1]=this._keys[i],this._values[i-1]=this._values[i];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new n(this._keys,this._values,r)},e.prototype.values=function(){return new n(this._keys,this._values,o)},e.prototype.entries=function(){return new n(this._keys,this._values,a)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[i]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function o(t,e){return e}function a(t,e){return[t,e]}}():Map,d=f||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new l}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[i]=function(){return this.keys()},t}():Set,h=new(f||"function"!=typeof WeakMap?function(){var t=s.create(),n=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=i(t,!1);return void 0!==e&&s.has(e,this._key)},t.prototype.get=function(t){var e=i(t,!1);return void 0!==e?s.get(e,this._key):void 0},t.prototype.set=function(t,e){return i(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=i(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+a()}while(s.has(t,e));return t[e]=!0,e}function i(t,r){if(!e.call(t,n)){if(!r)return;Object.defineProperty(t,n,{value:s.create()})}return t[n]}function o(t,e){for(var n=0;n<e;++n)t[n]=255*Math.random()|0;return t}function a(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):o(new Uint8Array(t),t):o(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var n="",r=0;r<16;++r){var i=e[r];4!==r&&6!==r&&8!==r||(n+="-"),i<16&&(n+="0"),n+=i.toString(16).toLowerCase()}return n}}():WeakMap);function p(t,e,n){var r=h.get(t);if(b(r)){if(!n)return;r=new l,h.set(t,r)}var i=r.get(e);if(b(i)){if(!n)return;i=new l,r.set(e,i)}return i}function y(t,e,n){var r=p(e,n,!1);return!b(r)&&!!r.has(t)}function g(t,e,n){var r=p(e,n,!1);if(!b(r))return r.get(t)}function v(t,e,n,r){p(n,r,!0).set(t,e)}function _(t,e){var n=[],r=p(t,e,!1);if(b(r))return n;for(var o=function(t){var e=N(t,i);if(!O(e))throw new TypeError;var n=e.call(t);if(!A(n))throw new TypeError;return n}(r.keys()),a=0;;){var u=C(o);if(!u)return n.length=a,n;var s=u.value;try{n[a]=s}catch(t){try{P(o)}finally{throw t}}a++}}function m(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function b(t){return void 0===t}function E(t){return null===t}function A(t){return"object"==typeof t?null!==t:"function"==typeof t}function S(t,e){switch(m(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var n=3===e?"string":5===e?"number":"default",i=N(t,r);if(void 0!==i){var o=i.call(t,n);if(A(o))throw new TypeError;return o}return function(t,e){if("string"===e){var n=t.toString;if(O(n))if(!A(i=n.call(t)))return i;if(O(r=t.valueOf))if(!A(i=r.call(t)))return i}else{var r;if(O(r=t.valueOf))if(!A(i=r.call(t)))return i;var i,o=t.toString;if(O(o))if(!A(i=o.call(t)))return i}throw new TypeError}(t,"default"===n?"number":n)}function w(t){var e=S(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function T(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function O(t){return"function"==typeof t}function I(t){return"function"==typeof t}function N(t,e){var n=t[e];if(null!=n){if(!O(n))throw new TypeError;return n}}function C(t){var e=t.next();return!e.done&&e}function P(t){var e=t.return;e&&e.call(t)}function R(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===c)return e;if(e!==c)return e;var n=t.prototype,r=n&&Object.getPrototypeOf(n);if(null==r||r===Object.prototype)return e;var i=r.constructor;return"function"!=typeof i||i===t?e:i}function M(t){return t.__=void 0,delete t.__,t}t("decorate",(function(t,e,n,r){if(b(n)){if(!T(t))throw new TypeError;if(!I(e))throw new TypeError;return function(t,e){for(var n=t.length-1;n>=0;--n){var r=(0,t[n])(e);if(!b(r)&&!E(r)){if(!I(r))throw new TypeError;e=r}}return e}(t,e)}if(!T(t))throw new TypeError;if(!A(e))throw new TypeError;if(!A(r)&&!b(r)&&!E(r))throw new TypeError;return E(r)&&(r=void 0),function(t,e,n,r){for(var i=t.length-1;i>=0;--i){var o=(0,t[i])(e,n,r);if(!b(o)&&!E(o)){if(!A(o))throw new TypeError;r=o}}return r}(t,e,n=w(n),r)})),t("metadata",(function(t,e){return function(n,r){if(!A(n))throw new TypeError;if(!b(r)&&!function(t){switch(m(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;v(t,e,n,r)}})),t("defineMetadata",(function(t,e,n,r){if(!A(n))throw new TypeError;return b(r)||(r=w(r)),v(t,e,n,r)})),t("hasMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return b(n)||(n=w(n)),function t(e,n,r){if(y(e,n,r))return!0;var i=R(n);return!E(i)&&t(e,i,r)}(t,e,n)})),t("hasOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return b(n)||(n=w(n)),y(t,e,n)})),t("getMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return b(n)||(n=w(n)),function t(e,n,r){if(y(e,n,r))return g(e,n,r);var i=R(n);return E(i)?void 0:t(e,i,r)}(t,e,n)})),t("getOwnMetadata",(function(t,e,n){if(!A(e))throw new TypeError;return b(n)||(n=w(n)),g(t,e,n)})),t("getMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return b(e)||(e=w(e)),function t(e,n){var r=_(e,n),i=R(e);if(null===i)return r;var o=t(i,n);if(o.length<=0)return r;if(r.length<=0)return o;for(var a=new d,u=[],s=0,c=r;s<c.length;s++){var f=c[s];a.has(f)||(a.add(f),u.push(f))}for(var l=0,h=o;l<h.length;l++){f=h[l];a.has(f)||(a.add(f),u.push(f))}return u}(t,e)})),t("getOwnMetadataKeys",(function(t,e){if(!A(t))throw new TypeError;return b(e)||(e=w(e)),_(t,e)})),t("deleteMetadata",(function(t,e,n){if(!A(e))throw new TypeError;b(n)||(n=w(n));var r=p(e,n,!1);if(b(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var i=h.get(e);return i.delete(n),i.size>0||h.delete(e),!0}))}(r)}()}(vf||(vf={}));var _f=s((function(t,e){var n=a&&a.__assign||function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.deepCopy=function t(e){if(null===e)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){var r=[];return e.forEach((function(t){r.push(t)})),r.map((function(e){return t(e)}))}if("object"==typeof e&&e!=={}){var i=n({},e);return Object.keys(i).forEach((function(e){i[e]=t(i[e])})),i}return e}}));u(_f);_f.deepCopy;var mf=s((function(t,e){function n(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=t[Symbol.iterator]()).next.bind(n)}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function i(t,e){if(t!==e)throw new TypeError("Cannot instantiate an arrow function")}Object.defineProperty(e,"__esModule",{value:!0});var o={ConfigService:Symbol("ConfigService"),DopplerService:Symbol("DopplerService"),FeatureFlagService:Symbol("FeatureFlagService"),Telemetry:Symbol("Telemetry"),TrackService:Symbol("TrackService")};
/*! *****************************************************************************
	Copyright (c) Microsoft Corporation.

	Permission to use, copy, modify, and/or distribute this software for any
	purpose with or without fee is hereby granted.

	THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
	REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
	AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
	INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
	LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
	OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
	PERFORMANCE OF THIS SOFTWARE.
	***************************************************************************** */function a(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var u=t.length-1;u>=0;u--)(i=t[u])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function u(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function c(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{s(r.next(t))}catch(t){o(t)}}function u(t){try{s(r.throw(t))}catch(t){o(t)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,u)}s((r=r.apply(t,e||[])).next())}))}var f=function(){function t(){var t=this;this._config={dopplerUrl:"",baseEvent:function(){return i(this,t),{}}.bind(this),isFeatureEnabled:function(){return i(this,t),Promise.resolve(!0)}.bind(this),version:"",isTelemetryEnabled:function(){return i(this,t),!0}.bind(this)}}var e=t.prototype;return e.config=function(){return this._config},e.applyConfig=function(t){this._config=t},t}();f=a([gf.injectable()],f);var l=function(){function t(){}var e=t.prototype;return e.sendEvent=function(t,e){return c(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r,o,a,u=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.featureFlagService.telemetryEnabled()){n.next=2;break}return n.abrupt("return",{message:"Event "+t+" not sent because the Telemetry Feature Flag is disabled."});case 2:if(r=[Object.assign(Object.assign({},this.configService.config().baseEvent()),{eventId:Ku.generateUUID(),eventType:"telemetry",eventName:t,companyName:"WarnerMedia",productName:this.brand(),applicationName:this.brand(),device:{type:navigator.platform,name:null,model:null,osName:null,osVersion:null},userProperties:{wmhhid:null,wminid:null},context:{appLocation:this.location(),sourceIp:this.ipAddress(),userAgent:navigator.userAgent.toString()},library:{name:"Psm",version:this.configService.config().version},eventProperties:e})],!this.configService.config().validateEvents){n.next=9;break}return n.next=6,this.trackService.validate(t,r);case 6:if((o=n.sent).valid()){n.next=9;break}return n.abrupt("return",Promise.reject(o));case 9:if(a=this.configService.config().dopplerUrl){n.next=12;break}return n.abrupt("return",Promise.reject("Misconfigured build. DOPPLER_URL not provided"));case 12:return n.next=14,this.featureFlagService.eventEnabled(t);case 14:if(!n.sent){n.next=18;break}return n.abrupt("return",this.doSend(a,r).then(function(t){return i(this,u),t}.bind(this)));case 18:return n.abrupt("return",{message:"Event "+t+" not sent because it is not enabled by Feature Flags"});case 19:case"end":return n.stop()}}),n,this)})))},e.location=function(){return window&&window.location&&window.location.href},e.brand=function(){return this.configService.config().baseEvent().brand||null},e.ipAddress=function(){var t=this;return this.locationPromise||(this.locationPromise=Ku.getGeoLocation()),this.locationPromise.then(function(e){return i(this,t),e.ip_address}.bind(this)),"Unknown"},e.doSend=function(t,e){return c(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r={url:t,method:"POST",payload:JSON.stringify(e)},n.abrupt("return",Ku.makeRequest(r));case 5:return n.prev=5,n.t0=n.catch(0),n.abrupt("return",Promise.reject(n.t0));case 8:case"end":return n.stop()}}),n,null,[[0,5]])})))},t}();a([gf.inject(o.ConfigService),s("design:type",Object)],l.prototype,"configService",void 0),a([gf.inject(o.FeatureFlagService),s("design:type",Object)],l.prototype,"featureFlagService",void 0),a([gf.inject(o.TrackService),s("design:type",Object)],l.prototype,"trackService",void 0),l=a([gf.injectable()],l);var d,h=function(){function t(){this.errors=[]}var e=t.prototype;return e.addError=function(t,e){this.errors.push(new p(t,e))},e.valid=function(){return 0===this.errors.length},t}(),p=function(t,e){this.value=null,this.errorType=t,e&&(this.value=e)};!function(t){t.InvalidAttribute="Invalid Attribute",t.InvalidEvent="Invalid Event",t.MalformedPayloadSchema="Malformed Payload Schema",t.MissingRequired="Missing Required Attribute"}(d||(d={}));var y=function(){function t(){this.sharedEventName="shared",this.eventProperties="eventProperties",this.configService=_.get(o.ConfigService),this.currentSchemaPromise=this.fetchSchema()}var e=t.prototype;return e.fetchSchema=function(){return c(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){var n=this;i(this,e);var r=this.schemaUrl();if(!r)return Promise.resolve(null);Ku.makeRequest({method:"GET",url:r}).then(function(e){i(this,n),t(e.schema)}.bind(this))}.bind(this)));case 1:case"end":return t.stop()}}),t,this)})))},e.currentSchema=function(){return this.currentSchemaPromise},e.schemaUrl=function(){return this.configService.config().trackSchemaUrl},e.validate=function(t,e){return c(this,void 0,void 0,regeneratorRuntime.mark((function r(){var i,o,a,u,s,c,f,l,p,y,g,v,_,m,b,E;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.eventFromName(t);case 2:i=r.sent,o=new h,a=_f.deepCopy(e)[0],u=n(i);case 6:if((s=u()).done){r.next=14;break}if(c=s.value){r.next=11;break}return o.addError(d.InvalidEvent,t),r.abrupt("return",o);case 11:for(f=n(c.eventSchemas);!(l=f()).done;){for(p=l.value,y=n(p.attributes);!(g=y()).done;)v=g.value,p.name===this.sharedEventName&&v.name in a?delete a[v.name]:a[p.name]&&v.name in a[p.name]?delete a[p.name][v.name]:a[this.eventProperties][p.name]&&v.name in a[this.eventProperties][p.name]?delete a[this.eventProperties][p.name][v.name]:v.required&&o.addError(d.MissingRequired,p.name+": "+v.name);!a[this.eventProperties][p.name]||Object.keys(a[this.eventProperties][p.name]).length>0||delete a[this.eventProperties][p.name]}case 12:r.next=6;break;case 14:for(_ in a)if(this.isObject(a[_]))if(a[_]!==Object(a[_]))o.addError(d.MalformedPayloadSchema,_);else for(m=0,b=Object.keys(a[_]);m<b.length;m++)E=b[m],o.addError(d.InvalidAttribute,_+": "+E);else o.addError(d.InvalidAttribute,_+": "+a[_]);return r.abrupt("return",o);case 16:case"end":return r.stop()}}),r,this)})))},e.eventFromName=function(t){return c(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,r,o=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.currentSchema();case 2:if(!(n=e.sent)){e.next=10;break}return(r=[]).push(n.events.find(function(t){return i(this,o),t.name===this.sharedEventName}.bind(this))),r.push(n.events.find(function(e){return i(this,o),e.name===t}.bind(this))),e.abrupt("return",Promise.resolve(r));case 10:return e.abrupt("return",Promise.reject("Schema not available"));case 11:case"end":return e.stop()}}),e,this)})))},e.isObject=function(t){return t&&"object"==typeof t&&t.constructor===Object},t}();y=a([gf.injectable(),s("design:paramtypes",[])],y);var g=function(){function t(){this.TELEMETRY_EVENT_PREFIX="telemetry.events.",this.config=_.get(o.ConfigService)&&_.get(o.ConfigService).config()}var e=t.prototype;return e.eventEnabled=function(t,e){return void 0===e&&(e=!0),c(this,void 0,void 0,regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.featureEnabled(""+this.TELEMETRY_EVENT_PREFIX+t,e));case 1:case"end":return n.stop()}}),n,this)})))},e.featureEnabled=function(t,e){return void 0===e&&(e=!0),c(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",this.config.isFeatureEnabled(t,e).then(function(t){return i(this,r),t}.bind(this)).catch(function(){return i(this,r),e}.bind(this)));case 1:case"end":return n.stop()}}),n,this)})))},e.telemetryEnabled=function(){return this.config.isTelemetryEnabled()},e.heartbeatFrequency=function(){return 5},e.heartbeatInactivityTimeout=function(){return 60},t}();g=a([gf.injectable(),s("design:paramtypes",[])],g);var v=function(){function t(t,e,n){this.observers=[],this.dopplerService=t,this._featureFlagService=e,this.trackService=n,this.sendAppLoad()}var e=t.prototype;return e.addObserver=function(t){this.observers.push(t)},e.featureFlagService=function(){return this._featureFlagService},e.notifyObservers=function(t){var e=this;this.observers.map(function(n){return i(this,e),n.notified(t)}.bind(this))},e.sendAppLoad=function(){return this.sendEvent("appLoad",{})},e.sendEvent=function(t,e){return c(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r=this;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._featureFlagService.telemetryEnabled()){n.next=2;break}return n.abrupt("return",{message:"Event "+t+" not sent because the Telemetry Feature Flag is disabled."});case 2:return n.abrupt("return",this.dopplerService.sendEvent(t,e).then(function(t){return i(this,r),this.notifyObservers(t),t}.bind(this)));case 3:case"end":return n.stop()}}),n,this)})))},t}();v=a([gf.injectable(),u(0,gf.inject(o.DopplerService)),u(1,gf.inject(o.FeatureFlagService)),u(2,gf.inject(o.TrackService)),s("design:paramtypes",[Object,Object,Object])],v);var _=new gf.Container;_.bind(o.DopplerService).to(l),_.bind(o.FeatureFlagService).to(g),_.bind(o.ConfigService).to(f).inSingletonScope(),_.bind(o.TrackService).to(y),_.bind(o.Telemetry).to(v);var m=function(){function t(t){this.callback=t}return t.prototype.notified=function(t){this.callback(t)},t}();e.CallbackObserver=m,e.SchemaError=p,e.TYPES=o,e.initTelemetry=function(t){return _.get(o.ConfigService).applyConfig(t),_.get(o.Telemetry)}}));u(mf);mf.CallbackObserver,mf.SchemaError,mf.TYPES;var bf=mf.initTelemetry;function Ef(){var t=zu("psmMetaData"),e=window.location.hostname;return(null==t?void 0:t.domain)&&(e=t.domain),e}var Af={featureFlag:{DEV:"https://wmff.warnermediacdn.com/psm_dev_full.json",QA:"https://wmff.warnermediacdn.com/psm_qa_full.json",PROD:"https://wmff.warnermediacdn.com/psm_prod_full.json"},privacy:{DEV:"https://dev.privacy.api.wmcdp.io/v1/pvc",QA:"https://test.privacy.api.wmcdp.io/v1/pvc",PROD:"https://privacy.api.wmcdp.io/v1/pvc"},identity:{DEV:"https://dev.identity.api.wmcdp.io/v1/reg",QA:"https://test.identity.api.wmcdp.io/v1/reg",PROD:"https://identity.api.wmcdp.io/v1/reg"},telemetry:{DEV:"https://dev.telemetry.api.wmcdp.io/v1/tel",QA:"https://test.telemetry.api.wmcdp.io/v1/tel",PROD:"https://telemetry.api.wmcdp.io/v1/tel"},errors:{DEV:"https://dev.logs.psm.wmcdp.io",QA:"https://dev.logs.psm.wmcdp.io",PROD:"https://logs.psm.wmcdp.io"}},Sf={featureFlagLibraryVersion:"0.1",flags:[{defaultValue:!0,id:"getSetConsentState",cohorts:[],name:"FALLBACK_getSetConsentState",type:"boolean"},{defaultValue:!0,id:"telemetry",cohorts:[],name:"FALLBACK_telemetry",type:"boolean"},{defaultValue:!0,id:"WMUKID",cohorts:[],name:"FALLBACK_WMUKID",type:"boolean"}]},wf=[{flagId:"getSetConsentState",flagName:"getSetConsentState",enabled:!0,userId:"",userIdType:"ffUserId",warnings:[]},{flagId:"WMUKID",flagName:"WMUKID",enabled:!0,userId:"",userIdType:"ffUserId",warnings:[]},{flagId:"telemetry",flagName:"telemetry",enabled:!0,userId:"",userIdType:"ffUserId",warnings:[]}];function Tf(){return"1.2.1"}function Of(t,e){var n=t.toUpperCase();return Af[e]["DEV"===n||"DEVELOPMENT"===n?"DEV":"TEST"===n||"TESTING"===n||"STAGE"===n||"STAGING"===n||"QA"===n?"QA":"PROD"]}function If(t,e){for(var n=0;n<t.length;n++)if(t[n].flagId===e)return t[n]}function Nf(t){var e={};try{var n=zu("psmFeatureFlags");e=n?If(n,t)||{}:If(wf,t)||{}}catch(n){e=If(wf,t)||{}}return e.enabled||!1}function Cf(){return Nf("getSetConsentState")}function Pf(){return Nf("telemetry")}function Rf(){return Nf("WMUKID")}var Mf=Nt.indexOf,Lf=[].indexOf,xf=!!Lf&&1/[1].indexOf(1,-0)<0,Df=me("indexOf"),Uf=Se("indexOf",{ACCESSORS:!0,1:0});function Ff(){var t=zu("psmMetaData"),e=null==t?void 0:t.location;return e&&["US","PR","VI","UM",""].indexOf(e.toUpperCase())>=0}function jf(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.psmMetaData,r=void 0===n?zu("psmMetaData"):n,i=e.wmukid,o=i;o||(o=null===(t=zu("WMUKID"))||void 0===t?void 0:t.id);var a={};a={appId:r.appId||"Unknown",wmukid:o||"Unknown",wmhhid:zu("wmhhid"),wminid:zu("wminid"),attuid:zu("firstpartyuid"),timestamp:Ju(),brand:r.brand||null,domain:r.domain||null,userAgent:window.navigator.userAgent.toString(),platform:"web",library:{name:"Psm",version:"1.2.1"}};var u=zu("psmExternalIds")||{};return 0!==Object.keys(u).length&&u.kruxid&&"retry"!==u.kruxid&&(a.ids=u),a}function kf(t){console.info(t)}function Bf(t,e,n,r){var i="{}";try{i=(i=zu("WMUKID")).id}catch(t){i="Unknown"}var o=zu("psmMetaData"),a=o.appId||null,u={message:{eventType:t,method:e,WMUKID:i,Brand:o.brand||null,appId:a,Platform:"Web",error:!0,errorMessage:n.message,flagName:r,enabled:!0}},s=Of(o.environment||"PROD","errors");Qu({url:s,method:"POST",payload:u})}function Gf(t,e,n){if(Pf())return setTimeout((function(){try{return window.WM.CDP.telemetryModule.sendEvent(e,n)}catch(e){Bf("Telemetry",t,e)}}),2e3)}function Wf(t){var e=t,n=zu(e);n.retry=!0,$u(e,n,Ef())}function Vf(t){$u("psmRetryExternalIds","false",t);var e=zu("psmExternalIds")||{},n=e.kruxid,r=function(){var t;try{(t=window.Krux.kuid)||(t=localStorage.getItem("kxkuid")||"")}catch(n){var e=localStorage.getItem("kxkuid");"string"==typeof e&&(t=e)}return t}();if(r===n)return!1;if("string"!=typeof r)e={};else{if(!(r.length>0))return e.kruxid="retry",$u("psmExternalIds",e,t),$u("psmRetryExternalIds","true",t),!1;e.kruxid=r}return $u("psmExternalIds",e,t),!0}function Kf(t){return qf.apply(this,arguments)}function qf(){return(qf=l(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,u,s,c,f,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=zu("psmMetaData")||{},r=jf({psmMetaData:n,wmukid:e.id}),i=zu("psmRetryExternalIds")||!1,"Unknown"!==r.wmukid){t.next=6;break}return Bf("Identity","registerIdentity",{message:"WMUKID is Unknown"},"WMUKID"),t.abrupt("return");case 6:if(o=r.userAgent,"((?:[A-z0-9]+|[A-z-]+ ?)?(?: the )?(?:[Ss][Pp][Ii][Dd][Ee][Rr]|[Ss]crape|[A-Za-z0-9-]*(?:[^C][^Uu])[Bb]ot|[Cc][Rr][Aa][Ww][Ll])[A-z0-9]*)(?:(?:[ /]| v)(d+)(?:.(d+)(?:.(d+))?)?)?",!o.match("((?:[A-z0-9]+|[A-z-]+ ?)?(?: the )?(?:[Ss][Pp][Ii][Dd][Ee][Rr]|[Ss]crape|[A-Za-z0-9-]*(?:[^C][^Uu])[Bb]ot|[Cc][Rr][Aa][Ww][Ll])[A-z0-9]*)(?:(?:[ /]| v)(d+)(?:.(d+)(?:.(d+))?)?)?")){t.next=10;break}return t.abrupt("return");case 10:if(!i){t.next=13;break}return Wf("WMUKID"),t.abrupt("return","External IDs not found.");case 13:return t.next=15,Hu();case 15:if(t.t0=t.sent,t.t0){t.next=18;break}t.t0={};case 18:return(a=t.t0).states||(a.states=[{state:"Unknown",cities:["Unknown"],zipcodes:[]}]),u={country:a.country_alpha2||"Unknown",state:a.states[0].state||"Unknown",city:a.states[0].cities[0]||"Unknown",zips:a.states[0].zipcodes||"Unknown"},s=y(y(y({},r),u),{},{ip:a.ip_address||"Unknown",cookies:Yu()}),c=n.environment||"PROD",f=Of(c,"identity"),t.prev=24,t.next=27,Qu({url:f,method:"POST",payload:s});case 27:return l=t.sent,Gf("registerIdentity","identity-registerWMUKID",u),t.abrupt("return",l);case 32:throw t.prev=32,t.t1=t.catch(24),Bf("Identity","registerIdentity",t.t1,"WMUKID"),Wf("WMUKID"),t.t1;case 37:case"end":return t.stop()}}),t,null,[[24,32]])})))).apply(this,arguments)}function Yf(){var t=Rf(),e=Ff();if(!t||!e)return"Unknown";var n,r=zu("WMUKID")||null;if(!r)return n={id:qu(),version:.1,timestamp:(new Date).toISOString()},$u("WMUKID",n,Ef()),Kf(n).then((function(t){kf("identity registered ".concat(JSON.stringify(t)||n.id))})).catch((function(t){Bf("Identity","createWMUKID",t,"WMUKID")})),n.id;r.retry&&(delete r.retry,$u("WMUKID",r,Ef()),Kf(r).then((function(t){kf("identity registered ".concat(JSON.stringify(t)||r.id))})).catch((function(t){Wf("WMUKID"),Bf("Identity","getWMUKID",t,"WMUKID")})));try{r=r.id}catch(t){Bf("Identity","getWMUKID",t,"WMUKID")}return r}function Jf(){if(Cf()&&Ff())return zu("usprivacy")}function Hf(){if(Cf()&&Ff())return zu("uspObject")}function zf(){if(Cf()&&Ff())return zu("uspData")}function Qf(){if(Cf()&&Ff()){var t=!1,e=zu("usprivacy");return"Y"===(e&&e.split("")||[])[2]&&(t=!0),t}}function $f(){if(Cf()&&Ff()){var t=0,e=zu("usprivacy");return"Y"===(e&&e.split("")||[])[2]&&(t=1),t}}function Xf(t){var e={uspString:t,comScore:1};"1YYN"===t&&(e={uspString:t,comScore:0}),$u("uspObject",e,Ef())}function Zf(t,e){var n={version:parseInt(e,10)||e,uspString:t};$u("uspData",n,Ef())}function tl(t){$u("usprivacy",t,Ef())}qt({target:"Array",proto:!0,forced:xf||!Df||!Uf},{indexOf:function(t){return xf?Lf.apply(this,arguments)||0:Mf(this,t,arguments.length>1?arguments[1]:void 0)}});var el,nl=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.specCharacter="1",this.opportunity="Y",this.optOut="N",this.LSPA="N",this.uspString="",this.getUSPString=Jf,this.getUSPObject=Hf,this.getUSPInt=$f,this.getUSPBoolean=Qf,this.getUSPData=zf,this.ccpaDoNotShare=this.ccpaDoNotShare.bind(this),this.ccpaShareData=this.ccpaShareData.bind(this),this.setUSPData=this.setUSPData.bind(this),this.__uspapi=this.__uspapi.bind(this)}var e,n,r,i;return e=t,(n=[{key:"sendPrivacyEvent",value:(i=l(regeneratorRuntime.mark((function t(e){var n,r,i,o,a,u,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if($u("retryPrivacy","false",Ef()),n=zu("psmMetaData"),r=zu("psmRetryExternalIds")||!1,!i)try{i=zu("WMUKID").id}catch(t){i=Yf()}if(i&&void 0!==i){t.next=7;break}return $u("retryPrivacy","true",Ef()),t.abrupt("return",Bf("pvc","sendPrivacyEvent","WMUKID not found"));case 7:if(!r){t.next=10;break}return $u("retryPrivacy","true",Ef()),t.abrupt("return","Privacy not registered: External IDs not generated yet.");case 10:return o=jf({psmMetaData:n,wmukid:i}),a=n.environment||"PROD",u=Of(a,"privacy"),o.optOut=e,t.prev=14,t.next=17,Qu({url:u,method:"POST",payload:o});case 17:return s=t.sent,Gf("sendPrivacyEvent","privacy-registerPrivacyEvent",{optOut:e}),t.abrupt("return",s);case 22:return t.prev=22,t.t0=t.catch(14),$u("retryPrivacy","true",Ef()),Bf("pvc","sendPrivacyEvent",t.t0),t.abrupt("return",t.t0);case 27:case"end":return t.stop()}}),t,null,[[14,22]])}))),function(t){return i.apply(this,arguments)})},{key:"__uspapi",value:function(t,e,n){"getUSPData"!==t||1!==e&&"1"!==e?"ccpaDoNotShare"===t?n({version:e,uspString:this.ccpaDoNotShare()},!0):"ccpaShareData"===t?n({version:e,uspString:this.ccpaShareData()},!0):"ping"===t?n({version:1,uspapiLoaded:!0},!0):n(null,!1):n({version:e,uspString:Jf()},!0)}},{key:"createUspIabHandlers",value:function(){var t;null===function(t){var e,n=null;for(e=window;e;e=e.parent){try{if(e.frames&&e.frames[t]){n=e;break}}catch(t){throw new Error(t)}if(e===window.top)break}return n}("__uspapiLocator")&&(function t(e){var n;return!window.frames[e]&&(document.body?((n=document.createElement("iframe")).style.cssText="display:none",n.name=e,document.body.appendChild(n)):setTimeout(t.bind(window,e),5),!0)}("__uspapiLocator"),window.__uspapi.msgHandler=function(t){try{var e,n,r="string"==typeof t.data;try{n=r?JSON.parse(t.data):t.data}catch(t){n={}}"object"===c(n)&&null!==n&&n.__uspapiCall&&(e=n.__uspapiCall,window.__uspapi(e.command,e.version,(function(n,i){var o={};o.__uspapiReturn={returnValue:n,success:i,callId:e.callId},t.source.postMessage(r?JSON.stringify(o):o,"*")}),e.parameter))}catch(t){Bf("Privacy","_uspMsgHandler",t)}},t=window.__uspapi.msgHandler,window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent("onmessage",t))}},{key:"setUSPData",value:function(t){if(Gf("setUSPData","privacy-setUSPData",{}),Cf())return t?this.ccpaDoNotShare():this.ccpaShareData();kf("privacy is off")}},{key:"ccpaDoNotShare",value:function(){Gf("ccpaDoNotShare","privacy-ccpaDoNotShare",{});var t=Ff(),e=Cf(),n=Jf();if(e&&t&&"-"!==this.optOut&&"1---"!==n&&"1YYN"!==n)return this.sendPrivacyEvent(!0),this.optOut="Y",this.generateUSPString(),tl(this.uspString),Xf(this.uspString),Zf(this.uspString,this.specCharacter),this.uspString}},{key:"ccpaShareData",value:function(){Gf("ccpaShareData","privacy-ccpaShareData",{});var t=Ff(),e=Cf(),n=Jf();if(e&&t&&"-"!==this.optOut&&"1---"!==n&&"1YNN"!==n&&n)return this.sendPrivacyEvent(!1),this.optOut="N",this.generateUSPString(),tl(this.uspString),Xf(this.uspString),Zf(this.uspString,this.specCharacter),this.uspString}},{key:"generateUSPString",value:function(){var t="".concat(this.specCharacter).concat(this.opportunity).concat(this.optOut).concat(this.LSPA);return this.uspString=t,this.uspString}},{key:"initPrivacy",value:function(){this.createUspIabHandlers();var t=Ff(),e=Jf(),n=Qf(),r=zu("retryPrivacy")||!1;if(e)return kf("Privacy cookie already set"),r&&this.sendPrivacyEvent(n),e;t?(this.specCharacter="1",this.opportunity="Y",this.optOut="N",this.LSPA="N"):(this.specCharacter="1",this.opportunity="-",this.optOut="-",this.LSPA="-"),this.generateUSPString(),tl(this.uspString),Xf(this.uspString),Zf(this.uspString,this.specCharacter)}}])&&d(e.prototype,n),r&&d(e,r),t}());function rl(t,e){return il.apply(this,arguments)}function il(){return(il=l(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.queryAllFeatureFlags();case 3:r=t.sent,$u("psmFeatureFlags",r.results,n),r.anyFlagsUpdatedSinceLastQuery&&Gf("getFeatureFlags","featureflagging-queryAllFeatureFlags",{featureFlags:r}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),$u("psmFeatureFlags",wf,n),Bf("FeatureFlagging","queryAllFeatureFlags",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}function ol(t,e,n,r,i){return al.apply(this,arguments)}function al(){return(al=l(regeneratorRuntime.mark((function t(e,n,r,i,o){var a,u,s,c,f,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a={appId:e,brand:n,environment:r.toUpperCase(),domain:i},u=Of(r,"featureFlag"),s=Of(r,"telemetry"),Vf(i)&&($u("WMUKID","null",i),"1YYN"===zu("usprivacy")&&$u("retryPrivacy","true",i)),c=new ss({configUrl:u,configRefreshInterval:6e4,userTargetingProperties:{Platform:["Web"],Brand:[n]}},Sf,!0),!o){t.next=10;break}a.location=o,t.next=15;break;case 10:return t.next=12,Hu();case 12:f=t.sent,d=f.country_alpha2,a.location=d;case 15:return $u("psmMetaData",a,i),t.next=18,rl(c,i);case 18:el=bf({baseEvent:function(){return jf({psmMetaData:a})},dopplerUrl:s,isFeatureEnabled:function(){var t=l(regeneratorRuntime.mark((function t(e,n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,c.isFeatureEnabled(e);case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",n);case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),version:"1.2.1",isTelemetryEnabled:Pf}),window.WM.CDP.telemetryModule=el,Yf(),nl.initPrivacy(!0);case 22:case"end":return t.stop()}}),t)})))).apply(this,arguments)}window.WM=window.WM||{},window.WM.CDP=window.WM.CDP||{},window.__uspapi=nl.__uspapi,window.WM.CDP.getUSPString=function(){return Gf("getUSPString","privacy-getUSPString",{}),nl.getUSPString()},window.WM.CDP.getUSPBoolean=function(){return Gf("getUSPBoolean","privacy-getUSPBoolean",{}),nl.getUSPBoolean()},window.WM.CDP.getUSPInt=function(){return Gf("getUSPInt","privacy-getUSPInt",{}),nl.getUSPInt()},window.WM.CDP.getUSPObject=function(){return Gf("getUSPObject","privacy-getUSPObject",{}),nl.getUSPObject()},window.WM.CDP.getUSPData=function(){return Gf("getUSPData","privacy-getUSPData",{}),nl.getUSPData()},window.WM.CDP.ccpaDoNotShare=nl.ccpaDoNotShare,window.WM.CDP.ccpaShareData=nl.ccpaShareData,window.WM.CDP.setUSPData=nl.setUSPData,window.WM.CDP.getWMUKID=Yf,window.WM.CDP.initPsm=ol,window.WM.CDP.isIdentityEnabled=Rf,window.WM.CDP.isPrivacyEnabled=Cf,window.WM.CDP.isTelemetryEnabled=Pf,window.WM.CDP.getVersion=Tf;var ul=nl.__uspapi,sl=nl.getUSPString,cl=nl.getUSPBoolean,fl=nl.getUSPInt,ll=nl.getUSPObject,dl=nl.getUSPData,hl=nl.setUSPData,pl=nl.ccpaDoNotShare,yl=nl.ccpaShareData;t.__uspapi=ul,t.ccpaDoNotShare=pl,t.ccpaShareData=yl,t.getUSPBoolean=cl,t.getUSPData=dl,t.getUSPInt=fl,t.getUSPObject=ll,t.getUSPString=sl,t.initPsm=ol,t.setUSPData=hl,Object.defineProperty(t,"__esModule",{value:!0})}));
