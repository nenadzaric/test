$(window).on('load', function(){ $('.product-image-video , .video-play-button').on('click', function(evt) { $('#shopify-section-header .pdp-video--popup').remove(); $('#shopify-section-header').append('<div class="pdp-video--popup video--popup visually-hidden"><div class="product-image-video"></div></div>'); $('#shopify-section-header .pdp-video--popup > .product-image-video').append($(evt.target).parent().find('.video--holder').html()); $('#shopify-section-header > .pdp-video--popup > div.product-image-video').addClass('video-popup');   var _url = $(evt.target).closest('.product-single__photo').find('.video--holder > div').attr('data-video-url'); $(evt.target).closest('.product-single__photo').find('.video--holder').removeClass('visually-hidden'); $(evt.target).closest('.product-single__photo').find('.video--holder > div > iframe').attr('src', _url); });});function openPopup(p_el, o_cl) {$(p_el).removeClass('visually-hidden'); $(p_el).addClass('popup--open'); if($(p_el).has('.ui-widget-overlay').length < 1 ) {$(p_el).append('<div class="'+o_cl+'"></div>'); $('.'+o_cl.replace(/ /g,'.')).on('click', function(evt) { $(evt.target).parent().removeClass('popup--open'); $(evt.target).parent().addClass('visually-hidden'); if($(evt.target).parent().hasClass('video--popup')) { $('.video--popup').empty(); $('.video--popup').append('<div class="video-popup"><div class="video--container"><video id="popup--video"></video></div></div>'); }}); }} 