if(window.WM=window.WM||{},window.WM.UserGeo=window.WM.UserGeo||{},WM.UserGeo.checkGeoCookie=function(){var e=decodeURIComponent(document.cookie).split(";");for(i=0;i<e.length;i++){if(-1!=e[i].indexOf("countryCode="))return!0}return!1},WM.UserGeo.setGeoCookie=function(e){document.cookie="countryCode="+e},!WM.UserGeo.checkGeoCookie()){var xhttp=new XMLHttpRequest;xhttp.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=JSON.parse(xhttp.responseText);WM.UserGeo.setGeoCookie(e.country_alpha2)}};var queryComponent=WM.UserGeo.appId?"?appId="+WM.UserGeo.appId:"/";xhttp.open("GET","https://geo.ngtv.io/locate"+queryComponent,!1),xhttp.send()}!function(e,n){if("function"!=typeof e.CustomEvent){function o(e,o){var t;return o=o||{bubbles:!1,cancelable:!1,detail:void 0},(t=n.createEvent("CustomEvent")).initCustomEvent(e,o.bubbles,o.cancelable,o.detail),t}o.prototype=e.Event.prototype,e.CustomEvent=o,"function"!==e.Event&&(e.Event=o)}}(window,document),window.WM.UserConsent=function(e,n){"use strict";var o,t={},r=null,i=null,s="",a={},c="",l=new CustomEvent("optanonLoaded"),u=!1,g=new CustomEvent("userConsentReady"),d={categories:{req:"required",ad:"ads-general",adv:"ads-vendor",bb:"behavior-general",bbv:"behavior-vendor",pf:"perf-general",pfv:"perf-vendor",pz:"person-general",pzv:"person-vendor",sa:"storage-general",sav:"storage-vendor",sm:"social-general",smv:"social-vendor"},ccCookie:"countryCode",confirmCookie:"OptanonAlertBoxClosed",consentChangeAction:null,consentCookie:"OptanonConsent",consentDefaults:{required:!0,"ads-general":!0,"ads-vendor":!0,"behavior-general":!0,"behavior-vendor":!0,"perf-general":!0,"perf-vendor":!0,"person-general":!0,"person-vendor":!0,"social-general":!0,"social-vendor":!0,"storage-general":!0,"storage-vendor":!0},consentLinkTitle:"",controlCookie:"OptanonControl",privacyCenterLinkTitle:"",regionChangeAction:null,regions:[{id:"ccpa",consentLinkTitle:"Do Not Sell My Personal Information",geoMatch:["US","PR","VI","UM",""],useIAB:!1},{id:"gdpr",consentLinkTitle:"Cookie Settings",consentDefaults:{required:!0,"ads-general":!1,"ads-vendor":!1,"behavior-general":!1,"behavior-vendor":!1,"perf-general":!1,"perf-vendor":!1,"person-general":!1,"person-vendor":!1,"social-general":!1,"social-vendor":!1,"storage-general":!1,"storage-vendor":!1},geoMatch:["GB","DE","FR","IT","ES","PL","RO","NL","BE","GR","CZ","PT","SE","HU","AT","BG","DK","FI","SK","IE","HR","LT","SI","LV","EE","CY","LU","MT","NO","IS","LI"],useIAB:!0},{id:"global",geoMatch:["*"],useIAB:!1}]};function p(e){var n=new RegExp("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)"),o=document.cookie.match(n);return o?o.pop():null}function f(e){var n;for(n=0;n<e.length;n++)if(c===e[n].toUpperCase()||"*"===e[n])return!0;return!1}function C(e){var n=0,t={};for(n=0;n<o.length;n++)t[o[n]]=e[o[n]];return t}function m(){var e,o,r,i,a,c,l,u,g,d,f,m=p(t.confirmCookie),v=p(t.consentCookie),k=C(t.consentDefaults);if(!m)return v&&(n.cookie=t.consentCookie+"=; Domain="+t.cookieDomain+"; Path=/; Expires=Thu, 01 Jan 2000 00:00:01 GMT;"),k;if(!v)return k;for(r=v.split("&"),o=0;o<r.length;o++)if(e=r[o])if(a=(i=e.split("="))[0],c=i[1],"groups"===a&&c)for(u=decodeURIComponent(c).split(","),g=0;g<u.length;g++)d=(l=u[g].split(":"))[0].toLowerCase(),f=l[1],d&&f&&t.categories[d]&&(k[t.categories[d]]="0"!==f);else"version"===a&&c&&(s=c);return k}function v(){return null!==r}function k(e,n){var o,i,s=!0;if(e)for(e=Array.isArray(e)?e:[e],i=0;i<e.length;i++)if("iab"===e[i]){if(t.useIAB&&(!n||!n.ignoreIAB))break}else if(o="boolean"==typeof r[e[i]]?e[i]:t.migratePrevious&&t.migratePrevious[e[i]]||"required",!1===r[o]){s=!1;break}return t.debug&&n&&(n.id||n.name)&&console.log("Consent check of ["+(e.join(",")||"empty")+"] "+(s?"allows ":"rejects ")+(n.id||n.name)),s}function h(){e.location.reload()}function y(){var e,o,r;e=t.controlCookie,o="ccc="+c+"&otvers="+s+"&reg="+t.regId+"&vers=1.3.4",r={domain:t.cookieDomain,maxage:"31536000",path:"/",samesite:"Lax"},e&&(r=r||{},n.cookie=e+"="+("string"==typeof o?o:"")+"; Domain="+(r.domain||t.cookieDomain)+"; Path="+(r.path||"/")+(r.maxage?"; Max-Age="+r.maxage:r.expires&&"; Expires="+r.expires||"")+(r.secure&&"; Secure")||""+(r.httponly&&"; HttpOnly")||(r.samesite?"; SameSite="+r.samesite:""))}function L(){var e,n=m();for(e=0;e<o.length;e++)if(n[o[e]]!==r[o[e]])return y(),"function"==typeof t.consentChangeAction&&t.consentChangeAction(n,t.regId,s),void setTimeout(h,100);a.region||y()}function I(l){var u,v,k=n.getElementsByTagName("head")[0],h=n.createElement("script"),y=null;if(null===r){if(!(l&&l.src&&l.domId&&l.cookieDomain))throw new Error("Invalid config passed to user-consent!");var L,I,b,A,T,E;for(t.debug=!(!console||!l.enableDebug&&-1===e.location.search.search(/[?&]wmuc_debug=[1t]/)),"string"==typeof l.countryCode&&2===l.countryCode.length?c=l.countryCode.toUpperCase():(L=l.ccCookie,I=p(L||"countryCode"),c=I&&2===I.length?I.toUpperCase():(console.log("User-Consent unable to determine country, missing or invalid cookies."),"")),t.categories=l.categories||d.categories,t.regions=l.regions||d.regions,t.cookieDomain=l.cookieDomain,t.consentChangeAction=l.consentChangeAction||d.consentChangeAction,t.controlCookie=l.controlCookie||d.controlCookie,t.regionChangeAction=l.regionChangeAction||d.regionChangeAction,u=Object.keys(t.categories),o=[],v=0;v<u.length;v++)o.push(t.categories[u[v]]);for(v=0;v<t.regions.length;v++)if(f(t.regions[v].geoMatch)){y=t.regions[v];break}if(!y)throw new Error("No matching user-consent region!");if(t.regId=y.id,t.consentLinkAction=y.consentLinkAction||l.consentLinkAction||null,t.consentLinkTitle=y.consentLinkTitle||l.consentLinkTitle||d.consentLinkTitle,t.confirmCookie=y.confirmCookie||l.confirmCookie||d.confirmCookie,t.consentCookie=y.consentCookie||l.consentCookie||d.consentCookie,t.consentDefaults=y.consentDefaults||l.consentDefaults||d.consentDefaults,t.domId=y.domId||l.domId,t.privacyCenterLinkAction=y.privacyCenterLinkAction||l.privacyCenterLinkAction||null,t.privacyCenterLinkTitle=y.privacyCenterLinkTitle||l.privacyCenterLinkTitle||d.privacyCenterLinkTitle,t.src=y.src||l.src,t.useIAB=y.useIAB||d.useIAB,y.migratePrevious&&(t.migratePrevious=y.migratePrevious),t.debug&&(console.log("GeoIP Country Code: "+c+", using consent region: "+t.regId),console.log("IAB "+(t.useIAB?"enabled":"disabled"))),a=function(){var e,n,o,r={},i=p(t.controlCookie);if("string"==typeof i&&0!==i.length)for(e=i.split("&"),n=0;n<e.length;n++)"string"==typeof(o=e[n].split("="))[1]&&("ccc"===o[0]?r.countryCode=o[1].toLowerCase():"otvers"===o[0]?r.consentVersion=o[1].toLowerCase():"reg"===o[0]?r.region=o[1].toLowerCase():"vers"===o[0]&&(r.userConsentVersion=o[1].toLowerCase()));return r}(),b=i,"string"==typeof(A=p(t.confirmCookie))&&0!==A.length&&(b=new Date(A),!0===e.isNaN(b.valueOf())&&(b=null)),null!==(i=b)?(r=m(),h.async=!0,t.debug&&(console.log('Consent time read from "'+t.confirmCookie+'": ',i),console.log('Consent state read from "'+t.consentCookie+'" ('+s+"): ",r))):(r=C(t.consentDefaults),t.debug&&console.log("Consent state from defaults: ",r)),e.WM.UserConsent_initted)console.log("ERROR:  Second instance of UserConsent initialized!");else e.WM.UserConsent_initted=!0,t.useIAB&&function(){function o(n){var o,t,r="string"==typeof n.data;try{t=r?JSON.parse(n.data):n.data}catch(e){t={}}t.__cmpCall&&(o=t.__cmpCall,e.__cmp(o.command,o.parameter,(function(e,t){var i={__cmpReturn:{returnValue:e,success:t,callId:o.callId}};n.source.postMessage(r?JSON.stringify(i):i,"*")})))}!function o(){var t;e.frames.__cmpLocator||(n.body?((t=n.createElement("iframe")).style="display:none",t.name="__cmpLocator",n.body.appendChild(t)):setTimeout(o,5))}(),"function"!=typeof e.__cmp&&(e.__cmp=function(){var n=arguments;if(e.__cmp.a=e.__cmp.a||[],!n.length)return e.__cmp.a;"ping"===n[0]?n[2]({gdprAppliesGlobally:!1,cmpLoaded:!1},!0):e.__cmp.a.push([].slice.apply(n))},e.__cmp.msgHandler=o,e.addEventListener?e.addEventListener("message",o,!1):e.attachEvent("onmessage",o))}(),a.region&&a.region!==t.regId&&(T=a.region,E=t.regId,t.debug&&console.log('User-Consent detected region change from "'+T+'" to "'+E+'".'),"function"==typeof t.regionChangeAction&&t.regionChangeAction(T,E,t.consentLinkAction)),n.dispatchEvent(g),h.charset="utf-8",h.dataset.documentLanguage="true",h.dataset.domainScript=t.domId,h.src=t.src,k.appendChild(h)}}return e.OptanonWrapper=function(){u?setTimeout(L,2e3):(u=!0,n.dispatchEvent(l))},"object"==typeof e.WM.UserConsentConfig&&null!==e.WM.UserConsentConfig&&I(e.WM.UserConsentConfig),{addScript:function(e,o,r){var i,s,a,c=r||n.head;if(e&&(e.src||e.text)){if(v()&&k(o)){for(t.debug&&console.log("Adding with ["+(o.join(",")||"empty")+"] consent: "+(e.src||e.id||"unknown inline")),i=n.createElement("script"),a=Object.keys(e),s=0;s<a.length;s++)i[a[s]]=e[a[s]];return c.appendChild(i),!0}t.debug&&console.log("Not adding, no ["+(o.join(",")||"empty")+"] consent: "+(e.src||e.id||"unknown inline"))}return!1},addScriptElement:function(e,o,r){var i=r||n.head;if(e){if(v()&&k(o))return t.debug&&console.log("Adding with ["+(o.join(",")||"empty")+"] consent: "+(e.src||e.id||"unknown inline")),i.appendChild(e),!0;t.debug&&console.log("Not adding, no ["+(o.join(",")||"empty")+"] consent: "+(e.src||e.id||"unknown inline"))}return!1},forceReconsent:function(){n.cookie=t.consentCookie+"=; Domain="+t.cookieDomain+"; Path=/; Expires=Thu, 01 Jan 2000 00:00:01 GMT;",n.cookie=t.confirmCookie+"=; Domain="+t.cookieDomain+"; Path=/; Expires=Thu, 01 Jan 2000 00:00:01 GMT;",setTimeout(h,100)},getConsentState:function(){return r},getConsentTime:function(){return i},getConsentVersion:function(){return s},getLinkAction:function(){return t.consentLinkAction||e.OneTrust&&e.OneTrust.ToggleInfoDisplay||function(){e.OneTrust&&e.OneTrust.ToggleInfoDisplay&&e.OneTrust.ToggleInfoDisplay()}},getLinkTitle:function(){return t.consentLinkTitle},getPrivacyCenterLinkAction:function(){return"function"==typeof t.privacyCenterLinkAction?t.privacyCenterLinkAction:"string"==typeof t.privacyCenterLinkAction&&-1!==t.privacyCenterLinkAction.search(/^http/)?function(){e.open(t.privacyCenterLinkAction,"_blank")}:null},getPrivacyCenterLinkTitle:function(){return t.privacyCenterLinkTitle},getRegion:function(){return t.regId},getUserConsentAdvertisingState:function(){return r["ads-general"]&&r["ads-vendor"]},getUserConsentBehaviorState:function(){return r["behavior-general"]&&r["behavior-vendor"]},getUserConsentPerformanceState:function(){return r["perf-general"]&&r["perf-vendor"]},getUserConsentPersonalizationState:function(){return r["person-general"]&&r["person-vendor"]},getUserConsentSocialState:function(){return r["social-general"]&&r["social-vendor"]},getUserConsentStorageState:function(){return r["storage-general"]&&r["storage-vendor"]},getVersion:function(){return"1.3.4"},init:I,inUserConsentState:k,isEnabled:function(){return!0},isInCcpaRegion:function(){return"ccpa"===t.regId},isInGdprRegion:function(){return"gdpr"===t.regId},isInRegion:function(e){return t.regId===e},isOptanonLoaded:function(){return u},isReady:v,usingIAB:function(){return t.useIAB}}}(window,document);
